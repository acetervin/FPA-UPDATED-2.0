{"file_contents":{"ACTIVITY.md":{"content":"# Admin Dashboard Implementation Progress\n\n## 1. Dashboard Overview (In Progress)\n- [x] Basic dashboard layout\n- [x] Stats cards implementation\n- [x] Transaction table\n- [x] Authentication system\n- [ ] Data visualization charts\n- [ ] Real-time updates\n\n## 2. Events Management\n- [x] Basic events listing\n- [x] Event registration tracking\n- [x] Event registration form with payment\n- [x] Multiple payment gateway integration\n- [x] Registration status tracking\n- [ ] Event creation form\n- [ ] Event editing capabilities\n- [ ] Event deletion with confirmation\n- [ ] Image upload for events\n- [ ] Capacity tracking visualization\n- [ ] Event categories management\n- [ ] Event calendar view\n\n## 3. Payment Gateway Management\n- [x] PayPal configuration endpoint\n- [x] M-Pesa configuration endpoint\n- [x] Gateway status monitoring API\n- [x] Payment gateway config API\n- [x] Transaction logs API\n- [ ] Gateway configuration UI\n- [ ] Payment method analytics charts\n- [ ] Refund management\n- [ ] Payment reconciliation tools\n\n## 4. User Management\n- [x] Basic user listing\n- [x] User creation endpoint\n- [x] Role-based access control (admin, volunteer, donor)\n- [x] JWT-based authentication\n- [ ] User profile editing\n- [ ] Password management\n- [ ] Activity logging\n- [ ] User permissions management\n- [ ] Email verification flow\n- [ ] Account suspension/activation\n\n## 5. Reports and Analytics\n- [x] Basic transaction reporting\n- [ ] Donation trends charts\n- [ ] Event attendance analytics\n- [ ] Payment method performance\n- [ ] User engagement metrics\n- [ ] Custom report generation\n- [ ] Export capabilities (CSV, PDF)\n- [ ] Automated reporting schedules\n\n## 6. Media Management\n- [ ] Media upload interface\n- [ ] Image optimization\n- [ ] File type validation\n- [ ] Media library organization\n- [ ] Image cropping/editing\n- [ ] Storage management\n- [ ] CDN integration\n\n## 7. Blog Management\n- [x] Basic blog post listing\n- [ ] Rich text editor\n- [ ] Draft saving\n- [ ] Post scheduling\n- [ ] Category management\n- [ ] Tag management\n- [ ] SEO optimization tools\n- [ ] Featured image handling\n\n## 8. Settings\n- [x] Payment gateway configuration\n- [ ] Site configuration UI\n- [ ] Email template management\n- [ ] Notification settings\n- [ ] System backup options\n- [ ] Maintenance mode\n- [ ] API key management\n\n## 9. Security Features\n- [x] JWT-based authentication\n- [ ] Two-factor authentication\n- [x] Rate limiting\n- [x] Security headers\n- [ ] IP blocking\n- [ ] Activity logging\n- [ ] Audit trails\n\n## 10. Volunteer Management\n- [x] Basic volunteer application listing\n- [ ] Application processing workflow\n- [ ] Volunteer scheduling\n- [ ] Program assignment\n- [ ] Hour tracking\n- [ ] Performance tracking\n- [ ] Certificate generation\n\n## Next Steps Priority\n1. Complete Events Management\n   - Implement event creation and editing forms\n   - Set up image upload with validation\n   - Add registration management UI\n\n2. Enhance Payment Features\n   - Implement gateway configuration UI\n   - Add payment analytics visualization\n   - Add refund management system\n\n3. User Management\n   - Implement user profile management\n   - Set up email verification\n   - Add account recovery flow\n\n## Notes\n- PayPal integration complete for events registration\n- M-Pesa integration complete for events registration\n- Both payment gateways need end-to-end testing\n- Need to implement proper error handling across all features\n- Consider adding websockets for real-time updates\n- Plan for data backup and recovery procedures\n- Consider implementing a changelog for tracking updates\n- Authentication system upgraded to JWT-based tokens\n- Session-based authentication removed for better scalability\n- Admin endpoints secured with JWT verification\n\n## Database Commands Reference\n### Schema Management\n```bash\n# Generate new migration after schema changes\nnpx drizzle-kit generate\n\n# Push schema changes to database (apply migrations)\nnpx drizzle-kit push\n\n# View database schema status\nnpx drizzle-kit studio\n\n# Drop specific tables (if needed)\nnpx drizzle-kit drop --table=table_name\n\n# Start Drizzle Studio UI\nnpx drizzle-kit ui\n```\n\n### Environment Setup\n```bash\n# Install Drizzle ORM and toolkit\nnpm install drizzle-orm pg\nnpm install -D drizzle-kit\n\n# Generate TypeScript types\nnpm install @types/pg\n```\n\n### Common Migration Workflows\n1. Make changes to schema files\n2. Run `generate` to create migration\n3. Run `push` to apply changes\n4. Update types if needed\n\nLast Updated: July 25, 2025\n","size_bytes":4470},"DEPLOYMENT.md":{"content":"# Deploying Your Application\n\nThis guide provides instructions for deploying your separated frontend and backend to Vercel and Render, respectively.\n\n## Prerequisites\n\n1.  **Create a GitHub Repository**: Push your project code to a new repository on GitHub.\n2.  **Create Free Accounts**:\n    *   Sign up for a free account on [Vercel](https://vercel.com/signup).\n    *   Sign up for a free account on [Render](https://dashboard.render.com/register).\n\n---\n\n## 1. Deploying the Backend to Render\n\nDeploy your backend as a **Web Service** on Render.\n\n*   **Root Directory**: Leave empty (or set to your project's root folder, e.g., `CompassionClone`).\n*   **Runtime**: `Node`.\n*   **Build Command**: `npm install && npm run build:server`\n*   **Start Command**: `npm start`\n*   **Environment Variables**: Add all required variables from your `.env` file (`DATABASE_URL`, `SESSION_SECRET`, etc.). Set `CORS_ORIGIN` to your Vercel frontend URL after it is deployed.\n\n---\n\n## 2. Deploying the Frontend to Vercel (Final Settings)\n\nDeploy your frontend as a **Vite** project on Vercel.\n\n### **Vercel Project Settings**\n\n*   **Root Directory**: **Leave this field empty.** Vercel must use the root of your repository to find the `package.json` and `vite.config.ts`.\n*   **Framework Preset**: `Vite`.\n*   **Build Command**: `npm run build`\n*   **Output Directory**: `dist/client`\n*   **Install Command**: `npm install`\n\n### **Environment Variables**\n\n*   **`VITE_API_URL`**: Set this to the URL of your **Render backend service** (e.g., `https://your-service-name.onrender.com`).\n\n---\n\n## 3. Final Step\n\nAfter deploying both services, ensure the `CORS_ORIGIN` on your Render backend is set to your Vercel frontend's URL.\n\nYour application is now ready!\n","size_bytes":1742},"TODO.md":{"content":"# Vercel Deployment Refactor\n\n- [x] Create `api/index.ts` to wrap the Express app.\n\n- [x] Update `vercel.json` for serverless builds and routing.\n\n- [x] Update `package.json` with a build script and `@vercel/node` dependency.\n- [x] Modify `server/index.ts` to export the Express app without starting the server.\n","size_bytes":312},"check-paypal-config.js":{"content":"// Simple PayPal configuration checker\nimport { readFileSync } from 'fs';\nimport { join } from 'path';\n\nconsole.log('=== PayPal Configuration Check ===\\n');\n\n// Check for .env file\ntry {\n  const envPath = join(process.cwd(), '.env');\n  const envContent = readFileSync(envPath, 'utf8');\n  console.log('✅ .env file found');\n  \n  // Parse and check PayPal variables\n  const lines = envContent.split('\\n');\n  const paypalVars = lines.filter(line => \n    line.includes('PAYPAL_') && !line.trim().startsWith('#')\n  );\n  \n  if (paypalVars.length > 0) {\n    console.log('\\n📋 PayPal Environment Variables:');\n    paypalVars.forEach(line => {\n      const [key, value] = line.split('=');\n      if (key && value) {\n        const maskedValue = key.includes('SECRET') ? '***masked***' : value;\n        console.log(`  ${key}=${maskedValue}`);\n      }\n    });\n  } else {\n    console.log('❌ No PayPal variables found in .env');\n  }\n} catch (error) {\n  console.log('❌ .env file not found');\n}\n\n// Check process.env for PayPal variables\nconsole.log('\\n🔍 Process Environment PayPal Variables:');\nconst envVars = Object.keys(process.env);\nconst paypalEnvVars = envVars.filter(key => key.startsWith('PAYPAL_'));\n\nif (paypalEnvVars.length > 0) {\n  paypalEnvVars.forEach(key => {\n    const value = process.env[key];\n    const maskedValue = key.includes('SECRET') ? '***masked***' : value;\n    console.log(`  ${key}=${maskedValue}`);\n  });\n} else {\n  console.log('  ❌ No PayPal variables in process.env');\n}\n\n// Check required variables\nconsole.log('\\n🔧 Required PayPal Variables Status:');\nconst requiredVars = [\n  'PAYPAL_CLIENT_ID',\n  'PAYPAL_CLIENT_SECRET',\n  'PAYPAL_API_URL'\n];\n\nrequiredVars.forEach(varName => {\n  const value = process.env[varName];\n  const status = value ? '✅ Present' : '❌ Missing';\n  console.log(`  ${varName}: ${status}`);\n});\n\nconsole.log('\\n=== End Configuration Check ===');\n","size_bytes":1902},"create-admin-user.js":{"content":"import bcrypt from 'bcrypt';\nimport pg from 'pg';\nimport 'dotenv/config';\n\nconst { Pool } = pg;\n\nasync function createAdminUser() {\n  const pool = new Pool({\n    connectionString: process.env.DATABASE_URL,\n  });\n\n  try {\n    const username = 'admin';\n    const password = 'admin123';\n    const email = 'admin@example.com';\n    const fullName = 'Admin User';\n    \n    const hashedPassword = await bcrypt.hash(password, 10);\n    \n    const query = `\n      INSERT INTO users (username, password, email, role, full_name, active)\n      VALUES ($1, $2, $3, 'admin', $4, true)\n      ON CONFLICT (username) DO NOTHING\n      RETURNING id, username, role, email, full_name\n    `;\n    \n    const result = await pool.query(query, [username, hashedPassword, email, fullName]);\n    \n    if (result.rows.length > 0) {\n      console.log('Admin user created successfully!');\n      console.log('Username:', username);\n      console.log('Password:', password);\n      console.log('Email:', email);\n    } else {\n      console.log('Admin user already exists');\n    }\n    \n    await pool.end();\n  } catch (error) {\n    console.error('Error creating admin user:', error);\n    await pool.end();\n  }\n}\n\ncreateAdminUser();\n","size_bytes":1196},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"paypal-diagnostic.js":{"content":"#!/usr/bin/env node\n/**\n * PayPal Diagnostic Script\n * Run this to check your PayPal configuration and identify issues\n */\n\nconst fs = require('fs');\nconst path = require('path');\n\nconsole.log('🔍 PayPal Diagnostic Check');\nconsole.log('=========================\\n');\n\n// Check environment variables\nconsole.log('📋 Environment Variables Check:');\nconst requiredEnvVars = [\n  'PAYPAL_CLIENT_ID',\n  'PAYPAL_CLIENT_SECRET', \n  'PAYPAL_API_URL'\n];\n\nconst envPath = path.join(__dirname, '.env');\nlet envContent = '';\n\nif (fs.existsSync(envPath)) {\n  envContent = fs.readFileSync(envPath, 'utf8');\n  console.log('✅ .env file found');\n} else {\n  console.log('❌ .env file not found');\n}\n\nrequiredEnvVars.forEach(envVar => {\n  const value = process.env[envVar];\n  if (value) {\n    console.log(`✅ ${envVar}: ${envVar.includes('SECRET') ? '***' + value.slice(-4) : value}`);\n  } else {\n    console.log(`❌ ${envVar}: MISSING`);\n  }\n});\n\nconsole.log('\\n🔧 Configuration Recommendations:');\nconsole.log('=================================');\n\nif (!process.env.PAYPAL_CLIENT_ID) {\n  console.log('1. Add PAYPAL_CLIENT_ID to your .env file');\n  console.log('   Example: PAYPAL_CLIENT_ID=your_client_id_here');\n}\n\nif (!process.env.PAYPAL_CLIENT_SECRET) {\n  console.log('2. Add PAYPAL_CLIENT_SECRET to your .env file');\n  console.log('   Example: PAYPAL_CLIENT_SECRET=your_client_secret_here');\n}\n\nif (!process.env.PAYPAL_API_URL) {\n  console.log('3. Add PAYPAL_API_URL to your .env file');\n  console.log('   Sandbox: PAYPAL_API_URL=https://api-m.sandbox.paypal.com');\n  console.log('   Production: PAYPAL_API_URL=https://api-m.paypal.com');\n}\n\nconsole.log('\\n🧪 Testing Endpoints:');\nconsole.log('===================');\nconsole.log('Visit these URLs in your browser to test:');\nconsole.log('• http://localhost:3000/api/paypal/debug');\nconsole.log('• http://localhost:3000/api/paypal/test');\n\nconsole.log('\\n📱 Browser Console Commands:');\nconsole.log('============================');\nconsole.log('1. Open browser console (F12)');\nconsole.log('2. Try a PayPal donation');\nconsole.log('3. Look for detailed error messages');\n\nconsole.log('\\n📝 Common Issues:');\nconsole.log('================');\nconsole.log('• Missing .env file');\nconsole.log('• Invalid PayPal credentials');\nconsole.log('• Wrong API URL (sandbox vs production)');\nconsole.log('• Amount formatting issues');\nconsole.log('• Network connectivity problems');\n\nconsole.log('\\n✨ Next Steps:');\nconsole.log('==============');\nconsole.log('1. Check the debug endpoint above');\nconsole.log('2. Look at browser console for specific errors');\nconsole.log('3. Verify your PayPal app settings in PayPal Developer Dashboard');\nconsole.log('4. Ensure your PayPal app is approved for live transactions');\n","size_bytes":2773},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"replit.md":{"content":"# Family Peace Association Website\n\n## Overview\n\nThe Family Peace Association website is a full-stack web application designed to support families through counseling services, conflict resolution programs, and community engagement. The platform serves as both an informational resource and a functional interface for volunteer applications, contact submissions, and newsletter subscriptions.\n\n## System Architecture\n\n### Frontend Architecture\n- **Framework**: React 18 with TypeScript for type safety and modern development practices\n- **Routing**: Wouter for lightweight client-side routing\n- **Styling**: Tailwind CSS with shadcn/ui component library for consistent design\n- **State Management**: TanStack Query for server state management and caching\n- **Form Handling**: React Hook Form with Zod validation for robust form processing\n- **Build Tool**: Vite for fast development and optimized production builds\n\n### Backend Architecture\n- **Runtime**: Node.js with Express.js framework\n- **Database**: PostgreSQL with Drizzle ORM for type-safe database operations\n- **Database Provider**: Neon Database (serverless PostgreSQL)\n- **API Design**: RESTful API endpoints with JSON responses\n- **Session Management**: Express sessions with PostgreSQL storage\n\n### Data Storage Solutions\n- **Primary Database**: PostgreSQL hosted on Neon Database\n- **ORM**: Drizzle ORM with schema-first approach\n- **Migration Management**: Drizzle Kit for database schema migrations\n- **Fallback Storage**: In-memory storage implementation for development/testing\n\n## Key Components\n\n### Database Schema\n- **Users**: Authentication and user management\n- **Blog Posts**: Content management with categories and featured posts\n- **Team Members**: Staff profiles with specialties and contact information\n- **Causes**: Community initiatives with fundraising goals and volunteer needs\n- **Applications**: Volunteer application submissions\n- **Contact Submissions**: Contact form data collection\n- **Newsletter Subscriptions**: Email subscription management\n\n### UI Components\n- **Design System**: Custom theme system supporting golden and blue color schemes\n- **Component Library**: Comprehensive shadcn/ui components (buttons, forms, cards, etc.)\n- **Animations**: Custom scroll animations with intersection observer\n- **Responsive Design**: Mobile-first approach with Tailwind CSS breakpoints\n\n### Application Features\n- **Content Management**: Blog posts, team profiles, and cause management\n- **Form Processing**: Volunteer applications, contact forms, newsletter subscriptions\n- **Theme System**: Dynamic theme switching between color schemes\n- **SEO Optimization**: React Helmet for meta tags and social media optimization\n\n## Data Flow\n\n1. **Client Requests**: React frontend makes API calls using TanStack Query\n2. **API Processing**: Express.js server handles requests and validates data\n3. **Database Operations**: Drizzle ORM executes type-safe database queries\n4. **Response Handling**: JSON responses sent back to client with error handling\n5. **State Management**: TanStack Query caches responses and manages loading states\n6. **UI Updates**: React components re-render based on data changes\n\n## External Dependencies\n\n### Frontend Dependencies\n- **UI Framework**: React, React DOM, TypeScript\n- **Styling**: Tailwind CSS, Radix UI components\n- **Forms**: React Hook Form, Hookform Resolvers, Zod\n- **Routing**: Wouter for client-side navigation\n- **Query Management**: TanStack React Query\n- **Utilities**: Class Variance Authority, clsx, date-fns\n\n### Backend Dependencies\n- **Server**: Express.js, Node.js types\n- **Database**: Drizzle ORM, Neon Database serverless driver\n- **Session Management**: Express Session, connect-pg-simple\n- **Validation**: Zod for schema validation\n- **Development**: tsx for TypeScript execution, esbuild for production builds\n\n### Build Tools\n- **Development**: Vite with React plugin and runtime error overlay\n- **Production**: esbuild for server bundling, Vite for client bundling\n- **TypeScript**: Strict type checking with modern ES modules\n\n## Deployment Strategy\n\n### Development Environment\n- **Local Development**: Vite dev server with hot module replacement\n- **Database**: Development database connection via environment variables\n- **Asset Handling**: Vite handles static assets and images\n\n### Production Environment\n- **Build Process**: \n  1. Client build using Vite (outputs to `dist/public`)\n  2. Server build using esbuild (outputs to `dist`)\n- **Static Serving**: Express serves built client assets in production\n- **Database**: Production PostgreSQL database via DATABASE_URL environment variable\n- **Process Management**: Node.js application with environment-based configuration\n\n### Environment Configuration\n- **Development**: NODE_ENV=development with tsx for TypeScript execution\n- **Production**: NODE_ENV=production with compiled JavaScript\n- **Database**: Configurable via DATABASE_URL environment variable\n- **Build Commands**: Separate build processes for client and server code\n\n## Changelog\n- July 04, 2025. Initial setup\n\n## User Preferences\nPreferred communication style: Simple, everyday language.\n","size_bytes":5155},"reset-admin-password.js":{"content":"import bcrypt from 'bcrypt';\nimport pg from 'pg';\nimport 'dotenv/config';\n\nconst { Pool } = pg;\n\nasync function resetAdminPassword() {\n  const pool = new Pool({\n    connectionString: process.env.DATABASE_URL,\n  });\n\n  try {\n    const password = 'admin123';\n    const hashedPassword = await bcrypt.hash(password, 10);\n    \n    const query = `\n      UPDATE users \n      SET password = $1 \n      WHERE username = 'admin' AND role = 'admin'\n      RETURNING id`;\n    \n    const result = await pool.query(query, [hashedPassword]);\n    \n    if (result.rows.length > 0) {\n      console.log('Admin password has been reset successfully');\n    } else {\n      console.log('Admin user not found');\n    }\n  } catch (error) {\n    console.error('Error resetting admin password:', error);\n  } finally {\n    await pool.end();\n  }\n}\n\nresetAdminPassword();\n","size_bytes":837},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      fontFamily: {\n        sans: ['Poppins', 'sans-serif'],\n        poppins: ['Poppins', 'sans-serif'],\n      },\n      typography: {\n        DEFAULT: {\n          css: {\n            maxWidth: 'none',\n            color: 'var(--foreground)',\n            h1: {\n              color: 'var(--foreground)',\n              fontWeight: '700',\n            },\n            h2: {\n              color: 'var(--foreground)',\n              fontWeight: '600',\n            },\n            a: {\n              color: 'var(--primary)',\n              '&:hover': {\n                color: 'var(--primary-foreground)',\n              },\n            },\n            blockquote: {\n              borderLeftColor: 'var(--primary)',\n              color: 'var(--muted-foreground)',\n              fontStyle: 'normal',\n            },\n            code: {\n              color: 'var(--primary)',\n              backgroundColor: 'var(--muted)',\n              borderRadius: '0.25rem',\n              padding: '0.25rem',\n            },\n            'pre code': {\n              backgroundColor: 'transparent',\n              padding: '0',\n            },\n          },\n        },\n      },\n      borderRadius: {\n        lg: \"var(--radius)\",\n        md: \"calc(var(--radius) - 2px)\",\n        sm: \"calc(var(--radius) - 4px)\",\n      },\n      colors: {\n        background: \"var(--background)\",\n        foreground: \"var(--foreground)\",\n        card: {\n          DEFAULT: \"var(--card)\",\n          foreground: \"var(--card-foreground)\",\n        },\n        popover: {\n          DEFAULT: \"var(--popover)\",\n          foreground: \"var(--popover-foreground)\",\n        },\n        primary: {\n          DEFAULT: \"var(--primary)\",\n          foreground: \"var(--primary-foreground)\",\n        },\n        secondary: {\n          DEFAULT: \"var(--secondary)\",\n          foreground: \"var(--secondary-foreground)\",\n        },\n        muted: {\n          DEFAULT: \"var(--muted)\",\n          foreground: \"var(--muted-foreground)\",\n        },\n        accent: {\n          DEFAULT: \"var(--accent)\",\n          foreground: \"var(--accent-foreground)\",\n        },\n        destructive: {\n          DEFAULT: \"var(--destructive)\",\n          foreground: \"var(--destructive-foreground)\",\n        },\n        border: \"var(--border)\",\n        input: \"var(--input)\",\n        ring: \"var(--ring)\",\n        chart: {\n          \"1\": \"var(--chart-1)\",\n          \"2\": \"var(--chart-2)\",\n          \"3\": \"var(--chart-3)\",\n          \"4\": \"var(--chart-4)\",\n          \"5\": \"var(--chart-5)\",\n        },\n        sidebar: {\n          DEFAULT: \"var(--sidebar-background)\",\n          foreground: \"var(--sidebar-foreground)\",\n          primary: \"var(--sidebar-primary)\",\n          \"primary-foreground\": \"var(--sidebar-primary-foreground)\",\n          accent: \"var(--sidebar-accent)\",\n          \"accent-foreground\": \"var(--sidebar-accent-foreground)\",\n          border: \"var(--sidebar-border)\",\n          ring: \"var(--sidebar-ring)\",\n        },\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: {\n            height: \"0\",\n          },\n          to: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n        },\n        \"accordion-up\": {\n          from: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n          to: {\n            height: \"0\",\n          },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [\n    require(\"tailwindcss-animate\"),\n    require(\"@tailwindcss/typography\"),\n    require(\"@tailwindcss/aspect-ratio\"),\n  ],\n} satisfies Config;\n","size_bytes":3820},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\n\nexport default defineConfig({\n  // Set the project root to the 'client' directory.\n  // This tells Vite where to find the index.html and source files.\n  root: 'client',\n  \n  plugins: [react()],\n  \n  server: {\n    host: '0.0.0.0',\n    port: 5000,\n    strictPort: true,\n    allowedHosts: true,\n    proxy: {\n      '/api': {\n        target: 'http://localhost:3001',\n        changeOrigin: true,\n        secure: false,\n      }\n    }\n  },\n  \n  resolve: {\n    alias: {\n      // Aliases still need to be resolved from the repository root (__dirname)\n      \"@\": path.resolve(__dirname, \"client/src\"),\n      \"@shared\": path.resolve(__dirname, \"shared\"),\n      \"@assets\": path.resolve(__dirname, \"attached_assets\"),\n    },\n  },\n  \n  build: {\n    // The output directory is resolved from the repository root.\n    // This ensures the output is always in a predictable location.\n    outDir: path.resolve(__dirname, 'dist/client'),\n    emptyOutDir: true,\n    \n    // Since 'root' is 'client', rollup knows to look for 'index.html' there.\n    rollupOptions: {\n      input: path.resolve(__dirname, 'client/index.html'),\n    },\n  },\n});\n","size_bytes":1223},"vitest.config.ts":{"content":"/// <reference types=\"vitest\" />\nimport { defineConfig } from 'vitest/config';\n\nexport default defineConfig({\n  test: {\n    globals: true,\n    environment: 'node',\n    include: ['server/tests/**/*.{test,spec}.{js,mjs,cjs,ts,mts,cts}'],\n    setupFiles: ['./server/tests/setup.ts'],\n  },\n});\n","size_bytes":290},"api/index.ts":{"content":"import type { VercelRequest, VercelResponse } from '@vercel/node';\nimport { app } from '../server/index.js';\n\nexport default async function handler(req: VercelRequest, res: VercelResponse) {\n  return app(req, res);\n}\n","size_bytes":217},"client/vite-env.d.ts":{"content":"/// <reference types=\"vite/client\" />\n","size_bytes":38},"scripts/generate-static-data.js":{"content":"#!/usr/bin/env node\n\nimport { writeFileSync, mkdirSync } from 'fs';\nimport { dirname, join } from 'path';\nimport { fileURLToPath } from 'url';\n\nconst __dirname = dirname(fileURLToPath(import.meta.url));\nconst publicDataDir = join(__dirname, '../client/public/data');\n\n// Ensure data directory exists\nmkdirSync(publicDataDir, { recursive: true });\n\nasync function fetchWithTimeout(url, timeout = 10000) {\n  const controller = new AbortController();\n  const id = setTimeout(() => controller.abort(), timeout);\n  \n  try {\n    const response = await fetch(url, { signal: controller.signal });\n    clearTimeout(id);\n    return response;\n  } catch (error) {\n    clearTimeout(id);\n    throw error;\n  }\n}\n\nasync function generateStaticData() {\n  const baseUrl = process.env.API_BASE_URL || 'http://localhost:3001';\n  \n  try {\n    console.log('🚀 Generating static data files...');\n    \n    // Fetch data from API endpoints\n    const endpoints = [\n      { path: '/api/blog-posts', filename: 'blog-posts.json' },\n      { path: '/api/blog-posts/featured', filename: 'featured-posts.json' },\n      { path: '/api/gallery', filename: 'gallery.json' },\n      { path: '/api/causes/active', filename: 'active-causes.json' },\n      { path: '/api/events', filename: 'events.json' }\n    ];\n\n    // Enhanced events data - also fetch images and supporters for each event\n    const enhancedEndpoints = [\n      { path: '/api/events/enhanced', filename: 'events-enhanced.json' }\n    ];\n    \n    for (const { path, filename } of endpoints) {\n      try {\n        console.log(`📥 Fetching ${path}...`);\n        const response = await fetchWithTimeout(`${baseUrl}${path}`);\n        \n        if (!response.ok) {\n          throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n        }\n        \n        const data = await response.json();\n        const outputPath = join(publicDataDir, filename);\n        \n        writeFileSync(outputPath, JSON.stringify(data, null, 2));\n        console.log(`✅ Generated ${filename}`);\n        \n      } catch (error) {\n        console.error(`❌ Failed to generate ${filename}:`, error.message);\n        process.exit(1);\n      }\n    }\n    \n    console.log('🎉 Static data generation complete!');\n    console.log(`📁 Files saved to: ${publicDataDir}`);\n    \n  } catch (error) {\n    console.error('❌ Static data generation failed:', error);\n    process.exit(1);\n  }\n}\n\ngenerateStaticData();","size_bytes":2418},"server/add-constraint.ts":{"content":"import { drizzle } from 'drizzle-orm/node-postgres';\nimport { Pool } from 'pg';\nimport { sql } from 'drizzle-orm';\n\nconst pool = new Pool({\n  connectionString: process.env.DATABASE_URL,\n});\n\nconst db = drizzle(pool);\n\nasync function addUniqueConstraint() {\n  try {\n    await db.execute(sql`ALTER TABLE events ADD CONSTRAINT events_name_unique UNIQUE (name);`);\n    console.log('Successfully added unique constraint');\n  } catch (error) {\n    console.error('Error adding unique constraint:', error);\n  } finally {\n    await pool.end();\n  }\n}\n\naddUniqueConstraint();\n","size_bytes":565},"server/db.ts":{"content":"import { drizzle } from 'drizzle-orm/node-postgres';\nimport { Pool } from 'pg';\nimport { eq } from 'drizzle-orm';\nimport 'dotenv/config';\nimport { IStorage } from './storage.js';\nimport * as schema from '../shared/schema.js';\nimport {\n  users, blogPosts, teamMembers, causes, volunteerApplications,\n  contactSubmissions, newsletterSubscriptions,\n  type User, type InsertUser, type BlogPost, type InsertBlogPost,\n  type TeamMember, type InsertTeamMember, type Cause, type InsertCause,\n  type VolunteerApplication, type InsertVolunteerApplication,\n  type ContactSubmission, type InsertContactSubmission,\n  type NewsletterSubscription, type InsertNewsletterSubscription\n} from '../shared/schema.js';\n\n// Create connection pool for Neon database (serverless-compatible)\nconst pool = new Pool({\n  connectionString: process.env.DATABASE_URL!,\n  max: 1, // Minimize connections for serverless\n  idleTimeoutMillis: 30000,\n  connectionTimeoutMillis: 2000,\n});\n\nconst db = drizzle(pool, { schema });\n\nexport class DbStorage implements IStorage {\n  // Users\n  async getUser(id: number): Promise<User | undefined> {\n    const result = await db.select().from(users).where(eq(users.id, id));\n    return result[0];\n  }\n\n  async getUserByUsername(username: string): Promise<User | undefined> {\n    const result = await db.select().from(users).where(eq(users.username, username));\n    return result[0];\n  }\n\n  async createUser(user: InsertUser): Promise<User> {\n    const result = await db.insert(users).values(user).returning();\n    return result[0];\n  }\n\n  // Blog Posts\n  async getBlogPosts(): Promise<BlogPost[]> {\n    return db.select().from(blogPosts).orderBy(schema.blogPosts.publishedAt);\n  }\n\n  async getBlogPost(slug: string): Promise<BlogPost | undefined> {\n    const result = await db.select().from(blogPosts).where(eq(blogPosts.slug, slug));\n    return result[0];\n  }\n\n  async getFeaturedBlogPosts(): Promise<BlogPost[]> {\n    return db.select().from(blogPosts).where(eq(blogPosts.featured, true)).orderBy(schema.blogPosts.publishedAt);\n  }\n\n  async getBlogPostsByCategory(category: string): Promise<BlogPost[]> {\n    return db.select().from(blogPosts).where(eq(blogPosts.category, category)).orderBy(schema.blogPosts.publishedAt);\n  }\n\n  async createBlogPost(post: InsertBlogPost): Promise<BlogPost> {\n    const result = await db.insert(blogPosts).values(post).returning();\n    return result[0];\n  }\n\n  // Team Members\n  async getTeamMembers(): Promise<TeamMember[]> {\n    return db.select().from(teamMembers);\n  }\n\n  async getTeamMember(slug: string): Promise<TeamMember | undefined> {\n    const result = await db.select().from(teamMembers).where(eq(teamMembers.slug, slug));\n    return result[0];\n  }\n\n  async createTeamMember(member: InsertTeamMember): Promise<TeamMember> {\n    const result = await db.insert(teamMembers).values(member).returning();\n    return result[0];\n  }\n\n  // Causes\n  async getCauses(): Promise<Cause[]> {\n    return db.select().from(causes);\n  }\n\n  async getCause(slug: string): Promise<Cause | undefined> {\n    const result = await db.select().from(causes).where(eq(causes.slug, slug));\n    return result[0];\n  }\n\n  async getActiveCauses(): Promise<Cause[]> {\n    return db.select().from(causes).where(eq(causes.active, true));\n  }\n\n  async createCause(cause: InsertCause): Promise<Cause> {\n    const result = await db.insert(causes).values(cause).returning();\n    return result[0];\n  }\n\n  // Volunteer Applications\n  async getVolunteerApplications(): Promise<VolunteerApplication[]> {\n    return db.select().from(volunteerApplications).orderBy(schema.volunteerApplications.submittedAt);\n  }\n\n  async createVolunteerApplication(application: InsertVolunteerApplication): Promise<VolunteerApplication> {\n    const result = await db.insert(volunteerApplications).values(application).returning();\n    return result[0];\n  }\n\n  // Contact Submissions\n  async getContactSubmissions(): Promise<ContactSubmission[]> {\n    return db.select().from(contactSubmissions).orderBy(schema.contactSubmissions.submittedAt);\n  }\n\n  async createContactSubmission(submission: InsertContactSubmission): Promise<ContactSubmission> {\n    const result = await db.insert(contactSubmissions).values(submission).returning();\n    return result[0];\n  }\n\n  // Newsletter Subscriptions\n  async getNewsletterSubscriptions(): Promise<NewsletterSubscription[]> {\n    return db.select().from(newsletterSubscriptions).orderBy(schema.newsletterSubscriptions.subscribedAt);\n  }\n\n  async createNewsletterSubscription(subscription: InsertNewsletterSubscription): Promise<NewsletterSubscription> {\n    const result = await db.insert(newsletterSubscriptions).values(subscription).returning();\n    return result[0];\n  }\n}\n\nexport { db };\n","size_bytes":4719},"server/drop-tables.ts":{"content":"import { drizzle } from 'drizzle-orm/node-postgres';\nimport { Pool } from 'pg';\nimport 'dotenv/config';\n\nconst pool = new Pool({\n  connectionString: process.env.DATABASE_URL,\n});\n\nconst db = drizzle(pool);\n\nasync function main() {\n  console.log('Dropping existing tables...');\n\n  // Drop tables in the correct order (reverse of creation)\n  await pool.query(`\n    DROP TABLE IF EXISTS volunteer_applications CASCADE;\n    DROP TABLE IF EXISTS users CASCADE;\n    DROP TABLE IF EXISTS team_members CASCADE;\n    DROP TABLE IF EXISTS newsletter_subscriptions CASCADE;\n    DROP TABLE IF EXISTS gallery_images CASCADE;\n    DROP TABLE IF EXISTS event_registrations CASCADE;\n    DROP TABLE IF EXISTS events CASCADE;\n    DROP TABLE IF EXISTS contact_submissions CASCADE;\n    DROP TABLE IF EXISTS causes CASCADE;\n    DROP TABLE IF EXISTS blog_posts CASCADE;\n  `);\n\n  console.log('Tables dropped successfully.');\n  process.exit(0);\n}\n\nmain().catch((err) => {\n  console.error('Error dropping tables:', err);\n  process.exit(1);\n});\n","size_bytes":1017},"server/index.ts":{"content":"import express from 'express';\nimport { type Server } from \"http\";\nimport { Session, SessionData } from 'express-session';\nimport type { Request, Response, NextFunction, Express } from 'express';\nimport serveStatic from 'serve-static';\nimport bodyParser from 'body-parser';\nimport { fileURLToPath } from 'url';\nimport { dirname } from 'path';\n\n\n\nconst app: Express = express();\n\n// Trust the first proxy to get the real IP address for rate limiting.\napp.set('trust proxy', 1);\n\nimport { registerRoutes } from \"./routes.js\";\n\nimport { setupVite } from \"./vite.js\";\nimport { logError, logSecurity, logInfo } from \"./utils/logger.js\";\nimport 'dotenv/config';\nimport helmet from 'helmet';\nimport { sessionConfig } from './config/session.js';\nimport { sessionMiddleware, secureSession, sessionActivityLogger } from './middleware/session.js';\nimport { csrfProtection, generateCsrfToken, validateCsrfToken } from './middleware/csrf.js';\nimport { xssSanitizer, sqlInjectionCheck } from './middleware/validation.js';\nimport { errorHandler } from './middleware/error.js';\nimport { rateLimiter, authLimiter, trackSessionActivity } from './middleware/security.js';\n\nimport session from 'express-session';\nimport cors from \"cors\";\nimport path from \"path\";\n\n\nimport cookieParser from 'cookie-parser';\n\n// App instance is already created above\n\n// Enable compression\nimport compression from 'compression';\napp.use(compression());\n\n// Create __dirname equivalent for ES modules\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = dirname(__filename);\n\n// Basic middleware (order matters!)\n\napp.use(cookieParser());\napp.use(bodyParser.json({ limit: '10kb' })); // Limit JSON payload size\napp.use(bodyParser.urlencoded({ extended: false, limit: '10kb' }));\n\n// Security Headers with environment-specific CSP\nconst cspDirectives = {\n  defaultSrc: [\"'self'\"],\n  scriptSrc: process.env.NODE_ENV === 'production' \n    ? [\"'self'\", \"https://*.paypal.com\", \"https://js.stripe.com\", \"https://*.safaricom.co.ke\"]\n    : [\"'self'\", \"'unsafe-inline'\", \"'unsafe-eval'\", \"https://*.paypal.com\", \"https://js.stripe.com\", \"https://*.safaricom.co.ke\"],\n  styleSrc: process.env.NODE_ENV === 'production'\n    ? [\"'self'\", \"'unsafe-inline'\", \"https://fonts.googleapis.com\", \"https://cdn.jsdelivr.net\"]\n    : [\"'self'\", \"'unsafe-inline'\", \"https:\", \"http:\"],\n  imgSrc: [\"'self'\", \"data:\", \"https:\", \"blob:\", \"https://*.paypal.com\", \"https://*.safaricom.co.ke\"],\n  fontSrc: [\"'self'\", \"data:\", \"https://fonts.gstatic.com\", \"https://cdn.jsdelivr.net\"],\n  connectSrc: [\"'self'\", \n              \"https://*.paypal.com\", \"https://api.paypal.com\", \"https://api-m.sandbox.paypal.com\",\n              \"https://api.stripe.com\",\n              \"https://sandbox.safaricom.co.ke\", \"https://api.safaricom.co.ke\"],\n  frameSrc: [\"'self'\", \"https://*.paypal.com\", \"https://*.safaricom.co.ke\"],\n  formAction: [\"'self'\", \"https://*.paypal.com\", \"https://*.safaricom.co.ke\"],\n  mediaSrc: [\"'self'\", \"data:\", \"https:\"],\n  objectSrc: [\"'none'\"],\n  workerSrc: [\"'self'\", \"blob:\"],\n  baseUri: [\"'self'\"],\n  ...(process.env.NODE_ENV === 'production' && { upgradeInsecureRequests: [] })\n};\n\napp.use(helmet({\n  contentSecurityPolicy: {\n    directives: cspDirectives,\n  },\n  crossOriginEmbedderPolicy: false,\n  crossOriginResourcePolicy: { policy: \"cross-origin\" },\n  hsts: {\n    maxAge: process.env.NODE_ENV === 'production' ? 31536000 : 0, // 1 year in production\n    includeSubDomains: true,\n    preload: true\n  }\n}));\n\n// CORS configuration with environment-specific settings\nconst corsOrigins = process.env.NODE_ENV === 'production' \n  ? (process.env.CORS_ORIGIN ? [process.env.CORS_ORIGIN] : ['https://familypeace.org'])\n  : ['http://localhost:5000', 'http://0.0.0.0:5000', 'http://localhost:5173', 'http://localhost:3002', 'http://localhost:5174'];\n\napp.use(cors({\n  origin: corsOrigins,\n  credentials: true,\n  methods: ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS'],\n  allowedHeaders: ['Content-Type', 'Authorization', 'x-csrf-token', 'X-Requested-With'],\n  exposedHeaders: ['x-csrf-token'],\n  maxAge: process.env.NODE_ENV === 'production' ? 86400 : 600, // 24 hours in production, 10 minutes in dev\n  optionsSuccessStatus: 200\n}));\n\n// Session management\napp.use(session(sessionConfig));\napp.use(sessionMiddleware);\napp.use(secureSession);\napp.use(sessionActivityLogger);\n\n// CSRF Protection - exclude certain API endpoints\napp.use((req: Request, res: Response, next: NextFunction) => {\n  // List of paths to exclude from CSRF protection\n  const excludePaths = [\n    '/api/currency/convert',\n    '/api/mpesa',  // Add the base path for M-Pesa endpoints\n    '/api/webhooks', // Add any webhook endpoints\n    '/api/auth/login', // Exclude login endpoint from CSRF\n    '/api/auth/register', // Exclude register endpoint from CSRF\n    '/auth/login', // Alternative login path\n    '/auth/register', // Alternative register path\n    '/api/admin/dashboard', // Admin dashboard endpoints\n    '/api/admin/stats',\n    '/api/admin/payment-gateway-status'\n  ];\n  \n  if (excludePaths.some(path => req.path.startsWith(path))) {\n    next();\n  } else {\n    csrfProtection(req, res, next);\n  }\n});\n\napp.use(generateCsrfToken);\n\n// Only validate CSRF token in production and for non-excluded paths\nif (process.env.NODE_ENV === 'production') {\n  app.use((req: Request, res: Response, next: NextFunction) => {\n    const excludePaths = [\n      '/api/mpesa',\n      '/api/webhooks',\n      '/api/auth/login',\n      '/api/auth/register',\n      '/auth/login',\n      '/auth/register',\n      '/api/admin/dashboard',\n      '/api/admin/stats',\n      '/api/admin/payment-gateway-status'\n    ];\n    if (excludePaths.some(path => req.path.startsWith(path))) {\n      next();\n    } else {\n      validateCsrfToken(req, res, next);\n    }\n  });\n}\n\n// Input validation and security\napp.use(xssSanitizer);\napp.use(sqlInjectionCheck);\n\n// Security features that are only enabled in production\nif (process.env.NODE_ENV === 'production') {\n  app.use(rateLimiter); // General rate limiting\n  app.use('/api/auth/*', authLimiter); // Stricter rate limiting for auth routes\n}\n\n\napp.use(trackSessionActivity); // Track session activity for security\n\n// Structured logging middleware\napp.use((req: Request, res: Response, next: NextFunction) => {\n  const start = Date.now();\n  const path = req.path;\n  \n  // Capture response data\n  const originalResJson = res.json.bind(res);\n  res.json = function (bodyJson: any) {\n    res.locals.responseData = bodyJson;\n    return originalResJson(bodyJson);\n  };\n\n  // Log on request completion\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      interface LogData {\n        timestamp: string;\n        method: string;\n        path: string;\n        status: number;\n        duration: string;\n        userId: string;\n        ip: string;\n        userAgent: string | undefined;\n      }\n      \n      const logData: LogData = {\n        timestamp: new Date().toISOString(),\n        method: req.method,\n        path: path,\n        status: res.statusCode,\n        duration: `${duration}ms`,\n        userId: (req.session as any)?.userId || 'anonymous',\n        ip: req.ip || 'unknown',\n        userAgent: req.headers['user-agent']\n      };\n\n      // Log at appropriate level based on status code\n      if (res.statusCode >= 500) {\n        logError('Server error occurred', logData);\n      } else if (res.statusCode >= 400) {\n        logSecurity('Client error occurred', logData);\n      } else {\n        logInfo(JSON.stringify(logData));\n      }\n    }\n  });\n\n  next();\n});\n\n// Register API routes first\nconst httpServerPromise = registerRoutes(app);\n\n// Error handling middleware - MUST come after routes\ninterface ServerError extends Error {\n  status?: number;\n  statusCode?: number;\n}\n\napp.use((err: ServerError, _req: Request, res: Response, _next: NextFunction) => {\n  const status = err.status || err.statusCode || 500;\n  const message = err.message || \"Internal Server Error\";\n  res.status(status).json({ message });\n});\n\n// Export the app and httpServerPromise for serverless usage\nexport { app, httpServerPromise };\n\n// Start the server for development in Replit environment\n(async () => {\n  try {\n    const port = parseInt(process.env.PORT || '3001', 10); // Use 3001 to avoid conflict with frontend port 5000\n    \n    const httpServer = await httpServerPromise;\n    \n    // In development, don't setup Vite here since frontend runs separately on port 5000\n    // In production, serve static files from the client build.\n    if (process.env.NODE_ENV === 'production') {\n      // Serve static files from the client build directory\n      app.use(express.static(path.join(__dirname, '..', 'dist', 'client'), {\n        index: false, // Don't serve index.html automatically\n        maxAge: '1y', // Cache static assets for 1 year\n      }));\n\n      // Catch all handler: send back index.html for client-side routing\n      app.get('*', (req, res) => {\n        res.sendFile(path.join(__dirname, '..', 'dist', 'client', 'index.html'));\n      });\n    }\n\n    // Determine the host based on environment\n    const host = process.env.NODE_ENV === 'production' ? '0.0.0.0' : 'localhost';\n    \n    // Start listening on the determined host\n    httpServer.listen(port, host, () => {\n      console.log(`Backend server started: listening on ${host}:${port}`);\n      console.log(`Health check available at: http://${host}:${port}/api/health`);\n      console.log(`Environment: ${process.env.NODE_ENV}`);\n      console.log(`CORS origin: ${process.env.CORS_ORIGIN}`);\n    });\n\n    // Handle server errors\n    httpServer.on('error', (error: NodeJS.ErrnoException) => {\n      if (error.code === 'EADDRINUSE') {\n        console.error(`Port ${port} is already in use. Please stop other servers or use a different port.`);\n      } else {\n        console.error('Server error:', error);\n      }\n      process.exit(1);\n    });\n  } catch (error: unknown) {\n    console.error('Server startup error:', error instanceof Error ? error.message : error);\n    process.exit(1);\n  }\n})();\n","size_bytes":10044},"server/migrate.ts":{"content":"import { drizzle } from 'drizzle-orm/node-postgres';\nimport { migrate } from 'drizzle-orm/node-postgres/migrator';\nimport { Pool } from 'pg';\nimport 'dotenv/config';\n\nconst pool = new Pool({\n  connectionString: process.env.DATABASE_URL,\n});\n\nconst db = drizzle(pool);\n\nasync function main() {\n  console.log('Running migrations...');\n  await migrate(db, { migrationsFolder: 'migrations' });\n  console.log('Migrations finished.');\n  process.exit(0);\n}\n\nmain().catch((err) => {\n  console.error(err);\n  process.exit(1);\n});\n","size_bytes":520},"server/payments.ts":{"content":"import { Request, Response } from 'express';\nimport axios from 'axios';\nimport { db } from './db';\n\n//\nimport { eventRegistrations, events, donations } from '../shared/schema';\nimport { sql } from 'drizzle-orm';\n\nexport async function processDonation(donationData: any) {\n  try {\n    const result = await db.insert(donations).values(donationData).returning();\n    return result[0];\n  } catch (error) {\n    console.error('Error processing donation:', error);\n    throw error;\n  }\n}\n\n// Pesapal configuration\nconst PESAPAL_CONSUMER_KEY = process.env.PESAPAL_CONSUMER_KEY as string;\nconst PESAPAL_CONSUMER_SECRET = process.env.PESAPAL_CONSUMER_SECRET as string;\nconst PESAPAL_API_URL = process.env.NODE_ENV === 'production' \n  ? 'https://pay.pesapal.com/v3'\n  : 'https://cybqa.pesapal.com/v3';\n\ninterface PaymentRequest {\n  fullName: string;\n  email: string;\n  phone: string;\n  eventName: string;\n  amount: number;\n}\n\nexport async function initiatePayment(req: Request, res: Response) {\n  try {\n    const { eventId, individual, organization, amount, gateway } = req.body;\n    const registrationType = req.body.registrationType || (individual ? 'individual' : 'organization');\n\n\n    // Verify event exists and is active\n    const event = await db.select().from(events)\n      .where(sql`${events.id} = ${eventId} AND ${events.active} = true`)\n      .limit(1);\n\n    if (!event.length) {\n      return res.status(404).json({ success: false, message: \"Event not found\" });\n    }\n\n    // Create registration record\n    const [registration] = await db.insert(eventRegistrations).values({\n      eventId: eventId,\n      registrationType: registrationType,\n      firstName: individual?.firstName,\n      middleName: individual?.middleName,\n      surname: individual?.surname,\n      organizationName: organization?.organizationName,\n      organizationEmail: organization?.organizationEmail,\n      representativeName: organization?.representativeName,\n      role: organization?.role,\n      email: registrationType === 'individual' ? individual?.email : organization?.organizationEmail,\n      phone: registrationType === 'individual' ? individual?.phone : organization?.phone,\n      amount: amount,\n      paymentStatus: 'pending',\n      gateway: gateway\n    }).returning();\n\n    // Handle payment by gateway\n    if (gateway === 'pesapal') {\n      // Get auth token from Pesapal\n      const authToken = await getPesapalAuthToken();\n      // Create payment request\n      const paymentRequest = {\n        id: `EVT-${registration.id}-${Date.now()}`,\n        currency: \"KES\",\n        amount: amount,\n        description: `Event Registration for date: ${new Date(event[0].date).toLocaleDateString()}`,\n        callback_url: `${process.env.APP_URL}/api/payments/callback`,\n        notification_id: `NOTIFY-${registration.id}`,\n        billing_address: {\n          email_address: registration.email,\n          phone_number: registration.phone,\n          country_code: \"KE\",\n          first_name: registrationType === 'individual' \n            ? individual?.firstName \n            : organization?.representativeName?.split(' ')[0] || '',\n          last_name: registrationType === 'individual'\n            ? `${individual?.surname} ${individual?.middleName}`.trim()\n            : organization?.representativeName?.split(' ').slice(1).join(' ') || '',\n        }\n      };\n      // Submit order to Pesapal\n      const response = await axios.post(\n        `${PESAPAL_API_URL}/orders`,\n        paymentRequest,\n        {\n          headers: {\n            'Authorization': `Bearer ${authToken}`,\n            'Content-Type': 'application/json',\n          }\n        }\n      );\n      res.json({\n        success: true,\n        paymentUrl: response.data.redirect_url,\n        orderId: paymentRequest.id\n      });\n    } else if (gateway === 'paypal') {\n      // TODO: Implement PayPal payment logic here\n      // Example: create PayPal order, return approval URL\n      res.json({\n        success: false,\n        message: 'PayPal integration not yet implemented.'\n      });\n    } else if (gateway === 'mpesa') {\n      // TODO: Implement M-Pesa payment logic here\n      // Example: initiate M-Pesa STK push, return status\n      res.json({\n        success: false,\n        message: 'M-Pesa integration not yet implemented.'\n      });\n    } else {\n      res.status(400).json({ success: false, message: 'Invalid payment gateway selected.' });\n    }\n  } catch (error) {\n    console.error('Payment initiation error:', error);\n    res.status(500).json({\n      success: false,\n      error: 'Failed to initiate payment'\n    });\n  }\n}\n\nasync function getPesapalAuthToken() {\n  try {\n    const response = await axios({\n      method: 'post',\n      url: `${PESAPAL_API_URL}/api/Auth/RequestToken`,\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n      },\n      data: {\n        consumer_key: PESAPAL_CONSUMER_KEY,\n        consumer_secret: PESAPAL_CONSUMER_SECRET,\n      },\n    });\n\n    return response.data.token;\n  } catch (error) {\n    console.error('Error getting Pesapal auth token:', error);\n    throw new Error('Failed to get Pesapal auth token');\n  }\n}\n\n\nexport async function handlePaymentCallback(req: Request, res: Response) {\n  const { OrderTrackingId, OrderMerchantReference, OrderNotificationType } = req.query;\n\n  try {\n    // Verify payment status\n    const authToken = await getPesapalAuthToken();\n    const response = await axios.get(\n      `${PESAPAL_API_URL}/api/Transactions/GetTransactionStatus?orderTrackingId=${OrderTrackingId}`,\n      {\n        headers: {\n          'Authorization': `Bearer ${authToken}`,\n        }\n      }\n    );\n\n    // Update the payment status in your database here\n    // TODO: Add database update logic\n\n    // Redirect user to appropriate page based on payment status\n    if (response.data.payment_status_description === 'Completed') {\n      res.redirect('/payment-success');\n    } else {\n      res.redirect('/payment-failed');\n    }\n  } catch (error) {\n    console.error('Payment callback error:', error);\n    res.redirect('/payment-failed');\n  }\n}\n","size_bytes":6089},"server/routes.ts":{"content":"import express from 'express';\nimport { createServer, type Server } from \"http\";\nimport type { Express, Request, Response } from 'express';\nimport { storage } from \"./storage.js\";\nimport { \n  insertVolunteerApplicationSchema,\n  insertContactSubmissionSchema,\n  insertNewsletterSubscriptionSchema,\n  events,\n  eventRegistrations,\n  blogPosts,\n  users,\n  donations,\n  createInsertSchema,\n  galleryImages\n} from \"../shared/schema\";\n\n\n\nimport { z } from \"zod\";\nimport { db } from './db.js';\nimport { sql, gte, desc } from 'drizzle-orm';\nimport { initiatePayment, handlePaymentCallback } from './payments.js';\n\nimport mediaRouter from './routes/media.js';\nimport authRouter from './routes/auth.js';\nimport adminRouter from './routes/admin.js';\nimport paypalApiRouter from './routes/paypal-api.js';\nimport paypalWebhookRouter from './routes/paypal-webhook.js';\nimport mpesaRouter from './routes/mpesa.js';\nimport currencyRouter from './routes/currency.js';\n\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // Health check route\n  app.get('/api/health', (req: Request, res: Response) => {\n    res.json({ status: 'ok', timestamp: new Date().toISOString() });\n  });\n\n  // Register auth routes\n  app.use('/api/auth', authRouter);\n  \n  // Register currency routes\n  app.use('/api/currency', currencyRouter);\n  // Register media routes\n  app.use('/api/media', mediaRouter);\n  // Register admin routes\n  app.use('/api/admin', adminRouter);\n  // Register PayPal routes\n  app.use('/api/paypal', paypalApiRouter);\n  app.use('/api/paypal', paypalWebhookRouter);\n  // Register M-Pesa routes\n  app.use('/api/mpesa', mpesaRouter);\n  // Fetch latest event\n  app.get(\"/api/events/latest\", async (req, res) => {\n    try {\n      const [latestEvent] = await db\n        .select()\n        .from(events)\n        .where(gte(events.date, new Date()))\n        .orderBy(desc(events.date))\n        .limit(1);\n\n      if (!latestEvent) {\n        return res.status(404).json({ message: 'No upcoming events found' });\n      }\n\n      res.json(latestEvent);\n    } catch (error) {\n      console.error('Error fetching latest event:', error);\n      res.status(500).json({ message: \"Failed to fetch latest event\" });\n    }\n  });\n  // Fetch event by name\n  app.get(\"/api/events/by-name/:name\", async (req: Request, res: Response) => {\n    try {\n      const { name } = req.params;\n      \n      const event = await db.select().from(events)\n        .where(sql`${events.name} = ${name} AND ${events.active} = true`)\n        .limit(1);\n\n      if (!event.length) {\n        return res.status(404).json({ message: \"Event not found\" });\n      }\n\n      res.json(event[0]);\n    } catch (error) {\n      console.error('Error fetching event by name:', error);\n      res.status(500).json({ message: \"Failed to fetch event by name\" });\n    }\n  });\n\n  // Fetch event by slug (for database-driven approach)\n  app.get(\"/api/events/by-slug/:slug\", async (req: Request, res: Response) => {\n    try {\n      const { slug } = req.params;\n      \n      const event = await db.select().from(events)\n        .where(sql`${events.slug} = ${slug} AND ${events.active} = true`)\n        .limit(1);\n\n      if (!event.length) {\n        return res.status(404).json({ message: \"Event not found\" });\n      }\n\n      res.json(event[0]);\n    } catch (error) {\n      console.error('Error fetching event by slug:', error);\n      res.status(500).json({ message: \"Failed to fetch event by slug\" });\n    }\n  });\n  // Payment routes\n  app.post(\"/api/payments/initiate\", initiatePayment);\n  app.get(\"/api/payments/callback\", handlePaymentCallback);\n\n  // Event routes\n  app.get(\"/api/events\", async (req: Request, res: Response) => {\n    try {\n      const allEvents = await db.select().from(events)\n        .where(sql`${events.active} = true`)\n        .orderBy(events.date);\n      res.json(allEvents);\n    } catch (error) {\n      console.error('Error fetching events:', error);\n      res.status(500).json({ message: \"Failed to fetch events\" });\n    }\n  });\n\n  app.get(\"/api/events/:id\", async (req: Request, res: Response) => {\n    try {\n      const eventId = parseInt(req.params.id);\n      if (isNaN(eventId)) {\n        return res.status(400).json({ message: \"Invalid event ID format\" });\n      }\n\n      const event = await db.select().from(events)\n        .where(sql`${events.id} = ${eventId} AND ${events.active} = true`)\n        .limit(1);\n\n      if (!event.length) {\n        return res.status(404).json({ message: \"Event not found\" });\n      }\n\n      res.json(event[0]);\n    } catch (error) {\n      console.error('Error fetching event:', error);\n      res.status(500).json({ message: \"Failed to fetch event\" });\n    }\n  });\n\n  // Blog routes\n  app.get(\"/api/blog-posts\", async (req: Request, res: Response) => {\n    try {\n      const posts = await storage.getBlogPosts();\n      res.json(posts);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch blog posts\" });\n    }\n  });\n\n  app.get(\"/api/blog-posts/featured\", async (req: Request, res: Response) => {\n    try {\n      const posts = await storage.getFeaturedBlogPosts();\n      res.json(posts);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch featured blog posts\" });\n    }\n  });\n\n  app.get(\"/api/blog-posts/category/:category\", async (req: Request, res: Response) => {\n    try {\n      const { category } = req.params;\n      const posts = await storage.getBlogPostsByCategory(category);\n      res.json(posts);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch blog posts by category\" });\n    }\n  });\n\n  app.get(\"/api/blog-posts/:slug\", async (req: Request, res: Response) => {\n    try {\n      const { slug } = req.params;\n      const post = await storage.getBlogPost(slug);\n      if (!post) {\n        return res.status(404).json({ message: \"Blog post not found\" });\n      }\n      res.json(post);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch blog post\" });\n    }\n  });\n\n  // Team routes\n  app.get(\"/api/team-members\", async (req: Request, res: Response) => {\n    try {\n      const members = await storage.getTeamMembers();\n      res.json(members);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch team members\" });\n    }\n  });\n\n  app.get(\"/api/team-members/:slug\", async (req: Request, res: Response) => {\n    try {\n      const { slug } = req.params;\n      const member = await storage.getTeamMember(slug);\n      if (!member) {\n        return res.status(404).json({ message: \"Team member not found\" });\n      }\n      res.json(member);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch team member\" });\n    }\n  });\n\n  // Causes routes\n  app.get(\"/api/causes\", async (req: Request, res: Response) => {\n    try {\n      const causes = await storage.getCauses();\n      res.json(causes);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch causes\" });\n    }\n  });\n\n  app.get(\"/api/causes/active\", async (req: Request, res: Response) => {\n    try {\n      const causes = await storage.getActiveCauses();\n      res.json(causes);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch active causes\" });\n    }\n  });\n\n  app.get(\"/api/causes/:slug\", async (req: Request, res: Response) => {\n    try {\n      const { slug } = req.params;\n      const cause = await storage.getCause(slug);\n      if (!cause) {\n        return res.status(404).json({ message: \"Cause not found\" });\n      }\n      res.json(cause);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch cause\" });\n    }\n  });\n\n  // Volunteer application routes\n  app.post(\"/api/volunteer-applications\", async (req: Request, res: Response) => {\n    try {\n      const validatedData = insertVolunteerApplicationSchema.parse(req.body);\n      const application = await storage.createVolunteerApplication(validatedData);\n      res.status(201).json(application);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Invalid data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to submit volunteer application\" });\n    }\n  });\n\n  // Contact submission routes\n  app.post(\"/api/contact-submissions\", async (req: Request, res: Response) => {\n    try {\n      const validatedData = insertContactSubmissionSchema.parse(req.body);\n      const submission = await storage.createContactSubmission(validatedData);\n      res.status(201).json(submission);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Invalid data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to submit contact form\" });\n    }\n  });\n\n  // Newsletter subscription routes\n  app.post(\"/api/newsletter-subscriptions\", async (req: Request, res: Response) => {\n    try {\n      const validatedData = insertNewsletterSubscriptionSchema.parse(req.body);\n      const subscription = await storage.createNewsletterSubscription(validatedData);\n      res.status(201).json(subscription);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Invalid data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to subscribe to newsletter\" });\n    }\n  });\n\n  app.get('/api/gallery', async (req: Request, res: Response) => {\n    try {\n      const images = await db.select().from(galleryImages);\n      const filteredImages = images.filter((image) => image.imageUrl);\n      res.json({\n        images: filteredImages.map((img) => ({\n          imageUrl: img.imageUrl,\n\n          title: img.title,\n          description: img.description,\n          category: img.category,\n          uploadedAt: img.uploadedAt,\n        }))\n      });\n    } catch (err) {\n      res.status(500).json({ error: 'Failed to fetch gallery images' });\n    }\n  });\n\n  const httpServer = createServer(app);\n  return httpServer;\n}\n","size_bytes":9970},"server/run-migration.ts":{"content":"import { drizzle } from 'drizzle-orm/node-postgres';\nimport { Pool } from 'pg';\nimport 'dotenv/config';\nimport fs from 'fs/promises';\nimport path from 'path';\n\nconst pool = new Pool({\n  connectionString: process.env.DATABASE_URL,\n});\n\nconst db = drizzle(pool);\n\nasync function main() {\n  console.log('Running initial migration...');\n  \n  const sqlContent = await fs.readFile(\n    path.join(process.cwd(), 'migrations', '0000_bitter_triton.sql'), \n    'utf-8'\n  );\n\n  await pool.query(sqlContent);\n  console.log('Initial migration completed.');\n  process.exit(0);\n}\n\nmain().catch((err) => {\n  console.error('Error running migration:', err);\n  process.exit(1);\n});\n","size_bytes":663},"server/seed-donations.ts":{"content":"import { db } from './db';\nimport { donations } from '../shared/schema';\n\nexport async function seedDonations() {\n\n  const existingDonations = await db.select().from(donations).limit(1);\n  if (existingDonations.length > 0) {\n    console.log('Donations already seeded.');\n    return;\n  }\n\n  console.log('Seeding donations...');\n  await db.insert(donations).values([\n    {\n      amount: 50,\n      paymentMethod: 'paypal',\n      status: 'completed',\n      transactionId: 'PAYPAL_TRANS_1',\n      message: 'Thank you for your donation!',\n      anonymous: false,\n    },\n    {\n      amount: 2500,\n      paymentMethod: 'mpesa',\n      status: 'completed',\n      transactionId: 'MPESA_TRANS_1',\n      anonymous: true,\n    },\n    {\n      amount: 10,\n      paymentMethod: 'paypal',\n      status: 'pending',\n      transactionId: 'PAYPAL_TRANS_2',\n      anonymous: false,\n    },\n    {\n      amount: 500,\n      paymentMethod: 'mpesa',\n      status: 'failed',\n      transactionId: 'MPESA_TRANS_2',\n      message: 'Donation failed.',\n      anonymous: false,\n    },\n  ]);\n\n\n  console.log('Donations seeded successfully.');\n}\n","size_bytes":1107},"server/seed-payment-gateways.ts":{"content":"import { db } from './db';\nimport { paymentGatewayConfig, paymentGatewayStatus } from '../shared/schema';\n\nexport async function seedPaymentGateways() {\n  try {\n    console.log('Seeding payment gateways...');\n\n    // PayPal gateway\n    await db.insert(paymentGatewayStatus).values({\n      gateway: 'paypal',\n      status: 'live',\n    }).onConflictDoUpdate({\n      target: paymentGatewayStatus.gateway,\n      set: { status: 'live' }\n    });\n    console.log('PayPal gateway status seeded');\n\n    const paypalConfig = {\n      mode: process.env.PAYPAL_MODE || 'sandbox',\n      clientId: process.env.PAYPAL_CLIENT_ID || '',\n      clientSecret: process.env.PAYPAL_CLIENT_SECRET || '',\n    };\n    await db.insert(paymentGatewayConfig).values({\n      gateway: 'paypal',\n      config: JSON.stringify(paypalConfig),\n    }).onConflictDoUpdate({\n      target: paymentGatewayConfig.gateway,\n      set: { config: JSON.stringify(paypalConfig) }\n    });\n    console.log('PayPal gateway config seeded');\n\n    // M-PESA gateway\n    await db.insert(paymentGatewayStatus).values({\n      gateway: 'mpesa',\n      status: 'live',\n    }).onConflictDoUpdate({\n      target: paymentGatewayStatus.gateway,\n      set: { status: 'live' }\n    });\n    console.log('M-PESA gateway status seeded');\n\n    const mpesaConfig = {\n      consumerKey: process.env.MPESA_CONSUMER_KEY || '',\n      consumerSecret: process.env.MPESA_CONSUMER_SECRET || '',\n      shortcode: process.env.MPESA_SHORTCODE || '',\n      passkey: process.env.MPESA_PASSKEY || '',\n      environment: process.env.MPESA_ENVIRONMENT || 'sandbox',\n    };\n    await db.insert(paymentGatewayConfig).values({\n      gateway: 'mpesa',\n      config: JSON.stringify(mpesaConfig),\n    }).onConflictDoUpdate({\n      target: paymentGatewayConfig.gateway,\n      set: { config: JSON.stringify(mpesaConfig) }\n    });\n    console.log('M-PESA gateway config seeded');\n\n    console.log('Payment gateways seeded successfully!');\n  } catch (error) {\n    console.error('Error seeding payment gateways:', error);\n    throw error;\n  }\n}\n\nseedPaymentGateways().catch(console.error);","size_bytes":2088},"server/seed-registrations.ts":{"content":"import { db } from './db';\nimport { eventRegistrations, events } from '../shared/schema';\n\nexport async function seedRegistrations() {\n  const existingRegistrations = await db.select().from(eventRegistrations).limit(1);\n  if (existingRegistrations.length > 0) {\n    console.log('Event registrations already seeded.');\n    return;\n  }\n\n  const allEvents = await db.select().from(events);\n  if (allEvents.length === 0) {\n    console.log('No events found to seed registrations for.');\n    return;\n  }\n\n  console.log('Seeding event registrations...');\n\n  const registrationsToSeed = allEvents.flatMap(event => ([\n    {\n      eventId: event.id,\n      registrationType: 'individual',\n      firstName: 'John',\n      surname: 'Doe',\n      email: 'john.doe@example.com',\n      phone: '1234567890',\n      paymentStatus: 'completed',\n      amount: event.fee,\n    },\n    {\n      eventId: event.id,\n      registrationType: 'individual',\n      firstName: 'Jane',\n      surname: 'Smith',\n      email: 'jane.smith@example.com',\n      phone: '0987654321',\n      paymentStatus: 'pending',\n      amount: event.fee,\n    },\n  ]));\n\n  if (registrationsToSeed.length > 0) {\n    await db.insert(eventRegistrations).values(registrationsToSeed);\n  }\n\n  console.log('Event registrations seeded successfully.');\n}\n","size_bytes":1286},"server/seed.ts":{"content":"import { drizzle } from 'drizzle-orm/node-postgres';\nimport { sql, eq } from 'drizzle-orm';\n\nimport { Pool } from 'pg';\nimport 'dotenv/config';\nimport * as schema from '../shared/schema';\nimport { blogPosts, teamMembers, causes, galleryImages } from '../shared/schema';\nimport { seedDonations } from './seed-donations';\nimport { seedRegistrations } from './seed-registrations';\nimport { seedPaymentGateways } from './seed-payment-gateways';\n\nconst pool = new Pool({\n  connectionString: process.env.DATABASE_URL,\n});\n\nconst db = drizzle(pool, { schema });\n\nasync function main() {\n  console.log('Seeding database...');\n\n  // Seed Blog Posts\n  console.log('Seeding blog posts...');\n  await db.insert(blogPosts).values([\n\n    {\n      title: 'The Importance of Clean Water',\n      slug: 'importance-of-clean-water',\n      excerpt: 'Discover why access to clean water is a fundamental human right and how it impacts communities.',\n      content: 'Detailed content about clean water...',\n      category: 'Health',\n      imageUrl: '/images/blog/water.jpg',\n      publishedAt: new Date('2023-01-15'),\n      featured: true,\n    },\n    {\n      title: \"Empowering Youth Through Education\",\n      slug: \"empowering-youth-through-education\",\n      excerpt: \"Education is a powerful tool for breaking the cycle of poverty. Learn about our educational programs.\",\n      content: \"In-depth article on youth education programs, success stories, and future plans.\",\n      category: \"Education\",\n      imageUrl: \"/images/blog/education.jpg\",\n      publishedAt: new Date(\"2023-02-20\"),\n      featured: false,\n    },\n    {\n      title: \"Sustainable Agriculture for a Better Future\",\n      slug: \"sustainable-agriculture-for-a-better-future\",\n      excerpt: \"Our efforts in promoting sustainable farming practices to ensure food security and protect the environment.\",\n      content: \"A comprehensive look at our sustainable agriculture projects, their impact, and how you can get involved.\",\n      category: \"Environment\",\n      imageUrl: \"/images/blog/agriculture.jpg\",\n      publishedAt: new Date(\"2023-03-10\"),\n      featured: true,\n    },\n    {\n      title: \"Healthcare for All: A Basic Human Right\",\n      slug: \"healthcare-for-all-a-basic-human-right\",\n      excerpt: \"An overview of our healthcare initiatives aimed at providing medical access to underserved communities.\",\n      content: \"Details about our mobile clinics, vaccination drives, and partnerships with local health centers.\",\n      category: \"Health\",\n      imageUrl: \"/images/blog/healthcare.jpg\",\n      publishedAt: new Date(\"2023-04-05\"),\n      featured: false,\n    },\n    {\n      title: \"Women's Empowerment: Driving Change\",\n      slug: \"womens-empowerment-driving-change\",\n      excerpt: \"Highlighting our programs that support women's economic and social empowerment.\",\n      content: \"Stories of women who have transformed their lives through our vocational training and micro-loan programs.\",\n      category: \"Empowerment\",\n      imageUrl: \"/images/blog/women-empowerment.jpg\",\n      publishedAt: new Date(\"2023-05-12\"),\n      featured: true,\n    },\n    {\n      title: \"Disaster Relief: Rebuilding Communities\",\n      slug: \"disaster-relief-rebuilding-communities\",\n      excerpt: \"A look at our rapid response and long-term recovery efforts in disaster-stricken areas.\",\n      content: \"An account of our recent disaster relief operations, the challenges faced, and the resilience of communities.\",\n      category: \"Relief\",\n      imageUrl: \"/images/blog/disaster-relief.jpg\",\n      publishedAt: new Date(\"2023-06-22\"),\n      featured: false,\n    },\n    {\n      title: \"Upcoming Community Workshop\",\n      slug: \"upcoming-community-workshop\",\n      excerpt: \"Join us for a workshop on community building and sustainable practices.\",\n      content: \"Detailed information about the workshop, including speakers, schedule, and registration details.\",\n      category: \"events\",\n      imageUrl: \"/images/blog/workshop.jpg\",\n      publishedAt: new Date(\"2023-07-15\"),\n      endDate: new Date(\"2023-07-20\"), // Example end date for event\n      featured: false,\n    }\n  ]).onConflictDoUpdate({\n    target: blogPosts.slug,\n    set: {\n      title: sql`excluded.title`,\n      excerpt: sql`excluded.excerpt`,\n      content: sql`excluded.content`,\n      category: sql`excluded.category`,\n      imageUrl: sql`excluded.image_url`,\n      publishedAt: sql`excluded.published_at`,\n      endDate: sql`excluded.end_date`,\n      featured: sql`excluded.featured`,\n    },\n  });\n\n  // Seed Team Members\n  console.log('Seeding team members...');\n  await db.insert(teamMembers).values([\n\n    {\n      name: 'Jane Doe',\n      slug: 'jane-doe',\n      position: 'Founder & CEO',\n      bio: 'Jane has over 20 years of experience in the non-profit sector...',\n      imageUrl: '/images/team/jane.jpg',\n      email: 'jane.doe@example.com',\n      linkedin: 'https://www.linkedin.com/in/janedoe',\n      specialties: ['Leadership', 'Fundraising'],\n    },\n    {\n        name: \"John Smith\",\n        slug: \"john-smith\",\n        position: \"Chief Operating Officer\",\n        bio: \"John is responsible for the day-to-day operations and ensuring our programs run smoothly.\",\n        imageUrl: \"/images/team/john.jpg\",\n        email: \"john.smith@example.com\",\n        linkedin: \"https://www.linkedin.com/in/johnsmith\",\n        specialties: [\"Operations\", \"Logistics\", \"Program Management\"],\n      },\n\n      {\n        name: \"Emily White\",\n        slug: \"emily-white\",\n        position: \"Director of Programs\",\n        bio: \"Emily designs and oversees all our community programs, ensuring they meet the needs of those we serve.\",\n        imageUrl: \"/images/team/emily.jpg\",\n        email: \"emily.white@example.com\",\n        linkedin: \"https://www.linkedin.com/in/emilywhite\",\n        specialties: [\"Program Design\", \"Community Outreach\", \"Impact Assessment\"],\n      },\n\n      {\n        name: \"Michael Brown\",\n        slug: \"michael-brown\",\n        position: \"Chief Financial Officer\",\n        bio: \"Michael manages our finances, ensuring every donation is used effectively and transparently.\",\n        imageUrl: \"/images/team/michael.jpg\",\n        email: \"michael.brown@example.com\",\n        linkedin: \"https://www.linkedin.com/in/michaelbrown\",\n        specialties: [\"Financial Management\", \"Compliance\", \"Strategic Planning\"],\n      },\n\n      {\n        name: \"Sarah Green\",\n        slug: \"sarah-green\",\n        position: \"Marketing and Communications Manager\",\n        bio: \"Sarah is the voice of our organization, sharing our stories and impact with the world.\",\n        imageUrl: \"/images/team/sarah.jpg\",\n        email: \"sarah.green@example.com\",\n        linkedin: \"https://www.linkedin.com/in/sarahgreen\",\n        specialties: [\"Digital Marketing\", \"Public Relations\", \"Content Creation\"],\n      },\n\n      {\n        name: \"David Black\",\n        slug: \"david-black\",\n        position: \"Volunteer Coordinator\",\n        bio: \"David recruits, trains, and manages our dedicated team of volunteers.\",\n        imageUrl: \"/images/team/david.jpg\",\n        email: \"david.black@example.com\",\n        linkedin: \"https://www.linkedin.com/in/davidblack\",\n        specialties: [\"Volunteer Management\", \"Training & Development\", \"Community Engagement\"],\n      }\n\n  ]).onConflictDoUpdate({\n    target: teamMembers.slug,\n    set: {\n      name: sql`excluded.name`,\n      position: sql`excluded.position`,\n      bio: sql`excluded.bio`,\n      imageUrl: sql`excluded.image_url`,\n      email: sql`excluded.email`,\n      linkedin: sql`excluded.linkedin`,\n      specialties: sql`excluded.specialties`,\n    },\n  });\n\n  // Seed Causes\n  console.log('Seeding causes...');\n  await db.insert(causes).values([\n\n    {\n      title: 'Build a School in Africa',\n      slug: 'build-a-school-in-africa',\n      description: 'Help us build a school for 200 children in a remote village.',\n      fullDescription: 'Detailed description of the school project...',\n      imageUrl: '/images/causes/school.jpg',\n      goalAmount: 50000,\n      raisedAmount: 12000,\n      volunteersNeeded: 20,\n      active: true,\n    },\n    {\n        title: \"Provide Clean Water to a Village\",\n        slug: \"provide-clean-water-to-a-village\",\n        description: \"Fund the construction of a well to provide clean and safe drinking water.\",\n        fullDescription: \"In-depth details about the water well project, including location, community impact, and technology used.\",\n        imageUrl: \"/images/causes/water-well.jpg\",\n        goalAmount: 15000,\n        raisedAmount: 7500,\n        volunteersNeeded: 10,\n        active: true,\n      },\n\n      {\n        title: \"Sponsor a Child's Education\",\n        slug: \"sponsor-a-childs-education\",\n        description: \"Provide a child with school supplies, uniforms, and tuition for a year.\",\n        fullDescription: \"Information about the sponsorship program, the children it benefits, and how you can connect with your sponsored child.\",\n        imageUrl: \"/images/causes/sponsor-child.jpg\",\n        goalAmount: 300,\n        raisedAmount: 150,\n        volunteersNeeded: 0,\n        active: true,\n      },\n\n      {\n        title: \"Support a Mobile Health Clinic\",\n        slug: \"support-a-mobile-health-clinic\",\n        description: \"Help us bring essential medical services to remote and underserved areas.\",\n        fullDescription: \"Details about the mobile clinic's services, the areas it covers, and the impact it has on community health.\",\n        imageUrl: \"/images/causes/health-clinic.jpg\",\n        goalAmount: 25000,\n        raisedAmount: 10000,\n        volunteersNeeded: 5,\n        active: true,\n      },\n\n      {\n        title: \"Fund a Women's Empowerment Workshop\",\n        slug: \"fund-a-womens-empowerment-workshop\",\n        description: \"Empower women with skills and knowledge to start their own businesses.\",\n        fullDescription: \"An overview of the workshop curriculum, the trainers, and the expected outcomes for the participants.\",\n        imageUrl: \"/images/causes/women-workshop.jpg\",\n        goalAmount: 5000,\n        raisedAmount: 2000,\n        volunteersNeeded: 2,\n        active: false,\n      },\n\n      {\n        title: \"Plant Trees to Combat Deforestation\",\n        slug: \"plant-trees-to-combat-deforestation\",\n        description: \"Join our efforts to reforest areas and combat climate change.\",\n        fullDescription: \"Information about the tree planting project, the types of trees being planted, and the long-term environmental benefits.\",\n        imageUrl: \"/images/causes/plant-trees.jpg\",\n        goalAmount: 10000,\n        raisedAmount: 8000,\n        volunteersNeeded: 50,\n        active: true,\n      }\n\n  ]).onConflictDoUpdate({\n    target: causes.slug,\n    set: {\n      title: sql`excluded.title`,\n      description: sql`excluded.description`,\n      fullDescription: sql`excluded.full_description`,\n      imageUrl: sql`excluded.image_url`,\n      goalAmount: sql`excluded.goal_amount`,\n      volunteersNeeded: sql`excluded.volunteers_needed`,\n      active: sql`excluded.active`,\n    },\n  });\n\n  // Seed Gallery Images\n  console.log('Seeding gallery images...');\n  const images = [\n    {\n      title: 'Sample Image 1',\n      description: 'A beautiful scene',\n      imageUrl: '/gallery/1.jpg',\n      category: 'Events',\n    },\n    {\n      title: 'Sample Image 2',\n      description: 'Another beautiful scene',\n      imageUrl: '/gallery/2.jpg',\n      category: 'Community',\n    },\n    {\n      title: 'Sample Image 3',\n      description: 'Yet another beautiful scene',\n      imageUrl: '/gallery/3.jpg',\n      category: 'Education',\n    },\n    {\n      title: 'Sample Image 4',\n      description: 'A beautiful scene',\n      imageUrl: '/gallery/4.jpg',\n      category: 'Health',\n    },\n    {\n      title: 'Sample Image 5',\n      description: 'Another beautiful scene',\n      imageUrl: '/gallery/5.jpg',\n      category: 'Empowerment',\n    },\n    {\n      title: 'Sample Image 6',\n      description: 'Yet another beautiful scene',\n      imageUrl: '/gallery/6.jpg',\n      category: 'Relief',\n    },\n    {\n      title: 'Sample Image 7',\n      description: 'A beautiful scene',\n      imageUrl: '/gallery/7.jpg',\n      category: 'Events',\n    },\n    {\n      title: 'Sample Image 8',\n      description: 'Another beautiful scene',\n      imageUrl: '/gallery/8.jpg',\n      category: 'Community',\n    },\n    {\n      title: 'Sample Image 9',\n      description: 'Yet another beautiful scene',\n      imageUrl: '/gallery/9.jpg',\n      category: 'Education',\n    },\n    {\n      title: 'Sample Image 10',\n      description: 'A beautiful environment scene',\n      imageUrl: '/gallery/10.jpg',\n      category: 'Environment',\n    },\n  ];\n\n  for (const image of images) {\n    const existingImage = await db.query.galleryImages.findFirst({\n      where: eq(galleryImages.imageUrl, image.imageUrl),\n    });\n\n    if (existingImage) {\n      await db\n        .update(galleryImages)\n        .set({\n          title: image.title,\n          description: image.description,\n          category: image.category,\n        })\n        .where(eq(galleryImages.id, existingImage.id));\n    } else {\n      await db.insert(galleryImages).values(image);\n    }\n  }\n\n  await seedDonations();\n  await seedRegistrations();\n  await seedPaymentGateways();\n\n\n  console.log('Database seeded successfully.');\n  process.exit(0);\n}\n\n\nmain().catch((err) => {\n  console.error(err);\n  process.exit(1);\n});\n","size_bytes":13384},"server/storage.ts":{"content":"import { DbStorage } from './db.js';\nimport type { \n  User, InsertUser, BlogPost, InsertBlogPost,\n  TeamMember, InsertTeamMember, Cause, InsertCause,\n  VolunteerApplication, InsertVolunteerApplication,\n  ContactSubmission, InsertContactSubmission,\n  NewsletterSubscription, InsertNewsletterSubscription\n} from '../shared/schema.js';\n\nexport interface IStorage {\n  // Users\n  getUser(id: number): Promise<User | undefined>;\n  getUserByUsername(username: string): Promise<User | undefined>;\n  createUser(user: InsertUser): Promise<User>;\n\n  // Blog Posts\n  getBlogPosts(): Promise<BlogPost[]>;\n  getBlogPost(slug: string): Promise<BlogPost | undefined>;\n  getFeaturedBlogPosts(): Promise<BlogPost[]>;\n  getBlogPostsByCategory(category: string): Promise<BlogPost[]>;\n  createBlogPost(post: InsertBlogPost): Promise<BlogPost>;\n\n  // Team Members\n  getTeamMembers(): Promise<TeamMember[]>;\n  getTeamMember(slug: string): Promise<TeamMember | undefined>;\n  createTeamMember(member: InsertTeamMember): Promise<TeamMember>;\n\n  // Causes\n  getCauses(): Promise<Cause[]>;\n  getCause(slug: string): Promise<Cause | undefined>;\n  getActiveCauses(): Promise<Cause[]>;\n  createCause(cause: InsertCause): Promise<Cause>;\n\n  // Volunteer Applications\n  getVolunteerApplications(): Promise<VolunteerApplication[]>;\n  createVolunteerApplication(application: InsertVolunteerApplication): Promise<VolunteerApplication>;\n\n  // Contact Submissions\n  getContactSubmissions(): Promise<ContactSubmission[]>;\n  createContactSubmission(submission: InsertContactSubmission): Promise<ContactSubmission>;\n\n  // Newsletter Subscriptions\n  getNewsletterSubscriptions(): Promise<NewsletterSubscription[]>;\n  createNewsletterSubscription(subscription: InsertNewsletterSubscription): Promise<NewsletterSubscription>;\n}\n\nexport const storage: IStorage = new DbStorage();\n","size_bytes":1835},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"node:fs\";\nimport path from \"node:path\";\nimport { type Server } from \"http\";\nimport { nanoid } from \"nanoid\";\nimport { fileURLToPath } from 'url';\nimport { dirname } from 'path';\n\n// Create __dirname equivalent for ES modules\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = dirname(__filename);\n\nexport async function setupVite(app: Express, httpServer: Server) {\n  const { createServer: createViteServer } = await import(\"vite\");\n  const { default: viteConfig } = await import(\"../vite.config.js\");\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    server: viteConfig.server,\n    appType: \"custom\",\n  });\n\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        __dirname,\n        \"..\",\n        \"dist\",\n        \"public\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(__dirname, \"..\", \"dist\", \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":1942},"shared/schema.ts":{"content":"import { pgTable, text, serial, integer, boolean, timestamp } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\nexport { createInsertSchema };\n\nexport const users = pgTable(\"users\", {\n  id: serial(\"id\").primaryKey(),\n  username: text(\"username\").notNull().unique(),\n  password: text(\"password\").notNull(),\n  email: text(\"email\").notNull().unique(),\n  role: text(\"role\", { enum: ['admin', 'volunteer', 'donor'] }).notNull().default('donor'),\n  fullName: text(\"full_name\").notNull(),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  lastLogin: timestamp(\"last_login\"),\n  active: boolean(\"active\").notNull().default(true),\n  twoFactorSecret: text(\"two_factor_secret\"),\n  twoFactorEnabled: boolean(\"two_factor_enabled\").notNull().default(false),\n});\n\n\nexport const media = pgTable(\"media\", {\n  id: serial(\"id\").primaryKey(),\n  title: text(\"title\"),\n  description: text(\"description\"),\n  url: text(\"url\").notNull(),\n  type: text(\"type\").notNull(),\n  size: integer(\"size\").notNull(),\n  uploadedAt: timestamp(\"uploaded_at\").notNull().defaultNow(),\n});\n\nexport const recurringDonations = pgTable(\"recurring_donations\", {\n  id: serial(\"id\").primaryKey(),\n  userId: integer(\"user_id\").references(() => users.id),\n  amount: integer(\"amount\").notNull(),\n  causeId: integer(\"cause_id\").references(() => causes.id),\n  frequency: text(\"frequency\", { enum: ['monthly', 'quarterly', 'yearly'] }).notNull(),\n  nextDonationDate: timestamp(\"next_donation_date\").notNull(),\n  status: text(\"status\", { enum: ['active', 'paused', 'cancelled'] }).notNull().default('active'),\n  paymentMethod: text(\"payment_method\").notNull(),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n  lastDonationDate: timestamp(\"last_donation_date\"),\n  failedAttempts: integer(\"failed_attempts\").notNull().default(0),\n});\n\nexport const paymentGatewayStatus = pgTable('payment_gateway_status', {\n  id: serial('id').primaryKey(),\n  gateway: text('gateway').notNull().unique(),\n  status: text('status', { enum: ['live', 'maintenance'] }).notNull().default('live'),\n  updatedAt: timestamp('updated_at').defaultNow(),\n});\n\nexport const paymentGatewayConfig = pgTable('payment_gateway_config', {\n  gateway: text('gateway').primaryKey(),\n  config: text('config').notNull(),\n  updatedAt: timestamp('updated_at').notNull().defaultNow(),\n});\n\nexport const donations = pgTable(\"donations\", {\n  id: serial(\"id\").primaryKey(),\n  userId: integer(\"user_id\").references(() => users.id),\n  amount: integer(\"amount\").notNull(),\n  causeId: integer(\"cause_id\"),\n  paymentMethod: text(\"payment_method\").notNull(),\n  transactionId: text(\"transaction_id\"),\n  status: text(\"status\", { enum: ['pending', 'completed', 'failed'] }).notNull().default('pending'),\n  anonymous: boolean(\"anonymous\").notNull().default(false),\n  message: text(\"message\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  recurringDonationId: integer(\"recurring_donation_id\").references(() => recurringDonations.id),\n});\n\nexport const blogPosts = pgTable(\"blog_posts\", {\n  id: serial(\"id\").primaryKey(),\n  title: text(\"title\").notNull(),\n  slug: text(\"slug\").notNull().unique(),\n  excerpt: text(\"excerpt\").notNull(),\n  content: text(\"content\").notNull(),\n  category: text(\"category\").notNull(),\n  imageUrl: text(\"image_url\").notNull(),\n  publishedAt: timestamp(\"published_at\").notNull(),\n  endDate: timestamp(\"end_date\"), // Optional, only for events\n  featured: boolean(\"featured\").default(false),\n});\n\nexport const teamMembers = pgTable(\"team_members\", {\n  id: serial(\"id\").primaryKey(),\n  name: text(\"name\").notNull(),\n  slug: text(\"slug\").notNull().unique(),\n  position: text(\"position\").notNull(),\n  bio: text(\"bio\").notNull(),\n  imageUrl: text(\"image_url\").notNull(),\n  email: text(\"email\"),\n  linkedin: text(\"linkedin\"),\n  specialties: text(\"specialties\").array(),\n});\n\nexport const causes = pgTable(\"causes\", {\n  id: serial(\"id\").primaryKey(),\n  title: text(\"title\").notNull(),\n  slug: text(\"slug\").notNull().unique(),\n  description: text(\"description\").notNull(),\n  fullDescription: text(\"full_description\").notNull(),\n  imageUrl: text(\"image_url\").notNull(),\n  goalAmount: integer(\"goal_amount\").notNull(),\n  raisedAmount: integer(\"raised_amount\").notNull(),\n  volunteersNeeded: integer(\"volunteers_needed\").notNull(),\n  active: boolean(\"active\").default(true),\n});\n\nexport const events = pgTable(\"events\", {\n  id: serial(\"id\").primaryKey(),\n  date: timestamp(\"date\").notNull(),\n  endDate: timestamp(\"end_date\").notNull(), // Event end date\n  fee: integer(\"fee\").notNull(),\n  location: text(\"location\").notNull(),\n  maxParticipants: integer(\"max_participants\"),\n  active: boolean(\"active\").default(true),\n  name: text(\"name\").notNull().unique(),\n  description: text(\"description\").notNull(),\n  fullDescription: text(\"full_description\"), // Extended description for detail page\n  imageUrl: text(\"image_url\").notNull(),\n  slug: text(\"slug\").notNull().unique(), // URL-friendly identifier\n  featured: boolean(\"featured\").default(false),\n  category: text(\"category\").default(\"general\"), // Event category\n  tags: text(\"tags\").array(), // Event tags\n  contactEmail: text(\"contact_email\"),\n  contactPhone: text(\"contact_phone\"),\n  registrationUrl: text(\"registration_url\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Event images for multiple photos per event\nexport const eventImages = pgTable(\"event_images\", {\n  id: serial(\"id\").primaryKey(),\n  eventId: integer(\"event_id\").references(() => events.id, { onDelete: 'cascade' }),\n  imageUrl: text(\"image_url\").notNull(),\n  caption: text(\"caption\"),\n  isPrimary: boolean(\"is_primary\").default(false),\n  order: integer(\"order\").default(0),\n  uploadedAt: timestamp(\"uploaded_at\").defaultNow(),\n});\n\n// Event supporters/sponsors\nexport const eventSupporters = pgTable(\"event_supporters\", {\n  id: serial(\"id\").primaryKey(),\n  eventId: integer(\"event_id\").references(() => events.id, { onDelete: 'cascade' }),\n  name: text(\"name\").notNull(),\n  logo: text(\"logo\"),\n  website: text(\"website\"),\n  type: text(\"type\", { enum: ['sponsor', 'partner', 'organizer', 'supporter'] }).default('supporter'),\n  level: text(\"level\", { enum: ['platinum', 'gold', 'silver', 'bronze', 'standard'] }).default('standard'),\n  order: integer(\"order\").default(0),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const eventRegistrations = pgTable(\"event_registrations\", {\n  id: serial(\"id\").primaryKey(),\n  eventId: integer(\"event_id\").references(() => events.id),\n  registrationType: text(\"registration_type\").notNull(), // 'individual' or 'organization'\n  // Individual fields\n  firstName: text(\"first_name\"),\n  middleName: text(\"middle_name\"),\n  surname: text(\"surname\"),\n  // Organization fields\n  organizationName: text(\"organization_name\"),\n  organizationEmail: text(\"organization_email\"),\n  representativeName: text(\"representative_name\"),\n  role: text(\"role\"),\n  // Common fields\n  email: text(\"email\").notNull(),\n  phone: text(\"phone\").notNull(),\n  paymentStatus: text(\"payment_status\").notNull().default('pending'), // 'pending', 'completed', 'failed'\n  paymentReference: text(\"payment_reference\"),\n  gateway: text(\"gateway\"),\n  amount: integer(\"amount\").notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n\nexport const volunteerApplications = pgTable(\"volunteer_applications\", {\n  id: serial(\"id\").primaryKey(),\n  name: text(\"name\").notNull(),\n  email: text(\"email\").notNull(),\n  phone: text(\"phone\"),\n  program: text(\"program\").notNull(),\n  experience: text(\"experience\"),\n  availability: text(\"availability\").notNull(),\n  message: text(\"message\"),\n  submittedAt: timestamp(\"submitted_at\").notNull().defaultNow(),\n});\n\nexport const contactSubmissions = pgTable(\"contact_submissions\", {\n  id: serial(\"id\").primaryKey(),\n  name: text(\"name\").notNull(),\n  email: text(\"email\").notNull(),\n  subject: text(\"subject\").notNull(),\n  message: text(\"message\").notNull(),\n  submittedAt: timestamp(\"submitted_at\").notNull().defaultNow(),\n});\n\nexport const newsletterSubscriptions = pgTable(\"newsletter_subscriptions\", {\n  id: serial(\"id\").primaryKey(),\n  email: text(\"email\").notNull().unique(),\n  subscribedAt: timestamp(\"subscribed_at\").notNull().defaultNow(),\n});\n\nexport const galleryImages = pgTable(\"gallery_images\", {\n  id: serial(\"id\").primaryKey(),\n  title: text(\"title\").notNull(),\n  description: text(\"description\"),\n  imageUrl: text(\"image_url\").notNull(),\n  category: text(\"category\").notNull().default('Uncategorized'),\n  uploadedAt: timestamp(\"uploaded_at\").notNull().defaultNow(),\n});\n\n// Insert schemas\nexport const insertUserSchema = createInsertSchema(users).omit({\n  id: true,\n  createdAt: true,\n  lastLogin: true,\n});\n\nexport const insertBlogPostSchema = createInsertSchema(blogPosts).omit({\n  id: true,\n});\n\nexport const insertTeamMemberSchema = createInsertSchema(teamMembers).omit({\n  id: true,\n});\n\nexport const insertCauseSchema = createInsertSchema(causes).omit({\n  id: true,\n});\n\nexport const insertVolunteerApplicationSchema = createInsertSchema(volunteerApplications).omit({\n  id: true,\n  submittedAt: true,\n});\n\nexport const insertContactSubmissionSchema = createInsertSchema(contactSubmissions).omit({\n  id: true,\n  submittedAt: true,\n});\n\nexport const insertNewsletterSubscriptionSchema = createInsertSchema(newsletterSubscriptions).omit({\n  id: true,\n  subscribedAt: true,\n});\n\nexport const insertGalleryImageSchema = createInsertSchema(galleryImages).omit({\n  id: true,\n  uploadedAt: true,\n});\n\nexport const insertPaymentGatewayStatusSchema = createInsertSchema(paymentGatewayStatus).omit({\n  id: true,\n  updatedAt: true,\n});\n\nexport const insertPaymentGatewayConfigSchema = createInsertSchema(paymentGatewayConfig).omit({\n  updatedAt: true,\n});\n\n// Types\nexport type User = typeof users.$inferSelect;\nexport type InsertUser = z.infer<typeof insertUserSchema>;\n\nexport type BlogPost = typeof blogPosts.$inferSelect;\nexport type InsertBlogPost = z.infer<typeof insertBlogPostSchema>;\n\nexport type TeamMember = typeof teamMembers.$inferSelect;\nexport type InsertTeamMember = z.infer<typeof insertTeamMemberSchema>;\n\nexport type Cause = typeof causes.$inferSelect;\nexport type InsertCause = z.infer<typeof insertCauseSchema>;\n\nexport type VolunteerApplication = typeof volunteerApplications.$inferSelect;\nexport type InsertVolunteerApplication = z.infer<typeof insertVolunteerApplicationSchema>;\n\nexport type ContactSubmission = typeof contactSubmissions.$inferSelect;\nexport type InsertContactSubmission = z.infer<typeof insertContactSubmissionSchema>;\n\nexport type NewsletterSubscription = typeof newsletterSubscriptions.$inferSelect;\nexport type InsertNewsletterSubscription = z.infer<typeof insertNewsletterSubscriptionSchema>;\n\nexport type GalleryImage = typeof galleryImages.$inferSelect;\nexport type InsertGalleryImage = z.infer<typeof insertGalleryImageSchema>;\n\nexport type PaymentGatewayStatus = typeof paymentGatewayStatus.$inferSelect;\nexport type InsertPaymentGatewayStatus = z.infer<typeof insertPaymentGatewayStatusSchema>;\n\nexport type PaymentGatewayConfig = typeof paymentGatewayConfig.$inferSelect;\nexport type InsertPaymentGatewayConfig = z.infer<typeof insertPaymentGatewayConfigSchema>;\n","size_bytes":11272},"client/src/App.tsx":{"content":"import { Switch, Route, useLocation } from \"wouter\";\nimport { Suspense, lazy } from 'react';\n\n\n// Core Pages (Not Lazy Loaded)\nimport Home from \"@/pages/Home\";\nimport NotFound from \"@/pages/not-found\";\n\n// Lazy Loaded Pages\nconst About = lazy(() => import(\"@/pages/About\"));\nconst Blog = lazy(() => import(\"@/pages/Blog\"));\nconst BlogPost = lazy(() => import(\"@/pages/BlogPost\"));\nconst Team = lazy(() => import(\"@/pages/Team\"));\nconst TeamMember = lazy(() => import(\"@/pages/TeamMember\"));\nconst Features = lazy(() => import(\"@/pages/Features\"));\nconst GetInvolved = lazy(() => import(\"@/pages/GetInvolved\"));\nconst Donate = lazy(() => import(\"@/pages/Donate\"));\nconst Causes = lazy(() => import(\"@/pages/Causes\"));\nconst CausePage = lazy(() => import(\"@/pages/CausePage\"));\nconst Contact = lazy(() => import(\"@/pages/Contact\"));\nconst Legal = lazy(() => import(\"@/pages/Legal\"));\nconst Gallery = lazy(() => import(\"@/pages/Gallery\"));\nconst Events = lazy(() => import(\"@/pages/Events\"));\nconst EventDetail = lazy(() => import(\"@/pages/EventDetail\"));\nconst EventRegistration = lazy(() => import(\"@/pages/EventRegistration\"));\n\n// Admin Pages (Lazy Loaded)\nconst AdminLogin = lazy(() => import(\"@/pages/admin/login\"));\nconst AdminDashboard = lazy(() => import(\"@/pages/admin/dashboard\"));\nconst AdminBlogPosts = lazy(() => import(\"@/pages/admin/blog-posts\"));\nconst AdminEvents = lazy(() => import(\"@/pages/admin/events\"));\nconst AdminDonations = lazy(() => import(\"@/pages/admin/donations\"));\nconst AdminUsers = lazy(() => import(\"@/pages/admin/users\"));\nconst AdminVolunteers = lazy(() => import(\"@/pages/admin/volunteers\"));\nconst AdminSettings = lazy(() => import(\"@/pages/admin/settings\"));\nconst AdminPayments = lazy(() => import(\"@/pages/admin/payments\"));\nconst AdminEventRegistrations = lazy(() => import(\"@/pages/admin/event-registrations\"));\n\n// Components\n\nimport Header from \"@/components/Header\";\nimport Footer from \"@/components/Footer\";\nimport ScrollToTop from \"@/components/ScrollToTop\";\nimport EventPopup from \"@/components/EventPopup\";\n\nimport ProtectedRoute from \"@/components/admin/ProtectedRoute\";\n\nimport { LoadingSpinner } from \"@/components/ui/loading-spinner\";\n\nfunction Router() {\n  const [location] = useLocation();\n  return (\n    <>\n      {!location.startsWith('/admin') && !location.startsWith('/fpa-2k25-secure-portal') && <Header />}\n      <ScrollToTop />\n      <main>\n        <Switch>\n          <Route path=\"/\" component={Home} />\n          <Route path=\"/about\">\n            {() => (\n              <Suspense fallback={<LoadingSpinner />}>\n                <About />\n              </Suspense>\n            )}\n          </Route>\n          <Route path=\"/blog\">\n            {() => (\n              <Suspense fallback={<LoadingSpinner />}>\n                <Blog />\n              </Suspense>\n            )}\n          </Route>\n            <Route path=\"/blog/:slug\">\n              {() => (\n                <Suspense fallback={<LoadingSpinner />}>\n                  <BlogPost />\n                </Suspense>\n              )}\n            </Route>\n            <Route path=\"/team\">\n              {() => (\n                <Suspense fallback={<LoadingSpinner />}>\n                  <Team />\n                </Suspense>\n              )}\n            </Route>\n            <Route path=\"/team/:slug\">\n              {() => (\n                <Suspense fallback={<LoadingSpinner />}>\n                  <TeamMember />\n                </Suspense>\n              )}\n            </Route>\n            <Route path=\"/features\">\n              {() => (\n                <Suspense fallback={<LoadingSpinner />}>\n                  <Features />\n                </Suspense>\n              )}\n            </Route>\n            <Route path=\"/get-involved\">\n              {() => (\n                <Suspense fallback={<LoadingSpinner />}>\n                  <GetInvolved />\n                </Suspense>\n              )}\n            </Route>\n            <Route path=\"/donate\">\n              {() => (\n                <Suspense fallback={<LoadingSpinner />}>\n                  <Donate />\n                </Suspense>\n              )}\n            </Route>\n            <Route path=\"/causes\">\n              {() => (\n                <Suspense fallback={<LoadingSpinner />}>\n                  <Causes />\n                </Suspense>\n              )}\n            </Route>\n            <Route path=\"/causes/:slug\">\n              {() => (\n                <Suspense fallback={<LoadingSpinner />}>\n                  <CausePage />\n                </Suspense>\n              )}\n            </Route>\n            <Route path=\"/contact\">\n              {() => (\n                <Suspense fallback={<LoadingSpinner />}>\n                  <Contact />\n                </Suspense>\n              )}\n            </Route>\n            <Route path=\"/legal\">\n              {() => (\n                <Suspense fallback={<LoadingSpinner />}>\n                  <Legal />\n                </Suspense>\n              )}\n            </Route>\n            <Route path=\"/gallery\">\n              {() => (\n                <Suspense fallback={<LoadingSpinner />}>\n                  <Gallery />\n                </Suspense>\n              )}\n            </Route>\n            <Route path=\"/events\">\n              {() => (\n                <Suspense fallback={<LoadingSpinner />}>\n                  <Events />\n                </Suspense>\n              )}\n            </Route>\n            <Route path=\"/events/:slug\">\n              {() => (\n                <Suspense fallback={<LoadingSpinner />}>\n                  <EventDetail />\n                </Suspense>\n              )}\n            </Route>\n            <Route path=\"/event-registration\">\n              {() => (\n                <Suspense fallback={<LoadingSpinner />}>\n                  <EventRegistration />\n                </Suspense>\n              )}\n            </Route>\n          \n          {/* Admin Routes */}\n          <Route path=\"/admin/login\">\n            {() => (\n              <Suspense fallback={<LoadingSpinner />}>\n                <AdminLogin />\n              </Suspense>\n            )}\n          </Route>\n          {/* Encrypted/Obfuscated Admin Portal */}\n          <Route path=\"/fpa-2k25-secure-portal\">\n            {() => (\n              <Suspense fallback={<LoadingSpinner />}>\n                <AdminLogin />\n              </Suspense>\n            )}\n          </Route>\n          <Route path=\"/admin/dashboard\">\n            {() => (\n              <ProtectedRoute requireAdmin>\n                <Suspense fallback={<LoadingSpinner />}>\n                  <AdminDashboard />\n                </Suspense>\n              </ProtectedRoute>\n            )}\n          </Route>\n          <Route path=\"/admin/blog\">\n            {() => (\n              <ProtectedRoute requireAdmin>\n                <Suspense fallback={<LoadingSpinner />}>\n                  <AdminBlogPosts />\n                </Suspense>\n              </ProtectedRoute>\n            )}\n          </Route>\n          <Route path=\"/admin/events\">\n            {() => (\n              <ProtectedRoute requireAdmin>\n                <Suspense fallback={<LoadingSpinner />}>\n                  <AdminEvents />\n                </Suspense>\n              </ProtectedRoute>\n            )}\n          </Route>\n          <Route path=\"/admin/donations\">\n            {() => (\n              <ProtectedRoute requireAdmin>\n                <Suspense fallback={<LoadingSpinner />}>\n                  <AdminDonations />\n                </Suspense>\n              </ProtectedRoute>\n            )}\n          </Route>\n          <Route path=\"/admin/users\">\n            {() => (\n              <ProtectedRoute requireAdmin>\n                <Suspense fallback={<LoadingSpinner />}>\n                  <AdminUsers />\n                </Suspense>\n              </ProtectedRoute>\n            )}\n          </Route>\n          <Route path=\"/admin/volunteers\">\n            {() => (\n              <ProtectedRoute requireAdmin>\n                <Suspense fallback={<LoadingSpinner />}>\n                  <AdminVolunteers />\n                </Suspense>\n              </ProtectedRoute>\n            )}\n          </Route>\n          <Route path=\"/admin/settings\">\n            {() => (\n              <ProtectedRoute requireAdmin>\n                <Suspense fallback={<LoadingSpinner />}>\n                  <AdminSettings />\n                </Suspense>\n              </ProtectedRoute>\n            )}\n          </Route>\n          <Route path=\"/admin/payments\">\n            {() => (\n              <ProtectedRoute requireAdmin>\n                <Suspense fallback={<LoadingSpinner />}>\n                  <AdminPayments />\n                </Suspense>\n              </ProtectedRoute>\n            )}\n          </Route>\n          <Route path=\"/admin/event-registrations\">\n            {() => (\n              <ProtectedRoute requireAdmin>\n                <Suspense fallback={<LoadingSpinner />}>\n                  <AdminEventRegistrations />\n                </Suspense>\n              </ProtectedRoute>\n            )}\n          </Route>\n          <Route>\n            {() => (\n              <Suspense fallback={<LoadingSpinner />}>\n                <NotFound />\n              </Suspense>\n            )}\n          </Route>\n        </Switch>\n      </main>\n      {!location.startsWith('/admin') && !location.startsWith('/fpa-2k25-secure-portal') && <Footer />}\n      {!location.startsWith('/admin') && !location.startsWith('/fpa-2k25-secure-portal') && <EventPopup />}\n    </>\n  );\n}\n\n\nfunction App() {\n  return <Router />;\n}\n\n\nexport default App;\n","size_bytes":9535},"client/src/index.css":{"content":"@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap');\n\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n:root {\n  /* Base colors */\n  --background: hsl(0, 0%, 100%);\n  --foreground: hsl(20, 14.3%, 4.1%);\n  --muted: hsl(60, 4.8%, 95.9%);\n  --muted-foreground: hsl(25, 5.3%, 44.7%);\n  --popover: hsl(0, 0%, 100%);\n  --popover-foreground: hsl(20, 14.3%, 4.1%);\n  --card: hsl(0, 0%, 100%);\n  --card-foreground: hsl(20, 14.3%, 4.1%);\n  --border: hsl(20, 5.9%, 90%);\n  --input: hsl(20, 5.9%, 90%);\n  --secondary: hsl(60, 4.8%, 95.9%);\n  --secondary-foreground: hsl(24, 9.8%, 10%);\n  --accent: hsl(60, 4.8%, 95.9%);\n  --accent-foreground: hsl(24, 9.8%, 10%);\n  --destructive: hsl(0, 84.2%, 60.2%);\n  --destructive-foreground: hsl(60, 9.1%, 97.8%);\n  --ring: hsl(20, 14.3%, 4.1%);\n  --radius: 0.5rem;\n\n  /* Golden theme (default) */\n  --primary: hsl(45, 86%, 58%);\n  --primary-foreground: hsl(24, 9.8%, 10%);\n  --golden-primary: hsl(45, 86%, 58%);\n  --golden-secondary: hsl(45, 75%, 35%);\n  --golden-accent: hsl(38, 77%, 45%);\n}\n\n[data-theme=\"blue\"] {\n  /* Blue theme */\n  --primary: hsl(207, 90%, 54%);\n  --primary-foreground: hsl(211, 100%, 99%);\n  --blue-primary: hsl(207, 90%, 54%);\n  --blue-secondary: hsl(207, 70%, 40%);\n  --blue-accent: hsl(174, 73%, 44%);\n}\n\n.dark {\n  --background: hsl(240, 10%, 3.9%);\n  --foreground: hsl(0, 0%, 98%);\n  --muted: hsl(240, 3.7%, 15.9%);\n  --muted-foreground: hsl(240, 5%, 64.9%);\n  --popover: hsl(240, 10%, 3.9%);\n  --popover-foreground: hsl(0, 0%, 98%);\n  --card: hsl(240, 10%, 3.9%);\n  --card-foreground: hsl(0, 0%, 98%);\n  --border: hsl(240, 3.7%, 15.9%);\n  --input: hsl(240, 3.7%, 15.9%);\n  --secondary: hsl(240, 3.7%, 15.9%);\n  --secondary-foreground: hsl(0, 0%, 98%);\n  --accent: hsl(240, 3.7%, 15.9%);\n  --accent-foreground: hsl(0, 0%, 98%);\n  --destructive: hsl(0, 62.8%, 30.6%);\n  --destructive-foreground: hsl(0, 0%, 98%);\n  --ring: hsl(240, 4.9%, 83.9%);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply bg-background text-foreground font-poppins antialiased;\n  }\n\n  html {\n    scroll-behavior: smooth;\n  }\n}\n\n@layer utilities {\n  .primary-bg {\n    background-color: var(--primary);\n  }\n  \n  .primary-text {\n    color: var(--primary);\n  }\n  \n  .secondary-bg {\n    background-color: hsl(var(--golden-secondary, var(--blue-secondary)));\n  }\n  \n  .accent-bg {\n    background-color: hsl(var(--golden-accent, var(--blue-accent)));\n  }\n  \n  .parallax-bg {\n    background-attachment: fixed;\n    background-position: center;\n    background-repeat: no-repeat;\n    background-size: cover;\n  }\n  \n  .scroll-animate {\n    opacity: 0;\n    transform: translateY(30px);\n    transition: all 0.6s ease-out;\n  }\n  \n  .scroll-animate.in-view {\n    opacity: 1;\n    transform: translateY(0);\n  }\n  \n  .card-hover {\n    transition: all 0.3s ease;\n  }\n  \n  .card-hover:hover {\n    transform: translateY(-8px);\n    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);\n  }\n  \n  .animate-fade-in {\n    animation: fadeIn 0.6s ease-out;\n  }\n  \n  .animate-slide-up {\n    animation: slideUp 0.8s ease-out;\n  }\n  \n  .animate-slide-in-left {\n    animation: slideInLeft 0.8s ease-out;\n  }\n  \n  .animate-slide-in-right {\n    animation: slideInRight 0.8s ease-out;\n  }\n  \n  .animate-scale-in {\n    animation: scaleIn 0.6s ease-out;\n  }\n  \n  .animate-counter {\n    animation: counter 2s ease-out;\n  }\n  \n  }\n\n  @keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n\n  @keyframes slideUp {\n    from { opacity: 0; transform: translateY(30px); }\n    to { opacity: 1; transform: translateY(0); }\n  }\n\n  @keyframes slideInLeft {\n    from { opacity: 0; transform: translateX(-30px); }\n    to { opacity: 1; transform: translateX(0); }\n  }\n\n  @keyframes slideInRight {\n    from { opacity: 0; transform: translateX(30px); }\n    to { opacity: 1; transform: translateX(0); }\n  }\n\n  @keyframes scaleIn {\n    from { opacity: 0; transform: scale(0.9); }\n    to { opacity: 1; transform: scale(1); }\n  }\n\n  @keyframes counter {\n    from { opacity: 0; transform: translateY(20px); }\n    to { opacity: 1; transform: translateY(0); }\n  }\n\n\n/* Mobile menu animation */\n.mobile-menu {\n  transform: translateX(-100%);\n  transition: transform 0.3s ease;\n}\n\n.mobile-menu.open {\n  transform: translateX(0);\n}\n\n/* Custom scrollbar */\n::-webkit-scrollbar {\n  width: 8px;\n}\n\n::-webkit-scrollbar-track {\n  background: hsl(var(--muted));\n}\n\n::-webkit-scrollbar-thumb {\n  background: hsl(var(--primary));\n  border-radius: 4px;\n}\n\n::-webkit-scrollbar-thumb:hover {\n  background: hsl(var(--primary) / 0.8);\n}\n/* Add this to the bottom of the file or in your global CSS if not already present */\n\n@media (max-width: 480px) {\n  .sm\\\\:flex-nowrap {\n    flex-direction: column !important;\n    gap: 0.5rem !important;\n  }\n}\n\n/* \n  Hide the default close button from the shadcn/ui SheetContent component.\n  We are using a custom close button inside the header of the sheet.\n  This selector targets the default button which is a direct child of the sheet content.\n  Using !important to ensure it overrides the component library's styles.\n*/\n[data-radix-dialog-content] > button {\n  display: none !important;\n}\n\n\n/* \n  Hide the default close button from the shadcn/ui SheetContent component.\n  We are using a custom close button inside the header of the sheet.\n  This selector targets the default button which is a direct child of the sheet content.\n*/\n[data-radix-dialog-content] > button {\n  display: none;\n}\n","size_bytes":5477},"client/src/main.tsx":{"content":"import React from \"react\";\nimport { createRoot } from \"react-dom/client\";\nimport { Helmet } from \"react-helmet\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport App from \"./App\";\nimport { ThemeProvider } from \"@/components/ThemeProvider\";\nimport PayPalProvider from \"@/components/PayPalProvider\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { queryClient } from \"./lib/queryClient\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(\n  <React.StrictMode>\n    <ThemeProvider>\n      <QueryClientProvider client={queryClient}>\n        <PayPalProvider>\n          <TooltipProvider>\n            <Helmet>\n              <html lang=\"en\" />\n            </Helmet>\n            <Toaster />\n            <App />\n          </TooltipProvider>\n        </PayPalProvider>\n      </QueryClientProvider>\n    </ThemeProvider>\n  </React.StrictMode>\n);\n","size_bytes":945},"server/config/paypal.ts":{"content":"export const paypalConfig = {\n    mode: process.env.PAYPAL_MODE || 'sandbox',\n    sandbox: {\n        clientId: process.env.PAYPAL_CLIENT_ID || '',\n        clientSecret: process.env.PAYPAL_CLIENT_SECRET || '',\n        webhookId: process.env.PAYPAL_WEBHOOK_ID || '',\n    },\n    production: {\n        clientId: process.env.PAYPAL_CLIENT_ID || '',\n        clientSecret: process.env.PAYPAL_CLIENT_SECRET || '',\n        webhookId: process.env.PAYPAL_WEBHOOK_ID || '',\n    },\n    apiVersion: 'v2',\n    endpoints: {\n        sandbox: 'https://api-m.sandbox.paypal.com',\n        production: 'https://api-m.paypal.com',\n    },\n    // Webhook events we want to handle\n    webhookEvents: [\n        'PAYMENT.CAPTURE.COMPLETED',\n        'PAYMENT.CAPTURE.DENIED',\n        'PAYMENT.CAPTURE.PENDING',\n        'PAYMENT.CAPTURE.REFUNDED',\n        'BILLING.SUBSCRIPTION.CREATED',\n        'BILLING.SUBSCRIPTION.CANCELLED',\n        'BILLING.SUBSCRIPTION.SUSPENDED',\n        'BILLING.SUBSCRIPTION.PAYMENT.FAILED',\n    ],\n}\n","size_bytes":999},"server/config/redis.ts":{"content":"import { createClient } from 'redis';\n\n// Create Redis client with secure configuration\nexport const redisClient = createClient({\n  url: process.env.REDIS_URL,\n  socket: process.env.NODE_ENV === 'production' ? {\n    tls: true,\n    rejectUnauthorized: true,\n  } : undefined\n});\n\n// Error handling\nredisClient.on('error', (err) => {\n  console.error('Redis Client Error:', err);\n  if (process.env.NODE_ENV === 'production') {\n    process.exit(1); // Only exit on Redis connection failure in production\n  }\n});\n\n// Connection handling\nredisClient.on('connect', () => {\n  console.log('Redis client connected');\n});\n\nredisClient.on('reconnecting', () => {\n  console.log('Redis client reconnecting');\n});\n\n// Connect to Redis\nredisClient.connect().catch(console.error);\n\n// Ensure Redis connection is properly closed on app termination\nprocess.on('SIGINT', () => {\n  redisClient.quit();\n  process.exit();\n});\n\nprocess.on('SIGTERM', () => {\n  redisClient.quit();\n  process.exit();\n});\n","size_bytes":977},"server/config/session.ts":{"content":"import session from 'express-session';\nimport { RedisStore } from 'connect-redis';\nimport { createClient } from 'redis';\nimport { randomBytes } from 'crypto';\n\n// Redis client setup\nconst redisClient = createClient({\n  url: process.env.REDIS_URL || 'redis://localhost:6379',\n  socket: {\n    tls: true,\n    rejectUnauthorized: true,\n  }\n});\n\nredisClient.on('error', (err) => console.error('Redis Client Error', err));\nredisClient.connect().catch(console.error);\n\nconst store = new RedisStore({\n  client: redisClient,\n  prefix: 'session:',\n});\n\nexport const sessionConfig = {\n  store,\n  secret: process.env.SESSION_SECRET || randomBytes(32).toString('hex'),\n  name: '_session', // More generic name\n  resave: false,\n  saveUninitialized: false,\n  rolling: true, // Reset expiry on every response\n  proxy: process.env.NODE_ENV === 'production', // Trust proxy in production\n  cookie: {\n    httpOnly: true,\n    secure: process.env.NODE_ENV === 'production', // Requires HTTPS in production\n    sameSite: 'strict' as const, // Strict SameSite policy\n    maxAge: 30 * 60 * 1000, // 30 minutes\n    path: '/',\n  },\n};\n\n// Session management utilities\nexport const regenerateSession = (req: any): Promise<void> => {\n  return new Promise((resolve, reject) => {\n    req.session.regenerate((err: Error) => {\n      if (err) reject(err);\n      resolve();\n    });\n  });\n};\n\nexport const destroySession = (req: any): Promise<void> => {\n  return new Promise((resolve, reject) => {\n    req.session.destroy((err: Error) => {\n      if (err) reject(err);\n      resolve();\n    });\n  });\n};\n\n// Type definitions for session data\ndeclare module 'express-session' {\n  interface SessionData {\n    userId: string;\n    userRole: string;\n    createdAt: Date;\n    lastActive: Date;\n  }\n}\n","size_bytes":1757},"server/middleware/auth.ts":{"content":"import { Request, Response, NextFunction } from 'express';\nimport jwt from 'jsonwebtoken';\nimport { db } from '../db';\nimport { users } from '../../shared/schema';\n\ninterface JWTPayload {\n  id: number;\n  role: 'admin' | 'volunteer' | 'donor';\n  username: string;\n  iat?: number;\n  exp?: number;\n}\n\n// Replace with your actual JWT secret - should be in environment variables\nconst JWT_SECRET = process.env.JWT_SECRET || 'changeme';\n\nexport const requireAuth = async (req: Request, res: Response, next: NextFunction) => {\n  const authHeader = req.headers.authorization;\n  if (!authHeader || !authHeader.startsWith('Bearer ')) {\n    return res.status(401).json({ error: 'Authentication required' });\n  }\n  const token = authHeader.split(' ')[1];\n  try {\n    const payload = jwt.verify(token, JWT_SECRET) as JWTPayload;\n    // Optionally, fetch user from DB if you want to attach full user info\n    // const user = await db.select().from(users).where(eq(users.id, payload.id));\n    req.user = payload;\n    next();\n  } catch (err) {\n    return res.status(401).json({ error: 'Invalid or expired token' });\n  }\n};\n\nexport const requireAdmin = async (req: Request, res: Response, next: NextFunction) => {\n  if (!req.user || req.user.role !== 'admin') {\n    return res.status(403).json({ error: 'Admin access required' });\n  }\n  next();\n};\n","size_bytes":1331},"server/middleware/csrf.ts":{"content":"import { Request, Response, NextFunction } from 'express';\nimport { doubleCsrf } from 'csrf-csrf';\nimport { randomBytes } from 'crypto';\n\nconst SECRET = process.env.CSRF_SECRET || randomBytes(32).toString('hex');\n\nconst csrfUtils = doubleCsrf({\n  getSecret: () => SECRET,\n  cookieName: 'x-csrf-token',\n  cookieOptions: {\n    httpOnly: true,\n    sameSite: process.env.NODE_ENV === 'production' ? 'strict' : 'lax',\n    secure: process.env.NODE_ENV === 'production',\n    path: '/',\n  },\n  size: 64,\n  ignoredMethods: ['GET', 'HEAD', 'OPTIONS'],\n  getCsrfTokenFromRequest: (req: Request) => {\n    // Check headers first\n    const headerToken = req.headers && req.headers['x-csrf-token'];\n    if (headerToken) return headerToken as string;\n    \n    // Then check body\n    const bodyToken = req.body && req.body.csrfToken;\n    if (bodyToken) return bodyToken;\n    \n    // Finally check query params\n    return req.query && req.query._csrf as string;\n  },\n  getSessionIdentifier: (req: Request) => req.sessionID || '',\n});\n\nexport const csrfProtection = csrfUtils.doubleCsrfProtection;\n\nexport const generateCsrfToken = (req: Request, res: Response, next: NextFunction) => {\n  const token = csrfUtils.generateCsrfToken(req, res);\n  res.setHeader('X-CSRF-Token', token);\n  next();\n};\n\n\nexport const validateCsrfToken = (req: Request, res: Response, next: NextFunction) => {\n  if (process.env.NODE_ENV === 'development') {\n    return next();\n  }\n  \n  try {\n    if (['POST', 'PUT', 'DELETE', 'PATCH'].includes(req.method)) {\n      csrfUtils.validateRequest(req);\n    }\n    next();\n  } catch (error) {\n    console.error('CSRF validation failed:', error);\n    res.status(403).json({ message: 'Invalid CSRF token' });\n  }\n};\n","size_bytes":1712},"server/middleware/error.ts":{"content":"import { Request, Response, NextFunction } from 'express';\nimport { ZodError } from 'zod';\nimport { logError } from '../utils/logger';\n\nexport const errorHandler = (err: Error, req: Request, res: Response, next: NextFunction) => {\n  // Log the error\n  logError('Error occurred', {\n    error: err.message,\n    stack: err.stack,\n    method: req.method,\n    path: req.path,\n    userId: req.session?.userId,\n    timestamp: new Date()\n  });\n\n  // Handle specific error types\n  if (err instanceof ZodError) {\n    return res.status(400).json({\n      message: 'Validation failed',\n      errors: err.errors\n    });\n  }\n\n  if (err.name === 'UnauthorizedError') {\n    return res.status(401).json({\n      message: 'Authentication required'\n    });\n  }\n\n  if (err.name === 'ForbiddenError') {\n    return res.status(403).json({\n      message: 'Access denied'\n    });\n  }\n\n  // Handle CSRF errors\n  if (err.name === 'CSRFTokenError') {\n    return res.status(403).json({\n      message: 'Invalid CSRF token'\n    });\n  }\n\n  // Handle file upload errors\n  if (err.name === 'MulterError') {\n    return res.status(400).json({\n      message: 'File upload error',\n      error: err.message\n    });\n  }\n\n  // Handle database errors\n  if (err.name === 'DatabaseError') {\n    return res.status(500).json({\n      message: 'Database error occurred'\n    });\n  }\n\n  // Default error response\n  const statusCode = res.statusCode !== 200 ? res.statusCode : 500;\n  res.status(statusCode).json({\n    message: process.env.NODE_ENV === 'production' \n      ? 'An unexpected error occurred' \n      : err.message\n  });\n};\n","size_bytes":1582},"server/middleware/rate-limit.ts":{"content":"import rateLimit from 'express-rate-limit';\nimport RedisStore from 'rate-limit-redis';\nimport { redisClient } from '../config/redis.js';\nimport { logSecurity } from '../utils/logger.js';\n\n\n// Base rate limit configuration\nconst baseConfig = {\n  windowMs: parseInt(process.env.RATE_LIMIT_WINDOW_MS || '900000'), // 15 minutes\n  max: parseInt(process.env.RATE_LIMIT_MAX_REQUESTS || '100'),\n  standardHeaders: true,\n  legacyHeaders: false,\n  store: new RedisStore({\n    sendCommand: (...args: string[]) => redisClient.sendCommand(args),\n    prefix: 'rate-limit:'\n  }),\n};\n\n// General API rate limiter\nexport const apiLimiter = rateLimit({\n  ...baseConfig,\n  skip: (req) => {\n    // Skip localhost requests, useful for internal health checks or when running behind a proxy\n    const ip = req.ip;\n    return ip === '127.0.0.1' || ip === '::1';\n  },\n  handler: (req, res) => {\n\n    logSecurity('Rate limit exceeded', {\n      type: 'RATE_LIMIT_EXCEEDED',\n      ip: req.ip,\n      path: req.path,\n      headers: req.headers,\n    });\n    res.status(429).json({\n      error: 'Too many requests, please try again later',\n      retryAfter: Math.ceil(baseConfig.windowMs / 1000),\n    });\n  },\n});\n\n// Stricter auth routes rate limiter\nexport const authLimiter = rateLimit({\n  ...baseConfig,\n  windowMs: parseInt(process.env.AUTH_RATE_LIMIT_WINDOW_MS || '900000'),\n  max: parseInt(process.env.AUTH_RATE_LIMIT_MAX || '5'),\n  skip: (req) => {\n    // Skip localhost requests\n    const ip = req.ip;\n    return ip === '127.0.0.1' || ip === '::1';\n  },\n  handler: (req, res) => {\n\n    logSecurity('Authentication rate limit exceeded', {\n      type: 'AUTH_RATE_LIMIT_EXCEEDED',\n      ip: req.ip,\n      path: req.path,\n      headers: req.headers,\n    });\n    res.status(429).json({\n      error: 'Too many authentication attempts, please try again later',\n      retryAfter: Math.ceil(baseConfig.windowMs / 1000),\n    });\n  },\n});\n\n// Specific endpoint rate limiters\nexport const createEndpointLimiter = (options: {\n  windowMs?: number;\n  max?: number;\n  message?: string;\n}) => {\n  return rateLimit({\n    ...baseConfig,\n    ...options,\n    handler: (req, res) => {\n      logSecurity('Endpoint rate limit exceeded', {\n        type: 'ENDPOINT_RATE_LIMIT_EXCEEDED',\n        ip: req.ip,\n        path: req.path,\n        headers: req.headers,\n      });\n      res.status(429).json({\n        error: options.message || 'Too many requests, please try again later',\n        retryAfter: Math.ceil((options.windowMs || baseConfig.windowMs) / 1000),\n      });\n    },\n  });\n};\n","size_bytes":2538},"server/middleware/security.ts":{"content":"import { Request, Response, NextFunction } from 'express';\nimport rateLimit from 'express-rate-limit';\nimport helmet from 'helmet';\nimport cors from 'cors';\nimport type { CorsOptions } from 'cors';\nimport { z } from 'zod';\nimport { doubleCsrf } from 'csrf-csrf';\nimport crypto from 'crypto';\n\n// Declare session properties\ndeclare module 'express-session' {\n  interface SessionData {\n    userId: string;\n    userRole: string;\n    id: string;\n    lastActive: Date;\n    ipAddress: string;\n  }\n}\n\n// Encryption configuration\nconst ENCRYPTION_KEY = process.env.ENCRYPTION_KEY || crypto.randomBytes(32);\nconst IV_LENGTH = 16;\n\n// Encryption utility for sensitive data\nexport function encrypt(text: string): string {\n  const iv = crypto.randomBytes(IV_LENGTH);\n  const cipher = crypto.createCipheriv('aes-256-cbc', Buffer.from(ENCRYPTION_KEY), iv);\n  let encrypted = cipher.update(text, 'utf8', 'hex');\n  encrypted += cipher.final('hex');\n  return `${iv.toString('hex')}:${encrypted}`;\n}\n\nexport function decrypt(text: string): string {\n  try {\n    const [ivHex, encryptedHex] = text.split(':');\n    if (!ivHex || !encryptedHex) {\n      throw new Error('Invalid encrypted text format');\n    }\n    const iv = Buffer.from(ivHex, 'hex');\n    const decipher = crypto.createDecipheriv('aes-256-cbc', Buffer.from(ENCRYPTION_KEY), iv);\n    let decrypted = decipher.update(encryptedHex, 'hex', 'utf8');\n    decrypted += decipher.final('utf8');\n    return decrypted;\n  } catch (error) {\n    throw new Error('Failed to decrypt data');\n  }\n}\n\n// CSRF Protection\nconst csrfUtils = doubleCsrf({\n  getSecret: () => process.env.CSRF_SECRET || 'your-secret-key',\n  cookieName: 'x-csrf-token',\n  getCsrfTokenFromRequest: (req: Request) => req.headers['x-csrf-token'] as string,\n  getSessionIdentifier: (req: Request) => req.session?.id || '',\n  size: 64,\n  ignoredMethods: ['GET', 'HEAD', 'OPTIONS'],\n  cookieOptions: {\n    httpOnly: true,\n    sameSite: 'strict',\n    secure: process.env.NODE_ENV === 'production',\n  },\n});\n\nexport const csrfMiddleware = (req: Request, res: Response, next: NextFunction) => {\n  try {\n    if (req.method === 'GET') {\n      const token = csrfUtils.generateCsrfToken(req, res);\n      // The cookie is automatically set by generateCsrfToken\n      next();\n    } else {\n      csrfUtils.validateRequest(req);\n      next();\n    }\n  } catch (error) {\n    res.status(403).json({ message: 'Invalid CSRF token' });\n  }\n};\n\n// Rate limiting middleware\nexport const rateLimiter = rateLimit({\n  windowMs: 15 * 60 * 1000, // 15 minutes\n  max: 100, // Limit each IP to 100 requests per windowMs\n  message: 'Too many requests from this IP, please try again later',\n});\n\n// Stricter auth route limiter\nexport const authLimiter = rateLimit({\n  windowMs: 15 * 60 * 1000, // 15 minutes\n  max: 5, // 5 attempts per window per IP\n  message: 'Too many login attempts, please try again later',\n  handler: (req: Request, res: Response) => {\n    console.error(`Auth rate limit exceeded for IP ${req.ip}`);\n    res.status(429).json({\n      message: 'Too many login attempts, please try again later',\n    });\n  },\n});\n\n// IP blocking middleware for suspicious activity\nconst blockedIPs = new Set<string>();\nconst suspiciousAttempts = new Map<string, number>();\n\nexport const ipFilter = (req: Request, res: Response, next: NextFunction) => {\n  const ip = req.ip || req.socket.remoteAddress;\n  \n  if (!ip) {\n    console.error('No IP address found in request');\n    return res.status(400).json({ message: 'Bad request' });\n  }\n\n  if (blockedIPs.has(ip)) {\n    console.error(`Blocked IP attempt: ${ip}`);\n    return res.status(403).json({ message: 'Access denied' });\n  }\n\n  // Track suspicious attempts\n  const attempts = suspiciousAttempts.get(ip) || 0;\n  if (attempts > 10) { // Block after 10 suspicious attempts\n    blockedIPs.add(ip);\n    suspiciousAttempts.delete(ip);\n    console.error(`IP blocked due to suspicious activity: ${ip}`);\n    return res.status(403).json({ message: 'Access denied' });\n  }\n\n  // Increment attempts\n  suspiciousAttempts.set(ip, attempts + 1);\n\n  next();\n};\n\n// CORS configuration\nconst corsOptions: CorsOptions = {\n  origin: process.env.NODE_ENV === 'production' \n    ? ['https://familypeace.org'] \n    : ['http://localhost:5173'],\n  credentials: true,\n  methods: ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS'],\n  allowedHeaders: ['Content-Type', 'Authorization', 'x-csrf-token'],\n  maxAge: 600 // 10 minutes\n};\n\nexport const corsMiddleware = cors(corsOptions);\n\n// Sanitize error messages\nexport function sanitizeError(error: any): { message: string; code?: string } {\n  // Only include error details in development\n  if (process.env.NODE_ENV === 'development') {\n    return {\n      message: error.message || 'An error occurred',\n      code: error.code\n    };\n  }\n  // Generic error message in production\n  return {\n    message: 'An error occurred',\n    code: 'INTERNAL_ERROR'\n  };\n}\n\n// Helmet configuration with CSP\nexport const helmetMiddleware = helmet({\n  contentSecurityPolicy: {\n    directives: {\n      defaultSrc: [\"'self'\"],\n      scriptSrc: [\"'self'\", \"'unsafe-inline'\", \"'unsafe-eval'\", \"https://www.paypal.com\", \"https://www.sandbox.paypal.com\"],\n      styleSrc: [\"'self'\", \"'unsafe-inline'\"],\n      imgSrc: [\"'self'\", \"data:\", \"https:\"],\n      connectSrc: [\"'self'\", \"https://api.paypal.com\", \"https://api.sandbox.paypal.com\"],\n      frameSrc: [\"'self'\", \"https://www.paypal.com\", \"https://www.sandbox.paypal.com\"],\n      upgradeInsecureRequests: [],\n    },\n  },\n  crossOriginEmbedderPolicy: false, // Required for PayPal SDK\n  crossOriginOpenerPolicy: { policy: \"same-origin-allow-popups\" }, // Required for PayPal popup\n  crossOriginResourcePolicy: { policy: \"cross-origin\" }, // Required for external resources\n});\n\n// Helmet security headers\nexport const securityHeaders = helmet({\n  contentSecurityPolicy: {\n    directives: {\n      defaultSrc: [\"'self'\"],\n      styleSrc: [\"'self'\", \"'unsafe-inline'\", 'https:'],\n      scriptSrc: [\"'self'\", \"'unsafe-inline'\", \"'unsafe-eval'\", 'https:'],\n      imgSrc: [\"'self'\", 'data:', 'https:'],\n      connectSrc: [\"'self'\", 'https:', 'wss:'],\n      fontSrc: [\"'self'\", 'https:', 'data:'],\n      objectSrc: [\"'none'\"],\n      mediaSrc: [\"'self'\"],\n      frameSrc: [\"'none'\"],\n    },\n  },\n});\n\n// Input validation middleware\nexport function validateInput<T extends z.ZodType>(schema: T) {\n  return async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      const validatedData = await schema.parseAsync({\n        body: req.body,\n        query: req.query,\n        params: req.params,\n      });\n\n      // Add validated data to request object\n      req.validatedData = validatedData;\n      next();\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        res.status(400).json({\n          message: 'Validation failed',\n          errors: error.errors,\n        });\n        return;\n      }\n      next(error);\n    }\n  };\n}\n\n// Session activity tracking middleware\nexport function trackSessionActivity(req: Request, res: Response, next: NextFunction) {\n  if (req.session) {\n    const currentTime = new Date();\n    const lastActive = req.session.lastActive || currentTime;\n    const currentIp = req.ip || req.socket.remoteAddress || 'unknown';\n    \n    // Check for session timeout (30 minutes)\n    const timeoutMs = 30 * 60 * 1000; // 30 minutes in milliseconds\n    if (currentTime.getTime() - lastActive.getTime() > timeoutMs) {\n      req.session.destroy((err) => {\n        if (err) console.error('Session destruction error:', err);\n      });\n      return res.status(440).json({ message: 'Session expired' });\n    }\n    \n    // The IP address check for session hijacking has been removed.\n    // In a production environment with load balancers or proxies, the internal IP can change\n    // between requests for the same user, causing false positives and invalidating sessions.\n    // if (req.session.ipAddress && req.session.ipAddress !== currentIp) {\n    //   console.error(`Potential session hijacking detected: IP changed from ${req.session.ipAddress} to ${currentIp}`);\n    //   req.session.destroy((err) => {\n    //     if (err) console.error('Session destruction error:', err);\n    //   });\n    //   return res.status(403).json({ message: 'Session invalidated' });\n    // }\n\n    \n    // Update session\n    req.session.lastActive = currentTime;\n    req.session.ipAddress = currentIp;\n  }\n  next();\n}\n\n// Authentication middleware\nexport function requireAuth(req: Request, res: Response, next: NextFunction) {\n  if (!req.session || !req.session.userId) {\n    res.status(401).json({ message: 'Unauthorized' });\n    return;\n  }\n  \n  // Verify session integrity\n  if (!req.session.userRole || !req.session.id) {\n    req.session.destroy((err) => {\n      if (err) console.error('Session destruction error:', err);\n    });\n    return res.status(401).json({ message: 'Invalid session' });\n  }\n  \n  next();\n}\n\n// Role-based authorization middleware\nexport function requireRole(roles: string[]) {\n  return (req: Request, res: Response, next: NextFunction) => {\n    if (!req.session || !req.session.userRole) {\n      res.status(401).json({ message: 'Unauthorized' });\n      return;\n    }\n\n    if (!roles.includes(req.session.userRole)) {\n      res.status(403).json({ message: 'Forbidden' });\n      return;\n    }\n\n    next();\n  };\n}\n\n// Error handling middleware\nexport function errorHandler(err: Error | any, req: Request, res: Response, next: NextFunction) {\n  console.error(err?.stack || err);\n\n  if (err?.name === 'UnauthorizedError') {\n    res.status(401).json({ message: 'Invalid token' });\n    return;\n  }\n\n  if (err?.code === 'EBADCSRFTOKEN') {\n    res.status(403).json({ message: 'Invalid CSRF token' });\n    return;\n  }\n\n  res.status(500).json({\n    message: process.env.NODE_ENV === 'production'\n      ? 'Internal server error'\n      : err?.message || 'An error occurred'\n  });\n}\n","size_bytes":9872},"server/middleware/session.ts":{"content":"import { Request, Response, NextFunction } from 'express';\nimport { sessionConfig, regenerateSession } from '../config/session.js';\n\nexport const sessionMiddleware = (req: Request, res: Response, next: NextFunction) => {\n  // Check if session is expired\n  if (req.session && req.session.lastActive) {\n    const now = new Date();\n    const lastActive = new Date(req.session.lastActive);\n    const timeDiff = now.getTime() - lastActive.getTime();\n    const maxAge = sessionConfig.cookie.maxAge as number;\n\n    if (timeDiff > maxAge) {\n      return res.status(401).json({ message: 'Session expired' });\n    }\n  }\n\n  // Update last active timestamp\n  if (req.session) {\n    req.session.lastActive = new Date();\n  }\n\n  next();\n};\n\nexport const secureSession = async (req: Request, res: Response, next: NextFunction) => {\n  try {\n    if (req.session.userId) {\n      // Regenerate session on authentication to prevent session fixation\n      await regenerateSession(req);\n      \n      // Set new session data\n      req.session.userId = req.session.userId;\n      req.session.userRole = req.session.userRole;\n      req.session.createdAt = new Date();\n      req.session.lastActive = new Date();\n    }\n    next();\n  } catch (error) {\n    console.error('Session security error:', error);\n    res.status(500).json({ message: 'Internal server error' });\n  }\n};\n\n// Activity logging middleware\nexport const sessionActivityLogger = (req: Request, res: Response, next: NextFunction) => {\n  const startTime = Date.now();\n  \n  res.on('finish', () => {\n    const duration = Date.now() - startTime;\n    if (req.session?.userId) {\n      console.log({\n        timestamp: new Date(),\n        userId: req.session.userId,\n        method: req.method,\n        path: req.path,\n        status: res.statusCode,\n        duration,\n        ip: req.ip\n      });\n    }\n  });\n\n  next();\n};\n","size_bytes":1852},"server/middleware/upload.ts":{"content":"import multer from 'multer';\nimport path from 'path';\nimport { Request, Response, NextFunction } from 'express';\nimport { randomBytes } from 'crypto';\nimport { lookup } from 'mime-types';\nimport { existsSync, mkdirSync } from 'fs';\nimport { sanitizeFilename } from '../utils/sanitize';\nimport winston from 'winston';\n\n// Configure logger\nconst logger = winston.createLogger({\n  level: 'info',\n  format: winston.format.json(),\n  transports: [\n    new winston.transports.File({ filename: 'logs/security.log', level: 'error' }),\n    new winston.transports.File({ filename: 'logs/uploads.log' })\n  ]\n});\n\n// Allowed file types and their corresponding MIME types\nconst ALLOWED_FILE_TYPES = new Map([\n  ['image', ['image/jpeg', 'image/png', 'image/gif', 'image/webp']],\n  ['document', ['application/pdf', 'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document']],\n  ['video', ['video/mp4', 'video/webm']]\n]);\n\n// File size limits (in bytes)\nconst FILE_SIZE_LIMITS = {\n  image: 5 * 1024 * 1024, // 5MB\n  document: 10 * 1024 * 1024, // 10MB\n  video: 50 * 1024 * 1024 // 50MB\n};\n\n// Ensure upload directory exists\nconst UPLOAD_DIR = path.join(process.cwd(), 'uploads');\nif (!existsSync(UPLOAD_DIR)) {\n  mkdirSync(UPLOAD_DIR, { recursive: true });\n}\n\n// Storage configuration\nconst storage = multer.diskStorage({\n  destination: (_req: Request, _file: Express.Multer.File, cb) => {\n    cb(null, UPLOAD_DIR);\n  },\n  filename: (_req: Request, file: Express.Multer.File, cb) => {\n    const fileExt = path.extname(file.originalname);\n    const randomName = randomBytes(16).toString('hex');\n    const sanitizedName = sanitizeFilename(path.basename(file.originalname, fileExt));\n    cb(null, `${sanitizedName}-${randomName}${fileExt}`);\n  }\n});\n\n// File filter\nconst fileFilter = (req: Request, file: Express.Multer.File, cb: multer.FileFilterCallback) => {\n  const fileType = getFileType(file.mimetype);\n  \n  if (!fileType) {\n    cb(new Error('File type not allowed'));\n    return;\n  }\n\n  // Check file size limit\n  const sizeLimit = FILE_SIZE_LIMITS[fileType];\n  if (parseInt(req.headers['content-length'] || '0') > sizeLimit) {\n    cb(new Error(`File size exceeds limit of ${sizeLimit / (1024 * 1024)}MB`));\n    return;\n  }\n\n  // Verify mime type\n  const allowedMimes = ALLOWED_FILE_TYPES.get(fileType);\n  if (!allowedMimes?.includes(file.mimetype)) {\n    cb(new Error('Invalid file type'));\n    return;\n  }\n\n  // Additional security checks\n  if (!isValidFile(file)) {\n    cb(new Error('Invalid file'));\n    return;\n  }\n\n  cb(null, true);\n};\n\n// Determine file type from mime type\nconst getFileType = (mimeType: string): keyof typeof FILE_SIZE_LIMITS | null => {\n  const types = Array.from(ALLOWED_FILE_TYPES.keys());\n  for (const type of types) {\n    const mimes = ALLOWED_FILE_TYPES.get(type);\n    if (mimes && mimes.includes(mimeType)) {\n      return type as keyof typeof FILE_SIZE_LIMITS;\n    }\n  }\n  return null;\n};\n\n// Additional file validation\nconst isValidFile = (file: Express.Multer.File): boolean => {\n  // Check for double extensions\n  const filename = file.originalname.toLowerCase();\n  if (filename.indexOf('.') !== filename.lastIndexOf('.')) {\n    return false;\n  }\n\n  // Check actual mime type matches claimed type\n  const actualMime = lookup(file.originalname);\n  if (!actualMime || actualMime !== file.mimetype) {\n    return false;\n  }\n\n  return true;\n};\n\n// Import winston logger\nimport { logSecurity, logError } from '../utils/logger';\n\n// Configure multer\nexport const upload = multer({\n  storage,\n  fileFilter,\n  limits: {\n    fileSize: Math.max(...Object.values(FILE_SIZE_LIMITS)),\n    files: 1 // Maximum number of files per request\n  }\n});\n\n// Error handling middleware for uploads\nexport const handleUploadError = (err: any, req: Request, res: Response, next: NextFunction) => {\n  if (err instanceof multer.MulterError) {\n    logger.error('Upload error', {\n      type: 'UPLOAD_ERROR',\n      error: err.code,\n      ip: req.ip,\n      filename: err.field\n    });\n\n    if (err.code === 'LIMIT_FILE_SIZE') {\n      res.status(413).json({\n        error: 'File too large',\n        maxSize: Math.max(...Object.values(FILE_SIZE_LIMITS))\n      });\n      return;\n    }\n\n    res.status(400).json({\n      error: 'File upload error',\n      code: err.code\n    });\n    return;\n  }\n\n  logger.error('Upload error', {\n    message: 'Unknown upload error',\n    error: err.message,\n    ip: req.ip\n  });\n\n  res.status(500).json({\n    error: 'File upload failed'\n  });\n};\n","size_bytes":4500},"server/middleware/validation.ts":{"content":"import { Request, Response, NextFunction } from 'express';\nimport { z } from 'zod';\n\nexport const gatewayStatusSchema = z.object({\n  gateway: z.enum(['paypal', 'mpesa']),\n  status: z.enum(['live', 'maintenance'])\n});\n\nexport const paypalConfigSchema = z.object({\n  clientId: z.string().min(1, 'Client ID is required'),\n  clientSecret: z.string().min(1, 'Client Secret is required'),\n  mode: z.enum(['sandbox', 'live']),\n  merchantId: z.string().optional(),\n});\n\nexport const mpesaConfigSchema = z.object({\n  consumerKey: z.string().min(1, 'Consumer Key is required'),\n  consumerSecret: z.string().min(1, 'Consumer Secret is required'),\n  shortCode: z.string().min(1, 'Short Code is required'),\n  passKey: z.string().min(1, 'Pass Key is required'),\n  callbackUrl: z.string().url('Must be a valid URL'),\n});\n\nexport const validateGatewayStatus = (req: Request, res: Response, next: NextFunction) => {\n  try {\n    gatewayStatusSchema.parse(req.body);\n    next();\n  } catch (error) {\n    res.status(400).json({ error: 'Invalid gateway status data', details: error });\n  }\n};\n\nexport const validateGatewayConfig = (req: Request, res: Response, next: NextFunction) => {\n  try {\n    const gateway = req.params.gateway;\n    const schema = gateway === 'paypal' ? paypalConfigSchema : mpesaConfigSchema;\n    schema.parse(req.body);\n    next();\n  } catch (error) {\n    res.status(400).json({ error: 'Invalid gateway configuration', details: error });\n  }\n};\n\n// XSS protection middleware\nexport const xssSanitizer = (req: Request, res: Response, next: NextFunction) => {\n  const sanitize = (obj: any): any => {\n    if (!obj) return obj;\n    \n    if (typeof obj === 'string') {\n      return obj\n        .replace(/</g, '&lt;')\n        .replace(/>/g, '&gt;')\n        .replace(/\"/g, '&quot;')\n        .replace(/'/g, '&#x27;')\n        .replace(/\\//g, '&#x2F;');\n    }\n    \n    if (typeof obj === 'object') {\n      return Object.keys(obj).reduce((acc: any, key) => {\n        acc[key] = sanitize(obj[key]);\n        return acc;\n      }, Array.isArray(obj) ? [] : {});\n    }\n    \n    return obj;\n  };\n\n  req.body = sanitize(req.body);\n  req.query = sanitize(req.query);\n  req.params = sanitize(req.params);\n  next();\n};\n\n// SQL injection protection middleware\nexport const sqlInjectionCheck = (req: Request, res: Response, next: NextFunction) => {\n  const checkValue = (value: string): boolean => {\n    const sqlKeywords = [\n      'SELECT', 'INSERT', 'UPDATE', 'DELETE', 'DROP', \n      'UNION', 'OR', 'AND', '--', ';', '1=1'\n    ];\n    const valueUpper = value.toUpperCase();\n    return !sqlKeywords.some(keyword => valueUpper.includes(keyword));\n  };\n\n  const check = (obj: any): boolean => {\n    if (!obj) return true;\n    if (typeof obj === 'string') return checkValue(obj);\n    if (typeof obj === 'object') {\n      return Object.values(obj).every(value => check(value));\n    }\n    return true;\n  };\n\n  if (!check(req.body) || !check(req.query) || !check(req.params)) {\n    return res.status(400).json({ error: 'Potential SQL injection detected' });\n  }\n\n  next();\n};\n","size_bytes":3051},"server/routes/2fa.ts":{"content":"import { Router } from 'express';\nimport { TwoFactorAuthService } from '../services/2fa';\n\nconst router = Router();\n\n// Generate 2FA secret and QR code\nrouter.post('/2fa/setup', async (req, res) => {\n  try {\n    const { userId } = req.body;\n    const result = await TwoFactorAuthService.generateSecret(userId);\n    res.json(result);\n  } catch (error) {\n    console.error('Error setting up 2FA:', error);\n    res.status(500).json({ error: 'Failed to set up 2FA' });\n  }\n});\n\n// Verify 2FA token during setup\nrouter.post('/2fa/verify', async (req, res) => {\n  try {\n    const { userId, token } = req.body;\n    const isValid = await TwoFactorAuthService.verifyToken(userId, token);\n    res.json({ success: isValid });\n  } catch (error) {\n    console.error('Error verifying 2FA token:', error);\n    res.status(500).json({ error: 'Failed to verify 2FA token' });\n  }\n});\n\n// Disable 2FA\nrouter.post('/2fa/disable', async (req, res) => {\n  try {\n    const { userId } = req.body;\n    await TwoFactorAuthService.disable(userId);\n    res.json({ success: true });\n  } catch (error) {\n    console.error('Error disabling 2FA:', error);\n    res.status(500).json({ error: 'Failed to disable 2FA' });\n  }\n});\n\n// Validate 2FA during login\nrouter.post('/2fa/validate', async (req, res) => {\n  try {\n    const { userId, token } = req.body;\n    const isValid = await TwoFactorAuthService.validateLogin(userId, token);\n    res.json({ success: isValid });\n  } catch (error) {\n    console.error('Error validating 2FA:', error);\n    res.status(500).json({ error: 'Failed to validate 2FA' });\n  }\n});\n\nexport default router;\n","size_bytes":1602},"server/routes/admin.ts":{"content":"import express, { Request, Response, NextFunction } from 'express';\nimport bcrypt from 'bcryptjs';\nimport rateLimit from 'express-rate-limit';\nimport { sql, desc } from 'drizzle-orm';\n\nimport { db } from '../db.js';\nimport { donations, eventRegistrations, users, blogPosts, events, volunteerApplications } from '../../shared/schema';\nimport type { PaymentGatewayStatus, PaymentGatewayConfig } from '../types/payment.js';\nimport { paymentGatewayStatus } from '../schema/payment_gateway_status.js';\nimport { paymentGatewayConfig } from '../schema/payment_gateway_config.js';\nimport { requireAuth, requireAdmin } from '../middleware/auth.js';\nimport { encrypt, decrypt, sanitizeError, EncryptionError } from '../utils/encryption.js';\nimport { logAuditEvent, logSecurityEvent } from '../utils/logger.js';\n\n// Rate limiting to prevent brute force attacks\nconst apiLimiter = rateLimit({\n  windowMs: 15 * 60 * 1000, // 15 minutes\n  max: 100 // limit each IP to 100 requests per windowMs\n});\n\nconst router = express.Router();\n\n// Apply authentication to all admin routes\nrouter.use(requireAuth);\nrouter.use(requireAdmin);\nrouter.use(apiLimiter);\n\n// Get dashboard stats\nrouter.get('/dashboard', async (req: Request, res: Response, next: NextFunction) => {\n  try {\n    const [\n      donationStats,\n      eventStats,\n      userStats,\n      gatewayStatus,\n      recentTransactions\n    ] = await Promise.all([\n      db.select({\n        total: sql`sum(amount)`,\n        count: sql`count(*)`\n      }).from(donations),\n      db.select({\n        total: sql`count(*)`\n      }).from(events),\n      db.select({\n        total: sql`count(*)`\n      }).from(users),\n      db.select().from(paymentGatewayStatus),\n      db.select()\n        .from(donations)\n        .orderBy(desc(donations.createdAt))\n        .limit(10)\n    ]);\n\n    res.json({\n      stats: {\n        totalDonations: donationStats[0].total || 0,\n        donationCount: donationStats[0].count || 0,\n        totalEvents: eventStats[0].total || 0,\n        totalUsers: userStats[0].total || 0\n      },\n      gatewayStatus,\n      recentTransactions\n    });\n  } catch (error) {\n    console.error('Error fetching dashboard data:', error);\n    res.status(500).json({ error: 'Failed to fetch dashboard data' });\n  }\n});\n\n// Get payment gateway statuses\nrouter.get('/payment-gateway-status', async (req: Request, res: Response, next: NextFunction) => {\n  try {\n    const statuses = await db.select().from(paymentGatewayStatus);\n    res.json(statuses);\n  } catch (err) {\n    console.error('Error fetching gateway statuses:', err);\n    res.status(500).json({ error: 'Failed to fetch gateway statuses' });\n  }\n});\n\n// Update payment gateway status\nrouter.post('/payment-gateway-status', async (req: Request, res: Response, next: NextFunction) => {\n  const { gateway, status } = req.body as PaymentGatewayStatus;\n  if (!gateway || !['live', 'maintenance'].includes(status)) {\n    return res.status(400).json({ error: 'Invalid gateway or status' });\n  }\n  try {\n    await db\n      .update(paymentGatewayStatus)\n      .set({ status, updatedAt: new Date() })\n      .where(sql`${paymentGatewayStatus.gateway} = ${gateway}`);\n    res.json({ success: true });\n  } catch (err) {\n    console.error('Error updating gateway status:', err);\n    res.status(500).json({ error: 'Failed to update gateway status' });\n  }\n});\n\n// Get payment gateway configurations\nrouter.get('/payment-gateway-config', async (req: Request, res: Response, next: NextFunction) => {\n  try {\n    const configs = await db.select().from(paymentGatewayConfig);\n    res.json(configs);\n  } catch (err) {\n    console.error('Error fetching gateway configs:', err);\n    res.status(500).json({ error: 'Failed to fetch gateway configurations' });\n  }\n});\n\n// Update payment gateway configuration\nrouter.post('/payment-gateway-config', async (req: Request, res: Response, next: NextFunction) => {\n  const body = req.body as { gateway?: string, config?: any };\n  const { gateway, config } = body;\n  if (!gateway || !config) {\n    return res.status(400).json({ error: 'Invalid gateway or configuration' });\n  }\n  try {\n    await db\n      .insert(paymentGatewayConfig)\n      .values({ gateway, config: JSON.stringify(config) })\n      .onConflictDoUpdate({\n        target: paymentGatewayConfig.gateway,\n        set: { config: JSON.stringify(config), updatedAt: new Date() }\n      });\n    res.json({ success: true });\n  } catch (err) {\n    console.error('Error updating gateway config:', err);\n    res.status(500).json({ error: 'Failed to update gateway configuration' });\n  }\n});\n\n// Get PayPal payments for admin\ninterface PaymentQuery {\n  startDate?: string;\n  endDate?: string;\n}\n\nrouter.get('/payments/paypal', async (req: Request, res: Response, next: NextFunction) => {\n  try {\n    const { startDate, endDate } = req.query as { startDate?: string, endDate?: string };\n    let whereClause = sql`${donations.paymentMethod} = 'paypal'`;\n    if (startDate && endDate) {\n      whereClause = sql`${donations.paymentMethod} = 'paypal' AND ${donations.createdAt} >= ${new Date(startDate)} AND ${donations.createdAt} <= ${new Date(endDate)}`;\n    } else if (startDate) {\n      whereClause = sql`${donations.paymentMethod} = 'paypal' AND ${donations.createdAt} >= ${new Date(startDate)}`;\n    } else if (endDate) {\n      whereClause = sql`${donations.paymentMethod} = 'paypal' AND ${donations.createdAt} <= ${new Date(endDate)}`;\n    }\n    const paypalPayments = await db\n      .select({\n        id: donations.id,\n        orderId: donations.transactionId,\n        amount: donations.amount,\n        status: donations.status,\n        createdAt: donations.createdAt,\n        payer: sql`CASE WHEN ${donations.anonymous} = true THEN 'Anonymous' ELSE COALESCE(${users.fullName}, 'Unknown') END`,\n      })\n      .from(donations)\n      .leftJoin(users, sql`${donations.userId} = ${users.id}`)\n      .where(whereClause)\n      .orderBy(desc(donations.createdAt));\n    res.json(paypalPayments);\n  } catch (err) {\n    console.error('Error fetching PayPal payments:', err);\n    res.status(500).json({ error: 'Failed to fetch PayPal payments' });\n  }\n});\n\n// Get M-Pesa payments for admin\nrouter.get('/payments/mpesa', async (req: Request, res: Response, next: NextFunction) => {\n  try {\n    const { startDate, endDate } = req.query as { startDate?: string, endDate?: string };\n    let whereClause = sql`${donations.paymentMethod} = 'mpesa'`;\n    if (startDate && endDate) {\n      whereClause = sql`${donations.paymentMethod} = 'mpesa' AND ${donations.createdAt} >= ${new Date(startDate)} AND ${donations.createdAt} <= ${new Date(endDate)}`;\n    } else if (startDate) {\n      whereClause = sql`${donations.paymentMethod} = 'mpesa' AND ${donations.createdAt} >= ${new Date(startDate)}`;\n    } else if (endDate) {\n      whereClause = sql`${donations.paymentMethod} = 'mpesa' AND ${donations.createdAt} <= ${new Date(endDate)}`;\n    }\n    const mpesaPayments = await db\n      .select({\n        id: donations.id,\n        transactionId: donations.transactionId,\n        amount: donations.amount,\n        status: donations.status,\n        createdAt: donations.createdAt,\n        payer: sql`CASE WHEN ${donations.anonymous} = true THEN 'Anonymous' ELSE COALESCE(${users.fullName}, 'Unknown') END`,\n      })\n      .from(donations)\n      .leftJoin(users, sql`${donations.userId} = ${users.id}`)\n      .where(whereClause)\n      .orderBy(desc(donations.createdAt));\n    res.json(mpesaPayments);\n  } catch (err) {\n    console.error('Error fetching M-Pesa payments:', err);\n    res.status(500).json({ error: 'Failed to fetch M-Pesa payments' });\n  }\n});\n\n// User management routes\nrouter.get('/users', async (req: Request, res: Response, next: NextFunction) => {\n  try {\n    const usersList = await db.select().from(users);\n    res.json(usersList);\n  } catch (err) {\n    console.error('Error fetching users:', err);\n    res.status(500).json({ error: 'Failed to fetch users' });\n  }\n});\n\nrouter.post('/users', async (req: Request, res: Response, next: NextFunction) => {\n  try {\n    const body = req.body as { username?: string, password?: string, email?: string, role?: 'admin' | 'volunteer' | 'donor', fullName?: string };\n    const { username, password, email, role, fullName } = body;\n    if (!username || !password || !email || !fullName) {\n      return res.status(400).json({ error: 'Missing required fields' });\n    }\n    // Check for existing user\n    const existing = await db.select().from(users).where(sql`${users.username} = ${username}`);\n    if (existing.length > 0) {\n      return res.status(409).json({ error: 'Username already exists' });\n    }\n    const allowedRoles = ['admin', 'volunteer', 'donor'] as const;\n    const safeRole = allowedRoles.includes(role as any) ? role : 'donor';\n    const hashedPassword = await bcrypt.hash(password, 10);\n    const [newUser] = await db.insert(users).values({\n      username,\n      password: hashedPassword,\n      email,\n      role: safeRole,\n      fullName,\n      active: true\n    }).returning();\n    res.status(201).json(newUser);\n  } catch (err) {\n    console.error('Error creating user:', err);\n    res.status(500).json({ error: 'Failed to create user' });\n  }\n});\n\n// All donations route\nrouter.get('/donations', async (req: Request, res: Response, next: NextFunction) => {\n  try {\n    const donationsList = await db\n      .select({\n        id: donations.id,\n        amount: donations.amount,\n        status: donations.status,\n        paymentMethod: donations.paymentMethod,\n        createdAt: donations.createdAt,\n        message: donations.message,\n        anonymous: donations.anonymous,\n        userId: donations.userId,\n        donorName: sql<string>`CASE \n          WHEN ${donations.anonymous} = true THEN 'Anonymous'\n          WHEN ${users.fullName} IS NOT NULL THEN ${users.fullName}\n          ELSE 'Unknown'\n        END`,\n        donorEmail: sql<string>`CASE \n          WHEN ${donations.anonymous} = true THEN 'anonymous@example.com'\n          WHEN ${users.email} IS NOT NULL THEN ${users.email}\n          ELSE 'unknown@example.com'\n        END`\n      })\n      .from(donations)\n      .leftJoin(users, sql`${donations.userId} = ${users.id}`)\n      .orderBy(desc(donations.createdAt));\n    res.json(donationsList);\n  } catch (err) {\n    console.error('Error fetching donations:', err);\n    res.status(500).json({ error: 'Failed to fetch donations' });\n  }\n});\n\n// Get all blog posts\nrouter.get('/blog-posts', async (req: Request, res: Response, next: NextFunction) => {\n  try {\n    const posts = await db\n      .select({\n        id: blogPosts.id,\n        title: blogPosts.title,\n        slug: blogPosts.slug,\n        excerpt: blogPosts.excerpt,\n        content: blogPosts.content,\n        category: blogPosts.category,\n        imageUrl: blogPosts.imageUrl,\n        publishedAt: blogPosts.publishedAt\n      })\n      .from(blogPosts)\n      .orderBy(desc(blogPosts.publishedAt));\n    res.json(posts);\n  } catch (err) {\n    console.error('Error fetching blog posts:', err);\n    res.status(500).json({ error: 'Failed to fetch blog posts' });\n  }\n});\n\n// Get all events\nrouter.get('/events', async (req: Request, res: Response, next: NextFunction) => {\n  try {\n    const eventsList = await db\n      .select({\n        id: events.id,\n        name: events.name,\n        description: events.description,\n        date: events.date,\n        endDate: events.endDate,\n        fee: events.fee,\n        location: events.location,\n        maxParticipants: events.maxParticipants,\n        active: events.active,\n        imageUrl: events.imageUrl,\n        createdAt: events.createdAt\n      })\n      .from(events)\n      .orderBy(desc(events.date));\n    // Get registration counts for each event\n    const registrationCounts = await db\n      .select({\n        eventId: eventRegistrations.eventId,\n        count: sql<number>`count(*)`\n      })\n      .from(eventRegistrations)\n      .groupBy(eventRegistrations.eventId);\n    const eventsWithRegistrations = eventsList.map(event => ({\n      ...event,\n      registrations: registrationCounts.find(r => r.eventId === event.id)?.count ?? 0\n    }));\n    res.json(eventsWithRegistrations);\n  } catch (err) {\n    console.error('Error fetching events:', err);\n    res.status(500).json({ error: 'Failed to fetch events' });\n  }\n});\n\n// Get all volunteer applications\nrouter.get('/volunteer-applications', async (req: Request, res: Response, next: NextFunction) => {\n  try {\n    const applications = await db\n      .select({\n        id: volunteerApplications.id,\n        name: volunteerApplications.name,\n        email: volunteerApplications.email,\n        phone: volunteerApplications.phone,\n        program: volunteerApplications.program,\n        experience: volunteerApplications.experience,\n        availability: volunteerApplications.availability,\n        message: volunteerApplications.message,\n        submittedAt: volunteerApplications.submittedAt\n      })\n      .from(volunteerApplications)\n      .orderBy(desc(volunteerApplications.submittedAt));\n    res.json(applications);\n  } catch (err) {\n    console.error('Error fetching volunteer applications:', err);\n    res.status(500).json({ error: 'Failed to fetch volunteer applications' });\n  }\n});\n\n// Get all event registrations (optionally filtered by eventId)\nrouter.get('/event-registrations', async (req: Request, res: Response, next: NextFunction) => {\n  try {\n    const { eventId } = req.query as { eventId?: string };\n    let registrations;\n    if (eventId) {\n      registrations = await db\n        .select()\n        .from(eventRegistrations)\n        .where(sql`${eventRegistrations.eventId} = ${Number(eventId)}`)\n        .orderBy(desc(eventRegistrations.createdAt));\n    } else {\n      registrations = await db\n        .select()\n        .from(eventRegistrations)\n        .orderBy(desc(eventRegistrations.createdAt));\n    }\n    res.json(registrations);\n  } catch (err) {\n    console.error('Error fetching event registrations:', err);\n    res.status(500).json({ error: 'Failed to fetch event registrations' });\n  }\n});\n\nexport default router;\n","size_bytes":14039},"server/routes/auth.ts":{"content":"import { Router } from 'express';\nimport bcrypt from 'bcrypt';\nimport jwt from 'jsonwebtoken';\nimport { db } from '../db';\nimport { users } from '../../shared/schema';\nimport { eq } from 'drizzle-orm';\n\nconst router = Router();\n\nrouter.post('/login', async (req, res) => {\n  try {\n    const { username, password } = req.body;\n\n    // Find user by username\n    const [user] = await db.select().from(users).where(eq(users.username, username));\n\n    if (!user) {\n      return res.status(401).json({ message: 'Invalid username or password' });\n    }\n\n    // Verify password\n    const validPassword = await bcrypt.compare(password, user.password);\n    if (!validPassword) {\n      return res.status(401).json({ message: 'Invalid username or password' });\n    }\n\n    // Generate JWT token\n    const token = jwt.sign(\n      { id: user.id, role: user.role, username: user.username },\n      process.env.JWT_SECRET || 'changeme',\n      { expiresIn: '24h' }\n    );\n\n    // Send response\n    res.json({\n      token,\n      user: {\n        id: user.id,\n        username: user.username,\n        role: user.role,\n      },\n    });\n  } catch (error) {\n    console.error('Login error:', error);\n    res.status(500).json({ message: 'Internal server error' });\n  }\n});\n\n// Logout endpoint is now a no-op for JWT auth (client should just delete token)\nrouter.post('/logout', (req, res) => {\n  res.json({ message: 'Logged out successfully' });\n});\n\nexport default router;\n","size_bytes":1448},"server/routes/currency.ts":{"content":"import { Router } from 'express';\nimport { currencyConverter } from '../utils/currency';\n\nconst router = Router();\n\nrouter.post('/convert', async (req, res) => {\n  try {\n    const { amount, from, to } = req.body;\n    \n    if (!amount || !from || !to) {\n      return res.status(400).json({ \n        error: 'Missing required parameters: amount, from, to' \n      });\n    }\n\n    const convertedAmount = await currencyConverter.convert(\n      Number(amount),\n      from,\n      to\n    );\n\n    res.json({ amount: convertedAmount });\n  } catch (error) {\n    console.error('Currency conversion failed:', error);\n    res.status(500).json({ error: 'Failed to convert currency' });\n  }\n});\n\nexport default router;\n","size_bytes":702},"server/routes/events.ts":{"content":"import { Router } from 'express';\nimport { db } from '../db.js';\nimport { events, blogPosts } from '../../shared/schema';\nimport { asc, desc, gte, and, eq } from 'drizzle-orm';\n\n\nconst router = Router();\n\nrouter.get('/latest', async (req, res, next) => {\n  try {\n    const latestEvent = await db\n      .select()\n      .from(events)\n      .where(gte(events.date, new Date()))\n      .orderBy(desc(events.date))\n      .limit(1);\n\n    if (latestEvent.length === 0) {\n      return res.status(404).json({ message: 'No upcoming events found' });\n    }\n\n    res.json(latestEvent[0]);\n  } catch (error) {\n    next(error);\n  }\n});\n\nrouter.get('/featured-active', async (req, res, next) => {\n  try {\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n\n    const featuredEvents = await db\n      .select()\n      .from(events)\n      .innerJoin(blogPosts, eq(events.name, blogPosts.title))\n      .where(\n        and(\n          eq(blogPosts.featured, true),\n          eq(events.active, true),\n          gte(events.endDate, today)\n        )\n      )\n      .orderBy(asc(events.date));\n\n\n    res.json(featuredEvents);\n  } catch (error) {\n    console.error('Error fetching featured active events:', error);\n    next(error);\n  }\n});\n\n\nexport default router;\n","size_bytes":1247},"server/routes/media.ts":{"content":"import { Router, Request } from 'express';\nimport multer, { FileFilterCallback } from 'multer';\nimport path from 'path';\nimport fs from 'fs/promises';\nimport { db } from '../db';\nimport { media } from '../../shared/schema';\nimport { eq } from 'drizzle-orm';\n\nconst router = Router();\n\n// Configure multer for file uploads\nconst storage = multer.diskStorage({\n  destination: (_req: Request, _file: Express.Multer.File, cb: (error: Error | null, destination: string) => void) => {\n    cb(null, 'uploads/');\n  },\n  filename: (_req: Request, file: Express.Multer.File, cb: (error: Error | null, filename: string) => void) => {\n    const uniqueSuffix = Date.now() + '-' + Math.round(Math.random() * 1E9);\n    cb(null, file.fieldname + '-' + uniqueSuffix + path.extname(file.originalname));\n  }\n});\n\nconst upload = multer({\n  storage,\n  limits: {\n    fileSize: 10 * 1024 * 1024, // 10MB limit\n  },\n  fileFilter: (_req: Request, file: Express.Multer.File, cb: FileFilterCallback) => {\n    // Allowed file types\n    const allowedTypes = [\n      'image/jpeg',\n      'image/png',\n      'image/gif',\n      'application/pdf',\n      'application/msword',\n      'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n      'video/mp4',\n      'video/quicktime'\n    ];\n\n    if (allowedTypes.includes(file.mimetype)) {\n      cb(null, true);\n    } else {\n      cb(new Error('Invalid file type'));\n    }\n  }\n});\n\n// Get all media files\nrouter.get('/', async (req, res) => {\n  try {\n    const mediaFiles = await db.select().from(media);\n    res.json(mediaFiles);\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to fetch media files' });\n  }\n});\n\n// Upload media file\nrouter.post('/upload', upload.single('file'), async (req: Request & { file?: Express.Multer.File }, res) => {\n  try {\n    if (!req.file) {\n      return res.status(400).json({ error: 'No file uploaded' });\n    }\n\n    const fileType = req.file.mimetype.startsWith('image/')\n      ? 'image'\n      : req.file.mimetype.startsWith('video/')\n      ? 'video'\n      : 'document';\n\n    const [mediaFile] = await db\n      .insert(media)\n      .values({\n        title: req.file.originalname,\n        url: `/uploads/${req.file.filename}`,\n        type: fileType,\n        size: req.file.size\n      })\n      .returning();\n\n    res.status(201).json(mediaFile);\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to upload file' });\n  }\n});\n\n// Delete media file\nrouter.delete('/:id', async (req, res) => {\n  try {\n    const { id } = req.params;\n    \n    const [mediaFile] = await db\n      .select()\n      .from(media)\n      .where(eq(media.id, parseInt(id)));\n\n    if (!mediaFile) {\n      return res.status(404).json({ error: 'Media file not found' });\n    }\n\n    // Delete file from filesystem\n    const filePath = path.join(process.cwd(), mediaFile.url);\n    await fs.unlink(filePath);\n\n    // Delete database record\n    await db.delete(media).where(eq(media.id, parseInt(id)));\n\n    res.json({ message: 'Media file deleted successfully' });\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to delete media file' });\n  }\n});\n\nexport default router;\n","size_bytes":3140},"server/routes/mpesa.ts":{"content":"import express, { Router } from 'express';\nimport type { Request, Response } from 'express';\nimport MPesaService from '../services/mpesa';\nimport { z } from 'zod';\nimport { currencyConverter } from '../utils/currency';\n\ninterface MpesaRequestBody {\n  phoneNumber: string;\n  amount: string | number;\n  currency?: string;\n  reference?: string;\n  description?: string;\n}\n\ninterface MpesaStatus {\n  status: string;\n  message: string;\n}\n\nconst router = Router();\n\n// Initialize M-Pesa service\nconst mpesaService = new MPesaService({\n  consumerKey: process.env.MPESA_CONSUMER_KEY || '',\n  consumerSecret: process.env.MPESA_CONSUMER_SECRET || '',\n  shortCode: process.env.MPESA_SHORTCODE || '',\n  passKey: process.env.MPESA_PASSKEY || '',\n  callbackUrl: process.env.MPESA_CALLBACK_URL || '',\n  env: (process.env.MPESA_ENV || 'sandbox') as 'sandbox' | 'production'\n});\n\n// Validation schemas\nconst initiatePaymentSchema = z.object({\n  phoneNumber: z.string()\n    .regex(/^(?:254|\\+254|0)?([17]\\d{8})$/, 'Invalid phone number format'),\n  amount: z.number().min(1),\n  reference: z.string().optional(),\n  description: z.string().optional()\n});\n\n// Route to initiate STK push\nrouter.post('/initiate', async (req: Request<{}, {}, MpesaRequestBody>, res: Response) => {\n  try {\n    console.log('M-Pesa payment initiation request:', req.body);\n    \n    const { phoneNumber, amount, currency = 'KES', reference, description } = req.body;\n    \n    // Validate the input\n    const validatedData = initiatePaymentSchema.parse({\n      phoneNumber,\n      amount: Number(amount),\n      reference,\n      description\n    });\n\n    console.log('Validated M-Pesa data:', validatedData);\n\n    // Use the amount directly - client should send the final KES amount\n    // This prevents double conversion issues\n    const amountInKES = Math.round(Number(amount));\n\n    console.log('Initiating M-Pesa STK push with amount:', amountInKES);\n\n    // Use the amount for the M-Pesa payment\n    const response = await mpesaService.initiateSTKPush(\n      phoneNumber,\n      amountInKES,\n      reference || 'Donation',\n      description || 'Donation to Family Peace Association'\n    );\n\n    console.log('M-Pesa STK push response:', response);\n\n    res.json(response);\n  } catch (error) {\n    console.error('Error initiating M-Pesa payment:', error);\n    res.status(400).json({ \n      error: error instanceof z.ZodError \n        ? error.errors \n        : 'Failed to initiate payment' \n    });\n  }\n});\n\n// Route to check transaction status\nrouter.get('/status/:checkoutRequestId', async (req: Request<{ checkoutRequestId: string }>, res: Response) => {\n  try {\n    const { checkoutRequestId } = req.params;\n    \n    if (!checkoutRequestId) {\n      return res.status(400).json({ \n        error: 'Missing checkoutRequestId parameter'\n      });\n    }\n\n    const status = await mpesaService.checkTransactionStatus(checkoutRequestId);\n    \n    // Always return a consistent response structure\n    res.json({\n      status: status.status,\n      message: status.message,\n      checkoutRequestId: checkoutRequestId\n    });\n  } catch (error) {\n    console.error('Error checking M-Pesa status:', error);\n    // Return a structured error response\n    res.status(500).json({ \n      status: 'ERROR',\n      message: 'Failed to check payment status',\n      checkoutRequestId: req.params.checkoutRequestId\n    });\n  }\n});\n\n// Callback URL for M-Pesa\nrouter.post('/callback', async (req: Request, res: Response) => {\n  try {\n    // Log the callback data\n    console.log('M-Pesa callback received:', req.body);\n\n    // TODO: Implement callback handling\n    // - Verify the transaction\n    // - Update the database\n    // - Send confirmation to user\n\n    // Send acknowledgment to M-Pesa\n    res.json({ ResultCode: 0, ResultDesc: \"Success\" });\n  } catch (error) {\n    console.error('Error processing M-Pesa callback:', error);\n    res.status(500).json({ error: 'Failed to process callback' });\n  }\n});\n\nexport default router;\n","size_bytes":3963},"server/routes/paypal-api.ts":{"content":"import express from 'express';\nimport { paypalService } from '../services/paypal';\n\nconst router = express.Router();\n\nrouter.post('/create-order', async (req, res) => {\n    try {\n        const { amount, currency, description } = req.body;\n\n        if (!amount) {\n            return res.status(400).json({ error: 'Amount is required' });\n        }\n\n        const order = await paypalService.createOrder(\n            amount,\n            currency,\n            description\n        );\n\n        res.json(order);\n    } catch (error) {\n        console.error('Failed to create PayPal order:', error);\n        res.status(500).json({ error: 'Failed to create order' });\n    }\n});\n\nrouter.post('/capture-order/:orderId', async (req, res) => {\n    try {\n        const { orderId } = req.params;\n        const capturedOrder = await paypalService.captureOrder(orderId);\n        res.json(capturedOrder);\n    } catch (error) {\n        console.error('Failed to capture PayPal order:', error);\n        res.status(500).json({ error: 'Failed to capture order' });\n    }\n});\n\nexport default router;\n","size_bytes":1076},"server/routes/paypal-webhook.ts":{"content":"import express from 'express';\nimport { paypalService } from '../services/paypal';\n\nconst router = express.Router();\n\nrouter.post('/webhook', async (req, res) => {\n    try {\n        // Verify the webhook signature\n        const signature = await paypalService.verifyWebhookSignature(\n            req.headers as Record<string, string>,\n            JSON.stringify(req.body)\n        );\n\n        if (!signature) {\n            console.error('Invalid PayPal webhook signature');\n            return res.status(400).json({ error: 'Invalid signature' });\n        }\n\n        // Handle the webhook event\n        await paypalService.handleWebhookEvent(req.body);\n        \n        res.status(200).json({ status: 'success' });\n    } catch (error) {\n        console.error('PayPal webhook error:', error);\n        res.status(500).json({ error: 'Internal server error' });\n    }\n});\n\nexport default router;\n","size_bytes":890},"server/routes/paypal.ts":{"content":"import { Router } from 'express';\nimport { PayPalService } from '../services/payment-gateways/paypal';\n\nconst router = Router();\n\n// Create a new order for one-time payment\nrouter.post('/create-order', async (req, res) => {\n  try {\n    const { amount, currency = 'USD' } = req.body;\n    \n    console.log('PayPal create-order request:', { amount, currency });\n    \n    if (!amount || isNaN(parseFloat(amount))) {\n      return res.status(400).json({ \n        error: 'Invalid amount provided',\n        details: 'Amount must be a valid number greater than 0'\n      });\n    }\n\n    const numericAmount = parseFloat(amount);\n    if (numericAmount <= 0) {\n      return res.status(400).json({ \n        error: 'Invalid amount',\n        details: 'Amount must be greater than 0'\n      });\n    }\n\n    const formattedAmount = numericAmount.toFixed(2);\n    console.log('Creating PayPal order for amount:', formattedAmount);\n\n    const order = await PayPalService.getInstance().createOrder({\n      amount: formattedAmount,\n      currency: currency\n    });\n\n    console.log('PayPal order created:', order);\n    res.json(order);\n  } catch (error) {\n    console.error('PayPal create-order error:', error);\n    res.status(500).json({ \n      error: 'Failed to create PayPal order',\n      details: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\n// Capture an order after approval\nrouter.post('/capture-order', async (req, res) => {\n  try {\n    const { orderId } = req.body;\n    \n    console.log('PayPal capture-order request:', { orderId });\n    \n    if (!orderId) {\n      return res.status(400).json({ \n        error: 'Order ID is required',\n        details: 'Please provide a valid PayPal order ID'\n      });\n    }\n\n    // Use the PayPalService's captureOrder method, which handles the token internally\n    const captureData = await PayPalService.getInstance().captureOrder(orderId);\n    res.json(captureData);\n  } catch (error) {\n    console.error('PayPal capture-order error:', error);\n    res.status(500).json({ \n      error: 'Failed to capture PayPal payment',\n      details: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\n// Verify a payment\nrouter.get('/verify-payment/:id', async (req, res) => {\n  try {\n    const { id } = req.params;\n    const result = await PayPalService.getInstance().verifyPayment(id);\n    res.json(result);\n  } catch (error) {\n    console.error('Failed to verify payment:', error);\n    res.status(500).json({ error: 'Failed to verify payment' });\n  }\n});\n\n// Handle PayPal webhooks\nrouter.post('/webhook', async (req, res) => {\n  try {\n    await PayPalService.getInstance().handleWebhook({\n      body: req.body,\n      headers: req.headers\n    });\n    res.sendStatus(200);\n  } catch (error) {\n    console.error('Webhook handling failed:', error);\n    res.sendStatus(500);\n  }\n});\n\n// Debug endpoint to check PayPal configuration\nrouter.get('/debug', async (req, res) => {\n  try {\n    const config = {\n      apiUrl: process.env.PAYPAL_API_URL,\n      clientId: process.env.PAYPAL_CLIENT_ID ? '✓ Configured' : '✗ Missing',\n      clientSecret: process.env.PAYPAL_CLIENT_SECRET ? '✓ Configured' : '✗ Missing',\n      environment: process.env.PAYPAL_API_URL?.includes('sandbox') ? 'Sandbox' : 'Production'\n    };\n    \n    // Remove direct token check, just return config and timestamp\n    res.json({\n      config,\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    res.status(500).json({ \n      error: 'Debug check failed',\n      details: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\n// Test endpoint to verify PayPal is working\nrouter.get('/test', async (req, res) => {\n  try {\n    console.log('PayPal test endpoint hit');\n    res.json({ \n      message: 'PayPal routes are working',\n      endpoints: [\n        'POST /api/paypal/create-order',\n        'POST /api/paypal/capture-order',\n        'GET /api/paypal/debug',\n        'GET /api/paypal/test'\n      ],\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    res.status(500).json({ \n      error: 'Test failed',\n      details: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\nexport default router;\n","size_bytes":4212},"server/schema/media.ts":{"content":"import { pgTable, serial, text, integer, timestamp } from 'drizzle-orm/pg-core';\n\nexport const media = pgTable('media', {\n  id: serial('id').primaryKey(),\n  filename: text('filename').notNull(),\n  url: text('url').notNull(),\n  type: text('type', { enum: ['image', 'document', 'video'] }).notNull(),\n  size: integer('size').notNull(),\n  uploadedAt: timestamp('uploaded_at').notNull().defaultNow(),\n});\n","size_bytes":401},"server/schema/payment_gateway_config.ts":{"content":"import { pgTable, text, timestamp, varchar } from 'drizzle-orm/pg-core';\n\nexport const paymentGatewayConfig = pgTable('payment_gateway_config', {\n  gateway: varchar('gateway', { length: 50 }).primaryKey(),\n  config: text('config').notNull(), // JSON string containing gateway-specific configuration\n  updatedAt: timestamp('updated_at').defaultNow(),\n});\n","size_bytes":354},"server/schema/payment_gateway_status.ts":{"content":"import { pgTable, serial, varchar, timestamp } from 'drizzle-orm/pg-core';\n\nexport const paymentGatewayStatus = pgTable('payment_gateway_status', {\n  id: serial('id').primaryKey(),\n  gateway: varchar('gateway', { length: 32 }).notNull().unique(),\n  status: varchar('status', { length: 16 }).notNull().default('live'),\n  updatedAt: timestamp('updated_at').defaultNow(),\n});\n","size_bytes":373},"server/scripts/seed-events.ts":{"content":"","size_bytes":0},"server/services/2fa.ts":{"content":"import speakeasy from 'speakeasy';\nimport QRCode from 'qrcode';\nimport { db } from '../db';\nimport { users } from '../../shared/schema';\nimport { eq } from 'drizzle-orm';\n\nexport class TwoFactorAuthService {\n  static async generateSecret(userId: number) {\n    const secret = speakeasy.generateSecret({\n      name: 'Family Peace Association',\n      issuer: 'FPA Kenya'\n    });\n\n    await db.update(users)\n      .set({ \n        twoFactorSecret: secret.base32,\n        twoFactorEnabled: false \n      })\n      .where(eq(users.id, userId));\n\n    const qrCodeUrl = await QRCode.toDataURL(secret.otpauth_url || '');\n\n    return {\n      secret: secret.base32,\n      qrCode: qrCodeUrl\n    };\n  }\n\n  static async verifyToken(userId: number, token: string) {\n    const user = await db.query.users.findFirst({\n      where: eq(users.id, userId)\n    });\n\n    if (!user?.twoFactorSecret) {\n      throw new Error('2FA not set up for this user');\n    }\n\n    const verified = speakeasy.totp.verify({\n      secret: user.twoFactorSecret,\n      encoding: 'base32',\n      token\n    });\n\n    if (verified) {\n      // If this is the first verification, enable 2FA\n      if (!user.twoFactorEnabled) {\n        await db.update(users)\n          .set({ twoFactorEnabled: true })\n          .where(eq(users.id, userId));\n      }\n      return true;\n    }\n\n    return false;\n  }\n\n  static async validateLogin(userId: number, token: string) {\n    const user = await db.query.users.findFirst({\n      where: eq(users.id, userId)\n    });\n\n    if (!user?.twoFactorEnabled) {\n      return true; // 2FA not required\n    }\n\n    return this.verifyToken(userId, token);\n  }\n\n  static async disable(userId: number) {\n    await db.update(users)\n      .set({ \n        twoFactorEnabled: false,\n        twoFactorSecret: null \n      })\n      .where(eq(users.id, userId));\n  }\n}\n","size_bytes":1829},"server/services/mpesa.ts":{"content":"import axios from 'axios';\nimport { Buffer } from 'buffer';\n\ninterface MPesaConfig {\n  consumerKey: string;\n  consumerSecret: string;\n  shortCode: string;\n  passKey: string;\n  callbackUrl: string;\n  env: 'sandbox' | 'production';\n}\n\nclass MPesaService {\n  private config: MPesaConfig;\n  private baseUrl: string;\n  private auth = '';\n  private authExpiry: number = 0;\n\n  constructor(config: MPesaConfig) {\n    this.config = config;\n    this.baseUrl = config.env === 'sandbox' \n      ? 'https://sandbox.safaricom.co.ke' \n      : 'https://api.safaricom.co.ke';\n  }\n\n  private async getAuthToken(): Promise<string> {\n    // Check if we have a valid cached token\n    if (this.auth && Date.now() < this.authExpiry) {\n      return this.auth;\n    }\n\n    const auth = Buffer.from(`${this.config.consumerKey}:${this.config.consumerSecret}`).toString('base64');\n    \n    try {\n      const response = await axios.get(`${this.baseUrl}/oauth/v1/generate?grant_type=client_credentials`, {\n        headers: {\n          Authorization: `Basic ${auth}`,\n        },\n      });\n\n      const token = response.data.access_token;\n      if (!token) {\n        throw new Error('No access token received from M-Pesa');\n      }\n\n      this.auth = token;\n      // Token expires in 1 hour, we'll cache it for 59 minutes\n      this.authExpiry = Date.now() + (59 * 60 * 1000);\n      \n      return this.auth;\n    } catch (error) {\n      console.error('Error getting M-Pesa auth token:', error);\n      throw new Error('Failed to get M-Pesa authentication token');\n    }\n  }\n\n  private generateTimestamp(): string {\n    const date = new Date();\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, '0');\n    const day = String(date.getDate()).padStart(2, '0');\n    const hour = String(date.getHours()).padStart(2, '0');\n    const minute = String(date.getMinutes()).padStart(2, '0');\n    const second = String(date.getSeconds()).padStart(2, '0');\n    \n    return `${year}${month}${day}${hour}${minute}${second}`;\n  }\n\n  private generatePassword(timestamp: string): string {\n    const str = this.config.shortCode + this.config.passKey + timestamp;\n    return Buffer.from(str).toString('base64');\n  }\n\n  public async initiateSTKPush(phoneNumber: string, amount: number, accountReference: string, transactionDesc: string) {\n    try {\n      const token = await this.getAuthToken();\n      const timestamp = this.generateTimestamp();\n      const password = this.generatePassword(timestamp);\n\n      // Format phone number (remove leading 0 or +254)\n      const formattedPhone = phoneNumber.replace(/^(0|\\+254)/, '254');\n\n      const response = await axios.post(\n        `${this.baseUrl}/mpesa/stkpush/v1/processrequest`,\n        {\n          BusinessShortCode: this.config.shortCode,\n          Password: password,\n          Timestamp: timestamp,\n          TransactionType: \"CustomerPayBillOnline\",\n          Amount: amount,\n          PartyA: formattedPhone,\n          PartyB: this.config.shortCode,\n          PhoneNumber: formattedPhone,\n          CallBackURL: this.config.callbackUrl,\n          AccountReference: accountReference,\n          TransactionDesc: transactionDesc\n        },\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n            'Content-Type': 'application/json',\n          },\n        }\n      );\n\n      return response.data;\n    } catch (error) {\n      console.error('Error initiating STK push:', error);\n      throw new Error('Failed to initiate M-Pesa payment');\n    }\n  }\n\n  public async checkTransactionStatus(checkoutRequestId: string) {\n    try {\n      const token = await this.getAuthToken();\n      const timestamp = this.generateTimestamp();\n      const password = this.generatePassword(timestamp);\n\n      const response = await axios.post(\n        `${this.baseUrl}/mpesa/stkpushquery/v1/query`,\n        {\n          BusinessShortCode: this.config.shortCode,\n          Password: password,\n          Timestamp: timestamp,\n          CheckoutRequestID: checkoutRequestId\n        },\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n            'Content-Type': 'application/json',\n          },\n        }\n      );\n\n      return response.data;\n    } catch (error) {\n      console.error('Error checking transaction status:', error);\n      throw new Error('Failed to check M-Pesa transaction status');\n    }\n  }\n}\n\nexport default MPesaService;\n","size_bytes":4413},"server/services/paypal.ts":{"content":"import { paypalConfig } from '../config/paypal';\n\ninterface PayPalOrder {\n    id: string;\n    status: string;\n    intent: 'CAPTURE';\n    purchase_units: Array<{\n        reference_id?: string;\n        amount: {\n            currency_code: string;\n            value: string;\n        };\n        description?: string;\n    }>;\n    create_time: string;\n    links: Array<{\n        href: string;\n        rel: string;\n        method: string;\n    }>;\n}\n\ninterface PayPalError {\n    name: string;\n    message: string;\n    debug_id: string;\n    details?: Array<{\n        field: string;\n        value: string;\n        issue: string;\n    }>;\n}\n\nclass PayPalService {\n    private accessToken: string | null = null;\n    private readonly apiBase: string;\n\n    constructor() {\n        this.apiBase = process.env.PAYPAL_MODE === 'sandbox' \n            ? paypalConfig.endpoints.sandbox \n            : paypalConfig.endpoints.production;\n    }\n\n    private async getAccessToken(): Promise<string> {\n        if (this.accessToken) return this.accessToken;\n\n        if (!process.env.PAYPAL_SANDBOX_CLIENT_ID || !process.env.PAYPAL_SANDBOX_SECRET) {\n            throw new Error('PayPal credentials are not configured');\n        }\n\n        const auth = Buffer.from(\n            `${process.env.PAYPAL_SANDBOX_CLIENT_ID}:${process.env.PAYPAL_SANDBOX_SECRET}`\n        ).toString('base64');\n\n        const response = await fetch(`${this.apiBase}/v1/oauth2/token`, {\n            method: 'POST',\n            headers: {\n                'Authorization': `Basic ${auth}`,\n                'Content-Type': 'application/x-www-form-urlencoded',\n            },\n            body: 'grant_type=client_credentials'\n        });\n\n        if (!response.ok) {\n            const error = await response.json();\n            throw new Error(`PayPal authentication failed: ${error.error_description}`);\n        }\n\n        const data = await response.json();\n        if (!data.access_token) {\n            throw new Error('Failed to obtain PayPal access token');\n        }\n        this.accessToken = data.access_token;\n        return data.access_token;\n    }\n\n    async createOrder(amount: number, currency = 'USD', description?: string): Promise<PayPalOrder> {\n        const accessToken = await this.getAccessToken();\n\n        const response = await fetch(`${this.apiBase}/v2/checkout/orders`, {\n            method: 'POST',\n            headers: {\n                'Authorization': `Bearer ${accessToken}`,\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                intent: 'CAPTURE',\n                purchase_units: [{\n                    amount: {\n                        currency_code: currency,\n                        value: amount.toString(),\n                    },\n                    description\n                }]\n            })\n        });\n\n        if (!response.ok) {\n            const error = await response.json() as PayPalError;\n            throw new Error(`Failed to create order: ${error.message}`);\n        }\n\n        return response.json();\n    }\n\n    async captureOrder(orderId: string): Promise<PayPalOrder> {\n        const accessToken = await this.getAccessToken();\n\n        const response = await fetch(`${this.apiBase}/v2/checkout/orders/${orderId}/capture`, {\n            method: 'POST',\n            headers: {\n                'Authorization': `Bearer ${accessToken}`,\n                'Content-Type': 'application/json',\n            }\n        });\n\n        if (!response.ok) {\n            const error = await response.json() as PayPalError;\n            throw new Error(`Failed to capture order: ${error.message}`);\n        }\n\n        return response.json();\n    }\n\n    async verifyWebhookSignature(\n        headers: Record<string, string>,\n        body: string\n    ): Promise<boolean> {\n        const accessToken = await this.getAccessToken();\n\n        const response = await fetch(`${this.apiBase}/v1/notifications/verify-webhook-signature`, {\n            method: 'POST',\n            headers: {\n                'Authorization': `Bearer ${accessToken}`,\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                auth_algo: headers['paypal-auth-algo'],\n                cert_url: headers['paypal-cert-url'],\n                transmission_id: headers['paypal-transmission-id'],\n                transmission_sig: headers['paypal-transmission-sig'],\n                transmission_time: headers['paypal-transmission-time'],\n                webhook_id: process.env.PAYPAL_SANDBOX_WEBHOOK_ID,\n                webhook_event: JSON.parse(body)\n            })\n        });\n\n        if (!response.ok) {\n            const error = await response.json() as PayPalError;\n            throw new Error(`Failed to verify webhook signature: ${error.message}`);\n        }\n\n        const result = await response.json();\n        return result.verification_status === 'SUCCESS';\n    }\n\n    async handleWebhookEvent(event: any): Promise<void> {\n        // Handle different webhook event types\n        switch (event.event_type) {\n            case 'PAYMENT.CAPTURE.COMPLETED':\n                await this.handlePaymentCompleted(event);\n                break;\n            case 'PAYMENT.CAPTURE.DENIED':\n                await this.handlePaymentDenied(event);\n                break;\n            case 'PAYMENT.CAPTURE.PENDING':\n                await this.handlePaymentPending(event);\n                break;\n            default:\n                console.log(`Unhandled PayPal webhook event: ${event.event_type}`);\n        }\n    }\n\n    private async handlePaymentCompleted(event: any): Promise<void> {\n        const { id, status, amount } = event.resource;\n        // TODO: Update payment status in database\n        // TODO: Send confirmation email\n        console.log(`Payment ${id} completed: ${amount.value} ${amount.currency_code}`);\n    }\n\n    private async handlePaymentDenied(event: any): Promise<void> {\n        const { id } = event.resource;\n        // TODO: Update payment status in database\n        // TODO: Send failure notification\n        console.log(`Payment ${id} denied`);\n    }\n\n    private async handlePaymentPending(event: any): Promise<void> {\n        const { id, status } = event.resource;\n        // TODO: Update payment status in database\n        console.log(`Payment ${id} pending: ${status}`);\n    }\n}\n\n// Export singleton instance\nexport const paypalService = new PayPalService();\n","size_bytes":6452},"server/tests/paypal-sandbox.ts":{"content":"import { paypalConfig } from '../config/paypal';\n\ninterface PayPalOrder {\n    intent: 'CAPTURE';\n    purchase_units: Array<{\n        amount: {\n            currency_code: string;\n            value: string;\n        };\n    }>;\n}\n\ninterface PayPalAccessToken {\n    access_token: string;\n    token_type: string;\n    expires_in: number;\n}\n\nexport class PayPalSandboxTester {\n    private static readonly SANDBOX_URL = paypalConfig.endpoints.sandbox;\n    private static accessToken: string | null = null;\n\n    private static async getAccessToken(): Promise<string> {\n        if (this.accessToken) return this.accessToken;\n\n        console.log('Environment variables:');\n        console.log('PAYPAL_MODE:', process.env.PAYPAL_MODE);\n        console.log('PAYPAL_SANDBOX_CLIENT_ID:', process.env.PAYPAL_SANDBOX_CLIENT_ID);\n        console.log('PAYPAL_SANDBOX_SECRET:', process.env.PAYPAL_SANDBOX_SECRET?.substring(0, 5) + '...');\n\n        const auth = Buffer.from(\n            `${process.env.PAYPAL_SANDBOX_CLIENT_ID}:${process.env.PAYPAL_SANDBOX_SECRET}`\n        ).toString('base64');\n\n        const response = await fetch(`${this.SANDBOX_URL}/v1/oauth2/token`, {\n            method: 'POST',\n            headers: {\n                'Authorization': `Basic ${auth}`,\n                'Content-Type': 'application/x-www-form-urlencoded',\n            },\n            body: 'grant_type=client_credentials'\n        });\n\n        if (!response.ok) {\n            throw new Error(`Failed to get access token: ${response.statusText}`);\n        }\n\n        const data = await response.json() as PayPalAccessToken;\n        this.accessToken = data.access_token;\n        return this.accessToken;\n    }\n\n    static async createTestOrder(amount: number, currency = 'USD'): Promise<PayPalOrder> {\n        const accessToken = await this.getAccessToken();\n\n        const response = await fetch(`${this.SANDBOX_URL}/v2/checkout/orders`, {\n            method: 'POST',\n            headers: {\n                'Authorization': `Bearer ${accessToken}`,\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                intent: 'CAPTURE',\n                purchase_units: [{\n                    amount: {\n                        currency_code: currency,\n                        value: amount.toString(),\n                    }\n                }]\n            })\n        });\n\n        if (!response.ok) {\n            throw new Error(`Failed to create order: ${response.statusText}`);\n        }\n\n        return response.json();\n    }\n}\n","size_bytes":2542},"server/tests/paypal-test-helper.ts":{"content":"import { paypalConfig } from '../config/paypal';\n\ninterface PayPalOrder {\n    intent: 'CAPTURE';\n    purchase_units: Array<{\n        amount: {\n            currency_code: string;\n            value: string;\n        };\n    }>;\n    id?: string;\n    status?: string;\n}\n\ninterface PayPalAccessToken {\n    access_token: string;\n    token_type: string;\n    expires_in: number;\n}\n\nexport class PayPalTestHelper {\n    private static readonly SANDBOX_URL = paypalConfig.endpoints.sandbox;\n    private static accessToken: string | null = null;\n    private static async delay(ms: number): Promise<void> {\n        return new Promise(resolve => setTimeout(resolve, ms));\n    }\n\n    private static async getAccessToken(): Promise<string> {\n        if (this.accessToken) return this.accessToken;\n\n        const auth = Buffer.from(\n            `${process.env.PAYPAL_SANDBOX_CLIENT_ID}:${process.env.PAYPAL_SANDBOX_SECRET}`\n        ).toString('base64');\n\n        const response = await fetch(`${this.SANDBOX_URL}/v1/oauth2/token`, {\n            method: 'POST',\n            headers: {\n                'Authorization': `Basic ${auth}`,\n                'Content-Type': 'application/x-www-form-urlencoded',\n            },\n            body: 'grant_type=client_credentials'\n        });\n\n        if (!response.ok) {\n            throw new Error(`Failed to get access token: ${response.statusText}`);\n        }\n\n        const data = await response.json() as PayPalAccessToken;\n        this.accessToken = data.access_token;\n        return this.accessToken;\n    }\n\n    /**\n     * Creates a test order for sandbox testing using actual PayPal API\n     */\n    static createTestOrder = async (amount: number, currency = 'USD'): Promise<PayPalOrder> => {\n        const accessToken = await this.getAccessToken();\n\n        const response = await fetch(`${this.SANDBOX_URL}/v2/checkout/orders`, {\n            method: 'POST',\n            headers: {\n                'Authorization': `Bearer ${accessToken}`,\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                intent: 'CAPTURE',\n                purchase_units: [{\n                    amount: {\n                        currency_code: currency,\n                        value: amount.toString(),\n                    }\n                }]\n            })\n        });\n\n        if (!response.ok) {\n            throw new Error(`Failed to create order: ${response.statusText}`);\n        }\n\n        return response.json();\n    };\n\n    /**\n     * Creates a test subscription for sandbox testing\n     */\n    /**\n     * Creates a test subscription using actual PayPal API\n     */\n    static createTestSubscription = async (planId: string) => {\n        const accessToken = await this.getAccessToken();\n\n        const response = await fetch(`${this.SANDBOX_URL}/v1/billing/subscriptions`, {\n            method: 'POST',\n            headers: {\n                'Authorization': `Bearer ${accessToken}`,\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                plan_id: planId,\n                subscriber: {\n                    name: {\n                        given_name: 'John',\n                        surname: 'Doe'\n                    },\n                    email_address: 'johndoe@personal.example.com'\n                },\n                application_context: {\n                    brand_name: 'Compassion Clone',\n                    locale: 'en-US',\n                    shipping_preference: 'NO_SHIPPING',\n                    user_action: 'SUBSCRIBE_NOW',\n                    payment_method: {\n                        payer_selected: 'PAYPAL',\n                        payee_preferred: 'IMMEDIATE_PAYMENT_REQUIRED'\n                    }\n                }\n            })\n        });\n\n        if (!response.ok) {\n            throw new Error(`Failed to create subscription: ${response.statusText}`);\n        }\n\n        return response.json();\n    };\n\n    /**\n     * Simulates webhook events using PayPal's webhook simulator\n     */\n    static simulateWebhookEvent = async (eventType: string, resourceId: string) => {\n        const accessToken = await this.getAccessToken();\n\n        const response = await fetch(`${this.SANDBOX_URL}/v1/notifications/simulate-event`, {\n            method: 'POST',\n            headers: {\n                'Authorization': `Bearer ${accessToken}`,\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                webhook_id: process.env.PAYPAL_SANDBOX_WEBHOOK_ID,\n                event_type: eventType,\n                resource_id: resourceId,\n                create_time: new Date().toISOString()\n            })\n        });\n\n        if (!response.ok) {\n            throw new Error(`Failed to simulate webhook event: ${response.statusText}`);\n        }\n\n        return response.json();\n    };\n\n    /**\n     * Helper to validate webhook signatures using PayPal's verification API\n     */\n    static validateTestWebhook = async (headers: Record<string, string>, body: string) => {\n        const accessToken = await this.getAccessToken();\n\n        const response = await fetch(`${this.SANDBOX_URL}/v1/notifications/verify-webhook-signature`, {\n            method: 'POST',\n            headers: {\n                'Authorization': `Bearer ${accessToken}`,\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                auth_algo: headers['paypal-auth-algo'],\n                cert_url: headers['paypal-cert-url'],\n                transmission_id: headers['paypal-transmission-id'],\n                transmission_sig: headers['paypal-transmission-sig'],\n                transmission_time: headers['paypal-transmission-time'],\n                webhook_id: process.env.PAYPAL_SANDBOX_WEBHOOK_ID,\n                webhook_event: JSON.parse(body)\n            })\n        });\n\n        if (!response.ok) {\n            throw new Error(`Failed to verify webhook signature: ${response.statusText}`);\n        }\n\n        const result = await response.json();\n        return result.verification_status === 'SUCCESS';\n    };\n}\n","size_bytes":6158},"server/tests/paypal.test.ts":{"content":"import { test } from 'node:test';\nimport assert from 'node:assert';\nimport { PayPalSandboxTester } from './paypal-sandbox';\nimport { paypalConfig } from '../config/paypal';\n\n// Ensure we're in sandbox mode\nprocess.env.PAYPAL_MODE = 'sandbox';\n\ntest('PayPal Integration Tests', async (t) => {\n    await t.test('Authentication', async () => {\n        try {\n            const order = await PayPalSandboxTester.createTestOrder(100);\n            assert(order, 'Order should be created');\n            console.log('Authentication successful');\n        } catch (error) {\n            console.error('Authentication error:', error);\n            throw error;\n        }\n    });\n\n\n});\n","size_bytes":671},"server/types/PaymentTypes.d.ts":{"content":"// PaymentTypes.d.ts\ndeclare namespace Express {\n  interface Request {\n    body: {\n      gateway?: string;\n      status?: 'live' | 'maintenance';\n      config?: Record<string, unknown>;\n    };\n    query: {\n      startDate?: string;\n      endDate?: string;\n    };\n  }\n}\n\nexport interface PaymentGatewayStatus {\n  gateway: string;\n  status: 'live' | 'maintenance';\n}\n\nexport interface PaymentGatewayConfig {\n  gateway: string;\n  config: Record<string, unknown>;\n}\n\nexport interface PaymentQuery {\n  startDate?: string;\n  endDate?: string;\n}\n\nexport interface PaymentFilter {\n  startDate?: Date;\n  endDate?: Date;\n  status?: string;\n  method?: string;\n}\n","size_bytes":651},"server/types/express.d.ts":{"content":"import 'express';\n\ndeclare global {\n  namespace Express {\n    interface Request {\n      user?: any;\n      session?: any;\n      validatedData?: any;\n      // Add other custom properties as needed\n    }\n  }\n}\n","size_bytes":207},"server/types/payment.ts":{"content":"export interface PaymentGatewayStatus {\n  gateway: string;\n  status: 'live' | 'maintenance';\n}\n\nexport interface PaymentGatewayConfig {\n  gateway: string;\n  config: Record<string, unknown>;\n}\n\nexport interface PaymentQuery {\n  startDate?: string;\n  endDate?: string;\n}\n\nexport interface PaymentFilter {\n  startDate?: Date;\n  endDate?: Date;\n  status?: string;\n  method?: string;\n}\n","size_bytes":381},"server/utils/auth.ts":{"content":"import bcrypt from 'bcrypt';\nimport { z } from 'zod';\n\nconst SALT_ROUNDS = 12;\n\n// Password validation schema\nexport const passwordSchema = z\n  .string()\n  .min(8, 'Password must be at least 8 characters')\n  .regex(/[A-Z]/, 'Password must contain at least one uppercase letter')\n  .regex(/[a-z]/, 'Password must contain at least one lowercase letter')\n  .regex(/[0-9]/, 'Password must contain at least one number')\n  .regex(/[^A-Za-z0-9]/, 'Password must contain at least one special character');\n\nexport const validatePassword = (password: string): z.SafeParseReturnType<string, string> => {\n  return passwordSchema.safeParse(password);\n};\n\nexport const hashPassword = async (password: string): Promise<string> => {\n  return bcrypt.hash(password, SALT_ROUNDS);\n};\n\nexport const verifyPassword = async (password: string, hash: string): Promise<boolean> => {\n  return bcrypt.compare(password, hash);\n};\n\n// User creation validation schema\nexport const createUserSchema = z.object({\n  username: z.string().min(3, 'Username must be at least 3 characters'),\n  password: passwordSchema,\n  email: z.string().email('Invalid email format'),\n  role: z.enum(['admin', 'volunteer', 'donor']),\n  fullName: z.string().min(2, 'Full name is required'),\n});\n\n// Password update validation schema\nexport const updatePasswordSchema = z.object({\n  currentPassword: z.string(),\n  newPassword: passwordSchema,\n  confirmPassword: z.string()\n}).refine((data) => data.newPassword === data.confirmPassword, {\n  message: \"Passwords don't match\",\n  path: [\"confirmPassword\"],\n});\n","size_bytes":1553},"server/utils/currency.ts":{"content":"import axios from 'axios';\n\ninterface ExchangeRateResponse {\n  rates: {\n    KES: number;\n    USD: number;\n  };\n}\n\nclass CurrencyConverter {\n  private static instance: CurrencyConverter;\n  private rates: { [key: string]: number } = {};\n  private lastUpdate: Date | null = null;\n  private readonly REFRESH_INTERVAL = 1000 * 60 * 60; // 1 hour\n\n  private constructor() {}\n\n  public static getInstance(): CurrencyConverter {\n    if (!CurrencyConverter.instance) {\n      CurrencyConverter.instance = new CurrencyConverter();\n    }\n    return CurrencyConverter.instance;\n  }\n\n  private async updateRates() {\n    try {\n      // Using Exchange Rate API (you'll need to add EXCHANGE_RATE_API_KEY to .env)\n      const response = await axios.get<ExchangeRateResponse>(\n        `https://api.exchangerate-api.com/v4/latest/USD`\n      );\n\n      this.rates = response.data.rates;\n      this.lastUpdate = new Date();\n    } catch (error) {\n      console.error('Failed to fetch exchange rates:', error);\n      // Fallback rates in case API fails (approximate values)\n      this.rates = {\n        KES: 153.50, // Approximate KES to USD rate\n        USD: 1,\n      };\n    }\n  }\n\n  private async ensureRatesAreFresh() {\n    if (\n      !this.lastUpdate ||\n      Date.now() - this.lastUpdate.getTime() > this.REFRESH_INTERVAL\n    ) {\n      await this.updateRates();\n    }\n  }\n\n  public async convert(amount: number, fromCurrency: string, toCurrency: string): Promise<number> {\n    await this.ensureRatesAreFresh();\n\n    // Normalize currencies to uppercase\n    fromCurrency = fromCurrency.toUpperCase();\n    toCurrency = toCurrency.toUpperCase();\n\n    // If same currency, return original amount\n    if (fromCurrency === toCurrency) {\n      return amount;\n    }\n\n    // Convert to USD first if not already in USD\n    const amountInUSD = fromCurrency === 'USD' \n      ? amount \n      : amount / this.rates[fromCurrency];\n\n    // Convert from USD to target currency\n    const convertedAmount = amountInUSD * this.rates[toCurrency];\n\n    // Round to 2 decimal places for USD, whole numbers for KES\n    return toCurrency === 'USD' \n      ? Math.round(convertedAmount * 100) / 100 \n      : Math.round(convertedAmount);\n  }\n}\n\nexport const currencyConverter = CurrencyConverter.getInstance();\n","size_bytes":2263},"server/utils/encryption.ts":{"content":"import crypto from 'crypto';\n\n// Encryption configuration\nconst ENCRYPTION_KEY = process.env.ENCRYPTION_KEY || crypto.randomBytes(32);\nconst IV_LENGTH = 16;\n\n// Error class for encryption operations\nexport class EncryptionError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'EncryptionError';\n  }\n}\n\n// Encrypt sensitive data\nexport function encrypt(text: string): string {\n  try {\n    const iv = crypto.randomBytes(IV_LENGTH);\n    const cipher = crypto.createCipheriv('aes-256-cbc', Buffer.from(ENCRYPTION_KEY), iv);\n    let encrypted = cipher.update(text, 'utf8', 'hex');\n    encrypted += cipher.final('hex');\n    return `${iv.toString('hex')}:${encrypted}`;\n  } catch (error) {\n    throw new EncryptionError('Failed to encrypt data');\n  }\n}\n\n// Decrypt sensitive data\nexport function decrypt(text: string): string {\n  try {\n    const [ivHex, encryptedHex] = text.split(':');\n    if (!ivHex || !encryptedHex) {\n      throw new Error('Invalid encrypted text format');\n    }\n    const iv = Buffer.from(ivHex, 'hex');\n    const decipher = crypto.createDecipheriv('aes-256-cbc', Buffer.from(ENCRYPTION_KEY), iv);\n    let decrypted = decipher.update(encryptedHex, 'hex', 'utf8');\n    decrypted += decipher.final('utf8');\n    return decrypted;\n  } catch (error) {\n    throw new EncryptionError('Failed to decrypt data');\n  }\n}\n\n// Sanitize error messages for production\nexport function sanitizeError(error: any): { message: string; code?: string } {\n  if (error instanceof EncryptionError) {\n    return {\n      message: error.message,\n      code: 'ENCRYPTION_ERROR'\n    };\n  }\n\n  if (process.env.NODE_ENV === 'development') {\n    return {\n      message: error.message || 'An error occurred',\n      code: error.code\n    };\n  }\n\n  return {\n    message: 'An error occurred',\n    code: 'INTERNAL_ERROR'\n  };\n}\n","size_bytes":1841},"server/utils/logger.ts":{"content":"import winston from 'winston';\nimport DailyRotateFile from 'winston-daily-rotate-file';\nimport path from 'path';\n\nconst logDir = path.join(process.cwd(), 'logs');\n\n// Create separate loggers for different types of events\nconst securityLogger = winston.createLogger({\n  level: 'info',\n  format: winston.format.combine(\n    winston.format.timestamp(),\n    winston.format.json()\n  ),\n  transports: [\n    new DailyRotateFile({\n      filename: path.join(logDir, 'security-%DATE%.log'),\n      datePattern: 'YYYY-MM-DD',\n      maxSize: '20m',\n      maxFiles: '14d'\n    })\n  ]\n});\n\nconst auditLogger = winston.createLogger({\n  level: 'info',\n  format: winston.format.combine(\n    winston.format.timestamp(),\n    winston.format.json()\n  ),\n  transports: [\n    new DailyRotateFile({\n      filename: path.join(logDir, 'audit-%DATE%.log'),\n      datePattern: 'YYYY-MM-DD',\n      maxSize: '20m',\n      maxFiles: '30d'\n    })\n  ]\n});\n\n// Log security events (authentication, authorization failures, config errors)\nexport function logSecurityEvent(event: {\n  type: 'auth_failure' | 'auth_success' | 'csrf_violation' | 'rate_limit' | 'permission_denied' | 'config_access_error' | 'config_update_error';\n  userId?: string;\n  ip: string;\n  message: string;\n  metadata?: any;\n}) {\n  securityLogger.info(event);\n}\n\n// Log audit events (configuration changes, status updates)\nexport function logAuditEvent(event: {\n  type: 'config_update' | 'status_update' | 'gateway_config';\n  userId: string;\n  action: string;\n  resource: string;\n  details: any;\n}) {\n  auditLogger.info(event);\n}\n\n// Log payment events\nexport function logPaymentEvent(event: {\n  type: 'payment_initiated' | 'payment_completed' | 'payment_failed';\n  gateway: string;\n  transactionId: string;\n  amount: number;\n  status: string;\n  metadata?: any;\n}) {\n  auditLogger.info({ ...event, category: 'payment' });\n}\n\n// Convenience methods for common logging operations\nexport const logError = (error: Error | string, metadata?: any) => {\n  auditLogger.error({\n    message: error instanceof Error ? error.message : error,\n    stack: error instanceof Error ? error.stack : undefined,\n    ...metadata\n  });\n};\n\nexport const logInfo = (message: string, metadata?: any) => {\n  auditLogger.info({\n    message,\n    ...metadata\n  });\n};\n\nexport const logSecurity = (message: string, metadata?: any) => {\n  securityLogger.info({\n    message,\n    ...metadata\n  });\n};\n\n// Add console logging in development\nif (process.env.NODE_ENV !== 'production') {\n  securityLogger.add(new winston.transports.Console({\n    format: winston.format.simple()\n  }));\n  auditLogger.add(new winston.transports.Console({\n    format: winston.format.simple()\n  }));\n}\n","size_bytes":2676},"server/utils/sanitize.ts":{"content":"import sanitizeHtml from 'sanitize-html';\nimport path from 'path';\n\nconst SANITIZE_HTML_OPTIONS = {\n  allowedTags: [\n    'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'p', 'br', 'ul', 'ol', 'li',\n    'b', 'i', 'strong', 'em', 'a', 'img'\n  ],\n  allowedAttributes: {\n    'a': ['href', 'target', 'rel'],\n    'img': ['src', 'alt']\n  },\n  allowedSchemes: ['http', 'https', 'mailto'],\n  transformTags: {\n    'a': (tagName: string, attribs: any) => ({\n      tagName,\n      attribs: {\n        ...attribs,\n        target: '_blank',\n        rel: 'noopener noreferrer'\n      }\n    })\n  }\n};\n\nexport const sanitizeHtmlContent = (content: string): string => {\n  return sanitizeHtml(content, SANITIZE_HTML_OPTIONS);\n};\n\nexport const sanitizeFilename = (filename: string): string => {\n  // Remove any directory traversal attempts\n  const sanitized = path.basename(filename);\n  \n  // Replace any non-alphanumeric characters (except dashes and underscores)\n  return sanitized\n    .replace(/[^a-zA-Z0-9-_\\.]/g, '-')\n    .replace(/\\.{2,}/g, '.') // Remove consecutive dots\n    .replace(/^[-_.]+|[-_.]+$/g, ''); // Remove leading/trailing special chars\n};\n\nexport const sanitizeInput = (input: string): string => {\n  return input\n    .replace(/[<>]/g, '') // Remove < and >\n    .replace(/&/g, '&amp;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#x27;')\n    .replace(/\\//g, '&#x2F;');\n};\n","size_bytes":1364},"client/src/components/Counter.tsx":{"content":"import { useEffect, useState, useRef } from \"react\";\nimport { useIntersectionObserver } from \"@/hooks/useIntersectionObserver\";\n\ninterface CounterProps {\n  target: number;\n  duration?: number;\n  suffix?: string;\n  className?: string;\n}\n\nexport default function Counter({ target, duration = 2000, suffix = \"\", className = \"\" }: CounterProps) {\n  const [count, setCount] = useState(0);\n  const [hasStarted, setHasStarted] = useState(false);\n  const ref = useRef<HTMLDivElement>(null);\n  const isIntersecting = useIntersectionObserver(ref, {\n    threshold: 0.1,\n    rootMargin: \"0px 0px -50px 0px\",\n  });\n\n  useEffect(() => {\n    if (isIntersecting && !hasStarted) {\n      setHasStarted(true);\n      const startTime = performance.now();\n\n      const updateCounter = (currentTime: number) => {\n        const elapsed = currentTime - startTime;\n        const progress = Math.min(elapsed / duration, 1);\n\n        // Easing function for smooth animation\n        const easeOutExpo = progress === 1 ? 1 : 1 - Math.pow(2, -10 * progress);\n        const current = Math.floor(target * easeOutExpo);\n        \n        setCount(current);\n\n        if (progress < 1) {\n          requestAnimationFrame(updateCounter);\n        } else {\n          setCount(target);\n        }\n      };\n\n      requestAnimationFrame(updateCounter);\n    }\n  }, [isIntersecting, hasStarted, target, duration]);\n\n  return (\n    <div ref={ref} className={className}>\n      {count}{suffix}\n    </div>\n  );\n}\n","size_bytes":1462},"client/src/components/ErrorBoundary.tsx":{"content":"import React from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent } from '@/components/ui/card';\n\ninterface ErrorBoundaryProps {\n  children: React.ReactNode;\n}\n\ninterface ErrorBoundaryState {\n  hasError: boolean;\n  error: Error | null;\n}\n\nexport class ErrorBoundary extends React.Component<ErrorBoundaryProps, ErrorBoundaryState> {\n  constructor(props: ErrorBoundaryProps) {\n    super(props);\n    this.state = {\n      hasError: false,\n      error: null\n    };\n  }\n\n  static getDerivedStateFromError(error: Error): ErrorBoundaryState {\n    return {\n      hasError: true,\n      error\n    };\n  }\n\n  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {\n    console.error('Error caught by boundary:', error, errorInfo);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return (\n        <div className=\"min-h-screen bg-neutral-50 flex items-center justify-center p-4\">\n          <Card className=\"w-full max-w-md\">\n            <CardContent className=\"pt-6 text-center\">\n              <div className=\"w-16 h-16 bg-error/10 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <i className=\"fas fa-exclamation-triangle text-error text-2xl\"></i>\n              </div>\n              <h3 className=\"text-xl font-bold text-neutral-800 mb-2\">Something Went Wrong</h3>\n              <p className=\"text-neutral-600 mb-4\">\n                {this.state.error?.message || 'An unexpected error occurred'}\n              </p>\n              <Button \n                onClick={() => window.location.reload()}\n                variant=\"outline\"\n              >\n                Try Again\n              </Button>\n            </CardContent>\n          </Card>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n","size_bytes":1772},"client/src/components/EventPopup.tsx":{"content":"import React, { useState, useEffect, useCallback } from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Link } from 'wouter';\nimport { X, MapPin, Calendar, DollarSign, Clock, ChevronLeft, ChevronRight, Share2 } from 'lucide-react';\nimport { getEvents } from '@/lib/staticData';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { OptimizedImage } from '@/components/ui/optimized-image';\n\n\n\nconst EventPopup: React.FC = () => {\n  const [isVisible, setIsVisible] = useState(true); // Always show on page load\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const [isPaused, setIsPaused] = useState(false);\n\n  const { data: allEvents, isLoading, error } = useQuery<any[]>({\n    queryKey: ['events'],\n    queryFn: getEvents,\n    staleTime: 5 * 60 * 1000, // 5 minutes\n  });\n\n  // Filter for featured and ongoing events\n  const events = allEvents?.filter(event => {\n    const now = new Date();\n    const startDate = new Date(event.date);\n    const endDate = new Date(event.endDate);\n    \n    // Featured events or currently ongoing events\n    return event.active && (\n      event.featured || \n      (now >= startDate && now <= endDate)\n    );\n  }) || [];\n\n  const handleNext = useCallback(() => {\n    if (events) {\n      setCurrentIndex((prevIndex) => (prevIndex + 1) % events.length);\n    }\n  }, [events]);\n\n  useEffect(() => {\n    if (isPaused || !events || events.length <= 1) return;\n\n    const timer = setInterval(() => {\n      handleNext();\n    }, 5000); // 5 seconds loop\n\n    return () => clearInterval(timer);\n  }, [isPaused, events, handleNext]);\n\n  const handleClose = () => {\n    setIsVisible(false);\n    // Note: Will reappear on next page reload\n  };\n\n  const shareEvent = async (event: any) => {\n    const eventUrl = `${window.location.origin}/events/${event.slug}`;\n    const shareData = {\n      title: event?.name || 'Family Peace Association Event',\n      text: event?.description || 'Join us for this amazing event!',\n      url: eventUrl,\n    };\n\n    try {\n      if (navigator.share && navigator.canShare && navigator.canShare(shareData)) {\n        await navigator.share(shareData);\n      } else {\n        await navigator.clipboard.writeText(eventUrl);\n        // Show user feedback for clipboard copy\n        const button = document.querySelector('[data-popup-share-button]') as HTMLElement;\n        if (button) {\n          const originalText = button.textContent;\n          button.textContent = 'Link Copied!';\n          setTimeout(() => {\n            button.textContent = originalText;\n          }, 2000);\n        }\n      }\n    } catch (error) {\n      console.error('Error sharing event:', error);\n      // Fallback to clipboard copy\n      try {\n        await navigator.clipboard.writeText(eventUrl);\n        alert('Event link copied to clipboard!');\n      } catch (clipboardError) {\n        console.error('Clipboard access failed:', clipboardError);\n        alert('Unable to share event. Please copy the URL manually.');\n      }\n    }\n  };\n\n  if (isLoading || error || !events || events.length === 0 || !isVisible) {\n    return null;\n  }\n\n  const currentEvent = events[currentIndex];\n\n  const formatDate = (dateString: string) => {\n    if (!dateString) return 'N/A';\n    return new Date(dateString).toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n    });\n  };\n\n  return (\n    <AnimatePresence>\n      {isVisible && (\n        <motion.div\n          initial={{ opacity: 0, y: 50, scale: 0.9 }}\n          animate={{ opacity: 1, y: 0, scale: 1 }}\n          exit={{ opacity: 0, y: 50, scale: 0.9 }}\n          transition={{ duration: 0.5, ease: 'easeInOut' }}\n          className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\"\n          onMouseEnter={() => setIsPaused(true)}\n          onMouseLeave={() => setIsPaused(false)}\n          onTouchStart={() => setIsPaused(true)}\n          onTouchEnd={() => setIsPaused(false)}\n          aria-live=\"polite\"\n          aria-atomic=\"true\"\n        >\n          <motion.div\n            className=\"bg-white rounded-xl shadow-2xl overflow-hidden ring-1 ring-black ring-opacity-5 max-w-2xl w-full max-h-[90vh]\"\n            whileHover={{ scale: 1.02, transition: { duration: 0.2 } }}\n          >\n            {/* Header */}\n            <div className=\"relative bg-gradient-to-r from-yellow-600 to-yellow-700 text-white p-4\">\n              <button\n                onClick={handleClose}\n                className=\"absolute top-4 right-4 p-1 hover:bg-white hover:bg-opacity-20 rounded-full transition-colors\"\n                aria-label=\"Close event popup\"\n              >\n                <X className=\"w-5 h-5\" />\n              </button>\n              <div className=\"text-center\">\n                <h2 className=\"text-2xl font-bold mb-1\">🎉 Don't Miss Out!</h2>\n                <p className=\"text-yellow-100\">Featured & Ongoing Events</p>\n              </div>\n            </div>\n\n            <AnimatePresence mode=\"wait\">\n              <motion.div\n                key={currentEvent.id}\n                initial={{ opacity: 0 }}\n                animate={{ opacity: 1 }}\n                exit={{ opacity: 0 }}\n                transition={{ duration: 0.6 }}\n                className=\"relative\"\n              >\n                <div className=\"relative h-80 w-full overflow-hidden\">\n                  <OptimizedImage\n                    src={currentEvent.imageUrl || 'https://via.placeholder.com/400x200?text=Event'}\n                    alt={currentEvent.name}\n                    className=\"w-full h-full object-cover\"\n                  />\n                  <div className=\"absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent\"></div>\n                  \n                  {/* Event Info Overlay */}\n                  <div className=\"absolute bottom-0 left-0 right-0 p-6 text-white\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                      <Badge className=\"bg-yellow-600 text-white border-0\">\n                        {currentEvent.featured ? 'Featured' : 'Live Now'}\n                      </Badge>\n                      <Badge variant=\"outline\" className=\"text-white border-white\">\n                        {currentEvent.category || 'Event'}\n                      </Badge>\n                    </div>\n                    \n                    <h3 className=\"text-xl font-bold mb-2 leading-tight\">\n                      {currentEvent.name}\n                    </h3>\n                    \n                    <p className=\"text-gray-200 text-sm mb-3 line-clamp-2\">\n                      {currentEvent.description}\n                    </p>\n                  </div>\n\n                  {/* Navigation Arrows */}\n                  {events.length > 1 && (\n                    <>\n                      <button\n                        onClick={() => setCurrentIndex(prev => prev === 0 ? events.length - 1 : prev - 1)}\n                        className=\"absolute left-4 top-1/2 -translate-y-1/2 bg-black bg-opacity-50 hover:bg-opacity-70 text-white p-2 rounded-full transition-all\"\n                      >\n                        <ChevronLeft className=\"w-5 h-5\" />\n                      </button>\n                      <button\n                        onClick={handleNext}\n                        className=\"absolute right-4 top-1/2 -translate-y-1/2 bg-black bg-opacity-50 hover:bg-opacity-70 text-white p-2 rounded-full transition-all\"\n                      >\n                        <ChevronRight className=\"w-5 h-5\" />\n                      </button>\n                    </>\n                  )}\n\n                  {/* Slide Indicators */}\n                  {events.length > 1 && (\n                    <div className=\"absolute bottom-4 left-1/2 -translate-x-1/2 flex space-x-2\">\n                      {events.map((_, index) => (\n                        <button\n                          key={index}\n                          onClick={() => setCurrentIndex(index)}\n                          className={`w-2 h-2 rounded-full transition-all ${\n                            index === currentIndex \n                              ? 'bg-white scale-125' \n                              : 'bg-white bg-opacity-50'\n                          }`}\n                        />\n                      ))}\n                    </div>\n                  )}\n                </div>\n\n                <div className=\"p-6 bg-gray-50\">\n                  <div className=\"grid grid-cols-3 gap-4 mb-4 text-sm\">\n                    <div className=\"flex items-center gap-2\">\n                      <Calendar className=\"w-4 h-4 text-yellow-600\" />\n                      <span className=\"text-gray-600\">{formatDate(currentEvent.date)}</span>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <MapPin className=\"w-4 h-4 text-yellow-600\" />\n                      <span className=\"text-gray-600\">{currentEvent.location?.split(',')[0] || 'TBA'}</span>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <DollarSign className=\"w-4 h-4 text-yellow-600\" />\n                      <span className=\"text-gray-600\">\n                        {currentEvent.fee ? `KSh ${currentEvent.fee.toLocaleString()}` : 'Free Event'}\n                      </span>\n                    </div>\n                  </div>\n\n                  <div className=\"flex gap-3\">\n                    <Link href={`/events/${currentEvent.slug}`} className=\"flex-1\">\n                      <Button \n                        className=\"w-full bg-yellow-600 hover:bg-yellow-700 text-white\"\n                        onClick={handleClose}\n                      >\n                        Learn More & Register\n                      </Button>\n                    </Link>\n                    <div className=\"flex gap-2 flex-1\">\n                      <Link href=\"/events\" className=\"flex-1\">\n                        <Button \n                          variant=\"outline\" \n                          className=\"w-full border-yellow-600 text-yellow-600 hover:bg-yellow-50\"\n                          onClick={handleClose}\n                        >\n                          View All Events\n                        </Button>\n                      </Link>\n                      <Button \n                        variant=\"outline\" \n                        size=\"sm\"\n                        className=\"border-yellow-600 text-yellow-600 hover:bg-yellow-50 px-3\"\n                        onClick={() => shareEvent(currentEvent)}\n                        data-popup-share-button\n                        title=\"Share Event\"\n                      >\n                        <Share2 className=\"w-4 h-4\" />\n                      </Button>\n                    </div>\n                  </div>\n                  \n                  {events.length > 1 && (\n                    <p className=\"text-center text-xs text-gray-500 mt-3\">\n                      Images change every 5 seconds • {currentIndex + 1} of {events.length}\n                    </p>\n                  )}\n                </div>\n              </motion.div>\n            </AnimatePresence>\n          </motion.div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n};\n\nexport default EventPopup;\n","size_bytes":11375},"client/src/components/ExchangeRate.tsx":{"content":"import { useState, useEffect } from 'react';\n\nexport default function ExchangeRate() {\n  const [rate, setRate] = useState<number | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchRate = async () => {\n      try {\n        const response = await fetch('/api/currency/convert', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            amount: 1,\n            from: 'USD',\n            to: 'KES',\n          }),\n        });\n\n        if (!response.ok) {\n          throw new Error('Failed to fetch exchange rate');\n        }\n\n        const data = await response.json();\n        setRate(data.amount);\n      } catch (error) {\n        console.error('Failed to fetch exchange rate:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    fetchRate();\n    \n    // Refresh rate every hour\n    const interval = setInterval(fetchRate, 60 * 60 * 1000);\n    return () => clearInterval(interval);\n  }, []);\n\n  if (isLoading) {\n    return (\n      <div className=\"text-sm text-gray-500 animate-pulse\">\n        Loading exchange rate...\n      </div>\n    );\n  }\n\n  if (!rate) {\n    return null;\n  }\n\n  return (\n    <div className=\"text-sm text-gray-600 bg-gray-50 p-2 rounded-md inline-block\">\n      <span className=\"font-medium\">Current Exchange Rate:</span>\n      <br />\n      1 USD = {rate.toFixed(2)} KES\n    </div>\n  );\n}\n","size_bytes":1473},"client/src/components/Footer.tsx":{"content":"import { Link } from \"wouter\";\nimport { Heart, MapPin, Phone, Mail, Facebook, Linkedin, Instagram, Twitter, Lock } from \"lucide-react\";\nimport { SiTiktok, SiYoutube } from \"react-icons/si\";\nimport Newsletter from \"./Newsletter\";\n\nexport default function Footer() {\n  return (\n    <footer className=\"bg-gray-900 text-white py-16\">\n      <div className=\"container mx-auto px-6\">\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8 mb-12\">\n          {/* 🧭 Explore */}\n          <div>\n            <h4 className=\"text-lg font-semibold mb-4\">Explore</h4>\n            <div className=\"space-y-2\">\n              <Link href=\"/\">\n                <a className=\"block text-gray-400 hover:text-white transition-colors\">Home</a>\n              </Link>\n              <Link href=\"/about\">\n                <a className=\"block text-gray-400 hover:text-white transition-colors\">About</a>\n              </Link>\n              <Link href=\"/blog\">\n                <a className=\"block text-gray-400 hover:text-white transition-colors\">Blog</a>\n              </Link>\n              <Link href=\"/gallery\">\n                <a className=\"block text-gray-400 hover:text-white transition-colors\">Gallery</a>\n              </Link>\n              <Link href=\"/features\">\n                <a className=\"block text-gray-400 hover:text-white transition-colors\">Services</a>\n              </Link>\n              <Link href=\"/causes\">\n                <a className=\"block text-gray-400 hover:text-white transition-colors\">Initiatives</a>\n              </Link>\n            </div>\n          </div>\n          {/* 📞 Support & Info */}\n          <div>\n            <h4 className=\"text-lg font-semibold mb-4\">Support & Info</h4>\n            <div className=\"space-y-2\">\n              <Link href=\"/team\">\n                <a className=\"block text-gray-400 hover:text-white transition-colors\">Team</a>\n              </Link>\n              <Link href=\"/donate\">\n                <a className=\"block text-gray-400 hover:text-white transition-colors\">Donate</a>\n              </Link>\n              <Link href=\"/contact\">\n                <a className=\"block text-gray-400 hover:text-white transition-colors\">Contact</a>\n              </Link>\n              <Link href=\"/legal\">\n                <a className=\"block text-gray-400 hover:text-white transition-colors\">Legal</a>\n              </Link>\n            </div>\n          </div>\n          {/* 🌐 Socials */}\n          <div>\n            <h4 className=\"text-lg font-semibold mb-4\">Socials</h4>\n            <div className=\"flex space-x-4\">\n              <a href=\"https://www.facebook.com/share/1CY6v9ykyQ/\" target=\"_blank\" rel=\"noopener noreferrer\" aria-label=\"Facebook\" className=\"text-gray-400 hover:text-white transition-colors\">\n                <Facebook className=\"w-5 h-5\" />\n              </a>\n              <a href=\"#\" target=\"_blank\" rel=\"noopener noreferrer\" aria-label=\"Twitter\" className=\"text-gray-400 hover:text-white transition-colors\">\n                <Twitter className=\"w-5 h-5\" />\n              </a>\n              <a href=\"https://www.instagram.com/familypeacekenya\" target=\"_blank\" rel=\"noopener noreferrer\" aria-label=\"Instagram\" className=\"text-gray-400 hover:text-white transition-colors\">\n                <Instagram className=\"w-5 h-5\" />\n              </a>\n              <a href=\"tiktok.com/@familypeaceassociation\" target=\"_blank\" rel=\"noopener noreferrer\" aria-label=\"TikTok\" className=\"text-gray-400 hover:text-white transition-colors\">\n                <SiTiktok className=\"w-5 h-5\" />\n              </a>\n              <a href=\"https://www.youtube.com/@FamilyPeaceAssociationKenya\" target=\"_blank\" rel=\"noopener noreferrer\" aria-label=\"YouTube\" className=\"text-gray-400 hover:text-white transition-colors\">\n                <SiYoutube className=\"w-5 h-5\" />\n              </a>\n            </div>\n          </div>\n          {/* Contact Icons */}\n          <div className=\"flex flex-col space-y-4 text-gray-400\">\n            <div className=\"flex items-center space-x-2\">\n              <MapPin className=\"w-5 h-5\" />\n                <span style={{ whiteSpace: 'pre-line' }}>\n                      Wu Yi Plaza, 3rd Floor, Block E8,<br />\n                     Galana Road, Kilimani, Nairobi\n                </span>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <Phone className=\"w-5 h-5\" />\n              <a href=\"tel:0733155199\" className=\"hover:text-white transition-colors\">0208020770/0733155199</a>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <Mail className=\"w-5 h-5\" />\n              <a href=\"mailto:kenya@familypeaceassociation.org\" className=\"hover:text-white transition-colors\">kenya@familypeace.org</a>\n            </div>\n          </div>\n        </div>\n        {/* Newsletter */}\n        <div className=\"mb-12\">\n          <Newsletter />\n        </div>\n        <div className=\"border-t border-gray-800 pt-8 flex flex-col md:flex-row justify-between items-center gap-4\">\n          <p className=\"text-gray-400 text-sm text-center md:text-left\">\n            © 2025 Family Peace Association. All rights reserved.\n          </p>\n          <div className=\"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-6 mt-4 md:mt-0 items-center\">\n            <Link href=\"/legal\">\n              <a className=\"text-gray-400 hover:text-white transition-colors text-sm\">Privacy Policy</a>\n            </Link>\n            <Link href=\"/legal\">\n              <a className=\"text-gray-400 hover:text-white transition-colors text-sm\">Terms of Service</a>\n            </Link>\n            <Link href=\"/fpa-2k25-secure-portal\">\n              <a className=\"flex items-center space-x-1 text-gray-400 hover:text-white transition-colors text-sm\">\n                <Lock className=\"w-3 h-3\" />\n                <span>FPA</span>\n              </a>\n            </Link>\n          {/*<Link href=\"/licenses\">\n              <a className=\"text-gray-400 hover:text-white transition-colors text-sm\">Licenses</a>\n            </Link>*/}\n          </div>\n        </div>\n      </div>\n    </footer>\n  );\n}\n","size_bytes":6111},"client/src/components/Header.tsx":{"content":"import { useState } from \"react\";\nimport { Link, useLocation } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n} from \"@/components/ui/dropdown-menu\";\nimport {\n  Accordion,\n  AccordionContent,\n  AccordionItem,\n  AccordionTrigger,\n} from \"@/components/ui/accordion\";\nimport { ChevronDown, Menu, X } from \"lucide-react\";\nimport {\n  Sheet,\n  SheetContent,\n  SheetTrigger,\n  SheetClose,\n} from \"@/components/ui/sheet\";\nimport FpaLogo from \"@/assets/Fpa-logo.jpg\";\nimport { OptimizedImage } from \"./ui/optimized-image\";\n\nexport default function Header() {\n  const [location] = useLocation();\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\n\n  const isActive = (path: string) => {\n    if (path === \"/\" && location === \"/\") return true;\n    if (path !== \"/\" && location.startsWith(path)) return true;\n    return false;\n  };\n\n  const NavLink = ({\n    href,\n    children,\n    className = \"\",\n    onClick,\n  }: {\n    href: string;\n    children: React.ReactNode;\n    className?: string;\n    onClick?: () => void;\n  }) => (\n    <Link\n      href={href}\n      onClick={onClick}\n      className={`font-medium transition-colors hover:text-yellow-600 ${\n        isActive(href) ? \"text-yellow-600 font-semibold\" : \"text-gray-700\"\n      } ${className}`}\n    >\n      {children}\n    </Link>\n  );\n\n  const Logo = () => (\n    <Link href=\"/\">\n      <div className=\"flex items-center\">\n        <OptimizedImage\n          src={FpaLogo}\n          alt=\"Family Peace Association Kenya Logo\"\n          className=\"h-14 w-auto\"\n        />\n      </div>\n    </Link>\n  );\n\n  return (\n    <header className=\"fixed top-0 left-0 right-0 z-50 bg-white shadow-sm\">\n      <nav className=\"container mx-auto px-6 py-4\">\n        <div className=\"flex items-center justify-between\">\n          <Logo />\n\n          {/* Desktop Navigation */}\n          <div className=\"hidden lg:flex items-center space-x-8\">\n            <NavLink href=\"/\">Home</NavLink>\n            {/* About Dropdown - open on hover, show chevron */}\n            <DropdownMenu>\n              <DropdownMenuTrigger asChild>\n                <span\n                  className=\"font-medium transition-colors hover:text-yellow-600 text-gray-700 cursor-pointer flex items-center\"\n                  onMouseEnter={(e) => e.currentTarget.click()}\n                  onMouseLeave={(e) => {\n                    const menu = document.querySelector(\n                      \"[data-radix-dropdown-menu-content]\"\n                    );\n                    if (menu) (menu as HTMLElement).blur();\n                  }}\n                >\n                  About <ChevronDown className=\"ml-1 w-4 h-4\" />\n                </span>\n              </DropdownMenuTrigger>\n              <DropdownMenuContent>\n                <DropdownMenuItem asChild>\n                  <Link href=\"/features\">Our Services</Link>\n                </DropdownMenuItem>\n                <DropdownMenuItem asChild>\n                  <Link href=\"/about\">About Us</Link>\n                </DropdownMenuItem>\n                <DropdownMenuItem asChild>\n                  <Link href=\"/team\">Team</Link>\n                </DropdownMenuItem>\n              </DropdownMenuContent>\n            </DropdownMenu>\n            <NavLink href=\"/events\">Events</NavLink>\n            {/* Get Involved Dropdown */}\n            {/* Get Involved Dropdown - open on hover, show chevron */}\n            <DropdownMenu>\n              <DropdownMenuTrigger asChild>\n                <span\n                  className=\"font-medium transition-colors hover:text-yellow-600 text-gray-700 cursor-pointer flex items-center\"\n                  onMouseEnter={(e) => e.currentTarget.click()}\n                  onMouseLeave={(e) => {\n                    const menu = document.querySelector(\n                      \"[data-radix-dropdown-menu-content]\"\n                    );\n                    if (menu) (menu as HTMLElement).blur();\n                  }}\n                >\n                  Get Involved <ChevronDown className=\"ml-1 w-4 h-4\" />\n                </span>\n              </DropdownMenuTrigger>\n              <DropdownMenuContent>\n                <DropdownMenuItem asChild>\n                  <Link href=\"/blog\">Blog</Link>\n                </DropdownMenuItem>\n                <DropdownMenuItem asChild>\n                  <Link href=\"/get-involved#initiatives\">Campaigns & Volunteers</Link>\n                </DropdownMenuItem>\n              \n              </DropdownMenuContent>\n            </DropdownMenu>\n            <NavLink href=\"/gallery\">Gallery</NavLink>\n            <NavLink href=\"/contact\">Contact</NavLink>\n            <Link href=\"/donate\">\n              <Button className=\"bg-yellow-600 hover:bg-yellow-700 text-white px-6 py-2 rounded-md font-medium\">\n                Donate\n              </Button>\n            </Link>\n          </div>\n\n          {/* Mobile Menu Button */}\n          <Sheet open={mobileMenuOpen} onOpenChange={setMobileMenuOpen}>\n            <SheetTrigger asChild>\n              <Button variant=\"outline\" size=\"icon\" className=\"lg:hidden\">\n                <Menu className=\"w-5 h-5\" />\n              </Button>\n            </SheetTrigger>\n            <SheetContent\n              side=\"right\"\n              className=\"w-full max-w-sm p-0 flex flex-col\"\n            >\n              <div className=\"flex justify-between items-center p-4 border-b\">\n                <Logo />\n                <SheetClose asChild>\n                  <Button variant=\"ghost\" size=\"icon\">\n                    <X className=\"h-6 w-6\" />\n                  </Button>\n                </SheetClose>\n              </div>\n\n              <div className=\"flex-grow p-6 overflow-y-auto\">\n                <div className=\"flex flex-col space-y-2\">\n                  <NavLink\n                    href=\"/\"\n                    className=\"text-lg py-2\"\n                    onClick={() => setMobileMenuOpen(false)}\n                  >\n                    Home\n                  </NavLink>\n\n                  <Accordion type=\"single\" collapsible className=\"w-full\">\n                    <AccordionItem value=\"about\" className=\"border-b-0\">\n                      <AccordionTrigger className=\"text-lg font-medium hover:no-underline py-2\">\n                        About\n                      </AccordionTrigger>\n                      <AccordionContent>\n                        <div className=\"flex flex-col space-y-2 pl-4 pt-2\">\n                          <NavLink\n                            href=\"/features\"\n                            className=\"text-base\"\n                            onClick={() => setMobileMenuOpen(false)}\n                          >\n                            Our Services\n                          </NavLink>\n                          <NavLink\n                            href=\"/about\"\n                            className=\"text-base\"\n                            onClick={() => setMobileMenuOpen(false)}\n                          >\n                            About Us\n                          </NavLink>\n                          <NavLink\n                            href=\"/team\"\n                            className=\"text-base\"\n                            onClick={() => setMobileMenuOpen(false)}\n                          >\n                            Team\n                          </NavLink>\n                        </div>\n                      </AccordionContent>\n                    </AccordionItem>\n                    <AccordionItem\n                      value=\"get-involved\"\n                      className=\"border-b-0\"\n                    >\n                      <AccordionTrigger className=\"text-lg font-medium hover:no-underline py-2\">\n                        Get Involved\n                      </AccordionTrigger>\n                      <AccordionContent>\n                        <div className=\"flex flex-col space-y-2 pl-4 pt-2\">\n                          <NavLink\n                            href=\"/blog\"\n                            className=\"text-base\"\n                            onClick={() => setMobileMenuOpen(false)}\n                          >\n                            Blog\n                          </NavLink>\n                          <NavLink\n                            href=\"/get-involved#initiatives\"\n                            className=\"text-base\"\n                            onClick={() => setMobileMenuOpen(false)}\n                          >\n                            Campaigns & Volunteers\n                          </NavLink>\n                         \n                        </div>\n                      </AccordionContent>\n                    </AccordionItem>\n                  </Accordion>\n\n                  <NavLink\n                    href=\"/gallery\"\n                    className=\"text-lg py-2\"\n                    onClick={() => setMobileMenuOpen(false)}\n                  >\n                    Gallery\n                  </NavLink>\n                  <NavLink\n                    href=\"/contact\"\n                    className=\"text-lg py-2\"\n                    onClick={() => setMobileMenuOpen(false)}\n                  >\n                    Contact\n                  </NavLink>\n                </div>\n              </div>\n              <div className=\"p-6 mt-auto border-t\">\n                <Link href=\"/donate\" onClick={() => setMobileMenuOpen(false)}>\n                  <Button className=\"w-full bg-yellow-600 hover:bg-yellow-700 text-white\">\n                    Donate\n                  </Button>\n                </Link>\n              </div>\n            </SheetContent>\n          </Sheet>\n        </div>\n      </nav>\n    </header>\n  );\n}\n","size_bytes":9649},"client/src/components/Layout.tsx":{"content":"import React from 'react';\nimport { Helmet } from 'react-helmet';\nimport { useLocation } from 'wouter';\nimport Header from './Header';\nimport Footer from './Footer';\nimport { Toaster } from './Toaster';\nimport { ErrorBoundary } from './ErrorBoundary';\nimport EventPopup from './EventPopup';\n\ninterface LayoutProps {\n\n  children: React.ReactNode;\n  title?: string;\n  description?: string;\n  hideFooter?: boolean;\n}\n\nexport function Layout({ \n  children, \n  title = 'Family Peace Association', \n  description = 'Empowering families to build a peaceful world',\n  hideFooter = false\n}: LayoutProps) {\n  const [location] = useLocation();\n  const isAdminPage = location.startsWith('/admin');\n\n  return (\n    <ErrorBoundary>\n      <Helmet>\n        <title>{title}</title>\n        <meta name=\"description\" content={description} />\n      </Helmet>\n\n      {!isAdminPage && <Header />}\n\n      <main className=\"min-h-screen bg-background\">\n        {children}\n      </main>\n\n      {!isAdminPage && !hideFooter && <Footer />}\n      <Toaster />\n      {!isAdminPage && <EventPopup />}\n    </ErrorBoundary>\n  );\n}\n","size_bytes":1096},"client/src/components/LogoSlider.tsx":{"content":"import { useEffect, useRef, useState } from 'react';\nimport { Link } from 'wouter';\nimport { Button } from './ui/button';\nimport { OptimizedImage } from './ui/optimized-image';\n\n// Dummy logo data - replace with your actual logos\nconst logoUrls = [\n    \n  \"https://media.joomeo.com/large/68776bfeef2aa.jpg\",\n  \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjUwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iNTAiIGZpbGw9IiNmMGYwZjAiLz48dGV4dCB4PSI1MCIgeT0iMjUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxMiIgZmlsbD0iIzY2NiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkxvZ28gMTwvdGV4dD48L3N2Zz4=\",\n  \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjUwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iNTAiIGZpbGw9IiNmMGYwZjAiLz48dGV4dCB4PSI1MCIgeT0iMjUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxMiIgZmlsbD0iIzY2NiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkxvZ28gMjwvdGV4dD48L3N2Zz4=\",\n  \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjUwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iNTAiIGZpbGw9IiNmMGYwZjAiLz48dGV4dCB4PSI1MCIgeT0iMjUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxMiIgZmlsbD0iIzY2NiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkxvZ28gMzwvdGV4dD48L3N2Zz4=\",\n  \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjUwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iNTAiIGZpbGw9IiNmMGYwZjAiLz48dGV4dCB4PSI1MCIgeT0iMjUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxMiIgZmlsbD0iIzY2NiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkxvZ28gNDwvdGV4dD48L3N2Zz4=\",\n  \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjUwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iNTAiIGZpbGw9IiNmMGYwZjAiLz48dGV4dCB4PSI1MCIgeT0iMjUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxMiIgZmlsbD0iIzY2NiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkxvZ28gNTwvdGV4dD48L3N2Zz4=\"\n];\n\nconst SCROLL_SPEED = 0.5; // Reduced speed for smoother animation\n\nexport default function LogoSlider() {\n  const sliderRef = useRef<HTMLDivElement>(null);\n  const [isPaused, setIsPaused] = useState(false);\n  const [shouldAnimate, setShouldAnimate] = useState(true);\n\n  useEffect(() => {\n    let animationFrameId: number;\n    let position = 0;\n\n    const animate = () => {\n      if (!sliderRef.current || !shouldAnimate || isPaused) {\n        animationFrameId = requestAnimationFrame(animate);\n        return;\n      }\n\n      position += SCROLL_SPEED;\n      const sliderWidth = sliderRef.current.scrollWidth / 2;\n      \n      if (position >= sliderWidth) {\n        position = 0;\n      }\n\n      sliderRef.current.style.transform = `translateX(-${position}px)`;\n      animationFrameId = requestAnimationFrame(animate);\n    };\n\n    // Start animation\n    animationFrameId = requestAnimationFrame(animate);\n\n    return () => {\n      cancelAnimationFrame(animationFrameId);\n    };\n  }, [isPaused, shouldAnimate]);\n\n  return (\n    <section className=\"py-20 bg-gray-50\">\n      <div className=\"container mx-auto px-6\">\n        <div className=\"text-center mb-12\">\n          <h2 className=\"text-3xl md:text-4xl font-bold text-gray-800 mb-6\">\n            Our <span className=\"primary-text\">Partners</span>\n          </h2>\n          <p className=\"text-xl text-gray-600 mb-12\">\n            Working together with these amazing organizations to create positive change\n          </p>\n        </div>\n\n        <div className=\"relative overflow-hidden\">\n          {/* Gradient overlays */}\n          <div className=\"absolute left-0 top-0 h-full w-20 bg-gradient-to-r from-gray-50 to-transparent z-10\"></div>\n          <div className=\"absolute right-0 top-0 h-full w-20 bg-gradient-to-l from-gray-50 to-transparent z-10\"></div>\n\n          <div \n            className=\"flex items-center py-8 relative\"\n            onMouseEnter={() => setIsPaused(true)}\n            onMouseLeave={() => setIsPaused(false)}\n          >\n            <div \n              ref={sliderRef} \n              className=\"flex items-center gap-16 transition-transform duration-100 absolute left-0\"\n            >\n              {/* First set of logos */}\n              {logoUrls.map((url, index) => (\n                <OptimizedImage \n                  key={`logo-1-${index}`} \n                  src={url} \n                  alt={`Partner ${index + 1}`} \n                  className=\"h-16 w-40 object-contain grayscale hover:grayscale-0 transition-all\"\n                />\n              ))}\n              {/* Duplicate set for seamless loop */}\n              {logoUrls.map((url, index) => (\n                <OptimizedImage \n                  key={`logo-2-${index}`} \n                  src={url} \n                  alt={`Partner ${index + 1}`} \n                  className=\"h-16 w-40 object-contain grayscale hover:grayscale-0 transition-all\"\n                />\n              ))}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"text-center mt-12\">\n          <Link href=\"/contact\">\n            <Button className=\"primary-bg text-white hover:opacity-90 px-8 py-6 text-lg\">\n              Become Our Partner\n            </Button>\n          </Link>\n        </div>\n      </div>\n    </section>\n  );\n}\n","size_bytes":5255},"client/src/components/MPesaPayment.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { useToast } from '@/components/ui/use-toast';\nimport { usePaymentGatewayStatus } from '@/hooks/use-payment-gateway-status';\nimport { z } from 'zod';\nimport { apiClient } from '@/lib/api';\nimport CurrencyAmount from '@/components/ui/CurrencyAmount';\n\n\ninterface MPesaPaymentProps {\n  amount: string;\n  onSuccess?: () => void;\n  onError?: (error: any) => void;\n}\n\nconst phoneNumberSchema = z.string()\n  .regex(/^(?:254|\\+254|0)?([17]\\d{8})$/, 'Invalid phone number format');\n\nexport default function MPesaPayment({ amount, onSuccess, onError }: MPesaPaymentProps) {\n  const [phoneNumber, setPhoneNumber] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [checkoutId, setCheckoutId] = useState<string | null>(null);\n  const [kesAmount, setKesAmount] = useState<number | null>(null);\n  const { toast } = useToast();\n  const { checkStatus, isMaintenance } = usePaymentGatewayStatus('mpesa');\n\n  // Fetch KES conversion when amount changes\n  useEffect(() => {\n    const fetchKesAmount = async () => {\n      try {\n        const data = await apiClient<{ amount: number }>('/currency/convert', {\n          method: 'POST',\n          body: JSON.stringify({\n            amount: Number(amount),\n            from: 'USD',\n            to: 'KES',\n          }),\n        });\n        setKesAmount(data.amount);\n      } catch (error) {\n\n        console.error('Failed to convert currency:', error);\n        toast({\n          variant: \"destructive\",\n          title: \"Currency Conversion Failed\",\n          description: \"Unable to convert USD to KES. Please try again.\",\n        });\n      }\n    };\n\n    fetchKesAmount();\n  }, [amount, toast]);\n\n  const formatPhoneNumber = (number: string) => {\n    // Remove any non-digit characters\n    const cleaned = number.replace(/\\D/g, '');\n    // Format as per Kenyan format\n    if (cleaned.length <= 9) return cleaned;\n    if (cleaned.startsWith('254')) return cleaned;\n    if (cleaned.startsWith('0')) return `254${cleaned.slice(1)}`;\n    return `254${cleaned}`;\n  };\n\n  const handlePhoneNumberChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const formatted = formatPhoneNumber(e.target.value);\n    setPhoneNumber(formatted);\n  };\n\n  const checkPaymentStatus = async (checkoutRequestId: string) => {\n    try {\n      const data = await apiClient<{ ResultCode?: string; message?: string }>(`/mpesa/status/${checkoutRequestId}`);\n\n      if (data.ResultCode === '0') {\n\n        toast({\n          title: 'Payment Successful',\n          description: 'Thank you for your donation!',\n        });\n        onSuccess?.();\n        return true;\n      }\n      return false;\n    } catch (error) {\n      console.error('Error checking payment status:', error);\n      const errorMessage = error instanceof Error ? error.message : 'Failed to check payment status';\n      toast({\n        title: 'Error',\n        description: errorMessage,\n        variant: 'destructive',\n      });\n      return false;\n    }\n  };\n\n  const pollPaymentStatus = async (checkoutRequestId: string) => {\n    let attempts = 0;\n    const maxAttempts = 10;\n    const interval = setInterval(async () => {\n      attempts++;\n      const success = await checkPaymentStatus(checkoutRequestId);\n      if (success || attempts >= maxAttempts) {\n        clearInterval(interval);\n        setIsLoading(false);\n        if (!success && attempts >= maxAttempts) {\n          toast({\n            title: 'Payment Status Unknown',\n            description: 'Please check your M-Pesa messages to confirm the payment status.',\n            variant: 'destructive',\n          });\n        }\n      }\n    }, 5000); // Check every 5 seconds\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    try {\n      if (!checkStatus()) {\n        return;\n      }\n      // Validate phone number\n      phoneNumberSchema.parse(phoneNumber);\n\n      setIsLoading(true);\n      const data = await apiClient<{ CheckoutRequestID?: string; error?: string }>('/mpesa/initiate', {\n        method: 'POST',\n        body: JSON.stringify({\n          phoneNumber,\n          amount: parseFloat(amount),\n          reference: 'Donation',\n          description: 'Donation to Family Peace Association',\n        }),\n      });\n\n\n      if (data.CheckoutRequestID) {\n        setCheckoutId(data.CheckoutRequestID);\n        toast({\n          title: 'Check your phone',\n          description: 'Please enter your M-Pesa PIN to complete the payment.',\n        });\n        pollPaymentStatus(data.CheckoutRequestID);\n      } else {\n        throw new Error(data.error || 'Failed to initiate payment');\n      }\n\n    } catch (error) {\n      setIsLoading(false);\n      const message = error instanceof z.ZodError \n        ? 'Please enter a valid Kenyan phone number' \n        : 'Failed to initiate payment';\n      \n      toast({\n        title: 'Error',\n        description: message,\n        variant: 'destructive',\n      });\n      onError?.(error);\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-4\" noValidate>\n      <div className=\"space-y-2\">\n        <label htmlFor=\"mpesa-phone\" className=\"block text-sm font-medium text-gray-700\">\n          M-Pesa Phone Number\n        </label>\n        <Input\n          id=\"mpesa-phone\"\n          name=\"phoneNumber\"\n          type=\"tel\"\n          placeholder=\"e.g., 0712345678\"\n          value={phoneNumber}\n          onChange={handlePhoneNumberChange}\n          className=\"block w-full\"\n          disabled={isLoading}\n          autoComplete=\"tel\"\n          inputMode=\"tel\"\n          required\n          aria-describedby=\"phone-help\"\n        />\n        <p id=\"phone-help\" className=\"text-sm text-gray-500\">\n          Enter the phone number registered with M-Pesa\n        </p>\n      </div>\n\n      <Button\n        type=\"submit\"\n        className=\"w-full bg-green-600 hover:bg-green-700 text-white\"\n        disabled={isLoading}\n        aria-busy={isLoading}\n      >\n        {isLoading ? 'Processing...' : `Pay ${amount} KES via M-Pesa`}\n      </Button>\n\n      {isLoading && checkoutId && (\n        <div className=\"text-sm text-center text-gray-600\" role=\"status\" aria-live=\"polite\">\n          Waiting for M-Pesa confirmation...\n        </div>\n      )}\n    </form>\n  );\n}\n","size_bytes":6354},"client/src/components/MarkdownContent.tsx":{"content":"import ReactMarkdown from 'react-markdown'\nimport remarkGfm from 'remark-gfm'\nimport rehypeRaw from 'rehype-raw'\n\ninterface MarkdownContentProps {\n  content: string\n}\n\nexport function MarkdownContent({ content }: MarkdownContentProps) {\n  const markdownClass = \"prose prose-slate max-w-none dark:prose-invert prose-headings:font-poppins prose-h1:text-3xl prose-h1:font-bold prose-h2:text-2xl prose-h2:font-semibold prose-p:text-base prose-p:leading-7 prose-a:text-primary hover:prose-a:text-primary/80 prose-img:rounded-lg prose-img:my-8 prose-pre:bg-muted prose-pre:p-4 prose-blockquote:border-l-4 prose-blockquote:border-primary prose-ul:list-disc prose-ol:list-decimal\"\n\n  return (\n    <div className={markdownClass}>\n      <ReactMarkdown\n        remarkPlugins={[remarkGfm]}\n        rehypePlugins={[rehypeRaw]}\n      >\n        {content}\n      </ReactMarkdown>\n    </div>\n  )\n}\n","size_bytes":880},"client/src/components/Newsletter.tsx":{"content":"import { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\nexport default function Newsletter() {\n  const [email, setEmail] = useState(\"\");\n  const { toast } = useToast();\n\n  const subscriptionMutation = useMutation({\n    mutationFn: (email: string) => \n      apiRequest(\"POST\", \"/api/newsletter-subscriptions\", { email }),\n    onSuccess: () => {\n      toast({\n        title: \"Success!\",\n        description: \"Thank you for subscribing to our newsletter!\",\n      });\n      setEmail(\"\");\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to subscribe. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!email) return;\n    \n    subscriptionMutation.mutate(email);\n  };\n\n  return (\n    <div className=\"text-center\">\n      <h2 className=\"text-2xl md:text-3xl font-bold text-white mb-4\">\n        Get the Latest Family <span className=\"text-white/90\">Wellness News</span>\n      </h2>\n      <p className=\"text-lg text-white/90 max-w-2xl mx-auto mb-8\">\n        Sign up for family support updates and resources to strengthen your relationships\n      </p>\n      \n      <form onSubmit={handleSubmit} className=\"max-w-md mx-auto flex flex-col sm:flex-row gap-4\">\n        <Input\n          type=\"email\"\n          placeholder=\"Enter your email\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          required\n          className=\"flex-1 bg-white/10 border-white/20 text-white placeholder:text-white/60\"\n        />\n        <Button \n          type=\"submit\" \n          disabled={subscriptionMutation.isPending}\n          className=\"bg-white text-gray-800 hover:bg-gray-100 font-semibold\"\n        >\n          {subscriptionMutation.isPending ? \"Subscribing...\" : \"Subscribe\"}\n        </Button>\n      </form>\n      \n      <p className=\"text-white/75 text-sm mt-4\">\n        Press 'Subscribe' to confirm your acceptance of the Terms of Service.\n      </p>\n    </div>\n  );\n}\n","size_bytes":2281},"client/src/components/PayPalClient.tsx":{"content":"export {};\n","size_bytes":11},"client/src/components/PayPalDonateButton.tsx":{"content":"import { PayPalButtons } from \"@paypal/react-paypal-js\";\nimport { useState, useEffect } from \"react\";\nimport { usePaymentGatewayStatus } from \"@/hooks/use-payment-gateway-status\";\n\ninterface PayPalDonateButtonProps {\n  amount: string;\n  onSuccess?: () => void;\n  onError?: (error: any) => void;\n}\n\nexport default function PayPalDonateButton({ \n  amount, \n  onSuccess, \n  onError\n}: PayPalDonateButtonProps) {\n  const [error, setError] = useState<string | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isSdkReady, setIsSdkReady] = useState(false);\n  const { checkStatus, isMaintenance } = usePaymentGatewayStatus('paypal');\n\n  // Handle PayPal SDK ready state\n  useEffect(() => {\n    const checkPayPalSDK = () => {\n      if (window.paypal) {\n        setIsSdkReady(true);\n      }\n    };\n    \n    checkPayPalSDK();\n    // If SDK isn't loaded yet, check again in a moment\n    const timer = setInterval(checkPayPalSDK, 500);\n    \n    return () => clearInterval(timer);\n  }, []);\n\n  // Reset error when amount changes\n  useEffect(() => {\n    setError(null);\n  }, [amount]);\n\n  const createOrder = async () => {\n    setIsLoading(true);\n    setError(null);\n    try {\n      if (!checkStatus()) {\n        setIsLoading(false);\n        return;\n      }\n      console.log('Creating PayPal order for amount:', amount);\n      \n      if (!amount || parseFloat(amount) <= 0) {\n        throw new Error(\"Invalid donation amount\");\n      }\n\n      const apiBaseUrl = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n      const response = await fetch(`${apiBaseUrl}/api/paypal/create-order`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          amount: amount,\n          currency: \"USD\",\n        }),\n      });\n\n      const orderData = await response.json();\n      console.log('PayPal create order response:', orderData);\n      \n      if (!response.ok) {\n        throw new Error(orderData.error || orderData.message || `HTTP ${response.status}: ${response.statusText}`);\n      }\n      \n      if (orderData.id) {\n        return orderData.id;\n      } else {\n        throw new Error(\"No order ID received from PayPal\");\n      }\n    } catch (err) {\n      const error = err as Error;\n      console.error('PayPal create order error:', error);\n      const errorMessage = error.message || \"Failed to create PayPal order\";\n      setError(errorMessage);\n      onError?.(error);\n      throw err;\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const onApprove = async (data: any) => {\n    try {\n      console.log('PayPal onApprove called with:', data);\n      \n      if (!data.orderID) {\n        throw new Error(\"No order ID provided by PayPal\");\n      }\n\n      const apiBaseUrl = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n      const response = await fetch(`${apiBaseUrl}/api/paypal/capture-order`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          orderId: data.orderID,\n        }),\n      });\n\n      const orderData = await response.json();\n      console.log('PayPal capture response:', orderData);\n      \n      if (!response.ok) {\n        throw new Error(orderData.error || orderData.message || `HTTP ${response.status}: ${response.statusText}`);\n      }\n      \n      if (orderData.status === \"COMPLETED\") {\n        console.log('Payment completed successfully');\n        onSuccess?.();\n      } else {\n        console.log('Payment status:', orderData.status, orderData);\n        throw new Error(`Payment status: ${orderData.status}. Details: ${JSON.stringify(orderData)}`);\n      }\n    } catch (err) {\n      const error = err as Error;\n      console.error('PayPal capture error:', error);\n      const errorMessage = error.message || \"Failed to complete PayPal payment\";\n      setError(errorMessage);\n      onError?.(error);\n    }\n  };\n\n  return (\n    <div className=\"w-full\">\n      <style>\n        {`\n          @keyframes loader-bounce {\n            0%, 100% { transform: translateY(0); }\n            50% { transform: translateY(-10px); }\n          }\n          .loader-dot {\n            width: 8px;\n            height: 8px;\n            margin: 0 4px;\n            border-radius: 50%;\n            display: inline-block;\n            background-color: #0070ba;\n          }\n          .loader-dot:nth-child(1) { animation: loader-bounce 0.6s 0.1s infinite; }\n          .loader-dot:nth-child(2) { animation: loader-bounce 0.6s 0.2s infinite; }\n          .loader-dot:nth-child(3) { animation: loader-bounce 0.6s 0.3s infinite; }\n        `}\n      </style>\n      {error && (\n        <div style={{ color: '#ff0000', fontSize: '14px', marginBottom: '16px', textAlign: 'center' }}>\n          {error}\n        </div>\n      )}\n      {(!isSdkReady || isLoading) && (\n        <div style={{ textAlign: 'center', marginBottom: '16px' }}>\n          <div style={{ marginBottom: '8px' }}>\n            <span className=\"loader-dot\"></span>\n            <span className=\"loader-dot\"></span>\n            <span className=\"loader-dot\"></span>\n          </div>\n          <div style={{ color: '#666666', fontSize: '14px' }}>\n            {!isSdkReady ? 'Initializing PayPal...' : 'Processing...'}\n          </div>\n        </div>\n      )}\n      <div className={isLoading ? 'opacity-50 pointer-events-none transition-opacity duration-200' : ''}>\n        <PayPalButtons\n          style={{ layout: \"vertical\" }}\n          createOrder={createOrder}\n          onApprove={onApprove}\n          onError={(err) => {\n            setError(\"Something went wrong. Please try again.\");\n            onError?.(err);\n            setIsLoading(false);\n          }}\n          disabled={!amount || isLoading}\n        />\n      </div>\n    </div>\n  );\n}\n","size_bytes":5807},"client/src/components/PayPalProvider.tsx":{"content":"import { ReactNode } from 'react';\nimport { PayPalScriptProvider } from '@paypal/react-paypal-js';\n\ninterface PayPalProviderProps {\n    children: ReactNode;\n}\n\nexport default function PayPalProvider({ children }: PayPalProviderProps) {\n    const clientId = import.meta.env.VITE_PAYPAL_CLIENT_ID || import.meta.env.PAYPAL_CLIENT_ID;\n\n    if (!clientId) {\n        console.error('PayPal client ID is not configured');\n        return <>{children}</>;\n    }\n\n\n    return (\n        <PayPalScriptProvider options={{\n            clientId: clientId,\n            'client-id': clientId,\n            currency: 'USD',\n            vault: false,\n            intent: 'capture'\n        }}>\n            {children}\n        </PayPalScriptProvider>\n    );\n}\n","size_bytes":737},"client/src/components/SEO.tsx":{"content":"import { Helmet } from \"react-helmet\";\n\ninterface SEOProps {\n  title?: string;\n  description?: string;\n  keywords?: string;\n  url?: string;\n  image?: string;\n}\n\nexport default function SEO({\n  title = \"Family Peace Association | Family, Peace, Wellbeing\",\n  description = \"Family Peace Association promotes family wellbeing, peace, and support. Learn more about family, peace, and how to build stronger families. Join our events, donate, and access resources for family and peace.\",\n  keywords = \"family, family peace, peace, family peace association, wellbeing, support, donate, events, counseling, conflict resolution, parenting, relationships, marriage, children, mental health, community, nonprofit, charity\",\n  url = \"https://www.familypeaceassociation.org/\",\n  image = \"https://images.unsplash.com/photo-1511895426328-dc8714191300?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&h=630\"\n}: SEOProps) {\n  return (\n    <Helmet>\n      <title>{title}</title>\n      <meta name=\"description\" content={description} />\n      <meta name=\"keywords\" content={keywords} />\n      <meta name=\"author\" content=\"Family Peace Association\" />\n      <meta name=\"robots\" content=\"index, follow\" />\n      <link rel=\"canonical\" href={url} />\n      <meta property=\"og:title\" content={title} />\n      <meta property=\"og:description\" content={description} />\n      <meta property=\"og:type\" content=\"website\" />\n      <meta property=\"og:url\" content={url} />\n      <meta property=\"og:image\" content={image} />\n      <meta name=\"twitter:card\" content=\"summary_large_image\" />\n      <meta name=\"twitter:title\" content={title} />\n      <meta name=\"twitter:description\" content={description} />\n      <meta name=\"twitter:image\" content={image} />\n      <meta name=\"theme-color\" content=\"#2563eb\" />\n      <meta name=\"apple-mobile-web-app-capable\" content=\"yes\" />\n      <meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black-translucent\" />\n    </Helmet>\n  );\n}\n","size_bytes":1943},"client/src/components/ScrollAnimationWrapper.tsx":{"content":"import { useEffect, useRef, useState } from \"react\";\nimport { useIntersectionObserver } from \"@/hooks/useIntersectionObserver\";\n\ninterface ScrollAnimationWrapperProps {\n  children: React.ReactNode;\n  animation?: \"fade-in\" | \"slide-up\" | \"slide-in-left\" | \"slide-in-right\" | \"scale-in\";\n  delay?: number;\n  className?: string;\n}\n\nexport default function ScrollAnimationWrapper({\n  children,\n  animation = \"slide-up\",\n  delay = 0,\n  className = \"\",\n}: ScrollAnimationWrapperProps) {\n  const ref = useRef<HTMLDivElement>(null);\n  const [hasAnimated, setHasAnimated] = useState(false);\n  const isIntersecting = useIntersectionObserver(ref, {\n    threshold: 0.1,\n    rootMargin: \"0px 0px -50px 0px\",\n  });\n\n  useEffect(() => {\n    if (isIntersecting && !hasAnimated) {\n      const timeout = setTimeout(() => {\n        setHasAnimated(true);\n      }, delay);\n\n      return () => clearTimeout(timeout);\n    }\n  }, [isIntersecting, hasAnimated, delay]);\n\n  const animationClass = hasAnimated ? `animate-${animation}` : \"opacity-0\";\n\n  return (\n    <div\n      ref={ref}\n      className={`transition-all duration-600 ${animationClass} ${className}`}\n    >\n      {children}\n    </div>\n  );\n}\n","size_bytes":1180},"client/src/components/ScrollToTop.tsx":{"content":"import { useEffect } from \"react\";\nimport { useLocation } from \"wouter\";\n\nexport default function ScrollToTop() {\n  const [location] = useLocation();\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, [location]);\n\n  return null;\n}\n","size_bytes":234},"client/src/components/SuspenseWrapper.tsx":{"content":"import { Suspense } from 'react';\nimport { LoadingSpinner } from './ui/loading-spinner';\n\ninterface SuspenseWrapperProps {\n  children: React.ReactNode;\n}\n\nexport function SuspenseWrapper({ children }: SuspenseWrapperProps) {\n  return (\n    <Suspense fallback={<LoadingSpinner />}>\n      {children}\n    </Suspense>\n  );\n}\n","size_bytes":321},"client/src/components/ThemeProvider.tsx":{"content":"import { createContext, useContext, useEffect, useState, type ReactNode } from \"react\";\n\ntype Theme = \"golden\" | \"blue\";\n\ninterface ThemeProviderContext {\n  theme: Theme;\n  setTheme: (theme: Theme) => void;\n  toggleTheme: () => void;\n}\n\nconst ThemeProviderContext = createContext<ThemeProviderContext | undefined>(undefined);\n\nexport function ThemeProvider({ children }: { children: ReactNode }) {\n  const [theme, setTheme] = useState<Theme>(() => {\n    if (typeof window !== \"undefined\") {\n      return (localStorage.getItem(\"theme\") as Theme) || \"golden\";\n    }\n    return \"golden\";\n  });\n\n  useEffect(() => {\n    const root = window.document.documentElement;\n    \n    // Remove all theme classes\n    root.removeAttribute(\"data-theme\");\n    \n    // Apply the selected theme\n    if (theme === \"blue\") {\n      root.setAttribute(\"data-theme\", \"blue\");\n    }\n    \n    localStorage.setItem(\"theme\", theme);\n  }, [theme]);\n\n  const toggleTheme = () => {\n    setTheme(prev => prev === \"golden\" ? \"blue\" : \"golden\");\n  };\n\n  const value = {\n    theme,\n    setTheme,\n    toggleTheme,\n  };\n\n  return (\n    <ThemeProviderContext.Provider value={value}>\n      {children}\n    </ThemeProviderContext.Provider>\n  );\n}\n\nexport const useTheme = () => {\n  const context = useContext(ThemeProviderContext);\n\n  if (context === undefined) {\n    throw new Error(\"useTheme must be used within a ThemeProvider\");\n  }\n\n  return context;\n};\n","size_bytes":1417},"client/src/components/Toaster.tsx":{"content":"import {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport function Toaster() {\n  const { toasts } = useToast();\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        );\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  );\n}\n\n// Add a global error handler that shows errors in toast\nexport function setupGlobalErrorHandler() {\n  const { toast } = useToast();\n\n  window.onerror = (message, source, lineno, colno, error) => {\n    toast({\n      title: 'An error occurred',\n      description: error?.message || String(message),\n      variant: 'destructive',\n    });\n    return false;\n  };\n\n  window.onunhandledrejection = (event) => {\n    toast({\n      title: 'Promise Rejection',\n      description: event.reason?.message || 'An async error occurred',\n      variant: 'destructive',\n    });\n  };\n}\n","size_bytes":1345},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/hooks/use-payment-gateway-status.ts":{"content":"import { useQuery } from '@tanstack/react-query';\nimport { useToast } from '@/hooks/use-toast';\nimport { apiClient } from '@/lib/api';\n\n\ninterface PaymentGatewayStatus {\n  gateway: string;\n  status: 'live' | 'maintenance';\n  updatedAt: string;\n}\n\nexport function usePaymentGatewayStatus(gateway: 'paypal' | 'mpesa') {\n  const { toast } = useToast();\n\n  const { data: status, isLoading, error } = useQuery<PaymentGatewayStatus>({\n    queryKey: ['payment-gateway-status', gateway],\n    queryFn: async () => {\n      const statuses: PaymentGatewayStatus[] = await apiClient('/admin/payment-gateway-status');\n      return statuses.find(s => s.gateway === gateway) || {\n        gateway,\n        status: 'maintenance',\n        updatedAt: new Date().toISOString()\n      };\n    },\n\n  });\n\n  const isLive = status?.status === 'live';\n  const isMaintenance = status?.status === 'maintenance';\n\n  const checkStatus = () => {\n    if (isMaintenance) {\n      toast({\n        title: \"Payment Gateway Unavailable\",\n        description: `${gateway.toUpperCase()} payments are currently under maintenance. Please try again later or use a different payment method.`,\n        variant: \"destructive\",\n      });\n      return false;\n    }\n    return true;\n  };\n\n  return {\n    isLive,\n    isMaintenance,\n    isLoading,\n    error,\n    checkStatus,\n  };\n}\n","size_bytes":1330},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/hooks/useIntersectionObserver.ts":{"content":"import { useEffect, useState, type RefObject } from \"react\";\n\ninterface UseIntersectionObserverOptions {\n  threshold?: number;\n  rootMargin?: string;\n  triggerOnce?: boolean;\n}\n\nexport function useIntersectionObserver(\n  ref: RefObject<Element>,\n  options: UseIntersectionObserverOptions = {}\n) {\n  const { threshold = 0.1, rootMargin = \"0px\", triggerOnce = true } = options;\n  const [isIntersecting, setIsIntersecting] = useState(false);\n  const [hasTriggered, setHasTriggered] = useState(false);\n\n  useEffect(() => {\n    const element = ref.current;\n    if (!element) return;\n\n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        const isElementIntersecting = entry.isIntersecting;\n        \n        if (isElementIntersecting && (!triggerOnce || !hasTriggered)) {\n          setIsIntersecting(true);\n          if (triggerOnce) {\n            setHasTriggered(true);\n          }\n        } else if (!triggerOnce) {\n          setIsIntersecting(isElementIntersecting);\n        }\n      },\n      { threshold, rootMargin }\n    );\n\n    observer.observe(element);\n\n    return () => {\n      observer.unobserve(element);\n    };\n  }, [ref, threshold, rootMargin, triggerOnce, hasTriggered]);\n\n  return isIntersecting;\n}\n","size_bytes":1229},"client/src/hooks/useScrollAnimation.ts":{"content":"import { useEffect, useState } from \"react\";\n\nexport function useScrollAnimation() {\n  const [activeSection, setActiveSection] = useState(\"\");\n\n  useEffect(() => {\n    const handleScroll = () => {\n      const sections = document.querySelectorAll(\"section[id]\");\n      const navLinks = document.querySelectorAll(\"[data-nav-link]\");\n      \n      let current = \"\";\n      sections.forEach((section) => {\n        const sectionTop = (section as HTMLElement).offsetTop - 100;\n        if (window.pageYOffset >= sectionTop) {\n          current = section.getAttribute(\"id\") || \"\";\n        }\n      });\n\n      setActiveSection(current);\n\n      // Update navigation highlighting\n      navLinks.forEach((link) => {\n        const href = link.getAttribute(\"href\");\n        if (href === `#${current}`) {\n          link.classList.add(\"text-primary\", \"font-semibold\");\n          link.classList.remove(\"text-foreground/80\");\n        } else {\n          link.classList.remove(\"text-primary\", \"font-semibold\");\n          link.classList.add(\"text-foreground/80\");\n        }\n      });\n    };\n\n    window.addEventListener(\"scroll\", handleScroll);\n    return () => window.removeEventListener(\"scroll\", handleScroll);\n  }, []);\n\n  return { activeSection };\n}\n","size_bytes":1231},"client/src/lib/adminApi.ts":{"content":"import { apiClient } from './api';\nimport type { DashboardStats } from '@/types';\n\nexport const adminApi = {\n  getDashboardStats: () => \n    apiClient<DashboardStats>('/api/admin/dashboard/stats'),\n    \n  getPaymentGatewayStatus: () =>\n    apiClient('/api/admin/payment-gateway-status'),\n    \n  getRecentTransactions: () =>\n    apiClient('/api/admin/transactions/recent'),\n    \n  getRecentDonations: () =>\n    apiClient('/api/admin/donations/recent'),\n    \n  getRecentEvents: () =>\n    apiClient('/api/admin/events/recent')\n};\n","size_bytes":527},"client/src/lib/animations.ts":{"content":"export const scrollToSection = (sectionId: string) => {\n  const element = document.getElementById(sectionId);\n  if (element) {\n    const headerOffset = 80;\n    const elementPosition = element.offsetTop;\n    const offsetPosition = elementPosition - headerOffset;\n\n    window.scrollTo({\n      top: offsetPosition,\n      behavior: \"smooth\",\n    });\n  }\n};\n\nexport const animateCounter = (\n  element: HTMLElement,\n  target: number,\n  duration: number = 2000\n) => {\n  const start = performance.now();\n  \n  const updateCounter = (currentTime: number) => {\n    const elapsed = currentTime - start;\n    const progress = Math.min(elapsed / duration, 1);\n    \n    // Easing function for smooth animation\n    const easeOutExpo = progress === 1 ? 1 : 1 - Math.pow(2, -10 * progress);\n    \n    const current = Math.floor(target * easeOutExpo);\n    element.textContent = current.toString();\n    \n    if (progress < 1) {\n      requestAnimationFrame(updateCounter);\n    } else {\n      element.textContent = target.toString();\n    }\n  };\n  \n  requestAnimationFrame(updateCounter);\n};\n\nexport const staggeredAnimation = (\n  elements: NodeListOf<Element> | Element[],\n  delay: number = 100\n) => {\n  Array.from(elements).forEach((element, index) => {\n    setTimeout(() => {\n      element.classList.add(\"animate-slide-up\");\n    }, index * delay);\n  });\n};\n","size_bytes":1335},"client/src/lib/api.ts":{"content":"import { useAuth } from './auth';\n\nconst API_URL = import.meta.env.VITE_API_URL || '';\n\nexport class ApiError extends Error {\n\n  constructor(\n    message: string,\n    public status: number,\n    public data?: any\n  ) {\n    super(message);\n    this.name = 'ApiError';\n  }\n}\n\nasync function handleResponse(response: Response) {\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({}));\n    throw new ApiError(\n      error.message || 'An error occurred',\n      response.status,\n      error\n    );\n  }\n  \n  return response.json();\n}\n\nexport async function apiClient<T = any>(\n  endpoint: string,\n  options: RequestInit = {}\n): Promise<T> {\n  const token = useAuth.getState().token;\n  \n  const headers: HeadersInit = {\n    'Content-Type': 'application/json',\n    ...options.headers,\n  };\n\n  if (token) {\n    (headers as any).Authorization = `Bearer ${token}`;\n  }\n\n  // Include CSRF token from cookie if available\n  const csrfToken = document.cookie\n    .split('; ')\n    .find(row => row.startsWith('x-csrf-token='))\n    ?.split('=')[1];\n\n  if (csrfToken) {\n    (headers as Record<string, string>)['x-csrf-token'] = csrfToken;\n  }\n\n  const response = await fetch(`${API_URL}/api${endpoint}`, {\n    ...options,\n    headers,\n    credentials: 'include', // Important for CSRF\n  });\n\n\n  return handleResponse(response);\n}\n\nexport const getLatestEvent = () => apiClient('/events/latest');\n\nexport const getFeaturedActiveEvents = () => apiClient('/events/featured-active');\n\n// Common API endpoints\n\nexport const adminApi = {\n\n  // Event Registrations\n  getEventRegistrations: (eventId?: number) =>\n    apiClient(`/admin/event-registrations${eventId ? `?eventId=${eventId}` : ''}`),\n  // Media Management\n  getMedia: () => apiClient('/media'),\n  uploadMedia: (file: File) => {\n    const formData = new FormData();\n    formData.append('file', file);\n    return fetch(`${API_URL}/api/media/upload`, {\n      method: 'POST',\n      body: formData,\n    }).then(handleResponse);\n  },\n\n  deleteMedia: (id: number) => apiClient(`/media/${id}`, { method: 'DELETE' }),\n\n  // Dashboard\n  getDashboardStats: () => \n    apiClient('/admin/dashboard'),\n  \n  getTransactions: (params?: { page?: number; limit?: number }) =>\n    apiClient('/admin/transactions' + (params ? `?${new URLSearchParams(params as any)}` : '')),\n\n  // Blog Posts\n  getBlogPosts: () =>\n    apiClient('/admin/blog-posts'),\n  \n  createBlogPost: (data: any) =>\n    apiClient('/admin/blog-posts', {\n      method: 'POST',\n      body: JSON.stringify(data),\n    }),\n  \n  updateBlogPost: (id: number, data: any) =>\n    apiClient(`/admin/blog-posts/${id}`, {\n      method: 'PUT',\n      body: JSON.stringify(data),\n    }),\n  \n  deleteBlogPost: (id: number) =>\n    apiClient(`/admin/blog-posts/${id}`, {\n      method: 'DELETE',\n    }),\n\n  // Users\n  getUsers: () =>\n    apiClient('/admin/users'),\n  \n  createUser: (data: any) =>\n    apiClient('/admin/users', {\n      method: 'POST',\n      body: JSON.stringify(data)\n    }),\n\n  updateUser: (id: number, data: any) =>\n    apiClient(`/admin/users/${id}`, {\n      method: 'PUT',\n      body: JSON.stringify(data),\n    }),\n  \n  deleteUser: (id: number) =>\n    apiClient(`/admin/users/${id}`, {\n      method: 'DELETE',\n    }),\n\n  // Donations\n  getDonations: () =>\n    apiClient('/admin/donations'),\n\n  // Events\n  getEvents: () =>\n    apiClient('/admin/events'),\n  \n  createEvent: (data: any) =>\n    apiClient('/admin/events', {\n      method: 'POST',\n      body: JSON.stringify(data),\n    }),\n  \n  updateEvent: (id: number, data: any) =>\n    apiClient(`/admin/events/${id}`, {\n      method: 'PUT',\n      body: JSON.stringify(data),\n    }),\n  \n  deleteEvent: (id: number) =>\n    apiClient(`/admin/events/${id}`, {\n      method: 'DELETE',\n    }),\n\n  // Volunteers\n  getVolunteers: () =>\n    apiClient('/admin/volunteers'),\n  \n  updateVolunteer: (id: number, data: any) =>\n    apiClient(`/admin/volunteers/${id}`, {\n      method: 'PUT',\n      body: JSON.stringify(data),\n    }),\n\n  // Reports\n  getReports: (timeRange: string) =>\n    apiClient(`/admin/reports?timeRange=${timeRange}`),\n\n  exportReport: (timeRange: string, format: 'csv' | 'pdf') =>\n    apiClient(`/admin/reports/export?timeRange=${timeRange}&format=${format}`),\n\n  // Settings\n  getSettings: () =>\n    apiClient('/admin/settings'),\n\n  updateSettings: (data: any) =>\n    apiClient('/admin/settings', {\n      method: 'PUT',\n      body: JSON.stringify(data),\n    }),\n\n  // Volunteer Applications\n  getVolunteerApplications: () =>\n    apiClient('/admin/volunteer-applications'),\n\n  updateVolunteerApplication: (id: number, status: 'approved' | 'rejected') =>\n    apiClient(`/admin/volunteer-applications/${id}`, {\n      method: 'PUT',\n      body: JSON.stringify({ status }),\n    }),\n};\n","size_bytes":4747},"client/src/lib/auth.new.ts":{"content":"","size_bytes":0},"client/src/lib/auth.ts":{"content":"import { create } from 'zustand';\nimport { createJSONStorage, persist } from 'zustand/middleware';\n\ninterface User {\n  id: number;\n  username: string;\n  role: 'admin' | 'volunteer' | 'donor';\n}\n\ninterface AuthState {\n  token: string | null;\n  user: User | null;\n  isLoading: boolean;\n  setAuth: (token: string, user: User) => void;\n  clearAuth: () => void;\n  setLoading: (isLoading: boolean) => void;\n}\n\nexport const useAuth = create<AuthState>()(\n  persist(\n    (set) => ({\n      token: null,\n      user: null,\n      isLoading: false,\n      setAuth: (token, user) => set({ token, user, isLoading: false }),\n      clearAuth: () => set({ token: null, user: null }),\n      setLoading: (isLoading) => set({ isLoading }),\n    }),\n    {\n      name: 'auth-storage',\n      storage: createJSONStorage(() => sessionStorage),\n    }\n  )\n);\n\nexport function useAuthenticatedUser() {\n  const isLoading = useAuth((state) => state.isLoading);\n  const user = useAuth((state) => state.user);\n  const token = useAuth((state) => state.token);\n  \n  return {\n    isAuthenticated: !!token && !!user,\n    isLoading,\n    user\n  };\n}\n\nexport function useIsAdmin() {\n  const user = useAuth((state) => state.user);\n  return user?.role === 'admin';\n}\n\nexport async function login(username: string, password: string) {\n  const auth = useAuth.getState();\n  auth.setLoading(true);\n  \n  try {\n    const response = await fetch('/api/auth/login', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ username, password })\n    });\n\n    if (!response.ok) {\n      throw new Error('Invalid credentials');\n    }\n\n    const data = await response.json();\n    auth.setAuth(data.token, data.user);\n    return data;\n  } catch (error) {\n    auth.clearAuth();\n    throw error;\n  } finally {\n    auth.setLoading(false);\n  }\n}\n\nexport async function logout() {\n  const auth = useAuth.getState();\n  auth.clearAuth();\n}\n","size_bytes":1940},"client/src/lib/lazy-imports.ts":{"content":"import { lazy } from 'react';\n\n// Payment Components\nexport const PayPalButtons = lazy(() => \n  import('@paypal/react-paypal-js').then(mod => ({ default: mod.PayPalButtons }))\n);\n\nexport const PayPalScriptProvider = lazy(() => \n  import('@paypal/react-paypal-js').then(mod => ({ default: mod.PayPalScriptProvider }))\n);\n\nexport const MPesaPayment = lazy(() => \n  import('@/components/MPesaPayment').then(mod => ({ default: mod.default }))\n);\n\n// Admin Components\nexport const AdminPayments = lazy(() => \n  import('@/pages/admin/payments').then(mod => ({ default: mod.default }))\n);\n\nexport const PaymentGatewayStatus = lazy(async () => {\n  const Component = await import('@/components/admin/PaymentGatewayStatus');\n  return { default: Component.PaymentGatewayStatus };\n});\n\nexport const PaymentGatewayConfig = lazy(async () => {\n  const Component = await import('@/components/admin/PaymentGatewayConfig');\n  return { default: Component.PaymentGatewayConfig };\n});\n","size_bytes":964},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey[0] as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":1376},"client/src/lib/staticData.ts":{"content":"// Static data loader for serverless content\nexport async function loadStaticData<T>(filename: string): Promise<T> {\n  try {\n    const response = await fetch(`${import.meta.env.BASE_URL}data/${filename}`);\n    if (!response.ok) {\n      throw new Error(`Failed to load ${filename}: ${response.status}`);\n    }\n    return await response.json();\n  } catch (error) {\n    console.error(`Error loading static data from ${filename}:`, error);\n    throw error;\n  }\n}\n\n// Blog Posts - Fetch directly from database API\nexport const getBlogPosts = async () => {\n  try {\n    const response = await fetch('/api/blog-posts');\n    if (!response.ok) {\n      throw new Error(`Failed to fetch blog posts: ${response.status}`);\n    }\n    return await response.json();\n  } catch (error) {\n    console.error('Error fetching blog posts:', error);\n    throw error;\n  }\n};\n\nexport const getFeaturedBlogPosts = async () => {\n  try {\n    const response = await fetch('/api/blog-posts/featured');\n    if (!response.ok) {\n      throw new Error(`Failed to fetch featured posts: ${response.status}`);\n    }\n    return await response.json();\n  } catch (error) {\n    console.error('Error fetching featured posts:', error);\n    throw error;\n  }\n};\n\nexport const getBlogPostsByCategory = async (category: string) => {\n  try {\n    const response = await fetch(`/api/blog-posts/category/${category}`);\n    if (!response.ok) {\n      throw new Error(`Failed to fetch posts by category: ${response.status}`);\n    }\n    return await response.json();\n  } catch (error) {\n    console.error('Error fetching posts by category:', error);\n    throw error;\n  }\n};\n\nexport const getBlogPost = async (slug: string) => {\n  try {\n    const response = await fetch(`/api/blog-posts/${slug}`);\n    if (!response.ok) {\n      if (response.status === 404) {\n        return null;\n      }\n      throw new Error(`Failed to fetch blog post: ${response.status}`);\n    }\n    return await response.json();\n  } catch (error) {\n    console.error('Error fetching blog post:', error);\n    throw error;\n  }\n};\n\n// Gallery\nexport const getGallery = () => loadStaticData<{images: any[]}>('gallery.json');\n\nexport const getGalleryByCategory = async (category: string) => {\n  const gallery = await getGallery();\n  return {\n    images: gallery.images.filter(image => \n      image.category.toLowerCase() === category.toLowerCase()\n    )\n  };\n};\n\n// Active Causes - Fetch directly from database API\nexport const getActiveCauses = async () => {\n  try {\n    const response = await fetch('/api/causes/active');\n    if (!response.ok) {\n      throw new Error(`Failed to fetch active causes: ${response.status}`);\n    }\n    return await response.json();\n  } catch (error) {\n    console.error('Error fetching active causes:', error);\n    throw error;\n  }\n};\n\n// Events - Fetch directly from database API\nexport const getEvents = async () => {\n  try {\n    const response = await fetch('/api/events');\n    if (!response.ok) {\n      throw new Error(`Failed to fetch events: ${response.status}`);\n    }\n    return await response.json();\n  } catch (error) {\n    console.error('Error fetching events:', error);\n    throw error;\n  }\n};\n\nexport const getEventBySlug = async (slug: string) => {\n  try {\n    const response = await fetch(`/api/events/by-slug/${slug}`);\n    if (!response.ok) {\n      if (response.status === 404) {\n        return null;\n      }\n      throw new Error(`Failed to fetch event: ${response.status}`);\n    }\n    return await response.json();\n  } catch (error) {\n    console.error('Error fetching event by slug:', error);\n    throw error;\n  }\n};","size_bytes":3576},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/lib/validation.ts":{"content":"import { z } from 'zod';\nimport { useToast } from '@/hooks/use-toast';\n\n// Common validation schemas\nexport const emailSchema = z\n  .string()\n  .email('Invalid email address')\n  .min(1, 'Email is required');\n\nexport const passwordSchema = z\n  .string()\n  .min(8, 'Password must be at least 8 characters')\n  .regex(/[A-Z]/, 'Password must contain at least one uppercase letter')\n  .regex(/[a-z]/, 'Password must contain at least one lowercase letter')\n  .regex(/[0-9]/, 'Password must contain at least one number')\n  .regex(/[^A-Za-z0-9]/, 'Password must contain at least one special character');\n\nexport const usernameSchema = z\n  .string()\n  .min(3, 'Username must be at least 3 characters')\n  .max(20, 'Username must be at most 20 characters')\n  .regex(/^[a-zA-Z0-9_-]+$/, 'Username can only contain letters, numbers, underscores, and hyphens');\n\n// Form schemas\nexport const loginSchema = z.object({\n  username: usernameSchema,\n  password: z.string().min(1, 'Password is required'),\n});\n\nexport const registerSchema = z.object({\n  username: usernameSchema,\n  email: emailSchema,\n  password: passwordSchema,\n  confirmPassword: z.string(),\n}).refine((data) => data.password === data.confirmPassword, {\n  message: \"Passwords don't match\",\n  path: [\"confirmPassword\"],\n});\n\nexport const userUpdateSchema = z.object({\n  username: usernameSchema,\n  email: emailSchema,\n  role: z.enum(['admin', 'volunteer', 'donor']),\n  active: z.boolean(),\n});\n\nexport const donationSchema = z.object({\n  amount: z.number().min(1, 'Amount must be greater than 0'),\n  causeId: z.number().optional(),\n  paymentMethod: z.string().min(1, 'Payment method is required'),\n  anonymous: z.boolean(),\n  message: z.string().optional(),\n});\n\nexport const eventSchema = z.object({\n  title: z.string().min(1, 'Title is required'),\n  description: z.string().min(1, 'Description is required'),\n  date: z.string().min(1, 'Date is required'),\n  location: z.string().min(1, 'Location is required'),\n  capacity: z.number().min(1, 'Capacity must be at least 1'),\n  imageUrl: z.string().url('Invalid image URL'),\n});\n\n// Helper function to handle form validation\nexport function validateForm<T extends z.ZodType>(\n  schema: T,\n  data: unknown\n): { success: true; data: z.infer<T> } | { success: false; error: z.ZodError } {\n  try {\n    const validData = schema.parse(data);\n    return { success: true, data: validData };\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      // Show validation errors in toast\n      error.errors.forEach((err) => {\n        useToast().toast({\n          title: 'Validation Error',\n          description: err.message,\n          variant: 'destructive',\n        });\n      });\n      return { success: false, error };\n    }\n    throw error;\n  }\n}\n","size_bytes":2743},"client/src/pages/About.tsx":{"content":"import { Helmet } from \"react-helmet\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport ScrollAnimationWrapper from \"@/components/ScrollAnimationWrapper\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Link } from \"wouter\";\nimport { OptimizedImage } from \"@/components/ui/optimized-image\";\nimport { Heart, Users, Target, Award } from \"lucide-react\";\nimport type { TeamMember } from \"@shared/schema\";\nimport SEO from \"@/components/SEO\";\n\nexport default function About() {\n  const { data: teamMembers } = useQuery<TeamMember[]>({\n    queryKey: [\"/api/team-members\"],\n  });\n\n  return (\n    <>\n      <SEO />\n      <Helmet>\n        <title>About Us - Family Peace Association</title>\n        <meta name=\"description\" content=\"Learn about our mission, values, and the dedicated team working to build stronger families and create lasting peace in communities.\" />\n      </Helmet>\n\n      {/* Hero Section */}\n      <section className=\"pt-24 pb-20 bg-gradient-to-br from-primary/10 to-primary/5\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"text-center max-w-4xl mx-auto\">\n              <h1 className=\"text-4xl md:text-6xl font-bold text-gray-800 mb-6\">\n                Who <span className=\"primary-text\">we are</span>\n              </h1>\n              <p className=\"text-xl text-gray-600 mb-8\">\n                The family peace association (FPA) is an association of individuals, families, and communities that strive to create a peaceful, ideal world through building God-centered families.\n              </p>\n            </div>\n          </ScrollAnimationWrapper>\n        </div>\n      </section>\n\n      {/* Mission Section */}\n      <section className=\"py-20\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"grid lg:grid-cols-2 gap-12 items-center\">\n            <ScrollAnimationWrapper animation=\"slide-in-left\">\n              <div>\n                <h2 className=\"text-3xl md:text-4xl font-bold text-gray-800 mb-6\">\n                  Our <span className=\"primary-text\">Mission</span>\n                </h2>\n                <p className=\"text-lg text-gray-600 mb-6\">\n                  The Family Peace Association is dedicated to enlightening humanity by uplifting our spiritual consciousness through universal principles and values rooted in God-centered families. We believe that healthy families are the foundation of a thriving society.\n                </p>\n                <p className=\"text-lg text-gray-600 mb-8\">\n                  Through evidence-based therapeutic interventions, educational programs, and community support networks, we empower families to overcome challenges and build lasting bonds of love, understanding, and respect.\n                </p>\n                <Link href=\"/get-involved\">\n                  <Button className=\"primary-bg text-white hover:opacity-90\">\n                    Join Our Mission\n                  </Button>\n                </Link>\n              </div>\n            </ScrollAnimationWrapper>\n            <ScrollAnimationWrapper animation=\"slide-in-right\">\n              <OptimizedImage \n                src=\"https://images.unsplash.com/photo-1559027615-cd4628902d4a?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=400\" \n                alt=\"Community support group meeting\" \n                className=\"rounded-xl shadow-lg w-full\"\n              />\n            </ScrollAnimationWrapper>\n          </div>\n        </div>\n      </section>\n\n      {/* Vision Section */}\n      <section className=\"py-20\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"text-center max-w-3xl mx-auto\">\n             </div>\n          </ScrollAnimationWrapper>\n        </div>\n      </section>\n\n      {/* Mission Section (Text Right, Image Left) */}\n      <section className=\"py-20\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"grid lg:grid-cols-2 gap-12 items-center\">\n            <ScrollAnimationWrapper animation=\"slide-in-left\">\n              <OptimizedImage \n                src=\"https://images.unsplash.com/photo-1559027615-cd4628902d4a?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=400\" \n                alt=\"Community support group meeting\" \n                className=\"rounded-xl shadow-lg w-full\"\n              />\n            </ScrollAnimationWrapper>\n            <ScrollAnimationWrapper animation=\"slide-in-right\">\n              <div>\n                <h2 className=\"text-3xl md:text-4xl font-bold text-gray-800 mb-6\">\n                  Our <span className=\"primary-text\">Vision</span>\n                </h2>\n                <p className=\"text-lg text-gray-600 mb-6\">\n                  A world of peace through God-centered families.\n                </p>\n                <p className=\"text-lg text-gray-600 mb-8\">\n                  We aspire to build communities rooted in love, respect, and spiritual growth, where families are empowered to create lasting peace for generations to come.\n                </p>\n                <Link href=\"/get-involved\">\n                  <Button className=\"primary-bg text-white hover:opacity-90\">\n                    Join Us\n                  </Button>\n                </Link>\n              </div>\n            </ScrollAnimationWrapper>\n          </div>\n        </div>\n      </section>\n\n      {/* Programs Section */}\n      <section className=\"py-20\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"text-center mb-16 max-w-3xl mx-auto\">\n              <h2 className=\"text-3xl md:text-4xl font-bold text-gray-800 mb-6\">\n                Our <span className=\"primary-text\">Programs</span>\n                </h2>\n                <p className=\"text-xl text-gray-600 mb-8\">\n                Explore our diverse programs that empower families, nurture character, and promote peace in our communities.\n                </p>\n                </div>\n                </ScrollAnimationWrapper>\n                <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-10\">\n                <Card className=\"h-full\">\n                <CardContent className=\"p-6\">\n                <h3 className=\"text-2xl font-bold text-yellow-500 mb-4\">Faith and values seminars</h3>\n                <p className=\"text-gray-600 mb-4\">Seminars exploring universal values and spiritual principles to inspire personal growth and family harmony.</p>\n                </CardContent>\n                </Card>\n                <Card className=\"h-full\">\n                <CardContent className=\"p-6\">\n                <h3 className=\"text-2xl font-bold text-yellow-500 mb-4\">Family peace and character education initiative </h3>\n                <p className=\"text-gray-600 mb-4\">Workshops and resources focused on building character, fostering empathy, and nurturing peaceful relationships within families.</p>\n                </CardContent>\n                </Card>\n                <Card className=\"h-full\">\n                <CardContent className=\"p-6\">\n                <h3 className=\"text-2xl font-bold text-yellow-500 mb-4\">Women outreach and family education program</h3>\n                <p className=\"text-gray-600 mb-4\">Empowering women through outreach, education, and support to strengthen families and promote community well-being.</p>\n                </CardContent>\n                </Card>\n                <Card className=\"h-full\">\n                <CardContent className=\"p-6\">\n                <h3 className=\"text-2xl font-bold text-yellow-500 mb-4\">Youth mentorship and marriage preparation</h3>\n                <p className=\"text-gray-600 mb-4\">Guidance and mentorship for youth and young adults to prepare for healthy relationships and successful marriages.</p>\n                </CardContent>\n                </Card>\n                <Card className=\"h-full\">\n                <CardContent className=\"p-6\">\n                <h3 className=\"text-2xl font-bold text-yellow-500 mb-4\">Mens fellowship academy for family</h3>\n                <p className=\"text-gray-600 mb-4\">A supportive community for men to develop leadership, parenting, and relationship skills for strong families.</p>\n                </CardContent>\n                </Card>\n\n                <Card className=\"h-full\">\n                <CardContent className=\"p-6\">\n                <h3 className=\"text-2xl font-bold text-yellow-500 mb-4\">Couples marriage enrichment program</h3>\n                <p className=\"text-gray-600 mb-4\">Programs and workshops designed to help couples deepen their connection, improve communication, and enrich their marriages.</p>\n                </CardContent>\n              </Card>\n              </div>\n        </div>\n      </section>\n\n      {/* Values Section */}\n      <section className=\"py-20 bg-gray-50\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"text-center mb-16\">\n              <h2 className=\"text-3xl md:text-4xl font-bold text-gray-800 mb-6\">\n                Our <span className=\"primary-text\">Values</span>\n              </h2>\n              <p className=\"text-xl text-gray-600 max-w-3xl mx-auto\">\n                These core values guide everything we do and shape how we serve families in our community.\n              </p>\n            </div>\n          </ScrollAnimationWrapper>\n\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-8\">\n            {[\n              {\n                icon: Heart,\n                title: \"Compassion\",\n                description: \"We approach every family with empathy, understanding, and genuine care for their wellbeing.\"\n              },\n              {\n                icon: Users,\n                title: \"Community\",\n                description: \"We believe in the power of community support and collaborative healing.\"\n              },\n              {\n                icon: Target,\n                title: \"Excellence\",\n                description: \"We strive for the highest standards in our programs and services.\"\n              },\n              {\n                icon: Award,\n                title: \"Integrity\",\n                description: \"We operate with transparency, honesty, and ethical principles in all we do.\"\n              }\n            ].map((value, index) => (\n              <ScrollAnimationWrapper key={value.title} delay={index * 100}>\n                <Card className=\"card-hover h-full text-center\">\n                  <CardContent className=\"p-6\">\n                    <div className=\"accent-bg w-16 h-16 rounded-full flex items-center justify-center mb-6 mx-auto\">\n                      <value.icon className=\"w-8 h-8 text-white\" />\n                    </div>\n                    <h3 className=\"text-xl font-bold text-gray-800 mb-4\">{value.title}</h3>\n                    <p className=\"text-gray-600\">{value.description}</p>\n                  </CardContent>\n                </Card>\n              </ScrollAnimationWrapper>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* History Section */}\n      <section className=\"py-20\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"grid lg:grid-cols-2 gap-12 items-center\">\n            <ScrollAnimationWrapper animation=\"slide-in-left\">\n              <OptimizedImage \n                src=\"https://cdn.pixabay.com/photo/2017/12/27/16/40/world-3043067_1280.jpg\" \n                alt=\"Family counseling session\" \n                className=\"rounded-xl shadow-lg w-full\"\n              />\n            </ScrollAnimationWrapper>\n            \n            <ScrollAnimationWrapper animation=\"slide-in-right\">\n              <div>\n                <h2 className=\"text-3xl md:text-4xl font-bold text-gray-800 mb-6\">\n                  Our <span className=\"primary-text\">History</span>\n                </h2>\n                <div className=\"space-y-6\">\n                  <div>\n                    <h3 className=\"text-xl font-semibold text-gray-800 mb-2\">2017 – Foundation</h3>\n                    <p className=\"text-gray-600\">\n                      Launched in Seoul, South Korea, by Dr. Hyun Jin Preston Moon and Junsook Moon, with a vision to promote peace through God-centered families.\n                    </p>\n                  </div>\n                  <div>\n                    <h3 className=\"text-xl font-semibold text-gray-800 mb-2\">2018 – Expansion</h3>\n                    <p className=\"text-gray-600\">\n                      Established branches across Asia and the Americas, introducing education and leadership programs for youth and families.\n                    </p>\n                  </div>\n                  <div>\n                    <h3 className=\"text-xl font-semibold text-gray-800 mb-2\">2020 – Growth</h3>\n                    <p className=\"text-gray-600\">\n                      Strengthened international presence in Africa and Europe, building partnerships with local communities and faith groups.\n                    </p>\n                  </div>\n                  <div>\n                    <h3 className=\"text-xl font-semibold text-gray-800 mb-2\">2024 – Today</h3>\n                    <p className=\"text-gray-600\">\n                      Now active in more than 20 countries including Kenya, FPA continues to inspire families worldwide to live with purpose, harmony, and shared values.\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </ScrollAnimationWrapper>\n          </div>\n        </div>\n      </section>\n\n      {/* Team Preview Section */}\n      {teamMembers && teamMembers.length > 0 && (\n        <section className=\"py-20 bg-gray-50\">\n          <div className=\"container mx-auto px-6\">\n            <ScrollAnimationWrapper>\n              <div className=\"text-center mb-16\">\n                <h2 className=\"text-3xl md:text-4xl font-bold text-gray-800 mb-6\">\n                  Meet Our <span className=\"primary-text\">Team</span>\n                </h2>\n                <p className=\"text-xl text-gray-600 max-w-3xl mx-auto mb-8\">\n                  Our dedicated team of professionals and volunteers work tirelessly to support families and strengthen communities.\n                </p>\n                <Link href=\"/team\">\n                  <Button className=\"primary-bg text-white hover:opacity-90\">\n                    View Full Team\n                  </Button>\n                </Link>\n              </div>\n            </ScrollAnimationWrapper>\n\n            <div className=\"grid md:grid-cols-3 gap-8\">\n              {teamMembers.slice(0, 3).map((member, index) => (\n                <ScrollAnimationWrapper key={member.id} delay={index * 100}>\n                  <Card className=\"card-hover text-center\">\n                    <CardContent className=\"p-6\">\n                      <OptimizedImage \n                        src={member.imageUrl} \n                        alt={member.name} \n                        className=\"w-24 h-24 rounded-full mx-auto mb-4 object-cover\"\n                      />\n                      <h3 className=\"text-xl font-bold text-gray-800 mb-2\">{member.name}</h3>\n                      <p className=\"text-primary font-medium mb-4\">{member.position}</p>\n                      <p className=\"text-gray-600 text-sm\">{member.bio.slice(0, 120)}...</p>\n                      <Link href={`/team/${member.slug}`}>\n                        <Button variant=\"link\" className=\"primary-text mt-4\">\n                          Learn More\n                        </Button>\n                      </Link>\n                    </CardContent>\n                  </Card>\n                </ScrollAnimationWrapper>\n              ))}\n            </div>\n          </div>\n        </section>\n      )}\n\n      {/* Call to Action */}\n      <section className=\"py-20 primary-bg\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"text-center max-w-4xl mx-auto\">\n              <h2 className=\"text-3xl md:text-4xl font-bold text-white mb-6\">\n                Ready to Make a Difference?\n              </h2>\n              <p className=\"text-xl text-white/90 mb-8\">\n                Join us in our mission to build stronger families and create lasting peace in our communities. Whether through volunteering, partnerships, or spreading awareness, every contribution matters.\n              </p>\n              <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n                <Link href=\"/get-involved\">\n                  <Button size=\"lg\" className=\"bg-white text-gray-800 hover:bg-gray-100\">\n                    Get Involved\n                  </Button>\n                </Link>\n                <Link href=\"/contact\">\n                  <Button size=\"lg\" variant=\"outline\" className=\"border-white text-gray-800 hover:bg-white/10\">\n                    Contact Us\n                  </Button>\n                </Link>\n              </div>\n            </div>\n          </ScrollAnimationWrapper>\n        </div>\n      </section>\n    </>\n  );\n}\n","size_bytes":17027},"client/src/pages/Blog.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Helmet } from \"react-helmet\";\nimport { Link, useLocation } from \"wouter\";\nimport { OptimizedImage } from \"@/components/ui/optimized-image\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Badge } from \"@/components/ui/badge\";\nimport ScrollAnimationWrapper from \"@/components/ScrollAnimationWrapper\";\nimport { Search, Calendar, Tag } from \"lucide-react\";\nimport type { BlogPost } from \"@shared/schema\";\nimport SEO from \"@/components/SEO\";\nimport { getBlogPosts } from \"@/lib/staticData\";\n\nexport default function Blog() {\n\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [selectedCategory, setSelectedCategory] = useState(\"\");\n  const [location, setLocation] = useLocation();\n\n  const { data: blogPosts, isLoading } = useQuery({\n    queryKey: [\"blog-posts\"],\n    queryFn: () => getBlogPosts(),\n  });\n\n\n  // Handle URL parameters for category\n  useEffect(() => {\n    const params = new URLSearchParams(window.location.search);\n    const categoryParam = params.get('category');\n    if (categoryParam) {\n      setSelectedCategory(categoryParam);\n    }\n  }, []);\n\n  const categories = blogPosts \n    ? Array.from(new Set(blogPosts.map(post => post.category))) \n    : [];\n\n  const filteredPosts = blogPosts?.filter(post => {\n    const matchesSearch = post.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         post.excerpt.toLowerCase().includes(searchTerm.toLowerCase());\n    const matchesCategory = !selectedCategory || post.category === selectedCategory;\n    return matchesSearch && matchesCategory;\n  }) || [];\n\n  return (\n    <>\n      <SEO />\n      <Helmet>\n        <title>Blog - Family Peace Association</title>\n        <meta name=\"description\" content=\"Read our latest articles on family wellness, conflict resolution, and building stronger relationships. Expert insights and practical advice for families.\" />\n      </Helmet>\n\n      {/* Hero Section */}\n      <section className=\"pt-24 pb-20 bg-gradient-to-br from-yellow-50 to-orange-50\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"text-center max-w-4xl mx-auto\">\n              <h1 className=\"text-4xl md:text-6xl font-bold text-gray-800 mb-6\">\n                Family Wellness <span className=\"text-yellow-600\">Blog</span>\n              </h1>\n              <p className=\"text-xl text-gray-600 mb-8\">\n                Expert guidance, practical tips, and inspiring stories to help you build stronger family relationships and create lasting peace in your home.\n              </p>\n            </div>\n          </ScrollAnimationWrapper>\n        </div>\n      </section>\n\n      {/* Search and Filter Section */}\n      <section className=\"py-12 bg-white border-b\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"max-w-4xl mx-auto\">\n              <div className=\"flex flex-col md:flex-row gap-4 mb-8\">\n                <div className=\"relative flex-1\">\n                  <Search className=\"absolute left-3 top-3 w-4 h-4 text-gray-400\" />\n                  <Input\n                    placeholder=\"Search articles...\"\n                    value={searchTerm}\n                    onChange={(e) => setSearchTerm(e.target.value)}\n                    className=\"pl-10\"\n                  />\n                </div>\n                <div className=\"flex gap-2 flex-wrap\">\n                  <Button\n                    variant={selectedCategory === \"\" ? \"default\" : \"outline\"}\n                    onClick={() => {\n                      setSelectedCategory(\"\");\n                      // Remove category from URL\n                      const newUrl = new URL(window.location.href);\n                      newUrl.searchParams.delete('category');\n                      window.history.pushState({}, '', newUrl.toString());\n                    }}\n                    size=\"sm\"\n                  >\n                    All Categories\n                  </Button>\n                  {categories.map(category => (\n                    <Button\n                      key={category}\n                      variant={selectedCategory === category ? \"default\" : \"outline\"}\n                      onClick={() => {\n                        setSelectedCategory(category);\n                        // Update URL with new category\n                        const newUrl = new URL(window.location.href);\n                        newUrl.searchParams.set('category', category);\n                        window.history.pushState({}, '', newUrl.toString());\n                      }}\n                      size=\"sm\"\n                    >\n                      {category}\n                    </Button>\n                  ))}\n                </div>\n              </div>\n              \n              {searchTerm || selectedCategory ? (\n                <p className=\"text-gray-600\">\n                  {filteredPosts.length} article{filteredPosts.length !== 1 ? 's' : ''} found\n                  {searchTerm && ` for \"${searchTerm}\"`}\n                  {selectedCategory && ` in ${selectedCategory}`}\n                </p>\n              ) : null}\n            </div>\n          </ScrollAnimationWrapper>\n        </div>\n      </section>\n\n      {/* Blog Posts Section */}\n      <section className=\"py-20\">\n        <div className=\"container mx-auto px-6\">\n          {isLoading ? (\n            <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\">\n              {[...Array(6)].map((_, i) => (\n                <Card key={i} className=\"animate-pulse\">\n                  <div className=\"w-full h-48 bg-gray-200\" />\n                  <CardContent className=\"p-6\">\n                    <div className=\"h-4 bg-gray-200 rounded mb-4\" />\n                    <div className=\"h-6 bg-gray-200 rounded mb-3\" />\n                    <div className=\"h-4 bg-gray-200 rounded mb-2\" />\n                    <div className=\"h-4 bg-gray-200 rounded w-3/4\" />\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          ) : filteredPosts.length === 0 ? (\n            <ScrollAnimationWrapper>\n              <div className=\"text-center py-16\">\n                <div className=\"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6\">\n                  <Search className=\"w-12 h-12 text-gray-400\" />\n                </div>\n                <h3 className=\"text-2xl font-bold text-gray-800 mb-4\">No Articles Found</h3>\n                <p className=\"text-gray-600 mb-8\">\n                  We couldn't find any articles matching your search criteria. Try adjusting your search terms or browse all categories.\n                </p>\n                <Button \n                  onClick={() => {\n                    setSearchTerm(\"\");\n                    setSelectedCategory(\"\");\n                  }}\n                >\n                  Clear Filters\n                </Button>\n              </div>\n            </ScrollAnimationWrapper>\n          ) : (\n            <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\">\n              {filteredPosts.map((post, index) => (\n                <ScrollAnimationWrapper key={post.id} delay={index * 100}>\n                  <Link href={`/blog/${post.slug}`}>\n                    <Card className=\"card-hover overflow-hidden h-full cursor-pointer transition-all duration-300 hover:shadow-xl hover:scale-105\">\n                      <OptimizedImage \n                        src={post.imageUrl} \n                        alt={post.title} \n                        className=\"w-full h-48 object-cover\"\n                      />\n                      <CardContent className=\"p-6 flex flex-col h-full\">\n                        <div className=\"flex items-center space-x-2 mb-4\">\n                          <Badge variant=\"secondary\" className=\"bg-yellow-600 text-white\">\n                            <Tag className=\"w-3 h-3 mr-1\" />\n                            {post.category}\n                          </Badge>\n                          {post.category === 'events' ? (\n                            <Badge variant={post.endDate && new Date(post.endDate) > new Date() ? 'secondary' : 'destructive'} className={post.endDate && new Date(post.endDate) > new Date() ? 'bg-green-600 text-white' : 'bg-gray-400 text-white'}>\n                              {post.endDate && new Date(post.endDate) > new Date() ? 'Ongoing' : 'Ended'}\n                            </Badge>\n                          ) : null}\n                        </div>\n                        \n                        <h3 className=\"text-xl font-bold text-gray-800 mb-3 line-clamp-2 group-hover:text-yellow-600 transition-colors\">\n                          {post.title}\n                        </h3>\n                        \n                        <p className=\"text-gray-600 mb-4 flex-grow line-clamp-3\">\n                          {post.excerpt}\n                        </p>\n                        \n                        <div className=\"text-yellow-600 font-semibold mt-auto\">\n                          Read More →\n                        </div>\n                      </CardContent>\n                    </Card>\n                  </Link>\n                </ScrollAnimationWrapper>\n              ))}\n            </div>\n          )}\n        </div>\n      </section>\n\n      {/* Newsletter CTA */}\n      <section className=\"py-20 bg-yellow-600\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"text-center max-w-4xl mx-auto\">\n              <h2 className=\"text-3xl md:text-4xl font-bold text-white mb-6\">\n                Stay Updated with Our Latest Articles\n              </h2>\n              <p className=\"text-xl text-yellow-100 mb-8\">\n                Subscribe to our newsletter and never miss our latest insights on family wellness and relationship building.\n              </p>\n              <Link href=\"#newsletter\">\n                <Button size=\"lg\" className=\"bg-white text-yellow-600 hover:bg-gray-100\">\n                  Subscribe to Newsletter\n                </Button>\n              </Link>\n            </div>\n          </ScrollAnimationWrapper>\n        </div>\n      </section>\n    </>\n  );\n}\n","size_bytes":10363},"client/src/pages/BlogPost.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { useParams, Link } from \"wouter\";\nimport { Helmet } from \"react-helmet\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport ScrollAnimationWrapper from \"@/components/ScrollAnimationWrapper\";\nimport { MarkdownContent } from \"@/components/MarkdownContent\";\nimport { Calendar, Tag, ArrowLeft, User } from \"lucide-react\";\nimport type { BlogPost } from \"@shared/schema\";\nimport { OptimizedImage } from \"@/components/ui/optimized-image\";\nimport SEO from \"@/components/SEO\";\n\nexport default function BlogPost() {\n  const { slug } = useParams();\n  \n  const { data: post, isLoading } = useQuery<BlogPost>({\n    queryKey: [`/api/blog-posts/${slug}`],\n    enabled: !!slug,\n  });\n\n  const { data: relatedPosts } = useQuery<BlogPost[]>({\n    queryKey: [`/api/blog-posts/category/${post?.category}`],\n    enabled: !!post?.category,\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen pt-24\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"animate-pulse\">\n            <div className=\"h-8 bg-gray-200 rounded w-1/4 mb-8\" />\n            <div className=\"h-12 bg-gray-200 rounded w-3/4 mb-4\" />\n            <div className=\"h-4 bg-gray-200 rounded w-1/2 mb-8\" />\n            <div className=\"h-64 bg-gray-200 rounded mb-8\" />\n            <div className=\"space-y-4\">\n              {[...Array(6)].map((_, i) => (\n                <div key={i} className=\"h-4 bg-gray-200 rounded\" />\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!post) {\n    return (\n      <div className=\"min-h-screen pt-24 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h1 className=\"text-2xl font-bold text-gray-800 mb-4\">Article Not Found</h1>\n          <p className=\"text-gray-600 mb-8\">The article you're looking for doesn't exist.</p>\n          <Link href=\"/blog\">\n            <Button>\n              <ArrowLeft className=\"w-4 h-4 mr-2\" />\n              Back to Blog\n            </Button>\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  const filteredRelatedPosts = relatedPosts?.filter(p => p.id !== post.id).slice(0, 3) || [];\n\n  return (\n    <>\n      <SEO />\n      <Helmet>\n        <title>{post.title} - Family Peace Association Blog</title>\n        <meta name=\"description\" content={post.excerpt} />\n        <meta property=\"og:title\" content={post.title} />\n        <meta property=\"og:description\" content={post.excerpt} />\n        <meta property=\"og:image\" content={post.imageUrl} />\n        <meta property=\"og:type\" content=\"article\" />\n      </Helmet>\n\n      <article className=\"pt-24 pb-20\">\n        <div className=\"container mx-auto px-6\">\n          {/* Back Button */}\n          <ScrollAnimationWrapper>\n            <Link href=\"/blog\">\n              <Button variant=\"outline\" className=\"mb-8\">\n                <ArrowLeft className=\"w-4 h-4 mr-2\" />\n                Back to Blog\n              </Button>\n            </Link>\n          </ScrollAnimationWrapper>\n\n          {/* Article Header */}\n          <ScrollAnimationWrapper>\n            <header className=\"max-w-4xl mx-auto text-center mb-12\">\n              <div className=\"flex items-center justify-center space-x-4 mb-6\">\n                <Badge variant=\"secondary\" className=\"primary-bg text-white\">\n                  <Tag className=\"w-3 h-3 mr-1\" />\n                  {post.category}\n                </Badge>\n                {/* Remove all references to status, only show badges for events and published */}\n                {post.category === 'events' ? (\n                  <Badge variant={post.endDate && new Date(post.endDate) > new Date() ? 'default' : 'destructive'} className={post.endDate && new Date(post.endDate) > new Date() ? 'bg-green-600 text-white' : 'bg-gray-400 text-white'}>\n                    {post.endDate && new Date(post.endDate) > new Date() ? 'Ongoing' : 'Ended'}\n                  </Badge>\n                ) : (\n                  <Badge variant=\"default\" className=\"bg-green-600 text-white\">\n                    Published\n                  </Badge>\n                )}\n                <div className=\"flex items-center text-sm text-gray-500\">\n                  <Calendar className=\"w-3 h-3 mr-1\" />\n                  {new Date(post.publishedAt).toLocaleDateString()}\n                </div>\n              </div>\n              \n              <h1 className=\"text-4xl md:text-5xl font-bold text-gray-800 mb-6\">\n                {post.title}\n              </h1>\n              \n              <p className=\"text-xl text-gray-600 leading-relaxed\">\n                {post.excerpt}\n              </p>\n\n              {post.category === 'events' && (\n                <div className=\"mt-8\">\n                  {/*    */}\n                 {/* <Link href={`/event-registration?name=${encodeURIComponent(post.title)}`}>*/}\n\n                 {/* <a href=\"https://forms.gle/HT9jg73hPrynaWLu7\" target=\"_blank\" rel=\"noopener noreferrer\">\n                    <Button size=\"lg\">\n                      Register for this Event\n                    </Button>\n                  </a> */}\n\n                </div>\n              )}\n            </header>\n          </ScrollAnimationWrapper>\n\n          {/* Featured Image */}\n          <ScrollAnimationWrapper animation=\"scale-in\">\n            <div className=\"max-w-4xl mx-auto mb-12\">\n              <OptimizedImage \n                src={post.imageUrl} \n                alt={post.title} \n                className=\"w-full h-64 md:h-96 object-cover rounded-xl shadow-lg\"\n              />\n            </div>\n          </ScrollAnimationWrapper>\n\n          {/* Article Content */}\n          <ScrollAnimationWrapper>\n            <div className=\"max-w-4xl mx-auto\">\n              <MarkdownContent content={post.content} />\n\n              {/* Author Info */}\n              <div className=\"border-t border-gray-200 pt-8 mt-12\">\n                <div className=\"flex items-center\">\n                  <div className=\"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mr-4\">\n                    <User className=\"w-6 h-6 text-primary\" />\n                  </div>\n                  <div>\n                    <h4 className=\"font-semibold text-gray-800\">Family Peace Association</h4>\n                    <p className=\"text-sm text-gray-600\">Building stronger families together</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </ScrollAnimationWrapper>\n        </div>\n      </article>\n\n      {/* Related Articles */}\n      {filteredRelatedPosts.length > 0 && (\n        <section className=\"py-20 bg-gray-50\">\n          <div className=\"container mx-auto px-6\">\n            <ScrollAnimationWrapper>\n              <div className=\"text-center mb-16\">\n                <h2 className=\"text-3xl md:text-4xl font-bold text-gray-800 mb-6\">\n                  Related <span className=\"primary-text\">Articles</span>\n                </h2>\n                <p className=\"text-xl text-gray-600\">\n                  Continue reading more insights on {post.category.toLowerCase()}\n                </p>\n              </div>\n            </ScrollAnimationWrapper>\n\n            <div className=\"grid md:grid-cols-3 gap-8 max-w-6xl mx-auto\">\n              {filteredRelatedPosts.map((relatedPost, index) => (\n                <ScrollAnimationWrapper key={relatedPost.id} delay={index * 100}>\n                  <Card className=\"card-hover overflow-hidden h-full\">\n                    <OptimizedImage \n                      src={relatedPost.imageUrl} \n                      alt={relatedPost.title} \n                      className=\"w-full h-48 object-cover\"\n                    />\n                    <CardContent className=\"p-6\">\n                      <div className=\"flex items-center space-x-2 mb-4\">\n                        <Badge variant=\"secondary\" className=\"primary-bg text-white text-xs\">\n                          {relatedPost.category}\n                        </Badge>\n                        <span className=\"text-xs text-gray-500\">\n                          {new Date(relatedPost.publishedAt).toLocaleDateString()}\n                        </span>\n                      </div>\n                      \n                      <h3 className=\"text-lg font-bold text-gray-800 mb-3 line-clamp-2\">\n                        {relatedPost.title}\n                      </h3>\n                      \n                      <p className=\"text-gray-600 text-sm mb-4 line-clamp-3\">\n                        {relatedPost.excerpt}\n                      </p>\n                      \n                      <Link href={`/blog/${relatedPost.slug}`}>\n                        <Button variant=\"link\" className=\"primary-text font-semibold p-0\">\n                          Read More →\n                        </Button>\n                      </Link>\n                    </CardContent>\n                  </Card>\n                </ScrollAnimationWrapper>\n              ))}\n            </div>\n          </div>\n        </section>\n      )}\n\n      {/* Newsletter CTA */}\n      <section className=\"py-20 primary-bg\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"text-center max-w-4xl mx-auto\">\n              <h2 className=\"text-3xl md:text-4xl font-bold text-white mb-6\">\n                Enjoyed This Article?\n              </h2>\n              <p className=\"text-xl text-white/90 mb-8\">\n                Subscribe to our newsletter for more insights on building stronger families and creating lasting peace.\n              </p>\n              <Link href=\"/blog\">\n                <Button size=\"lg\" className=\"bg-white text-gray-800 hover:bg-gray-100 mr-4\">\n                  Read More Articles\n                </Button>\n              </Link>\n              <Link href=\"/get-involved\">\n                <Button size=\"lg\" variant=\"outline\" className=\"border-white text-gray-800 hover:bg-white/10\">\n                  Get Involved\n                </Button>\n              </Link>\n            </div>\n          </ScrollAnimationWrapper>\n        </div>\n      </section>\n    </>\n  );\n}\n","size_bytes":10206},"client/src/pages/CausePage.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { useParams, Link } from \"wouter\";\nimport { Helmet } from \"react-helmet\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Progress } from \"@/components/ui/progress\";\nimport ScrollAnimationWrapper from \"@/components/ScrollAnimationWrapper\";\nimport { ArrowLeft, Users, Target, Calendar, CheckCircle, Heart } from \"lucide-react\";\nimport { OptimizedImage } from \"@/components/ui/optimized-image\";\nimport type { Cause } from \"@shared/schema\";\nimport SEO from \"@/components/SEO\";\nimport { getActiveCauses } from \"@/lib/staticData\";\n\nexport default function CausePage() {\n  const { slug } = useParams();\n  \n  const { data: cause, isLoading } = useQuery<Cause>({\n    queryKey: [`/api/causes/${slug}`],\n    enabled: !!slug,\n  });\n\n  const { data: allCauses } = useQuery<Cause[]>({\n    queryKey: [\"active-causes\"],\n    queryFn: () => getActiveCauses(),\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen pt-24\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"animate-pulse\">\n            <div className=\"h-8 bg-gray-200 rounded w-1/4 mb-8\" />\n            <div className=\"h-12 bg-gray-200 rounded w-3/4 mb-4\" />\n            <div className=\"h-4 bg-gray-200 rounded w-1/2 mb-8\" />\n            <div className=\"h-64 bg-gray-200 rounded mb-8\" />\n            <div className=\"space-y-4\">\n              {[...Array(6)].map((_, i) => (\n                <div key={i} className=\"h-4 bg-gray-200 rounded\" />\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!cause) {\n    return (\n      <div className=\"min-h-screen pt-24 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h1 className=\"text-2xl font-bold text-gray-800 mb-4\">Cause Not Found</h1>\n          <p className=\"text-gray-600 mb-8\">The cause you're looking for doesn't exist.</p>\n          <Link href=\"/causes\">\n            <Button>\n              <ArrowLeft className=\"w-4 h-4 mr-2\" />\n              Back to Causes\n            </Button>\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  const otherCauses = allCauses?.filter(c => c.id !== cause.id).slice(0, 3) || [];\n  const progressPercentage = Math.round((cause.raisedAmount / cause.goalAmount) * 100);\n\n  return (\n    <>\n      <SEO />\n      <Helmet>\n        <title>{cause.title} - Family Peace Association</title>\n        <meta name=\"description\" content={cause.description} />\n        <meta property=\"og:title\" content={cause.title} />\n        <meta property=\"og:description\" content={cause.description} />\n        <meta property=\"og:image\" content={cause.imageUrl} />\n      </Helmet>\n\n      <div className=\"pt-24 pb-20\">\n        <div className=\"container mx-auto px-6\">\n          {/* Back Button */}\n          <ScrollAnimationWrapper>\n            <Link href=\"/causes\">\n              <Button variant=\"outline\" className=\"mb-8\">\n                <ArrowLeft className=\"w-4 h-4 mr-2\" />\n                Back to Causes\n              </Button>\n            </Link>\n          </ScrollAnimationWrapper>\n\n          {/* Hero Section */}\n          <div className=\"grid lg:grid-cols-2 gap-12 items-center mb-20\">\n            <ScrollAnimationWrapper animation=\"slide-in-left\">\n              <div>\n                <div className=\"flex items-center space-x-2 mb-4\">\n                  {cause.active && (\n                    <span className=\"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-semibold\">\n                      Active Campaign\n                    </span>\n                  )}\n                </div>\n                <h1 className=\"text-4xl md:text-5xl font-bold text-gray-800 mb-6\">\n                  {cause.title}\n                </h1>\n                <p className=\"text-xl text-gray-600 mb-8\">\n                  {cause.description}\n                </p>\n\n                {/* Quick Stats */}\n                <div className=\"grid grid-cols-2 gap-4 mb-8\">\n                  <div className=\"text-center p-4 bg-gray-50 rounded-lg\">\n                    <div className=\"text-2xl font-bold primary-text mb-1\">\n                      ${cause.raisedAmount.toLocaleString()}\n                    </div>\n                    <div className=\"text-sm text-gray-600\">Raised</div>\n                  </div>\n                  <div className=\"text-center p-4 bg-gray-50 rounded-lg\">\n                    <div className=\"text-2xl font-bold primary-text mb-1\">\n                      {cause.volunteersNeeded}\n                    </div>\n                    <div className=\"text-sm text-gray-600\">Volunteers Needed</div>\n                  </div>\n                </div>\n\n                <Link href=\"/get-involved\">\n                  <Button size=\"lg\" className=\"primary-bg text-white hover:opacity-90\">\n                    Get Involved\n                  </Button>\n                </Link>\n              </div>\n            </ScrollAnimationWrapper>\n\n            <ScrollAnimationWrapper animation=\"slide-in-right\">\n              <OptimizedImage \n                src={cause.imageUrl} \n                alt={cause.title} \n                className=\"rounded-xl shadow-lg w-full\"\n              />\n            </ScrollAnimationWrapper>\n          </div>\n\n          {/* Progress Section */}\n          <ScrollAnimationWrapper>\n            <Card className=\"mb-20\">\n              <CardContent className=\"p-8\">\n                <div className=\"text-center mb-8\">\n                  <h2 className=\"text-2xl font-bold text-gray-800 mb-4\">Campaign Progress</h2>\n                  <div className=\"max-w-2xl mx-auto\">\n                    <div className=\"flex justify-between items-center mb-4\">\n                      <span className=\"text-3xl font-bold primary-text\">\n                        ${cause.raisedAmount.toLocaleString()}\n                      </span>\n                      <span className=\"text-lg text-gray-600\">\n                        {progressPercentage}% of goal\n                      </span>\n                    </div>\n                    <Progress value={progressPercentage} className=\"h-4 mb-4\" />\n                    <div className=\"flex justify-between text-sm text-gray-600\">\n                      <span>Goal: ${cause.goalAmount.toLocaleString()}</span>\n                      <span>\n                        ${(cause.goalAmount - cause.raisedAmount).toLocaleString()} remaining\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </ScrollAnimationWrapper>\n\n          {/* Detailed Description */}\n          <div className=\"grid lg:grid-cols-3 gap-12 mb-20\">\n            <ScrollAnimationWrapper className=\"lg:col-span-2\">\n              <div>\n                <h2 className=\"text-3xl font-bold text-gray-800 mb-6\">About This Initiative</h2>\n                <div className=\"prose prose-lg max-w-none\">\n                  <p className=\"text-lg leading-relaxed text-gray-700 whitespace-pre-wrap\">\n                    {cause.fullDescription}\n                  </p>\n                </div>\n\n                {/* Impact Goals */}\n                <div className=\"mt-12\">\n                  <h3 className=\"text-2xl font-bold text-gray-800 mb-6\">Our Goals</h3>\n                  <div className=\"space-y-4\">\n                    {[\n                      \"Provide comprehensive support to families in crisis\",\n                      \"Train community volunteers in family support techniques\",\n                      \"Establish sustainable programs for long-term impact\",\n                      \"Build partnerships with local organizations\",\n                      \"Create resources for ongoing family wellness\"\n                    ].map((goal, index) => (\n                      <div key={index} className=\"flex items-start space-x-3\">\n                        <CheckCircle className=\"w-5 h-5 text-green-500 mt-1 flex-shrink-0\" />\n                        <span className=\"text-gray-700\">{goal}</span>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              </div>\n            </ScrollAnimationWrapper>\n\n            <ScrollAnimationWrapper>\n              <div className=\"space-y-6\">\n                {/* Key Information */}\n                <Card>\n                  <CardContent className=\"p-6\">\n                    <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">Key Information</h3>\n                    <div className=\"space-y-4\">\n                      <div className=\"flex items-center space-x-3\">\n                        <Target className=\"w-5 h-5 text-primary\" />\n                        <div>\n                          <div className=\"font-medium text-gray-800\">Funding Goal</div>\n                          <div className=\"text-sm text-gray-600\">${cause.goalAmount.toLocaleString()}</div>\n                        </div>\n                      </div>\n                      <div className=\"flex items-center space-x-3\">\n                        <Users className=\"w-5 h-5 text-primary\" />\n                        <div>\n                          <div className=\"font-medium text-gray-800\">Volunteers Needed</div>\n                          <div className=\"text-sm text-gray-600\">{cause.volunteersNeeded} people</div>\n                        </div>\n                      </div>\n                      <div className=\"flex items-center space-x-3\">\n                        <Calendar className=\"w-5 h-5 text-primary\" />\n                        <div>\n                          <div className=\"font-medium text-gray-800\">Status</div>\n                          <div className=\"text-sm text-gray-600\">\n                            {cause.active ? \"Active Campaign\" : \"Completed\"}\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n\n                {/* How to Help */}\n                <Card>\n                  <CardContent className=\"p-6\">\n                    <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">How You Can Help</h3>\n                    <div className=\"space-y-3\">\n                      <Link href=\"/get-involved\">\n                        <Button variant=\"outline\" className=\"w-full justify-start\">\n                          <Users className=\"w-4 h-4 mr-2\" />\n                          Volunteer Your Time\n                        </Button>\n                      </Link>\n                      <Link href=\"/contact\">\n                        <Button variant=\"outline\" className=\"w-full justify-start\">\n                          <Heart className=\"w-4 h-4 mr-2\" />\n                          Make a Donation\n                        </Button>\n                      </Link>\n                      <Button variant=\"outline\" className=\"w-full justify-start\">\n                        <Calendar className=\"w-4 h-4 mr-2\" />\n                        Attend Events\n                      </Button>\n                    </div>\n                  </CardContent>\n                </Card>\n              </div>\n            </ScrollAnimationWrapper>\n          </div>\n        </div>\n      </div>\n\n      {/* Related Causes */}\n      {otherCauses.length > 0 && (\n        <section className=\"py-20 bg-gray-50\">\n          <div className=\"container mx-auto px-6\">\n            <ScrollAnimationWrapper>\n              <div className=\"text-center mb-16\">\n                <h2 className=\"text-3xl md:text-4xl font-bold text-gray-800 mb-6\">\n                  Other <span className=\"primary-text\">Causes</span>\n                </h2>\n                <p className=\"text-xl text-gray-600\">\n                  Discover more ways to support families in our community\n                </p>\n              </div>\n            </ScrollAnimationWrapper>\n\n            <div className=\"grid md:grid-cols-3 gap-8\">\n              {otherCauses.map((otherCause, index) => (\n                <ScrollAnimationWrapper key={otherCause.id} delay={index * 100}>\n                  <Card className=\"card-hover overflow-hidden h-full\">\n                    <img \n                      src={otherCause.imageUrl} \n                      alt={otherCause.title} \n                      className=\"w-full h-48 object-cover\"\n                    />\n                    <CardContent className=\"p-6\">\n                      <h3 className=\"text-lg font-bold text-gray-800 mb-3\">{otherCause.title}</h3>\n                      <p className=\"text-gray-600 text-sm mb-4 line-clamp-3\">{otherCause.description}</p>\n                      \n                      <div className=\"mb-4\">\n                        <div className=\"flex justify-between text-sm text-gray-600 mb-2\">\n                          <span>${otherCause.raisedAmount.toLocaleString()}</span>\n                          <span>{Math.round((otherCause.raisedAmount / otherCause.goalAmount) * 100)}%</span>\n                        </div>\n                        <Progress \n                          value={(otherCause.raisedAmount / otherCause.goalAmount) * 100} \n                          className=\"h-2\"\n                        />\n                      </div>\n\n                      <Link href={`/causes/${otherCause.slug}`}>\n                        <Button variant=\"outline\" className=\"w-full\">\n                          Learn More\n                        </Button>\n                      </Link>\n                    </CardContent>\n                  </Card>\n                </ScrollAnimationWrapper>\n              ))}\n            </div>\n          </div>\n        </section>\n      )}\n\n      {/* Call to Action */}\n      <section className=\"py-20 primary-bg\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"text-center max-w-4xl mx-auto\">\n              <h2 className=\"text-3xl md:text-4xl font-bold text-white mb-6\">\n                Ready to Make a Difference?\n              </h2>\n              <p className=\"text-xl text-white/90 mb-8\">\n                Join us in supporting {cause.title.toLowerCase()} and help us create lasting positive change in our community.\n              </p>\n              <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n                <Link href=\"/get-involved\">\n                  <Button size=\"lg\" className=\"bg-white text-gray-800 hover:bg-gray-100\">\n                    Get Involved Today\n                  </Button>\n                </Link>\n                <Link href=\"/contact\">\n                  <Button size=\"lg\" variant=\"outline\" className=\"border-white text-white hover:bg-white/10\">\n                    Contact Us\n                  </Button>\n                </Link>\n              </div>\n            </div>\n          </ScrollAnimationWrapper>\n        </div>\n      </section>\n    </>\n  );\n}\n","size_bytes":14795},"client/src/pages/Causes.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Helmet } from \"react-helmet\";\nimport { Link } from \"wouter\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Progress } from \"@/components/ui/progress\";\nimport ScrollAnimationWrapper from \"@/components/ScrollAnimationWrapper\";\nimport { Users, Heart, Target, TrendingUp } from \"lucide-react\";\nimport type { Cause } from \"@shared/schema\";\nimport SEO from \"@/components/SEO\";\n// import OptimizedImage from \"@/components/OptimizedImage\";\n\nexport default function Causes() {\n\n  const { data: causes, isLoading } = useQuery<Cause[]>({\n    queryKey: [\"/api/causes\"],\n  });\n\n  const activeCauses = causes?.filter(cause => cause.active) || [];\n  const totalGoal = causes?.reduce((sum, cause) => sum + cause.goalAmount, 0) || 0;\n  const totalRaised = causes?.reduce((sum, cause) => sum + cause.raisedAmount, 0) || 0;\n  const totalVolunteersNeeded = causes?.reduce((sum, cause) => sum + cause.volunteersNeeded, 0) || 0;\n\n  return (\n    <>\n      <SEO />\n      <Helmet>\n        <title>Our Initiatives - Family Peace Association</title>\n        <meta name=\"description\" content=\"Discover our family peace initiatives and programs designed to strengthen relationships, resolve conflicts, and build lasting community support.\" />\n      </Helmet>\n\n      {/* Hero Section */}\n      <section className=\"pt-24 pb-20 bg-gradient-to-br from-primary/10 to-primary/5\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"text-center max-w-4xl mx-auto\">\n              <h1 className=\"text-4xl md:text-6xl font-bold text-gray-800 mb-6\">\n                Our <span className=\"primary-text\">Initiatives</span>\n              </h1>\n              <p className=\"text-xl text-gray-600 mb-8\">\n                Explore our family peace initiatives and programs designed to strengthen relationships, resolve conflicts, and build lasting support in our communities.\n              </p>\n            </div>\n          </ScrollAnimationWrapper>\n        </div>\n      </section>\n\n      {/* Impact Overview */}\n      <section className=\"py-20\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"text-center mb-16\">\n              <h2 className=\"text-3xl md:text-4xl font-bold text-gray-800 mb-6\">\n                Our <span className=\"primary-text\">Impact</span>\n              </h2>\n              <p className=\"text-xl text-gray-600 max-w-3xl mx-auto\">\n                Together, we're making a meaningful difference in the lives of families across our community.\n              </p>\n            </div>\n          </ScrollAnimationWrapper>\n\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-8 mb-16\">\n            {[\n              {\n                icon: Target,\n                title: \"Total Goal\",\n                value: `$${totalGoal.toLocaleString()}`,\n                description: \"Combined fundraising target\"\n              },\n              {\n                icon: TrendingUp,\n                title: \"Funds Raised\",\n                value: `$${totalRaised.toLocaleString()}`,\n                description: \"Community contributions\"\n              },\n              {\n                icon: Users,\n                title: \"Volunteers Needed\",\n                value: totalVolunteersNeeded.toString(),\n                description: \"Across all programs\"\n              },\n              {\n                icon: Heart,\n                title: \"Active Causes\",\n                value: activeCauses.length.toString(),\n                description: \"Current initiatives\"\n              }\n            ].map((stat, index) => (\n              <ScrollAnimationWrapper key={stat.title} delay={index * 100}>\n                <Card className=\"text-center\">\n                  <CardContent className=\"p-6\">\n                    <div className=\"primary-bg w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4\">\n                      <stat.icon className=\"w-8 h-8 text-white\" />\n                    </div>\n                    <div className=\"text-3xl font-bold text-gray-800 mb-2\">{stat.value}</div>\n                    <h3 className=\"text-lg font-semibold text-gray-800 mb-1\">{stat.title}</h3>\n                    <p className=\"text-gray-600 text-sm\">{stat.description}</p>\n                  </CardContent>\n                </Card>\n              </ScrollAnimationWrapper>\n            ))}\n          </div>\n\n          {/* Overall Progress */}\n          <ScrollAnimationWrapper>\n            <Card className=\"max-w-2xl mx-auto\">\n              <CardContent className=\"p-8\">\n                <div className=\"text-center mb-6\">\n                  <h3 className=\"text-2xl font-bold text-gray-800 mb-2\">Overall Progress</h3>\n                  <p className=\"text-gray-600\">Combined progress across all initiatives</p>\n                </div>\n                <div className=\"space-y-4\">\n                  <Progress \n                    value={totalGoal > 0 ? (totalRaised / totalGoal) * 100 : 0} \n                    className=\"h-4\"\n                  />\n                  <div className=\"flex justify-between text-sm text-gray-600\">\n                    <span>${totalRaised.toLocaleString()} raised</span>\n                    <span>{totalGoal > 0 ? Math.round((totalRaised / totalGoal) * 100) : 0}% complete</span>\n                    <span>${totalGoal.toLocaleString()} goal</span>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </ScrollAnimationWrapper>\n        </div>\n      </section>\n\n      {/* Causes List */}\n      <section className=\"py-20 bg-gray-50\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"text-center mb-16\">\n              <h2 className=\"text-3xl md:text-4xl font-bold text-gray-800 mb-6\">\n                Current <span className=\"primary-text\">Initiatives</span>\n              </h2>\n              <p className=\"text-xl text-gray-600 max-w-3xl mx-auto\">\n                Join us in supporting these vital programs that are making a real difference in our community.\n              </p>\n            </div>\n          </ScrollAnimationWrapper>\n\n          {isLoading ? (\n            <div className=\"grid md:grid-cols-2 gap-8\">\n              {[...Array(4)].map((_, i) => (\n                <Card key={i} className=\"animate-pulse overflow-hidden\">\n                  <div className=\"w-full h-64 bg-gray-200\" />\n                  <CardContent className=\"p-6\">\n                    <div className=\"h-6 bg-gray-200 rounded mb-4\" />\n                    <div className=\"h-4 bg-gray-200 rounded mb-2\" />\n                    <div className=\"h-4 bg-gray-200 rounded w-3/4 mb-4\" />\n                    <div className=\"h-2 bg-gray-200 rounded mb-4\" />\n                    <div className=\"flex justify-between\">\n                      <div className=\"h-4 bg-gray-200 rounded w-1/4\" />\n                      <div className=\"h-8 bg-gray-200 rounded w-1/4\" />\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          ) : causes && causes.length > 0 ? (\n            <div className=\"grid md:grid-cols-2 gap-8\">\n              {causes.map((cause, index) => (\n                <ScrollAnimationWrapper key={cause.id} delay={index * 200}>\n                  <Card className=\"card-hover overflow-hidden h-full\">\n                    {/* <OptimizedImage \n                      src={cause.imageUrl} \n                      alt={cause.title} \n                      className=\"w-full h-64 object-cover\"\n                    /> */}\n                    <CardContent className=\"p-6\">\n                      <div className=\"flex justify-between items-start mb-4\">\n                        <div>\n\n                          <h3 className=\"text-2xl font-bold text-gray-800 mb-2\">{cause.title}</h3>\n                          <p className=\"text-gray-600 mb-4\">{cause.description}</p>\n                        </div>\n                        {cause.active && (\n                          <span className=\"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-semibold\">\n                            Active\n                          </span>\n                        )}\n                      </div>\n\n                      {/* Progress */}\n                      <div className=\"mb-6\">\n                        <div className=\"flex justify-between items-center mb-2\">\n                          <span className=\"text-2xl font-bold primary-text\">\n                            ${cause.raisedAmount.toLocaleString()}\n                          </span>\n                          <span className=\"text-sm text-gray-600\">\n                            {Math.round((cause.raisedAmount / cause.goalAmount) * 100)}% funded\n                          </span>\n                        </div>\n                        <Progress \n                          value={(cause.raisedAmount / cause.goalAmount) * 100} \n                          className=\"h-3 mb-2\"\n                        />\n                        <div className=\"flex justify-between text-sm text-gray-600\">\n                          <span>Goal: ${cause.goalAmount.toLocaleString()}</span>\n                          <span className=\"flex items-center\">\n                            <Users className=\"w-3 h-3 mr-1\" />\n                            {cause.volunteersNeeded} volunteers needed\n                          </span>\n                        </div>\n                      </div>\n\n                      <div className=\"flex justify-between items-center\">\n                        <Link href={`/causes/${cause.slug}`}>\n                          <Button variant=\"outline\">\n                            Learn More\n                          </Button>\n                        </Link>\n                        <Link href=\"/get-involved\">\n                          <Button className=\"primary-bg text-white hover:opacity-90\">\n                            Get Involved\n                          </Button>\n                        </Link>\n                      </div>\n                    </CardContent>\n                  </Card>\n                </ScrollAnimationWrapper>\n              ))}\n            </div>\n          ) : (\n            <ScrollAnimationWrapper>\n              <div className=\"text-center py-16\">\n                <div className=\"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6\">\n                  <Heart className=\"w-12 h-12 text-gray-400\" />\n                </div>\n                <h3 className=\"text-2xl font-bold text-gray-800 mb-4\">No Active Causes</h3>\n                <p className=\"text-gray-600 mb-8 max-w-2xl mx-auto\">\n                  We're currently developing new initiatives to support families in our community. Check back soon for upcoming causes you can support.\n                </p>\n                <Link href=\"/get-involved\">\n                  <Button className=\"primary-bg text-white\">\n                    Get Notified\n                  </Button>\n                </Link>\n              </div>\n            </ScrollAnimationWrapper>\n          )}\n        </div>\n      </section>\n\n      {/* How to Help */}\n      <section className=\"py-20\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"text-center mb-16\">\n              <h2 className=\"text-3xl md:text-4xl font-bold text-gray-800 mb-6\">\n                How You Can <span className=\"primary-text\">Help</span>\n              </h2>\n              <p className=\"text-xl text-gray-600 max-w-3xl mx-auto\">\n                There are many ways to support our causes and make a meaningful impact in the lives of families.\n              </p>\n            </div>\n          </ScrollAnimationWrapper>\n\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-8\">\n            {[\n              {\n                title: \"Volunteer Time\",\n                description: \"Join our volunteer programs and directly support families in need\",\n                action: \"Volunteer Now\"\n              },\n              {\n                title: \"Make a Donation\",\n                description: \"Financial contributions help us expand our reach and services\",\n                action: \"Donate Today\"\n              },\n              {\n                title: \"Spread the Word\",\n                description: \"Share our mission with your network and on social media\",\n                action: \"Share Mission\"\n              },\n              {\n                title: \"Partner With Us\",\n                description: \"Corporate partnerships amplify our impact in the community\",\n                action: \"Learn More\"\n              }\n            ].map((way, index) => (\n              <ScrollAnimationWrapper key={way.title} delay={index * 100}>\n                <Card className=\"text-center h-full\">\n                  <CardContent className=\"p-6\">\n                    <h3 className=\"text-lg font-semibold text-gray-800 mb-3\">{way.title}</h3>\n                    <p className=\"text-gray-600 text-sm mb-6\">{way.description}</p>\n                    <Link href=\"/get-involved\">\n                      <Button variant=\"outline\" className=\"w-full\">\n                        {way.action}\n                      </Button>\n                    </Link>\n                  </CardContent>\n                </Card>\n              </ScrollAnimationWrapper>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* Call to Action */}\n      <section className=\"py-20 primary-bg\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"text-center max-w-4xl mx-auto\">\n              <h2 className=\"text-3xl md:text-4xl font-bold text-white mb-6\">\n                Join Our Mission Today\n              </h2>\n              <p className=\"text-xl text-white/90 mb-8\">\n                Every contribution, whether time or resources, helps us build stronger families and more peaceful communities. Start making a difference today.\n              </p>\n              <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n                <Link href=\"/get-involved\">\n                  <Button size=\"lg\" className=\"bg-white text-gray-800 hover:bg-gray-100\">\n                    Get Involved\n                  </Button>\n                </Link>\n                <Link href=\"/contact\">\n                  <Button size=\"lg\" variant=\"outline\" className=\"border-white text-white hover:bg-white/10\">\n                    Contact Us\n                  </Button>\n                </Link>\n              </div>\n            </div>\n          </ScrollAnimationWrapper>\n        </div>\n      </section>\n    </>\n  );\n}\n","size_bytes":14755},"client/src/pages/Contact.tsx":{"content":"import { useState } from \"react\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { Helmet } from \"react-helmet\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport ScrollAnimationWrapper from \"@/components/ScrollAnimationWrapper\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { MapPin, Phone, Mail, Clock, Send, MessageCircle } from \"lucide-react\";\nimport SEO from \"@/components/SEO\";\n\nconst contactFormSchema = z.object({\n  name: z.string().min(2, \"Name must be at least 2 characters\"),\n  email: z.string().email(\"Please enter a valid email address\"),\n  subject: z.string().min(5, \"Subject must be at least 5 characters\"),\n  message: z.string().min(20, \"Message must be at least 20 characters\"),\n});\n\ntype ContactForm = z.infer<typeof contactFormSchema>;\n\nexport default function Contact() {\n  const { toast } = useToast();\n\n  const form = useForm<ContactForm>({\n    resolver: zodResolver(contactFormSchema),\n    defaultValues: {\n      name: \"\",\n      email: \"\",\n      subject: \"\",\n      message: \"\",\n    },\n  });\n\n  const onSubmit = async (data: ContactForm) => {\n    try {\n      const response = await fetch(\"https://api.web3forms.com/submit\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          access_key: import.meta.env.VITE_WEB3FORMS_ACCESS_KEY,\n          from_name: data.name,\n          subject: `Contact Form: ${data.subject}`,\n          email: data.email,\n          replyto: data.email,\n          message: data.message,\n          // Honeypot field for spam prevention\n          botcheck: \"\",\n        }),\n      });\n      const result = await response.json();\n      if (result.success) {\n        toast({\n          title: \"Message Sent!\",\n          description: \"Thank you for contacting us. We'll get back to you soon.\",\n        });\n        form.reset();\n      } else {\n        toast({\n          title: \"Error\",\n          description: result.message || \"Failed to send message. Please try again.\",\n          variant: \"destructive\",\n        });\n      }\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error?.message || \"Failed to send message. Please try again.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  return (\n    <>\n      <SEO />\n      <Helmet>\n        <title>Contact Us - Family Peace Association</title>\n        <meta name=\"description\" content=\"Get in touch with the Family Peace Association. Contact us for support, questions about our services, or to learn more about volunteer opportunities.\" />\n      </Helmet>\n\n      {/* Hero Section */}\n      <section className=\"pt-24 pb-20 bg-gradient-to-br from-primary/10 to-primary/5\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"text-center max-w-4xl mx-auto\">\n              <h1 className=\"text-4xl md:text-6xl font-bold text-gray-800 mb-6\">\n                Contact <span className=\"primary-text\">Us</span>\n              </h1>\n              <p className=\"text-xl text-gray-600 mb-8\">\n                We're here to help. Reach out to us for support, questions about our services, or to learn more about how you can get involved.\n              </p>\n            </div>\n          </ScrollAnimationWrapper>\n        </div>\n      </section>\n\n      {/* Contact Information */}\n      <section className=\"py-20\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"grid lg:grid-cols-2 gap-12\">\n            {/* Contact Form */}\n            <ScrollAnimationWrapper>\n              <Card>\n                <CardContent className=\"p-8\">\n                  <div className=\"flex items-center mb-6\">\n                    <MessageCircle className=\"w-6 h-6 text-primary mr-3\" />\n                    <h2 className=\"text-2xl font-bold text-gray-800\">Send Us a Message</h2>\n                  </div>\n                  \n                  {/* Use Form for logic only, wrap fields in native form */}\n                  <Form {...form}>\n                    {/* Native form starts here */}\n                    <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n                      {/* Honeypot field for spam prevention */}\n                      <input type=\"text\" name=\"botcheck\" style={{ display: 'none' }} autoComplete=\"off\" tabIndex={-1} />\n                      <div className=\"grid md:grid-cols-2 gap-4\">\n                        <FormField\n                          control={form.control}\n                          name=\"name\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>Full Name *</FormLabel>\n                              <FormControl>\n                                <Input placeholder=\"Your full name\" {...field} />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n\n                        <FormField\n                          control={form.control}\n                          name=\"email\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>Email Address *</FormLabel>\n                              <FormControl>\n                                <Input type=\"email\" placeholder=\"your@email.com\" {...field} />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                      </div>\n\n                      <FormField\n                        control={form.control}\n                        name=\"subject\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Subject *</FormLabel>\n                            <FormControl>\n                              <Input placeholder=\"What is this regarding?\" {...field} />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n\n                      <FormField\n                        control={form.control}\n                        name=\"message\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Message *</FormLabel>\n                            <FormControl>\n                              <Textarea \n                                placeholder=\"Please provide details about your inquiry or how we can help you...\"\n                                rows={6}\n                                {...field} \n                              />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n\n                      <Button \n                        type=\"submit\" \n                        className=\"w-full primary-bg text-white hover:opacity-90\"\n                        disabled={false}\n                      >\n                        {false ? (\n                          \"Sending...\"\n                        ) : (\n                          <>\n                            <Send className=\"w-4 h-4 mr-2\" />\n                            Send Message\n                          </>\n                        )}\n                      </Button>\n                    </form>\n                  </Form>\n                </CardContent>\n              </Card>\n            </ScrollAnimationWrapper>\n\n            {/* Contact Details */}\n            <ScrollAnimationWrapper animation=\"slide-in-right\">\n              <div className=\"space-y-8\">\n                <div>\n                  <h2 className=\"text-2xl font-bold text-gray-800 mb-6\">Get in Touch</h2>\n                  <p className=\"text-gray-600 mb-8\">\n                    We're committed to providing support when you need it most. Whether you're seeking services, want to volunteer, or have questions about our programs, we're here to help.\n                  </p>\n                </div>\n\n                <div className=\"space-y-6\">\n                  {/* Address */}\n                  <Card>\n                    <CardContent className=\"p-6\">\n                      <div className=\"flex items-start space-x-4\">\n                        <div className=\"primary-bg w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0\">\n                          <MapPin className=\"w-6 h-6 text-white\" />\n                        </div>\n                        <div>\n                          <h3 className=\"font-semibold text-gray-800 mb-2\">Visit Our Office</h3>\n                          <p className=\"text-gray-600\">\n                            Wu Yi Plaza, 3rd Floor, Block E8<br />\n                            Galana Road, Kilimani, Nairobi.<br />\n                            P.O. Box 36337-00200 Nairobi, Kenya\n                          </p>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n\n                  {/* Phone */}\n                  <Card>\n                    <CardContent className=\"p-6\">\n                      <div className=\"flex items-start space-x-4\">\n                        <div className=\"primary-bg w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0\">\n                          <Phone className=\"w-6 h-6 text-white\" />\n                        </div>\n                        <div>\n                          <h3 className=\"font-semibold text-gray-800 mb-2\">Call Us</h3>\n                          <p className=\"text-gray-600 mb-2\">\n                            Telephone: <a href=\"tel:0208020770\" className=\"text-primary hover:underline\">0208020770</a>\n                          </p>\n                          <p className=\"text-gray-600 mb-2\">\n                            Telephone: <a href=\"tel:0208020770\" className=\"text-primary hover:underline\">0733155199</a>\n                          </p>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n\n                  {/* Email */}\n                  <Card>\n                    <CardContent className=\"p-6\">\n                      <div className=\"flex items-start space-x-4\">\n                        <div className=\"primary-bg w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0\">\n                          <Mail className=\"w-6 h-6 text-white\" />\n                        </div>\n                        <div>\n                          <h3 className=\"font-semibold text-gray-800 mb-2\">Email Us</h3>\n                          <p className=\"text-gray-600 mb-1\">\n                            General Inquiries: <a href=\"mailto:kenya@familypeace.org\" className=\"text-primary hover:underline\">kenya@familypeace.org</a>\n                          </p>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n\n                  {/* Hours */}\n                  <Card>\n                    <CardContent className=\"p-6\">\n                      <div className=\"flex items-start space-x-4\">\n                        <div className=\"primary-bg w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0\">\n                          <Clock className=\"w-6 h-6 text-white\" />\n                        </div>\n                        <div>\n                          <h3 className=\"font-semibold text-gray-800 mb-2\">Office Hours</h3>\n                          <div className=\"space-y-1 text-gray-600\">\n                            <p>Monday - Friday: 8:00 AM - 6:00 PM</p>\n                            <p>Saturday: 9:00 AM - 4:00 PM</p>\n                            <p>Sunday: Closed</p>\n                            <p className=\"text-sm text-gray-500 mt-2\">\n                              Emergency support available 24/7\n                            </p>\n                          </div>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                </div>\n              </div>\n            </ScrollAnimationWrapper>\n          </div>\n        </div>\n      </section>\n\n      {/* Map Section */}\n      <section className=\"py-20 bg-gray-50\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"text-center mb-12\">\n              <h2 className=\"text-3xl md:text-4xl font-bold text-gray-800 mb-6\">\n                Find <span className=\"primary-text\">Us</span>\n              </h2>\n              <p className=\"text-xl text-gray-600 max-w-3xl mx-auto\">\n                Located in the heart of the community, our office is easily accessible and designed to provide a welcoming, safe environment for all families.\n              </p>\n            </div>\n          </ScrollAnimationWrapper>\n\n          <ScrollAnimationWrapper>\n            <Card className=\"overflow-hidden\">\n              <CardContent className=\"p-0\">\n                {/* Placeholder for map - in real implementation, you'd integrate with Google Maps or similar */}\n                <div className=\"h-96 bg-gray-200 flex items-center justify-center\">\n                  <div className=\"text-center\">\n                    <MapPin className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\n                    <h3 className=\"text-xl font-semibold text-gray-600 mb-2\">Interactive Map</h3>\n                    <p className=\"text-gray-500\">Wu Yi Plaza, 3rd Floor, Room E8, Galana Road, Kilimani, Nairobi</p>\n                    <Button \n                      variant=\"outline\" \n                      className=\"mt-4\"\n                      onClick={() => window.open('https://maps.google.com/?q=Wu+Yi+Plaza,+Galana+Road,+Kilimani,+Nairobi', '_blank')}\n                    >\n                      Open in Google Maps\n                    </Button>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </ScrollAnimationWrapper>\n\n          {/* Directions */}\n          <ScrollAnimationWrapper>\n            <div className=\"mt-12 max-w-4xl mx-auto\">\n              <Card>\n                <CardContent className=\"p-8\">\n                  <h3 className=\"text-xl font-semibold text-gray-800 mb-6\">Getting Here</h3>\n                  <div className=\"grid md:grid-cols-2 gap-6\">\n                    <div>\n                      <h4 className=\"font-medium text-gray-800 mb-3\">By Car</h4>\n                      <p className=\"text-gray-600 text-sm mb-4\">\n                        Free parking is available in our on-site lot. The building is wheelchair accessible with designated accessible parking spaces near the main entrance.\n                      </p>\n                    </div>\n                    <div>\n                      <h4 className=\"font-medium text-gray-800 mb-3\">By Public Transit</h4>\n                      <p className=\"text-gray-600 text-sm mb-4\">\n                        Bus routes 12, 15, and 23 stop within two blocks of our office. The Metro Green Line Community Station is a 10-minute walk from our building.\n                      </p>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          </ScrollAnimationWrapper>\n        </div>\n      </section>\n\n      {/* Emergency Contact */}\n      <section className=\"py-20 bg-red-50 border-t border-red-100\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"text-center max-w-4xl mx-auto\">\n              <h2 className=\"text-3xl md:text-4xl font-bold text-gray-800 mb-6\">\n                Need <span className=\"text-red-600\">Immediate Support?</span>\n              </h2>\n              <p className=\"text-xl text-gray-600 mb-8\">\n                If you or someone you know is in immediate danger or experiencing a family crisis, please reach out for help right away.\n              </p>\n              <div className=\"grid md:grid-cols-2 gap-6 max-w-2xl mx-auto\">\n                <Card className=\"border-red-200\">\n                  <CardContent className=\"p-6 text-center\">\n                    <Phone className=\"w-8 h-8 text-red-600 mx-auto mb-3\" />\n                    <h3 className=\"font-semibold text-gray-800 mb-2\">Crisis Hotlines</h3>\n                    <div className=\"mb-2\">\n                      <div className=\"text-gray-800 text-base mt-2\">\n                        <div className=\"mb-1\">\n                          <span className=\"font-semibold\">Red Cross:</span> <span className=\"text-red-600\">1199</span>\n                        </div>\n                        <div className=\"mb-1\">\n                          <span className=\"font-semibold\">EMKF:</span> <span className=\"text-red-600\">0800 723 253</span>\n                        </div>\n                        <div className=\"mb-1\">\n                          <span className=\"font-semibold\">Niskize:</span> <span className=\"text-red-600\">0900 620 800</span>\n                        </div>\n                      </div>\n                    </div>\n                    <p className=\"text-sm text-gray-600\">Available 24/7</p>\n                  </CardContent>\n                </Card>\n                <Card className=\"border-red-200\">\n                  <CardContent className=\"p-6 text-center\">\n                    <MessageCircle className=\"w-8 h-8 text-red-600 mx-auto mb-3\" />\n                    <h3 className=\"font-semibold text-gray-800 mb-2\">Emergency Services</h3>\n                    <p className=\"text-2xl font-bold text-red-600 mb-2\">911</p>\n                    <p className=\"text-sm text-gray-600\">For immediate emergencies</p>\n                  </CardContent>\n                </Card>\n              </div>\n            </div>\n          </ScrollAnimationWrapper>\n        </div>\n      </section>\n    </>\n  );\n}\n","size_bytes":18382},"client/src/pages/Donate.tsx":{"content":"import { Helmet } from \"react-helmet\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport ScrollAnimationWrapper from \"@/components/ScrollAnimationWrapper\";\nimport { PayPalScriptProvider, PayPalButtons } from \"@paypal/react-paypal-js\";\nimport PayPalDonateButton from \"@/components/PayPalDonateButton\";\nimport MPesaPayment from \"@/components/MPesaPayment\";\nimport ExchangeRate from \"@/components/ExchangeRate\";\nimport { useState, useEffect } from \"react\";\nimport { toast } from \"@/components/ui/use-toast\";\nimport { OptimizedImage } from \"@/components/ui/optimized-image\";\nimport { \n  Heart, \n  Users, \n  GraduationCap, \n  CheckCircle,\n  Star,\n  CreditCard,\n  Building,\n  Smartphone,\n  X\n} from \"lucide-react\";\nimport SEO from \"@/components/SEO\";\n\nexport default function Donate() {\n  const [selectedAmount, setSelectedAmount] = useState<string>(\"\");\n  const [customAmount, setCustomAmount] = useState<string>(\"\");\n  const [showPaymentModal, setShowPaymentModal] = useState(false);\n  const [paymentMethod, setPaymentMethod] = useState<\"paypal\" | \"mpesa\" | null>(null);\n  const [kesAmount, setKesAmount] = useState<number | null>(null);\n  const [isConverting, setIsConverting] = useState(false);\n\n  // Recurring donations removed\n\n  const handleDonateClick = (amount: string) => {\n    setSelectedAmount(amount);\n    setShowPaymentModal(true);\n  };\n\n  const handleCustomDonate = () => {\n    if (!customAmount || parseFloat(customAmount) <= 0) {\n      toast({\n        title: \"Invalid amount\",\n        description: \"Please enter a valid donation amount\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    setSelectedAmount(customAmount);\n    setShowPaymentModal(true);\n  };\n\n  const handlePaymentSuccess = () => {\n    toast({\n      title: \"Thank you for your donation!\",\n      description: \"Your support helps us make a difference in families' lives.\",\n    });\n    setShowPaymentModal(false);\n    setPaymentMethod(null);\n    setSelectedAmount(\"\");\n    setCustomAmount(\"\");\n  };\n\n  const handlePayPalError = (error: any) => {\n    toast({\n      title: \"Payment failed\",\n      description: \"There was an error processing your donation. Please try again.\",\n      variant: \"destructive\",\n    });\n  };\n\n  // Recurring subscription functions removed\n\n  useEffect(() => {\n    if (paymentMethod === 'mpesa' && selectedAmount) {\n      const convertCurrency = async () => {\n        setIsConverting(true);\n        setKesAmount(null);\n        try {\n          const response = await fetch('/api/currency/convert', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n              amount: parseFloat(selectedAmount),\n              from: 'USD',\n              to: 'KES',\n            }),\n          });\n          if (!response.ok) throw new Error('Currency conversion failed');\n          const data = await response.json();\n          setKesAmount(data.amount);\n        } catch (error) {\n          console.error(error);\n          toast({\n            title: \"Conversion Error\",\n            description: \"Could not fetch the KES exchange rate. Please try again.\",\n            variant: \"destructive\",\n          });\n          setPaymentMethod(null);\n        } finally {\n          setIsConverting(false);\n        }\n      };\n      convertCurrency();\n    }\n  }, [paymentMethod, selectedAmount]);\n\n  const paypalOptions = {\n    clientId: import.meta.env.VITE_PAYPAL_CLIENT_ID || \"\",\n    currency: \"USD\",\n    intent: \"capture\",\n  };\n\n  return (\n    <PayPalScriptProvider options={paypalOptions} key={paypalOptions.intent}>\n      <SEO />\n      <Helmet>\n        <title>Donate - Family Peace Association</title>\n        <meta name=\"description\" content=\"Support the Family Peace Association's mission to build stronger families through your generous donation. Every contribution makes a difference.\" />\n      </Helmet>\n\n      {/* Hero Section */}\n      <section className=\"relative bg-gradient-to-br from-yellow-50 to-orange-50 pt-24 pb-16\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"text-center max-w-4xl mx-auto\">\n              <h1 className=\"text-4xl lg:text-6xl font-bold text-gray-900 mb-6\">\n                Make a <span className=\"text-yellow-600\">Difference</span> Today\n              </h1>\n              <p className=\"text-xl text-gray-600 leading-relaxed mb-8\">\n                Your generous support helps us provide essential family counseling services, \n                conflict resolution programs, and community outreach to those who need it most.\n              </p>\n            \n            </div>\n          </ScrollAnimationWrapper>\n        </div>\n      </section>\n\n      {/* Donation Impact */}\n      <section className=\"py-20 bg-white\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"text-center mb-16\">\n              <h2 className=\"text-3xl lg:text-4xl font-bold text-gray-900 mb-4\">\n                Your Impact\n              </h2>\n              <p className=\"text-xl text-gray-600\">\n                See how your donation directly helps families in our community\n              </p>\n            </div>\n          </ScrollAnimationWrapper>\n\n          {/* Manual Bank Donation Section */}\n          <ScrollAnimationWrapper>\n            <div className=\"max-w-xl mx-auto mb-16 bg-yellow-50 border border-yellow-200 rounded-xl p-8 text-center\">\n              <h3 className=\"text-2xl font-bold text-yellow-700 mb-4\">Manual Bank Donation</h3>\n              <p className=\"text-gray-700 mb-2\">You can donate directly via bank or M-Pesa Paybill:</p>\n              <div className=\"space-y-2 text-lg font-medium\">\n                <div><span className=\"font-semibold\">Bank Name:</span> KCB Bank</div>\n                <div><span className=\"font-semibold\">Paybill Number:</span> 522533</div>\n                <div><span className=\"font-semibold\">Account Number:</span> 7999918</div>\n                <div><span className=\"font-semibold\">Account Name:</span> USHIRIKA WA FAMILIA FOUNDATION</div>\n              </div>\n              <div className=\"mt-6 text-yellow-800 text-base font-semibold\">\n                <span>After making your donation, please leave a message with your name and donation details so we can thank you and send a receipt.</span>\n              </div>\n              <Button\n                className=\"mt-6 w-full bg-yellow-600 hover:bg-yellow-700 text-white\"\n                onClick={() => window.location.href = '/contact'}\n              >\n                Leave a Message\n              </Button>\n            </div>\n          </ScrollAnimationWrapper>\n\n          <div className=\"grid md:grid-cols-3 gap-8 mb-16\">\n            <ScrollAnimationWrapper delay={100}>\n              <Card className=\"text-center p-8 border-none shadow-lg hover:shadow-xl transition-shadow\">\n                <CardContent className=\"space-y-6\">\n                  <div className=\"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto\">\n                    <Heart className=\"w-8 h-8 text-yellow-600\" />\n                  </div>\n                  <div>\n                    <h3 className=\"text-2xl font-bold text-gray-900 mb-2\">$50</h3>\n                    <h4 className=\"text-lg font-semibold text-gray-800 mb-3\">Family Counseling Session</h4>\n                    <p className=\"text-gray-600\">\n                      Provides one hour of professional family counseling to help resolve conflicts and strengthen relationships.\n                    </p>\n                  </div>\n                  <Button \n                    className=\"w-full bg-yellow-600 hover:bg-yellow-700 text-white\"\n                    onClick={() => handleDonateClick(\"50\")}\n                  >\n                    Donate $50\n                  </Button>\n                </CardContent>\n              </Card>\n            </ScrollAnimationWrapper>\n\n            <ScrollAnimationWrapper delay={200}>\n              <Card className=\"text-center p-8 border-none shadow-lg hover:shadow-xl transition-shadow border-2 border-yellow-200\">\n                <CardHeader className=\"pb-4\">\n                  <div className=\"mx-auto mb-2\">\n                    <span className=\"bg-yellow-600 text-white px-3 py-1 rounded-full text-sm font-medium\">Most Popular</span>\n                  </div>\n                </CardHeader>\n                <CardContent className=\"space-y-6\">\n                  <div className=\"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto\">\n                    <Users className=\"w-8 h-8 text-blue-600\" />\n                  </div>\n                  <div>\n                    <h3 className=\"text-2xl font-bold text-gray-900 mb-2\">$150</h3>\n                    <h4 className=\"text-lg font-semibold text-gray-800 mb-3\">Family Support Package</h4>\n                    <p className=\"text-gray-600\">\n                      Covers three counseling sessions plus access to our family resource library and workshops.\n                    </p>\n                  </div>\n                  <Button \n                    className=\"w-full bg-yellow-600 hover:bg-yellow-700 text-white\"\n                    onClick={() => handleDonateClick(\"150\")}\n                  >\n                    Donate $150\n                  </Button>\n                </CardContent>\n              </Card>\n            </ScrollAnimationWrapper>\n\n            <ScrollAnimationWrapper delay={300}>\n              <Card className=\"text-center p-8 border-none shadow-lg hover:shadow-xl transition-shadow\">\n                <CardContent className=\"space-y-6\">\n                  <div className=\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto\">\n                    <GraduationCap className=\"w-8 h-8 text-green-600\" />\n                  </div>\n                  <div>\n                    <h3 className=\"text-2xl font-bold text-gray-900 mb-2\">$300</h3>\n                    <h4 className=\"text-lg font-semibold text-gray-800 mb-3\">Complete Program Access</h4>\n                    <p className=\"text-gray-600\">\n                      Full access to all our programs including counseling, workshops, and ongoing family support services.\n                    </p>\n                  </div>\n                  <Button \n                    className=\"w-full bg-yellow-600 hover:bg-yellow-700 text-white\"\n                    onClick={() => handleDonateClick(\"300\")}\n                  >\n                    Donate $300\n                  </Button>\n                </CardContent>\n              </Card>\n            </ScrollAnimationWrapper>\n          </div>\n\n          {/* Custom Amount */}\n          <ScrollAnimationWrapper>\n            <Card className=\"max-w-md mx-auto\">\n              <CardHeader>\n                <CardTitle className=\"text-center\">Custom Amount</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"flex\">\n                  <span className=\"inline-flex items-center px-3 text-sm text-gray-900 bg-gray-200 border border-r-0 border-gray-300 rounded-l-md\">\n                    $\n                  </span>\n                  <input\n                    type=\"number\"\n                    className=\"rounded-none rounded-r-lg bg-gray-50 border border-gray-300 text-gray-900 focus:ring-yellow-500 focus:border-yellow-500 block flex-1 min-w-0 w-full text-sm p-2.5\"\n                    placeholder=\"Enter amount\"\n                    min=\"1\"\n                    value={customAmount}\n                    onChange={(e) => setCustomAmount(e.target.value)}\n                  />\n                </div>\n                <Button \n                  className=\"w-full bg-yellow-600 hover:bg-yellow-700 text-white\"\n                  onClick={handleCustomDonate}\n                >\n                  Donate Custom Amount\n                </Button>\n              </CardContent>\n            </Card>\n          </ScrollAnimationWrapper>\n\n          <div className=\"my-8 flex justify-center\">\n            <ExchangeRate />\n          </div>\n        </div>\n      </section>\n\n      {/* Why Donate Section */}\n      <section className=\"py-20 bg-gray-50\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"grid lg:grid-cols-2 gap-16 items-center\">\n            <ScrollAnimationWrapper>\n              <div>\n                <h2 className=\"text-3xl lg:text-4xl font-bold text-gray-900 mb-6\">\n                  Why Your Support Matters\n                </h2>\n                <p className=\"text-lg text-gray-600 leading-relaxed mb-8\">\n                  Every family deserves access to professional support during challenging times. \n                  Your donation directly funds our mission to strengthen family bonds and create healthier communities.\n                </p>\n                \n                <div className=\"space-y-4\">\n                  <div className=\"flex items-start space-x-3\">\n                    <CheckCircle className=\"w-6 h-6 text-yellow-600 mt-0.5\" />\n                    <div>\n                      <h4 className=\"font-semibold text-gray-900\">Professional Counseling</h4>\n                      <p className=\"text-gray-600\">Licensed therapists providing expert family guidance</p>\n                    </div>\n                  </div>\n                  <div className=\"flex items-start space-x-3\">\n                    <CheckCircle className=\"w-6 h-6 text-yellow-600 mt-0.5\" />\n                    <div>\n                      <h4 className=\"font-semibold text-gray-900\">Crisis Intervention</h4>\n                      <p className=\"text-gray-600\">24/7 support for families in immediate need</p>\n                    </div>\n                  </div>\n                  <div className=\"flex items-start space-x-3\">\n                    <CheckCircle className=\"w-6 h-6 text-yellow-600 mt-0.5\" />\n                    <div>\n                      <h4 className=\"font-semibold text-gray-900\">Community Programs</h4>\n                      <p className=\"text-gray-600\">Educational workshops and family strengthening activities</p>\n                    </div>\n                  </div>\n                  <div className=\"flex items-start space-x-3\">\n                    <CheckCircle className=\"w-6 h-6 text-yellow-600 mt-0.5\" />\n                    <div>\n                      <h4 className=\"font-semibold text-gray-900\">Resource Library</h4>\n                      <p className=\"text-gray-600\">Access to books, materials, and online resources</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </ScrollAnimationWrapper>\n\n            <ScrollAnimationWrapper animation=\"slide-in-right\">\n              <div className=\"relative\">\n                <OptimizedImage \n                  src=\"https://images.unsplash.com/photo-1559027615-cd4628902d4a?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=700\" \n                  alt=\"Happy family after counseling session\"\n                  className=\"w-full h-[500px] object-cover rounded-2xl shadow-2xl\"\n                />\n                <div className=\"absolute -bottom-6 -left-6 bg-white p-6 rounded-xl shadow-lg\">\n                  <div className=\"flex items-center space-x-4\">\n                    <div className=\"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center\">\n                      <Star className=\"w-6 h-6 text-yellow-600\" />\n                    </div>\n                    <div>\n                      <p className=\"font-semibold text-gray-900\">98% Success Rate</p>\n                      <p className=\"text-sm text-gray-600\">Family satisfaction</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </ScrollAnimationWrapper>\n          </div>\n        </div>\n      </section>\n\n      {/* Payment Methods */}\n      <section className=\"py-20 bg-white\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"text-center mb-16\">\n              <h2 className=\"text-3xl lg:text-4xl font-bold text-gray-900 mb-4\">\n                Safe & Secure Donations\n              </h2>\n              <p className=\"text-xl text-gray-600\">\n                Multiple convenient ways to support our mission\n              </p>\n            </div>\n          </ScrollAnimationWrapper>\n\n          <div className=\"grid md:grid-cols-3 gap-8 max-w-4xl mx-auto\">\n            <ScrollAnimationWrapper delay={100}>\n              <Card className=\"text-center p-8 border-none shadow-lg\">\n                <CardContent className=\"space-y-4\">\n                  <div className=\"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto\">\n                    <CreditCard className=\"w-8 h-8 text-blue-600\" />\n                  </div>\n                  <h3 className=\"text-xl font-semibold text-gray-900\">Credit & Debit Cards</h3>\n                  <p className=\"text-gray-600\">Secure online payments with all major cards</p>\n                </CardContent>\n              </Card>\n            </ScrollAnimationWrapper>\n\n            <ScrollAnimationWrapper delay={200}>\n              <Card className=\"text-center p-8 border-none shadow-lg\">\n                <CardContent className=\"space-y-4\">\n                  <div className=\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto\">\n                    <Building className=\"w-8 h-8 text-green-600\" />\n                  </div>\n                  <h3 className=\"text-xl font-semibold text-gray-900\">Bank Transfer</h3>\n                  <p className=\"text-gray-600\">Direct bank transfers for larger donations</p>\n                </CardContent>\n              </Card>\n            </ScrollAnimationWrapper>\n\n            <ScrollAnimationWrapper delay={300}>\n              <Card className=\"text-center p-8 border-none shadow-lg\">\n                <CardContent className=\"space-y-4\">\n                  <div className=\"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto\">\n                    <Smartphone className=\"w-8 h-8 text-purple-600\" />\n                  </div>\n                  <h3 className=\"text-xl font-semibold text-gray-900\">Mobile Payments</h3>\n                  <p className=\"text-gray-600\">PayPal, and Mpesa</p>\n                </CardContent>\n              </Card>\n            </ScrollAnimationWrapper>\n          </div>\n\n          <ScrollAnimationWrapper delay={400}>\n            <div className=\"text-center mt-12\">\n              <p className=\"text-gray-600 mb-6\">\n                All donations are processed securely and you'll receive a receipt for tax purposes.\n              </p>\n              <div className=\"flex justify-center items-center space-x-4 text-sm text-gray-500\">\n                <span>🔒 SSL Encrypted</span>\n                <span>•</span>\n                <span>🛡️ Privacy Protected</span>\n                <span>•</span>\n                <span>📧 Instant Receipt</span>\n              </div>\n            </div>\n          </ScrollAnimationWrapper>\n        </div>\n      </section>\n\n      {/* Call to Action */}\n      <section className=\"py-20 bg-gradient-to-r from-yellow-600 to-orange-600 text-white\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"max-w-4xl mx-auto text-center\">\n              <h2 className=\"text-3xl lg:text-4xl font-bold mb-6\">\n                Ready to Make an Impact?\n              </h2>\n              <p className=\"text-xl leading-relaxed mb-8 text-yellow-100\">\n                Join hundreds of supporters who are already making a difference in families' lives. \n                Your donation today helps build stronger, more resilient families in our community.\n              </p>\n              <Button size=\"lg\" className=\"bg-white text-yellow-600 hover:bg-gray-100 px-8 py-3 text-lg\">\n                Start Your Donation\n              </Button>\n            </div>\n          </ScrollAnimationWrapper>\n        </div>\n      </section>\n\n      {/* Payment Modal */}\n      {showPaymentModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white p-8 rounded-lg max-w-md w-full\">\n            <div className=\"text-center mb-6\">\n              <div className=\"flex justify-between items-center mb-4\">\n                <h3 className=\"text-2xl font-bold text-gray-900\">Complete Your Donation</h3>\n                <button\n                  onClick={() => {\n                    setShowPaymentModal(false);\n                    setPaymentMethod(null);\n                  }}\n                  className=\"text-gray-500 hover:text-gray-700\"\n                >\n                  <X className=\"h-6 w-6\" />\n                </button>\n              </div>\n              <p className=\"text-gray-600\">Amount: ${selectedAmount} USD</p>\n              {paymentMethod === 'mpesa' && (\n                <div className=\"text-gray-600 mt-2\">\n                  {isConverting ? (\n                    <span>Converting to KES...</span>\n                  ) : kesAmount ? (\n                    <strong>Approx. {kesAmount.toFixed(2)} KES</strong>\n                  ) : (\n                    <span className=\"text-red-500\">Could not get KES amount.</span>\n                  )}\n                </div>\n              )}\n            </div>\n\n            {!paymentMethod ? (\n              <div className=\"space-y-4\">\n                <Button\n                  onClick={() => setPaymentMethod('paypal')}\n                  className=\"w-full bg-blue-600 hover:bg-blue-700\"\n                >\n                  Pay with PayPal\n                </Button>\n                <Button\n                  onClick={() => setPaymentMethod('mpesa')}\n                  className=\"w-full bg-green-600 hover:bg-green-700\"\n                >\n                  Pay with M-Pesa\n                </Button>\n              </div>\n            ) : paymentMethod === 'paypal' ? (\n              <div>\n                <PayPalDonateButton\n                  amount={selectedAmount}\n                  onSuccess={handlePaymentSuccess}\n                  onError={handlePayPalError}\n                />\n                <button\n                  onClick={() => setPaymentMethod(null)}\n                  className=\"mt-4 w-full text-gray-600 hover:text-gray-900\"\n                >\n                  Back to Payment Methods\n                </button>\n              </div>\n            ) : (\n              <div>\n                {isConverting ? (\n                  <div className=\"flex justify-center items-center h-24\">\n                    <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\n                  </div>\n                ) : kesAmount ? (\n                  <MPesaPayment\n                    amount={kesAmount.toFixed(2)}\n                    onSuccess={handlePaymentSuccess}\n                    onError={handlePayPalError}\n                  />\n                ) : (\n                  <p className=\"text-center text-red-500\">\n                    There was an error converting the currency. Please try again.\n                  </p>\n                )}\n                <button\n                  onClick={() => setPaymentMethod(null)}\n                  className=\"mt-4 w-full text-gray-600 hover:text-gray-900\"\n                >\n                  Back to Payment Methods\n                </button>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n    </PayPalScriptProvider>\n  );\n}\n","size_bytes":23570},"client/src/pages/DonationTest.tsx":{"content":"import { useState } from 'react';\n// import PayPalClient from '../components/PayPalClient';\n\nimport SEO from \"@/components/SEO\";\n\nexport default function DonationTest() {\n    const [amount, setAmount] = useState<number>(10);\n    // const [status, setStatus] = useState<string>('');\n\n    // const handleSuccess = (details: any) => {\n    //     setStatus(`Payment completed! Order ID: ${details.id}`);\n    // };\n\n    // const handleError = (error: any) => {\n    //     setStatus(`Error: ${error.message}`);\n    // };\n\n\n    return (\n        <div className=\"container mx-auto p-4\">\n            <SEO />\n            <h1 className=\"text-2xl font-bold mb-4\">Donation Test</h1>\n            \n            <div className=\"mb-4\">\n                <label className=\"block text-sm font-medium text-gray-700\">\n                    Donation Amount (USD)\n                </label>\n                <input\n                    type=\"number\"\n                    value={amount}\n                    onChange={(e) => setAmount(Number(e.target.value))}\n                    className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\n                    min=\"1\"\n                    step=\"1\"\n                />\n            </div>\n\n            <div className=\"mb-4\">\n                {/* <PayPalClient\n                    amount={amount}\n                    description=\"Test donation\"\n                    onSuccess={handleSuccess}\n                    onError={handleError}\n                /> */}\n            </div>\n\n            {/* {status && (\n                <div className=\"mt-4 p-4 rounded-md bg-gray-100\">\n                    <p className=\"text-sm text-gray-900\">{status}</p>\n                </div>\n            )} */}\n\n        </div>\n    );\n}\n","size_bytes":1780},"client/src/pages/EventDetail.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { useParams, Link } from \"wouter\";\nimport { Helmet } from \"react-helmet\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { OptimizedImage } from \"@/components/ui/optimized-image\";\nimport ScrollAnimationWrapper from \"@/components/ScrollAnimationWrapper\";\nimport { \n  Calendar, \n  MapPin, \n  Users, \n  Clock,\n  ArrowLeft,\n  ExternalLink,\n  DollarSign,\n  Phone,\n  Mail,\n  Share2\n} from \"lucide-react\";\nimport { getEventBySlug } from \"@/lib/staticData\";\nimport SEO from \"@/components/SEO\";\n\ninterface Event {\n  id: number;\n  name: string;\n  slug: string;\n  description: string;\n  fullDescription?: string;\n  date: string;\n  endDate: string;\n  location: string;\n  fee: number;\n  maxParticipants?: number;\n  imageUrl: string;\n  featured: boolean;\n  category: string;\n  tags?: string[];\n  contactEmail?: string;\n  contactPhone?: string;\n  registrationUrl?: string;\n  active: boolean;\n}\n\ninterface EventImage {\n  id: number;\n  imageUrl: string;\n  caption?: string;\n  isPrimary: boolean;\n}\n\ninterface EventSupporter {\n  id: number;\n  name: string;\n  logo?: string;\n  website?: string;\n  type: 'sponsor' | 'partner' | 'organizer' | 'supporter';\n  level: 'platinum' | 'gold' | 'silver' | 'bronze' | 'standard';\n}\n\nexport default function EventDetail() {\n  const { slug } = useParams();\n  \n  const { data: event, isLoading } = useQuery<Event>({\n    queryKey: [`event-${slug}`],\n    queryFn: () => getEventBySlug(slug!),\n    enabled: !!slug,\n  });\n\n  // Sample event images and supporters for demonstration\n  const eventImages: EventImage[] = event ? [\n    {\n      id: 1,\n      eventId: event.id,\n      imageUrl: event.imageUrl || '/images/events/default-event.jpg',\n      altText: event.name,\n      isPrimary: true,\n      caption: `Main image for ${event.name}`\n    },\n    {\n      id: 2,\n      eventId: event.id,\n      imageUrl: '/images/events/workshop-1.jpg',\n      altText: 'Workshop activities',\n      isPrimary: false,\n      caption: 'Participants engaging in group activities'\n    },\n    {\n      id: 3,\n      eventId: event.id,\n      imageUrl: '/images/events/workshop-2.jpg', \n      altText: 'Community involvement',\n      isPrimary: false,\n      caption: 'Community members participating'\n    }\n  ] : [];\n\n  const eventSupporters: EventSupporter[] = event ? [\n    {\n      id: 1,\n      eventId: event.id,\n      name: 'Community Foundation',\n      type: 'organization',\n      level: 'platinum',\n      logoUrl: '/images/supporters/community-foundation.jpg',\n      website: 'https://communityfoundation.org'\n    },\n    {\n      id: 2,\n      eventId: event.id,\n      name: 'Local Government',\n      type: 'government',\n      level: 'gold',\n      logoUrl: '/images/supporters/local-government.jpg',\n      website: 'https://local.gov'\n    },\n    {\n      id: 3,\n      eventId: event.id,\n      name: 'Peace Initiative Group',\n      type: 'organization',\n      level: 'silver',\n      logoUrl: '/images/supporters/peace-group.jpg',\n      website: 'https://peaceinitiative.org'\n    }\n  ] : [];\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('en-US', {\n      weekday: 'long',\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n  };\n\n  const formatTime = (dateString: string) => {\n    return new Date(dateString).toLocaleTimeString('en-US', {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  const getEventStatus = (event: Event) => {\n    const now = new Date();\n    const startDate = new Date(event.date);\n    const endDate = new Date(event.endDate);\n    \n    if (now < startDate) return { status: 'upcoming', color: 'bg-blue-100 text-blue-800' };\n    if (now >= startDate && now <= endDate) return { status: 'live', color: 'bg-green-100 text-green-800' };\n    return { status: 'completed', color: 'bg-gray-100 text-gray-800' };\n  };\n\n  const shareEvent = async () => {\n    const shareData = {\n      title: event?.name || 'Family Peace Association Event',\n      text: event?.description || 'Join us for this amazing event!',\n      url: window.location.href,\n    };\n\n    try {\n      if (navigator.share && navigator.canShare && navigator.canShare(shareData)) {\n        await navigator.share(shareData);\n      } else {\n        await navigator.clipboard.writeText(window.location.href);\n        // Show user feedback for clipboard copy\n        const button = document.querySelector('[data-share-button]') as HTMLElement;\n        if (button) {\n          const originalText = button.textContent;\n          button.textContent = 'Link Copied!';\n          setTimeout(() => {\n            button.textContent = originalText;\n          }, 2000);\n        }\n      }\n    } catch (error) {\n      console.error('Error sharing event:', error);\n      // Fallback to clipboard copy\n      try {\n        await navigator.clipboard.writeText(window.location.href);\n        alert('Event link copied to clipboard!');\n      } catch (clipboardError) {\n        console.error('Clipboard access failed:', clipboardError);\n        alert('Unable to share event. Please copy the URL manually.');\n      }\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen pt-24\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"animate-pulse\">\n            <div className=\"h-8 bg-gray-200 rounded w-1/4 mb-8\" />\n            <div className=\"h-12 bg-gray-200 rounded w-3/4 mb-4\" />\n            <div className=\"h-4 bg-gray-200 rounded w-1/2 mb-8\" />\n            <div className=\"h-64 bg-gray-200 rounded mb-8\" />\n            <div className=\"space-y-4\">\n              {[...Array(6)].map((_, i) => (\n                <div key={i} className=\"h-4 bg-gray-200 rounded\" />\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!event) {\n    return (\n      <div className=\"min-h-screen pt-24 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h1 className=\"text-2xl font-bold text-gray-800 mb-4\">Event Not Found</h1>\n          <p className=\"text-gray-600 mb-8\">The event you're looking for doesn't exist.</p>\n          <Link href=\"/events\">\n            <Button>\n              <ArrowLeft className=\"w-4 h-4 mr-2\" />\n              Back to Events\n            </Button>\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  const status = getEventStatus(event);\n\n  return (\n    <>\n      <SEO />\n      <Helmet>\n        <title>{event.name} - Family Peace Association</title>\n        <meta name=\"description\" content={event.description} />\n        <meta property=\"og:title\" content={`${event.name} - Family Peace Association`} />\n        <meta property=\"og:description\" content={event.description} />\n        <meta property=\"og:image\" content={event.imageUrl} />\n      </Helmet>\n\n      {/* Breadcrumb */}\n      <section className=\"pt-24 pb-8 bg-gray-50\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"flex items-center space-x-2 text-sm text-gray-600 mb-4\">\n            <Link href=\"/\" className=\"hover:text-yellow-600\">Home</Link>\n            <span>/</span>\n            <Link href=\"/events\" className=\"hover:text-yellow-600\">Events</Link>\n            <span>/</span>\n            <span className=\"text-gray-800\">{event.name}</span>\n          </div>\n          \n          <Link href=\"/events\">\n            <Button variant=\"outline\" size=\"sm\">\n              <ArrowLeft className=\"w-4 h-4 mr-2\" />\n              Back to Events\n            </Button>\n          </Link>\n        </div>\n      </section>\n\n      {/* Hero Section */}\n      <section className=\"pb-16 bg-gray-50\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"grid lg:grid-cols-3 gap-8\">\n            {/* Main Content */}\n            <div className=\"lg:col-span-2\">\n              <ScrollAnimationWrapper>\n                <div className=\"mb-6\">\n                  <div className=\"flex items-center gap-3 mb-4\">\n                    <Badge className={status.color}>\n                      {status.status}\n                    </Badge>\n                    <Badge variant=\"outline\">{event.category}</Badge>\n                    {event.featured && (\n                      <Badge className=\"bg-yellow-100 text-yellow-800\">Featured</Badge>\n                    )}\n                  </div>\n                  \n                  <h1 className=\"text-4xl font-bold text-gray-800 mb-4\">\n                    {event.name}\n                  </h1>\n                  \n                  <p className=\"text-xl text-gray-600 mb-6\">\n                    {event.description}\n                  </p>\n                  \n                  <div className=\"flex flex-wrap gap-4\">\n                    {event.registrationUrl && (\n                      <a href={event.registrationUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n                        <Button size=\"lg\" className=\"bg-yellow-600 hover:bg-yellow-700\">\n                          Register Now\n                          <ExternalLink className=\"w-4 h-4 ml-2\" />\n                        </Button>\n                      </a>\n                    )}\n                    <Button \n                      size=\"lg\" \n                      variant=\"outline\" \n                      onClick={shareEvent}\n                      data-share-button\n                    >\n                      <Share2 className=\"w-4 h-4 mr-2\" />\n                      Share Event\n                    </Button>\n                  </div>\n                </div>\n              </ScrollAnimationWrapper>\n              \n              {/* Event Image */}\n              <ScrollAnimationWrapper>\n                <div className=\"relative mb-8\">\n                  <OptimizedImage\n                    src={event.imageUrl}\n                    alt={event.name}\n                    className=\"w-full h-80 object-cover rounded-lg shadow-lg\"\n                  />\n                </div>\n              </ScrollAnimationWrapper>\n\n              {/* Event Gallery */}\n              {eventImages && eventImages.length > 0 && (\n                <ScrollAnimationWrapper>\n                  <div className=\"mb-8\">\n                    <h2 className=\"text-2xl font-bold mb-4\">Event Gallery</h2>\n                    <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                      {eventImages.map((image) => (\n                        <div key={image.id} className=\"relative\">\n                          <OptimizedImage\n                            src={image.imageUrl}\n                            alt={image.caption || event.name}\n                            className=\"w-full h-48 object-cover rounded-lg\"\n                          />\n                          {image.caption && (\n                            <p className=\"text-sm text-gray-600 mt-2\">{image.caption}</p>\n                          )}\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                </ScrollAnimationWrapper>\n              )}\n\n              {/* Event Description */}\n              {event.fullDescription && (\n                <ScrollAnimationWrapper>\n                  <div className=\"mb-8\">\n                    <h2 className=\"text-2xl font-bold mb-4\">About This Event</h2>\n                    <div className=\"prose max-w-none text-gray-700\">\n                      {event.fullDescription.split('\\n').map((paragraph, index) => (\n                        <p key={index} className=\"mb-4\">{paragraph}</p>\n                      ))}\n                    </div>\n                  </div>\n                </ScrollAnimationWrapper>\n              )}\n\n              {/* Event Supporters */}\n              {eventSupporters && eventSupporters.length > 0 && (\n                <ScrollAnimationWrapper>\n                  <div className=\"mb-8\">\n                    <h2 className=\"text-2xl font-bold mb-6\">Event Partners & Supporters</h2>\n                    \n                    {/* Group supporters by type */}\n                    {['sponsor', 'partner', 'organizer', 'supporter'].map((type) => {\n                      const typeSupporters = eventSupporters.filter(s => s.type === type);\n                      if (typeSupporters.length === 0) return null;\n                      \n                      return (\n                        <div key={type} className=\"mb-6\">\n                          <h3 className=\"text-lg font-semibold mb-3 capitalize\">\n                            {type}s\n                          </h3>\n                          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                            {typeSupporters.map((supporter) => (\n                              <div key={supporter.id} className=\"text-center\">\n                                {supporter.logo ? (\n                                  <div className=\"bg-white p-4 rounded-lg shadow border\">\n                                    <OptimizedImage\n                                      src={supporter.logo}\n                                      alt={supporter.name}\n                                      className=\"w-20 h-20 object-contain mx-auto mb-2\"\n                                    />\n                                    <p className=\"text-sm font-medium\">{supporter.name}</p>\n                                  </div>\n                                ) : (\n                                  <div className=\"bg-gray-100 p-4 rounded-lg border\">\n                                    <p className=\"text-sm font-medium\">{supporter.name}</p>\n                                  </div>\n                                )}\n                                {supporter.website && (\n                                  <a \n                                    href={supporter.website} \n                                    target=\"_blank\" \n                                    rel=\"noopener noreferrer\"\n                                    className=\"text-xs text-yellow-600 hover:underline mt-1 block\"\n                                  >\n                                    Visit Website\n                                  </a>\n                                )}\n                              </div>\n                            ))}\n                          </div>\n                        </div>\n                      );\n                    })}\n                  </div>\n                </ScrollAnimationWrapper>\n              )}\n            </div>\n\n            {/* Sidebar */}\n            <div className=\"lg:col-span-1\">\n              <ScrollAnimationWrapper>\n                <Card className=\"sticky top-24\">\n                  <CardContent className=\"p-6\">\n                    <h3 className=\"text-lg font-bold mb-4\">Event Details</h3>\n                    \n                    <div className=\"space-y-4\">\n                      <div className=\"flex items-start space-x-3\">\n                        <Calendar className=\"w-5 h-5 text-yellow-600 mt-1\" />\n                        <div>\n                          <p className=\"font-medium\">Date & Time</p>\n                          <p className=\"text-sm text-gray-600\">\n                            {formatDate(event.date)}\n                          </p>\n                          <p className=\"text-sm text-gray-600\">\n                            {formatTime(event.date)} - {formatTime(event.endDate)}\n                          </p>\n                        </div>\n                      </div>\n                      \n                      <div className=\"flex items-start space-x-3\">\n                        <MapPin className=\"w-5 h-5 text-yellow-600 mt-1\" />\n                        <div>\n                          <p className=\"font-medium\">Location</p>\n                          <p className=\"text-sm text-gray-600\">{event.location}</p>\n                        </div>\n                      </div>\n                      \n                      <div className=\"flex items-start space-x-3\">\n                        <DollarSign className=\"w-5 h-5 text-yellow-600 mt-1\" />\n                        <div>\n                          <p className=\"font-medium\">Registration Fee</p>\n                          <p className=\"text-sm text-gray-600\">\n                            KSh {event.fee.toLocaleString()}\n                          </p>\n                        </div>\n                      </div>\n                      \n                      {event.maxParticipants && (\n                        <div className=\"flex items-start space-x-3\">\n                          <Users className=\"w-5 h-5 text-yellow-600 mt-1\" />\n                          <div>\n                            <p className=\"font-medium\">Capacity</p>\n                            <p className=\"text-sm text-gray-600\">\n                              Max {event.maxParticipants} participants\n                            </p>\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                    \n                    {(event.contactEmail || event.contactPhone) && (\n                      <div className=\"mt-6 pt-6 border-t\">\n                        <h4 className=\"font-medium mb-3\">Contact Information</h4>\n                        <div className=\"space-y-2\">\n                          {event.contactEmail && (\n                            <div className=\"flex items-center space-x-2\">\n                              <Mail className=\"w-4 h-4 text-gray-400\" />\n                              <a \n                                href={`mailto:${event.contactEmail}`}\n                                className=\"text-sm text-yellow-600 hover:underline\"\n                              >\n                                {event.contactEmail}\n                              </a>\n                            </div>\n                          )}\n                          {event.contactPhone && (\n                            <div className=\"flex items-center space-x-2\">\n                              <Phone className=\"w-4 h-4 text-gray-400\" />\n                              <a \n                                href={`tel:${event.contactPhone}`}\n                                className=\"text-sm text-yellow-600 hover:underline\"\n                              >\n                                {event.contactPhone}\n                              </a>\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    )}\n                    \n                    {event.registrationUrl && (\n                      <div className=\"mt-6\">\n                        <a href={event.registrationUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n                          <Button className=\"w-full bg-yellow-600 hover:bg-yellow-700\">\n                            Register Now\n                            <ExternalLink className=\"w-4 h-4 ml-2\" />\n                          </Button>\n                        </a>\n                      </div>\n                    )}\n                  </CardContent>\n                </Card>\n              </ScrollAnimationWrapper>\n            </div>\n          </div>\n        </div>\n      </section>\n    </>\n  );\n}","size_bytes":19135},"client/src/pages/EventRegistration.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card } from \"@/components/ui/card\";\nimport { toast } from \"@/hooks/use-toast\";\nimport ScrollAnimationWrapper from \"@/components/ScrollAnimationWrapper\";\nimport { OptimizedImage } from \"@/components/ui/optimized-image\";\nimport SEO from \"@/components/SEO\";\n\ninterface IndividualFormData {\n  firstName: string;\n  middleName: string;\n  surname: string;\n  email: string;\n  phone: string;\n}\n\ninterface OrganizationFormData {\n  organizationName: string;\n  organizationEmail: string;\n  representativeName: string;\n  role: string;\n  phone: string;\n}\n\ninterface Event {\n  id: string;\n  name: string;\n  description: string;\n  imageUrl: string;\n  date: string;\n  endDate: string;\n  fee: number;\n  location: string;\n  maxParticipants: number;\n  active: boolean;\n}\n\ntype RegistrationType = 'individual' | 'organization';\n\ntype PaymentGateway = 'pesapal' | 'paypal' | 'mpesa';\n\ninterface RegistrationFormData {\n  registrationType: RegistrationType;\n  individual?: IndividualFormData;\n  organization?: OrganizationFormData;\n  gateway: PaymentGateway;\n}\n\nexport default function EventRegistration() {\n  const [registrationType, setRegistrationType] = useState<RegistrationType>('individual');\n  const [gateway, setGateway] = useState<PaymentGateway>('pesapal');\n  const [event, setEvent] = useState<Event | null>(null);\n  const [error, setError] = useState(false);\n  const [formData, setFormData] = useState<RegistrationFormData>({\n    registrationType: 'individual',\n    individual: {\n      firstName: '',\n      middleName: '',\n      surname: '',\n      email: '',\n      phone: ''\n    },\n    gateway: 'pesapal'\n  });\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target;\n    setFormData((prev: RegistrationFormData) => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n\n    try {\n      if (!event) {\n        throw new Error('Event details not loaded');\n      }\n      // Always update formData.gateway before sending\n      const response = await initiatePayment({ ...formData, gateway }, event);\n      if (response.success) {\n        toast({\n          title: \"Registration Initiated\",\n          description: \"Please complete the payment process\",\n        });\n        window.location.href = response.paymentUrl;\n      }\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to process registration. Please try again.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleRegistrationTypeChange = (type: RegistrationType) => {\n    setRegistrationType(type);\n    setFormData(prev => ({\n      registrationType: type,\n      gateway: prev.gateway, // always preserve gateway\n      ...(type === 'individual'\n        ? {\n            individual: {\n              firstName: '',\n              middleName: '',\n              surname: '',\n              email: '',\n              phone: ''\n            },\n            organization: undefined\n          }\n        : {\n            organization: {\n              organizationName: '',\n              organizationEmail: '',\n              representativeName: '',\n              role: '',\n              phone: ''\n            },\n            individual: undefined\n          }\n      )\n    }));\n  };\n\n  const handleIndividualInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target;\n    setFormData((prev: RegistrationFormData) => ({\n      ...prev,\n      individual: {\n        ...prev.individual!,\n        [name]: value\n      }\n    }));\n  };\n\n  const handleOrganizationInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target;\n    setFormData((prev: RegistrationFormData) => ({\n      ...prev,\n      organization: {\n        ...prev.organization!,\n        [name]: value\n      }\n    }));\n  };\n\n  // Fetch event details directly from events table\n  useEffect(() => {\n    const params = new URLSearchParams(window.location.search);\n    const name = params.get('name');\n    \n    const fetchEvent = async () => {\n      if (!name) {\n        toast({\n          title: \"Error\",\n          description: \"Event name not provided\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n\n      try {\n        const res = await fetch(`/api/events/by-name/${encodeURIComponent(name)}`);\n        if (!res.ok) {\n          throw new Error(res.statusText);\n        }\n        const data = await res.json();\n        \n        // Check if the event has ended\n        const now = new Date();\n        const eventEndDate = new Date(data.endDate);\n        \n        if (now > eventEndDate) {\n          data.active = false; // Mark the event as inactive if it has ended\n        }\n        \n        setEvent(data);\n      } catch (error) {\n        console.error('Error fetching event:', error);\n        setError(true);\n        toast({\n          title: \"Error\",\n          description: \"Failed to load event details.\",\n          variant: \"destructive\",\n        });\n      }\n    };\n\n    fetchEvent();\n  }, []);\n\n  if (!event) {\n    if (error) {\n      return (\n        <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n          <div className=\"max-w-2xl mx-auto px-4 py-16 text-center\">\n            <div className=\"mb-8\">\n              <span className=\"inline-flex items-center justify-center w-16 h-16 rounded-full bg-red-100 mb-4\">\n                <svg className=\"w-8 h-8 text-red-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                </svg>\n              </span>\n              <h2 className=\"text-3xl font-bold mb-4\">Unable to Load Event</h2>\n              <p className=\"text-gray-600 mb-8\">\n                We're having trouble loading this event. This could be because:\n              </p>\n              <ul className=\"text-gray-600 mb-8 list-disc list-inside\">\n                <li>The event has ended or been removed</li>\n                <li>There might be a temporary connection issue</li>\n                <li>The event URL might be incorrect</li>\n              </ul>\n              <div className=\"space-y-4\">\n                <p className=\"text-gray-600\">\n                  Please try again later or contact our support team if the problem persists.\n                </p>\n                <div className=\"flex justify-center gap-4 flex-wrap\">\n                  <Button \n                    onClick={() => window.location.reload()}\n                    variant=\"default\"\n                  >\n                    Try Again\n                  </Button>\n                  <Button \n                    onClick={() => window.location.href = '/contact'}\n                    variant=\"outline\"\n                  >\n                    Contact Support\n                  </Button>\n                    <Button \n                    onClick={() => window.location.href = '/blog?category=events'}\n                    variant=\"outline\"\n                    >\n                    ← Back to Blog\n                    </Button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      );\n    }\n    return (\n      <div className=\"container mx-auto py-10 animate-pulse\">\n        <div className=\"max-w-4xl mx-auto\">\n          <div className=\"h-[60vh] bg-gray-200 rounded-lg mb-8\"></div>\n          <div className=\"h-8 bg-gray-200 rounded w-3/4 mb-4\"></div>\n          <div className=\"h-4 bg-gray-200 rounded w-1/2\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Hero Section */}\n      <div className=\"relative bg-gray-900 text-white min-h-[60vh] flex items-center overflow-hidden\">\n        {/* Background Image with Overlay */}\n        <div className=\"absolute inset-0 overflow-hidden animate-fade-in\">\n          <OptimizedImage \n            src={event.imageUrl} \n            alt={event.name}\n            className=\"w-full h-full object-cover\"\n          />\n          <div className=\"absolute inset-0 bg-gradient-to-r from-black/80 via-black/60 to-black/80\"></div>\n        </div>\n\n        {/* Hero Content */}\n        <div className=\"relative container mx-auto px-4 py-24 md:py-32 mt-16 sm:mt-0\">\n          <ScrollAnimationWrapper className=\"w-full\">\n            <div className=\"max-w-4xl transform transition-all\">\n              {/* Status Badge */}\n            {!event.active ? (\n              <span className=\"inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold bg-red-500/20 text-red-200 mb-6 shadow-lg\">\n                <svg className=\"w-4 h-4 mr-2 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                </svg>\n                <span className=\"whitespace-nowrap\">Event Ended</span>\n              </span>\n            ) : event.maxParticipants ? (\n              <span className=\"inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold bg-green-500/20 text-green-200 mb-6 shadow-lg\">\n                <svg className=\"w-4 h-4 mr-2 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                </svg>\n                <span className=\"whitespace-nowrap\">Registration Open</span>\n              </span>\n            ) : null}\n            \n            <h1 className=\"text-4xl md:text-6xl font-bold mb-4 leading-tight\">{event.name}</h1>\n            <p className=\"text-xl text-gray-300 mb-8 max-w-3xl\">{event.description}</p>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 text-lg bg-black/30 p-6 rounded-xl backdrop-blur-sm\">\n              <div className=\"flex items-center space-x-4\">\n                <div className=\"flex-shrink-0 w-12 h-12 rounded-lg bg-white/10 flex items-center justify-center\">\n                  <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                  </svg>\n                </div>\n                <div>\n                  <p className=\"text-gray-400 text-sm\">Date</p>\n                  <p className=\"font-semibold\">{new Date(event.date).toLocaleDateString()}</p>\n                </div>\n              </div>\n              \n              <div className=\"flex items-center space-x-4\">\n                <div className=\"flex-shrink-0 w-12 h-12 rounded-lg bg-white/10 flex items-center justify-center\">\n                  <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\" />\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\" />\n                  </svg>\n                </div>\n                <div>\n                  <p className=\"text-gray-400 text-sm\">Location</p>\n                  <p className=\"font-semibold\">{event.location}</p>\n                </div>\n              </div>\n\n              <div className=\"flex items-center space-x-4\">\n                <div className=\"flex-shrink-0 w-12 h-12 rounded-lg bg-white/10 flex items-center justify-center\">\n                  <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                  </svg>\n                </div>\n                <div>\n                  <p className=\"text-gray-400 text-sm\">Registration Fee</p>\n                  <p className=\"font-semibold\">KES {event.fee.toLocaleString()}</p>\n                </div>\n              </div>\n            </div>\n            </div>\n          </ScrollAnimationWrapper>\n        </div>\n      </div>\n\n      {/* Registration Form Section */}\n      <div className=\"container mx-auto py-16 px-4\">\n        <ScrollAnimationWrapper className=\"w-full\">\n          <div className=\"text-center mb-12 transform transition-all\">\n            <h2 className=\"text-3xl font-bold mb-4\">Register for {event.name}</h2>\n            {event.active ? (\n              <p className=\"text-gray-600 max-w-2xl mx-auto\">\n                Complete the registration form below to secure your spot at this event. \n                Choose between individual or organization registration.\n              </p>\n            ) : null}\n          </div>\n        </ScrollAnimationWrapper>\n        \n        <ScrollAnimationWrapper className=\"w-full\" delay={200}>\n          <Card className=\"p-6 max-w-2xl mx-auto shadow-xl bg-white transform transition-all hover:shadow-2xl duration-300\">\n            <div className=\"mb-8\">\n          <h2 className=\"text-2xl font-semibold mb-2\">{event.name}</h2>\n          {!event.active && (\n            <div className=\"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700\">\n              This event has ended and is no longer accepting registrations.\n            </div>\n          )}\n          <p className=\"text-gray-600 mb-4\">{event.description}</p>\n          {event.imageUrl && (\n            <OptimizedImage src={event.imageUrl} alt={event.name} className=\"w-full h-48 object-cover rounded-lg mb-4\" />\n          )}\n          <div className=\"space-y-2\">\n            <p className=\"text-lg font-medium\">Date: {new Date(event.date).toLocaleDateString()}</p>\n            <p className=\"text-lg\">End Time: {new Date(event.endDate).toLocaleTimeString()}</p>\n            <p className=\"text-lg\">Location: {event.location}</p>\n            {event.maxParticipants && (\n              <p className=\"text-lg\">Maximum Participants: {event.maxParticipants}</p>\n            )}\n          </div>\n        </div>\n\n        {event.active && (\n          <div className=\"mb-6\">\n            <div className=\"flex gap-4 mb-6 flex-wrap sm:flex-nowrap\">\n              <Button\n                type=\"button\"\n                variant={registrationType === 'individual' ? 'default' : 'outline'}\n                onClick={() => handleRegistrationTypeChange('individual')}\n                className=\"w-full sm:w-auto\"\n              >\n                Individual Registration\n              </Button>\n              <Button\n                type=\"button\"\n                variant={registrationType === 'organization' ? 'default' : 'outline'}\n                onClick={() => handleRegistrationTypeChange('organization')}\n                className=\"w-full sm:w-auto\"\n              >\n                Organization Registration\n              </Button>\n\n            </div>\n          </div>\n        )}\n\n        {event.active && (\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            {/* Payment Gateway Selector */}\n            <div>\n              <label className=\"block text-sm font-medium mb-2\">Payment Gateway</label>\n              <select\n                className=\"block w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500\"\n                value={gateway}\n                onChange={e => {\n                  setGateway(e.target.value as PaymentGateway);\n                  setFormData(prev => ({ ...prev, gateway: e.target.value as PaymentGateway }));\n                }}\n                required\n              >\n                <option value=\"pesapal\">Pesapal</option>\n                <option value=\"paypal\">PayPal</option>\n                <option value=\"mpesa\">M-Pesa</option>\n              </select>\n            </div>\n            {registrationType === 'individual' ? (\n            // Individual registration form\n            <>\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Surname</label>\n                  <Input\n                    type=\"text\"\n                    name=\"surname\"\n                    value={formData.individual?.surname || ''}\n                    onChange={handleIndividualInputChange}\n                    required\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">First Name</label>\n                  <Input\n                    type=\"text\"\n                    name=\"firstName\"\n                    value={formData.individual?.firstName || ''}\n                    onChange={handleIndividualInputChange}\n                    required\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Middle Name</label>\n                  <Input\n                    type=\"text\"\n                    name=\"middleName\"\n                    value={formData.individual?.middleName || ''}\n                    onChange={handleIndividualInputChange}\n                    required\n                  />\n                </div>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">Email</label>\n                <Input\n                  type=\"email\"\n                  name=\"email\"\n                  value={formData.individual?.email || ''}\n                  onChange={handleIndividualInputChange}\n                  required\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">Phone Number</label>\n                <Input\n                  type=\"tel\"\n                  name=\"phone\"\n                  value={formData.individual?.phone || ''}\n                  onChange={handleIndividualInputChange}\n                  required\n                  placeholder=\"254700000000\"\n                />\n              </div>\n            </>\n          ) : (\n            // Organization registration form\n            <>\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">Organization Name</label>\n                <Input\n                  type=\"text\"\n                  name=\"organizationName\"\n                  value={formData.organization?.organizationName || ''}\n                  onChange={handleOrganizationInputChange}\n                  required\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">Organization Email</label>\n                <Input\n                  type=\"email\"\n                  name=\"organizationEmail\"\n                  value={formData.organization?.organizationEmail || ''}\n                  onChange={handleOrganizationInputChange}\n                  required\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">Representative Name</label>\n                <Input\n                  type=\"text\"\n                  name=\"representativeName\"\n                  value={formData.organization?.representativeName || ''}\n                  onChange={handleOrganizationInputChange}\n                  required\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">Role</label>\n                <Input\n                  type=\"text\"\n                  name=\"role\"\n                  value={formData.organization?.role || ''}\n                  onChange={handleOrganizationInputChange}\n                  required\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">Phone Number</label>\n                <Input\n                  type=\"tel\"\n                  name=\"phone\"\n                  value={formData.organization?.phone || ''}\n                  onChange={handleOrganizationInputChange}\n                  required\n                  placeholder=\"254700000000\"\n                />\n              </div>\n            </>\n          )}\n\n            <div className=\"border-t pt-4\">\n              <p className=\"text-lg font-semibold mb-4\">\n                Registration Fee: KES {event.fee}\n              </p>\n              <Button\n                type=\"submit\"\n                className=\"w-full\"\n                disabled={isLoading}\n              >\n                {isLoading ? \"Processing...\" : \"Register & Pay Now\"}\n              </Button>\n            </div>\n          </form>\n        )}\n        </Card>\n        </ScrollAnimationWrapper>\n      </div>\n    </div>\n  );\n}\n\n// This function will handle the payment initiation with the selected gateway\nasync function initiatePayment(formData: RegistrationFormData, event: Event) {\n  const response = await fetch('/api/payments/initiate', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      formData,\n      eventId: event.id,\n      amount: event.fee,\n      gateway: formData.gateway,\n    }),\n  });\n\n  if (!response.ok) {\n    throw new Error('Payment initiation failed');\n  }\n\n  return response.json();\n}\n","size_bytes":21746},"client/src/pages/Events.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Helmet } from \"react-helmet\";\nimport { Link } from \"wouter\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { OptimizedImage } from \"@/components/ui/optimized-image\";\nimport ScrollAnimationWrapper from \"@/components/ScrollAnimationWrapper\";\nimport { \n  Calendar, \n  MapPin, \n  Users, \n  Clock,\n  ChevronRight,\n  Filter,\n  DollarSign\n} from \"lucide-react\";\nimport { getEvents } from \"@/lib/staticData\";\nimport SEO from \"@/components/SEO\";\n\ninterface Event {\n  id: number;\n  name: string;\n  slug: string;\n  description: string;\n  date: string;\n  endDate: string;\n  location: string;\n  fee: number;\n  maxParticipants?: number;\n  imageUrl: string;\n  featured: boolean;\n  category: string;\n  tags?: string[];\n  active: boolean;\n}\n\nexport default function Events() {\n  const [selectedCategory, setSelectedCategory] = useState<string>(\"all\");\n\n  const { data: events, isLoading } = useQuery<Event[]>({\n    queryKey: [\"events\"],\n    queryFn: () => getEvents(),\n  });\n\n  const categories = events \n    ? [\"all\", ...Array.from(new Set(events.map(event => event.category).filter(Boolean)))]\n    : [\"all\"];\n\n  const filteredEvents = events?.filter(event => {\n    if (selectedCategory === \"all\") return event.active;\n    return event.active && event.category === selectedCategory;\n  }) || [];\n\n  const featuredEvents = filteredEvents.filter(event => event.featured);\n  const upcomingEvents = filteredEvents.filter(event => new Date(event.date) > new Date());\n  const pastEvents = filteredEvents.filter(event => new Date(event.endDate) < new Date());\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n  };\n\n  const formatTime = (dateString: string) => {\n    return new Date(dateString).toLocaleTimeString('en-US', {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  const getEventStatus = (event: Event) => {\n    const now = new Date();\n    const startDate = new Date(event.date);\n    const endDate = new Date(event.endDate);\n    \n    if (now < startDate) return { status: 'upcoming', color: 'bg-blue-100 text-blue-800' };\n    if (now >= startDate && now <= endDate) return { status: 'live', color: 'bg-green-100 text-green-800' };\n    return { status: 'completed', color: 'bg-gray-100 text-gray-800' };\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen pt-24\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"animate-pulse space-y-8\">\n            <div className=\"h-12 bg-gray-200 rounded w-1/3 mx-auto\" />\n            <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {[...Array(6)].map((_, i) => (\n                <div key={i} className=\"h-80 bg-gray-200 rounded-lg\" />\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <SEO />\n      <Helmet>\n        <title>Events - Family Peace Association</title>\n        <meta name=\"description\" content=\"Join our events focused on building stronger families and creating peaceful communities. Find workshops, conferences, and community gatherings.\" />\n      </Helmet>\n\n      {/* Hero Section */}\n      <section className=\"pt-24 pb-16 bg-gradient-to-br from-yellow-50 to-orange-50\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"text-center max-w-4xl mx-auto\">\n              <h1 className=\"text-4xl md:text-6xl font-bold text-gray-800 mb-6\">\n                Family Peace <span className=\"text-yellow-600\">Events</span>\n              </h1>\n              <p className=\"text-xl text-gray-600 mb-8\">\n                Join us in building stronger families and peaceful communities through workshops, conferences, and meaningful gatherings.\n              </p>\n              \n              {/* Category Filter */}\n              <div className=\"flex flex-wrap justify-center gap-3\">\n                {categories.map((category) => (\n                  <Button\n                    key={category}\n                    onClick={() => setSelectedCategory(category)}\n                    variant={selectedCategory === category ? \"default\" : \"outline\"}\n                    className={selectedCategory === category \n                      ? \"bg-yellow-600 hover:bg-yellow-700 text-white\" \n                      : \"hover:bg-yellow-50\"\n                    }\n                  >\n                    <Filter className=\"w-4 h-4 mr-2\" />\n                    {category.charAt(0).toUpperCase() + category.slice(1)}\n                  </Button>\n                ))}\n              </div>\n            </div>\n          </ScrollAnimationWrapper>\n        </div>\n      </section>\n\n      {/* Featured Events */}\n      {featuredEvents.length > 0 && (\n        <section className=\"py-16 bg-white\">\n          <div className=\"container mx-auto px-6\">\n            <ScrollAnimationWrapper>\n              <h2 className=\"text-3xl font-bold text-center mb-12\">Featured Events</h2>\n            </ScrollAnimationWrapper>\n            \n            <div className=\"grid md:grid-cols-2 gap-8\">\n              {featuredEvents.map((event) => {\n                const status = getEventStatus(event);\n                return (\n                  <ScrollAnimationWrapper key={event.id}>\n                    <Link href={`/events/${event.slug}`} className=\"block\">\n                      <Card className=\"overflow-hidden hover:shadow-xl transition-shadow cursor-pointer\">\n                        <div className=\"relative\">\n                          <OptimizedImage\n                            src={event.imageUrl}\n                            alt={event.name}\n                            className=\"w-full h-64 object-cover\"\n                          />\n                          <div className=\"absolute top-4 right-4\">\n                            <Badge className={status.color}>\n                              {status.status}\n                            </Badge>\n                          </div>\n                        </div>\n                        <CardContent className=\"p-6\">\n                        <div className=\"flex items-center gap-2 mb-3\">\n                          <Badge variant=\"outline\">{event.category}</Badge>\n                          {event.featured && (\n                            <Badge className=\"bg-yellow-100 text-yellow-800\">Featured</Badge>\n                          )}\n                        </div>\n                        \n                        <h3 className=\"text-xl font-bold mb-3\">{event.name}</h3>\n                        <p className=\"text-gray-600 mb-4 line-clamp-2\">{event.description}</p>\n                        \n                        <div className=\"space-y-2 mb-4\">\n                          <div className=\"flex items-center text-sm text-gray-500\">\n                            <Calendar className=\"w-4 h-4 mr-2\" />\n                            {formatDate(event.date)} at {formatTime(event.date)}\n                          </div>\n                          <div className=\"flex items-center text-sm text-gray-500\">\n                            <MapPin className=\"w-4 h-4 mr-2\" />\n                            {event.location}\n                          </div>\n                          <div className=\"flex items-center text-sm text-gray-500\">\n                            <DollarSign className=\"w-4 h-4 mr-2\" />\n                            KSh {event.fee.toLocaleString()}\n                          </div>\n                          {event.maxParticipants && (\n                            <div className=\"flex items-center text-sm text-gray-500\">\n                              <Users className=\"w-4 h-4 mr-2\" />\n                              Max {event.maxParticipants} participants\n                            </div>\n                          )}\n                        </div>\n                        \n                        <Button className=\"w-full bg-yellow-600 hover:bg-yellow-700\">\n                          Learn More\n                          <ChevronRight className=\"w-4 h-4 ml-2\" />\n                        </Button>\n                        </CardContent>\n                      </Card>\n                    </Link>\n                  </ScrollAnimationWrapper>\n                );\n              })}\n            </div>\n          </div>\n        </section>\n      )}\n\n      {/* Upcoming Events */}\n      {upcomingEvents.length > 0 && (\n        <section className=\"py-16 bg-gray-50\">\n          <div className=\"container mx-auto px-6\">\n            <ScrollAnimationWrapper>\n              <h2 className=\"text-3xl font-bold text-center mb-12\">Upcoming Events</h2>\n            </ScrollAnimationWrapper>\n            \n            <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {upcomingEvents.map((event) => (\n                <ScrollAnimationWrapper key={event.id}>\n                  <Link href={`/events/${event.slug}`} className=\"block\">\n                    <Card className=\"overflow-hidden hover:shadow-lg transition-shadow cursor-pointer\">\n                      <OptimizedImage\n                        src={event.imageUrl}\n                        alt={event.name}\n                        className=\"w-full h-48 object-cover\"\n                      />\n                      <CardContent className=\"p-6\">\n                      <Badge variant=\"outline\" className=\"mb-3\">{event.category}</Badge>\n                      <h3 className=\"text-lg font-bold mb-2\">{event.name}</h3>\n                      <p className=\"text-gray-600 mb-4 text-sm line-clamp-2\">{event.description}</p>\n                      \n                      <div className=\"space-y-1 mb-4\">\n                        <div className=\"flex items-center text-xs text-gray-500\">\n                          <Calendar className=\"w-3 h-3 mr-1\" />\n                          {formatDate(event.date)}\n                        </div>\n                        <div className=\"flex items-center text-xs text-gray-500\">\n                          <MapPin className=\"w-3 h-3 mr-1\" />\n                          {event.location}\n                        </div>\n                      </div>\n                      \n                      <Button size=\"sm\" className=\"w-full\">\n                        View Details\n                      </Button>\n                    </CardContent>\n                  </Card>\n                </Link>\n                </ScrollAnimationWrapper>\n              ))}\n            </div>\n          </div>\n        </section>\n      )}\n\n      {/* Past Events */}\n      {pastEvents.length > 0 && (\n        <section className=\"py-16 bg-white\">\n          <div className=\"container mx-auto px-6\">\n            <ScrollAnimationWrapper>\n              <h2 className=\"text-3xl font-bold text-center mb-12\">Past Events</h2>\n            </ScrollAnimationWrapper>\n            \n            <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-6\">\n              {pastEvents.slice(0, 8).map((event) => (\n                <ScrollAnimationWrapper key={event.id}>\n                  <Link href={`/events/${event.slug}`} className=\"block\">\n                    <Card className=\"overflow-hidden hover:shadow-lg transition-shadow opacity-75 cursor-pointer\">\n                      <OptimizedImage\n                        src={event.imageUrl}\n                        alt={event.name}\n                        className=\"w-full h-32 object-cover\"\n                      />\n                      <CardContent className=\"p-4\">\n                        <h4 className=\"font-medium mb-2 text-sm\">{event.name}</h4>\n                        <div className=\"text-xs text-gray-500\">\n                          {formatDate(event.date)}\n                        </div>\n                      </CardContent>\n                    </Card>\n                  </Link>\n                </ScrollAnimationWrapper>\n              ))}\n            </div>\n          </div>\n        </section>\n      )}\n\n      {/* Call to Action */}\n      <section className=\"py-16 bg-yellow-600\">\n        <div className=\"container mx-auto px-6 text-center\">\n          <ScrollAnimationWrapper>\n            <h2 className=\"text-3xl font-bold text-white mb-4\">\n              Ready to Join Our Community?\n            </h2>\n            <p className=\"text-yellow-100 mb-8 max-w-2xl mx-auto\">\n              Don't miss out on our upcoming events. Subscribe to our newsletter to stay updated on all Family Peace Association activities.\n            </p>\n            <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n              <Link href=\"/get-involved\">\n                <Button size=\"lg\" className=\"bg-white text-yellow-600 hover:bg-gray-100\">\n                  Get Involved\n                </Button>\n              </Link>\n              <Link href=\"/contact\">\n                <Button size=\"lg\" variant=\"outline\" className=\"border-white text-white hover:bg-white hover:text-yellow-600\">\n                  Contact Us\n                </Button>\n              </Link>\n            </div>\n          </ScrollAnimationWrapper>\n        </div>\n      </section>\n    </>\n  );\n}","size_bytes":13228},"client/src/pages/Features.tsx":{"content":"import { Helmet } from \"react-helmet\";\nimport { Link } from \"wouter\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport ScrollAnimationWrapper from \"@/components/ScrollAnimationWrapper\";\nimport { OptimizedImage } from \"@/components/ui/optimized-image\";\nimport { \n  Heart, \n  Handshake, \n  Users, \n  GraduationCap, \n  Phone, \n  Calendar, \n  Shield, \n  Award,\n  CheckCircle,\n  Clock,\n  MapPin,\n  Headphones\n} from \"lucide-react\";\nimport SEO from \"@/components/SEO\";\n\nexport default function Features() {\n  return (\n    <>\n      <SEO />\n      <Helmet>\n        <title>Our Services & Features - Family Peace Association</title>\n        <meta name=\"description\" content=\"Discover our comprehensive family support services including counseling, conflict resolution, support groups, and educational workshops designed to strengthen relationships.\" />\n      </Helmet>\n\n      {/* Hero Section */}\n      <section className=\"pt-24 pb-20 bg-gradient-to-br from-primary/10 to-primary/5\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"text-center max-w-4xl mx-auto\">\n              <h1 className=\"text-4xl md:text-6xl font-bold text-gray-800 mb-6\">\n                Our <span className=\"primary-text\">Services</span>\n              </h1>\n              <p className=\"text-xl text-gray-600 mb-8\">\n                Comprehensive family support services designed to strengthen relationships, resolve conflicts, and build lasting peace in your home.\n              </p>\n            </div>\n          </ScrollAnimationWrapper>\n        </div>\n      </section>\n\n      {/* Main Services */}\n      <section className=\"py-20\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"text-center mb-16\">\n              <h2 className=\"text-3xl md:text-4xl font-bold text-gray-800 mb-6\">\n                Core <span className=\"primary-text\">Services</span>\n              </h2>\n              <p className=\"text-xl text-gray-600 max-w-3xl mx-auto\">\n                Our evidence-based programs are designed to meet families where they are and support them on their journey toward healing and growth.\n              </p>\n            </div>\n          </ScrollAnimationWrapper>\n\n          <div className=\"grid md:grid-cols-2 gap-12\">\n            {[\n              {\n                icon: Heart,\n                title: \"Family Counseling\",\n                description: \"Professional therapeutic services for families facing challenges in communication, trust, and relationship dynamics.\",\n                features: [\n                  \"Individual and family therapy sessions\",\n                  \"Trauma-informed care approaches\",\n                  \"Evidence-based therapeutic methods\",\n                  \"Culturally sensitive support\"\n                ],\n                image: \"https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=400\"\n              },\n              {\n                icon: Handshake,\n                title: \"Conflict Resolution\",\n                description: \"Mediation and training services to help families resolve disputes peacefully and build stronger communication skills.\",\n                features: [\n                  \"Family mediation services\",\n                  \"Conflict resolution workshops\",\n                  \"Communication skills training\",\n                  \"Preventive intervention strategies\"\n                ],\n                image: \"https://images.unsplash.com/photo-1554734867-bf3c00a49371?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=400\"\n              },\n              {\n                icon: Users,\n                title: \"Support Groups\",\n                description: \"Peer-led support groups providing community connection and shared experiences for families on similar journeys.\",\n                features: [\n                  \"Weekly support group meetings\",\n                  \"Peer mentorship programs\",\n                  \"Topic-specific support circles\",\n                  \"Safe space for sharing experiences\"\n                ],\n                image: \"https://images.unsplash.com/photo-1559027615-cd4628902d4a?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=400\"\n              },\n              {\n                icon: GraduationCap,\n                title: \"Educational Workshops\",\n                description: \"Interactive learning experiences focused on building practical skills for healthy family relationships.\",\n                features: [\n                  \"Parenting skills workshops\",\n                  \"Communication techniques training\",\n                  \"Stress management courses\",\n                  \"Relationship building seminars\"\n                ],\n                image: \"https://images.unsplash.com/photo-1609220136736-443140cffec6?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=400\"\n              }\n            ].map((service, index) => (\n              <ScrollAnimationWrapper key={service.title} delay={index * 200}>\n                <Card className=\"overflow-hidden h-full\">\n                  <OptimizedImage \n                    src={service.image} \n                    alt={service.title} \n                    className=\"w-full h-48 object-cover\"\n                  />\n                  <CardContent className=\"p-8\">\n                    <div className=\"flex items-center mb-6\">\n                      <div className=\"accent-bg w-12 h-12 rounded-full flex items-center justify-center mr-4\">\n                        <service.icon className=\"w-6 h-6 text-white\" />\n                      </div>\n                      <h3 className=\"text-2xl font-bold text-gray-800\">{service.title}</h3>\n                    </div>\n                    <p className=\"text-gray-600 mb-6\">{service.description}</p>\n                    <ul className=\"space-y-3\">\n                      {service.features.map((feature) => (\n                        <li key={feature} className=\"flex items-center space-x-3\">\n                          <CheckCircle className=\"w-5 h-5 text-green-500 flex-shrink-0\" />\n                          <span className=\"text-gray-700\">{feature}</span>\n                        </li>\n                      ))}\n                    </ul>\n                  </CardContent>\n                </Card>\n              </ScrollAnimationWrapper>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* Service Features */}\n      <section className=\"py-20 bg-gray-50\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"text-center mb-16\">\n              <h2 className=\"text-3xl md:text-4xl font-bold text-gray-800 mb-6\">\n                Why Choose <span className=\"primary-text\">Our Services</span>\n              </h2>\n              <p className=\"text-xl text-gray-600 max-w-3xl mx-auto\">\n                We're committed to providing the highest quality support with features designed around your family's needs.\n              </p>\n            </div>\n          </ScrollAnimationWrapper>\n\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-8\">\n            {[\n              {\n                icon: Shield,\n                title: \"Confidential & Safe\",\n                description: \"All services provided in a confidential, judgment-free environment\"\n              },\n              {\n                icon: Award,\n                title: \"Expert Team\",\n                description: \"Licensed professionals with specialized training in family therapy\"\n              },\n              {\n                icon: Clock,\n                title: \"Flexible Scheduling\",\n                description: \"Evening and weekend appointments available to fit your schedule\"\n              },\n              {\n                icon: MapPin,\n                title: \"Multiple Locations\",\n                description: \"Convenient locations throughout the community\"\n              },\n              {\n                icon: Phone,\n                title: \"24/7 Crisis Support\",\n                description: \"Emergency support line available for urgent situations\"\n              },\n              {\n                icon: Calendar,\n                title: \"Ongoing Support\",\n                description: \"Long-term support programs for sustained family growth\"\n              },\n              {\n                icon: Users,\n                title: \"Family-Centered\",\n                description: \"Services designed to strengthen the entire family unit\"\n              },\n              {\n                icon: Headphones,\n                title: \"Multilingual Services\",\n                description: \"Support available in multiple languages and cultural contexts\"\n              }\n            ].map((feature, index) => (\n              <ScrollAnimationWrapper key={feature.title} delay={index * 100}>\n                <Card className=\"text-center h-full\">\n                  <CardContent className=\"p-6\">\n                    <div className=\"primary-bg w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4\">\n                      <feature.icon className=\"w-8 h-8 text-white\" />\n                    </div>\n                    <h3 className=\"text-lg font-semibold text-gray-800 mb-3\">{feature.title}</h3>\n                    <p className=\"text-gray-600 text-sm\">{feature.description}</p>\n                  </CardContent>\n                </Card>\n              </ScrollAnimationWrapper>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* Service Process */}\n      <section className=\"py-20\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"text-center mb-16\">\n              <h2 className=\"text-3xl md:text-4xl font-bold text-gray-800 mb-6\">\n                How Our <span className=\"primary-text\">Process Works</span>\n              </h2>\n              <p className=\"text-xl text-gray-600 max-w-3xl mx-auto\">\n                We follow a structured approach to ensure every family receives the personalized support they need.\n              </p>\n            </div>\n          </ScrollAnimationWrapper>\n\n          <div className=\"max-w-4xl mx-auto\">\n            <div className=\"space-y-8\">\n              {[\n                {\n                  step: \"01\",\n                  title: \"Initial Consultation\",\n                  description: \"We begin with a comprehensive assessment to understand your family's unique situation, challenges, and goals. This confidential consultation helps us develop a personalized plan.\",\n                  duration: \"60-90 minutes\"\n                },\n                {\n                  step: \"02\", \n                  title: \"Customized Plan Development\",\n                  description: \"Based on your consultation, our team creates a tailored intervention plan that may include therapy sessions, workshops, support groups, or crisis intervention services.\",\n                  duration: \"Ongoing planning\"\n                },\n                {\n                  step: \"03\",\n                  title: \"Active Intervention & Support\",\n                  description: \"We implement your personalized plan with regular sessions, check-ins, and adjustments as needed. Our team provides ongoing support throughout your journey.\",\n                  duration: \"Variable timeline\"\n                },\n                {\n                  step: \"04\",\n                  title: \"Long-term Maintenance\",\n                  description: \"We provide continued support and resources to help maintain the positive changes in your family relationships. Follow-up sessions and community connections ensure lasting success.\",\n                  duration: \"Ongoing support\"\n                }\n              ].map((step, index) => (\n                <ScrollAnimationWrapper key={step.step} delay={index * 200}>\n                  <div className=\"flex items-start space-x-6\">\n                    <div className=\"flex-shrink-0\">\n                      <div className=\"primary-bg w-16 h-16 rounded-full flex items-center justify-center\">\n                        <span className=\"text-white text-xl font-bold\">{step.step}</span>\n                      </div>\n                    </div>\n                    <div className=\"flex-grow\">\n                      <div className=\"flex items-center justify-between mb-3\">\n                        <h3 className=\"text-xl font-bold text-gray-800\">{step.title}</h3>\n                        <span className=\"text-sm text-primary font-medium\">{step.duration}</span>\n                      </div>\n                      <p className=\"text-gray-600\">{step.description}</p>\n                    </div>\n                  </div>\n                </ScrollAnimationWrapper>\n              ))}\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Call to Action */}\n      <section className=\"py-20 primary-bg\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"text-center max-w-4xl mx-auto\">\n              <h2 className=\"text-3xl md:text-4xl font-bold text-white mb-6\">\n                Ready to Begin Your Family's Journey?\n              </h2>\n              <p className=\"text-xl text-white/90 mb-8\">\n                Take the first step toward building stronger relationships and creating lasting peace in your home. Our team is here to support you every step of the way.\n              </p>\n              <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n                <Link href=\"/contact\">\n                  <Button size=\"lg\" className=\"bg-white text-gray-800 hover:bg-gray-100\">\n                    Schedule Consultation\n                  </Button>\n                </Link>\n                <Link href=\"/get-involved\">\n                  <Button size=\"lg\" variant=\"outline\" className=\"border-white text-gray-800 hover:bg-white/10\">\n                    Learn More\n                  </Button>\n                </Link>\n              </div>\n            </div>\n          </ScrollAnimationWrapper>\n        </div>\n      </section>\n    </>\n  );\n}\n","size_bytes":14129},"client/src/pages/Gallery.tsx":{"content":"import React, { useEffect, useState } from 'react';\nimport { Helmet } from \"react-helmet\";\nimport ScrollAnimationWrapper from \"@/components/ScrollAnimationWrapper\";\nimport { OptimizedImage } from \"@/components/ui/optimized-image\";\nimport SEO from \"@/components/SEO\";\nimport { getGallery } from \"@/lib/staticData\";\nimport Lightbox from \"yet-another-react-lightbox\";\nimport \"yet-another-react-lightbox/styles.css\";\n\n\n// --- TYPE DEFINITIONS ---\ninterface GalleryImage {\n  imageUrl: string;\n  title: string;\n  description?: string;\n  category: string;\n  uploadedAt?: string;\n}\n\ninterface VideoItem {\n  url: string;\n  title: string;\n}\n\n// --- IMAGE GALLERY COMPONENT ---\nconst CATEGORY_LIST = [\n  'All Categories',\n  'Character Education',\n  'Women Empowerment',\n  'Youth Mentorship',\n  'Couples Enrichment',\n  'Men Fellowship',\n  'Other',\n];\n\nconst ImagesGallery: React.FC = () => {\n  const [images, setImages] = useState<GalleryImage[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [selectedCategory, setSelectedCategory] = useState<string>('All Categories');\n  const [open, setOpen] = useState(false);\n  const [index, setIndex] = useState(0);\n\n  useEffect(() => {\n    getGallery()\n      .then(data => {\n        setImages(data.images || []);\n      })\n      .catch(err => {\n        console.error(\"Gallery Error:\", err);\n        setError(err.message || 'Failed to load images. The gallery might be empty or the server is unavailable.');\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n  }, []);\n\n\n  const filteredImages = selectedCategory === 'All Categories'\n    ? images\n    : images.filter(img => img.category.toLowerCase() === selectedCategory.toLowerCase());\n\n  const imagesByCategory = filteredImages.reduce((acc, img) => {\n    if (!acc[img.category]) acc[img.category] = [];\n    acc[img.category].push(img);\n    return acc;\n  }, {} as Record<string, GalleryImage[]>);\n\n  const slides = filteredImages.map(({ imageUrl, title, description }) => ({\n    src: imageUrl,\n    title,\n    description,\n  }));\n\n  return (\n    <>\n      {/* Category Filter Bar */}\n      <div className=\"flex flex-wrap gap-3 justify-center mb-10\">\n        {CATEGORY_LIST.map((cat) => (\n          <button\n            key={cat}\n            className={`px-5 py-2 rounded-md border font-medium transition-colors duration-200 ${\n              selectedCategory === cat\n                ? 'bg-yellow-400 text-black border-yellow-400 shadow'\n                : 'bg-white text-black border-gray-200 hover:bg-yellow-100'\n            }`}\n            onClick={() => setSelectedCategory(cat)}\n          >\n            {cat}\n          </button>\n        ))}\n      </div>\n\n      {/* Gallery Grid */}\n      <div>\n        {loading ? (\n          <div className=\"flex justify-center items-center h-40\">\n            <span className=\"inline-block w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin\" role=\"status\" aria-label=\"Loading\"></span>\n          </div>\n        ) : error ? (\n          <div className=\"text-center text-red-500\">{error}</div>\n        ) : filteredImages.length === 0 ? (\n          <div className=\"text-center text-gray-500\">No images found for this category.</div>\n        ) : (\n          Object.entries(imagesByCategory).map(([category, imgs]) => (\n            <div key={category} className=\"mb-16\">\n              {selectedCategory === 'All Categories' && (\n                <h2 className=\"text-2xl md:text-3xl font-bold text-primary mb-8 text-center\">{category}</h2>\n              )}\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8\">\n                {imgs.map((img, index) => {\n                  const globalIndex = filteredImages.findIndex(i => i.imageUrl === img.imageUrl);\n                  return (\n                    <ScrollAnimationWrapper key={img.imageUrl + index} delay={index * 100}>\n                      <div\n                        className=\"overflow-hidden rounded-lg shadow-lg aspect-w-4 aspect-h-3 cursor-pointer\"\n                        onClick={() => {\n                          if (globalIndex !== -1) {\n                            setIndex(globalIndex);\n                            setOpen(true);\n                          }\n                        }}\n                      >\n                        <OptimizedImage\n                          src={img.imageUrl}\n                          alt={img.title || `Gallery image ${index + 1}`}\n                          className=\"w-full h-full object-cover transition-transform duration-300 hover:scale-105\"\n                        />\n                      </div>\n                      {img.title && <div className=\"mt-2 text-center font-medium\">{img.title}</div>}\n                      {img.description && <div className=\"text-center text-gray-500 text-sm\">{img.description}</div>}\n                    </ScrollAnimationWrapper>\n                  );\n                })}\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n\n      <Lightbox\n        open={open}\n        close={() => setOpen(false)}\n        slides={slides}\n        index={index}\n      />\n    </>\n  );\n};\n\n// --- VIDEO GALLERY COMPONENT ---\nconst videoData: VideoItem[] = [\n//  { url: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ', title: 'Inspiring Change in the Community' },\n//  { url: 'https://www.youtube.com/watch?v=3JZ_D3p_elo', title: 'Youth Mentorship Program Highlights' },\n // { url: 'https://www.youtube.com/watch?v=xvFZjo5PgG0', title: 'A Look at Our Women Empowerment Initiative' },\n // { url: 'https://www.youtube.com/watch?v=QH2-TGUlwu4', title: 'Family Peace Festival 2023' },\n//  { url: 'https://www.youtube.com/watch?v=8ybW48rKBME', title: 'Volunteer Stories: Making a Difference' },\n  { url: 'https://www.youtube.com/watch?v=w5i2qdmAD7s', title: 'Couples Enrichment Workshop' },\n];\n\nconst getYouTubeEmbedUrl = (url: string) => {\n  const videoIdMatch = url.match(/(?:v=)([\\w-]+)/);\n  if (!videoIdMatch) return '';\n  return `https://www.youtube.com/embed/${videoIdMatch[1]}`;\n};\n\nconst VideosGallery: React.FC = () => {\n  return (\n    <div>\n      <h2 className=\"text-2xl md:text-3xl font-bold text-primary mb-8 text-center\">Our Videos</h2>\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8\">\n        {videoData.map((video, index) => (\n          <ScrollAnimationWrapper key={video.url + index} delay={index * 100}>\n            <div className=\"overflow-hidden rounded-lg shadow-lg\">\n              <div className=\"aspect-w-16 aspect-h-9\">\n                <iframe\n                  src={getYouTubeEmbedUrl(video.url)}\n                  title={video.title}\n                  frameBorder=\"0\"\n                  allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n                  allowFullScreen\n                  className=\"w-full h-full\"\n                ></iframe>\n              </div>\n            </div>\n            {video.title && <div className=\"mt-2 text-center font-medium\">{video.title}</div>}\n          </ScrollAnimationWrapper>\n        ))}\n      </div>\n    </div>\n  );\n};\n\n\n// --- MAIN GALLERY PAGE COMPONENT ---\nconst Gallery: React.FC = () => {\n  const [activeTab, setActiveTab] = useState<'images' | 'videos'>('images');\n\n  return (\n    <>\n      <SEO />\n      <Helmet>\n        <title>Gallery - Family Peace Association</title>\n        <meta name=\"description\" content=\"Explore moments from our events, programs, and community work. See the impact of our mission in action.\" />\n      </Helmet>\n\n      {/* Hero Section */}\n      <section className=\"pt-32 pb-20 bg-gradient-to-br from-primary/10 to-primary/5\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"text-center max-w-4xl mx-auto\">\n              <h1 className=\"text-4xl md:text-6xl font-bold text-gray-800 mb-6\">\n                Our <span className=\"primary-text\">Gallery</span>\n              </h1>\n              <p className=\"text-xl text-gray-600 mb-8\">\n                A glimpse into our journey of building stronger families and fostering peace within the community.\n              </p>\n            </div>\n          </ScrollAnimationWrapper>\n        </div>\n      </section>\n      \n      {/* Main Tab Switcher */}\n      <div className=\"flex justify-center mb-10 gap-4\">\n        <button\n          onClick={() => setActiveTab('images')}\n          className={`px-6 py-3 rounded-md text-lg font-semibold transition-colors duration-300 ${\n            activeTab === 'images'\n              ? 'bg-primary text-white shadow-lg'\n              : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\n          }`}\n        >\n          Images\n        </button>\n        <button\n          onClick={() => setActiveTab('videos')}\n          className={`px-6 py-3 rounded-md text-lg font-semibold transition-colors duration-300 ${\n            activeTab === 'videos'\n              ? 'bg-primary text-white shadow-lg'\n              : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\n          }`}\n        >\n          Videos\n        </button>\n      </div>\n\n      {/* Content Section */}\n      <section className=\"py-10\">\n        <div className=\"container mx-auto px-6\">\n          {activeTab === 'images' ? <ImagesGallery /> : <VideosGallery />}\n        </div>\n      </section>\n    </>\n  );\n};\n\nexport default Gallery;\n","size_bytes":9384},"client/src/pages/GetInvolved.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Helmet } from \"react-helmet\";\nimport { Link } from \"wouter\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\nimport ScrollAnimationWrapper from \"@/components/ScrollAnimationWrapper\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { \n  Heart, \n  Users, \n  Calendar, \n  Clock, \n  CheckCircle, \n  Handshake,\n  GraduationCap,\n  Phone,\n  Mail,\n  MapPin\n} from \"lucide-react\";\nimport type { Cause } from \"@shared/schema\";\nimport SEO from \"@/components/SEO\";\nimport { getActiveCauses } from \"@/lib/staticData\";\n\nconst volunteerApplicationSchema = z.object({\n  name: z.string().min(2, \"Name must be at least 2 characters\"),\n  email: z.string().email(\"Please enter a valid email address\"),\n  phone: z.string().min(10, \"Please enter a valid phone number\"),\n  program: z.string().min(1, \"Please select a program\"),\n  experience: z.string().optional(),\n  availability: z.string().min(1, \"Please describe your availability\"),\n  message: z.string().optional(),\n});\n\ntype VolunteerApplicationForm = z.infer<typeof volunteerApplicationSchema>;\n\nexport default function GetInvolved() {\n  const [selectedProgram, setSelectedProgram] = useState<string>(\"\");\n  const { toast } = useToast();\n\n  const { data: causes } = useQuery<Cause[]>({\n    queryKey: [\"active-causes\"],\n    queryFn: () => getActiveCauses(),\n  });\n\n  const form = useForm<VolunteerApplicationForm>({\n    resolver: zodResolver(volunteerApplicationSchema),\n    defaultValues: {\n      name: \"\",\n      email: \"\",\n      phone: \"\",\n      program: \"\",\n      experience: \"\",\n      availability: \"\",\n      message: \"\",\n    },\n  });\n\n  const onSubmit = async (data: VolunteerApplicationForm) => {\n    try {\n      const response = await fetch(\"https://api.web3forms.com/submit\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          access_key: import.meta.env.VITE_WEB3FORMS_ACCESS_KEY,\n          from_name: data.name,\n          subject: `Volunteer Application: ${data.program}`,\n          email: data.email,\n          phone: data.phone,\n          program: data.program,\n          experience: data.experience,\n          availability: data.availability,\n          message: data.message,\n          botcheck: \"\",\n        }),\n      });\n      const result = await response.json();\n      if (result.success) {\n        toast({\n          title: \"Application Submitted!\",\n          description: \"Thank you for your interest in volunteering. We'll be in touch soon.\",\n        });\n        form.reset();\n        setSelectedProgram(\"\");\n      } else {\n        toast({\n          title: \"Error\",\n          description: result.message || \"Failed to submit application. Please try again.\",\n          variant: \"destructive\",\n        });\n      }\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error?.message || \"Failed to submit application. Please try again.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  return (\n    <>\n      <SEO />\n      <Helmet>\n        <title>Get Involved - Family Peace Association</title>\n        <meta name=\"description\" content=\"Join our mission to strengthen families and build peaceful communities. Discover volunteer opportunities, ways to support, and community partnerships.\" />\n      </Helmet>\n\n      {/* Hero Section */}\n      <section className=\"pt-24 pb-20 bg-gradient-to-br from-primary/10 to-primary/5\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"text-center max-w-4xl mx-auto\">\n              <h1 className=\"text-4xl md:text-6xl font-bold text-gray-800 mb-6\">\n                Get <span className=\"primary-text\">Involved</span>\n              </h1>\n              <p className=\"text-xl text-gray-600 mb-8\">\n                Join our community of dedicated volunteers and supporters working to strengthen families and create lasting peace in our communities.\n              </p>\n            </div>\n          </ScrollAnimationWrapper>\n        </div>\n      </section>\n\n      {/* Volunteer Opportunities */}\n      <section className=\"py-20\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"text-center mb-16\">\n              <h2 className=\"text-3xl md:text-4xl font-bold text-gray-800 mb-6\">\n                Volunteer <span className=\"primary-text\">Opportunities</span>\n              </h2>\n              <p className=\"text-xl text-gray-600 max-w-3xl mx-auto\">\n                Choose from various ways to contribute your time and skills to support families in our community.\n              </p>\n            </div>\n          </ScrollAnimationWrapper>\n\n          <div className=\"grid md:grid-cols-3 gap-8 mb-16\">\n            {[\n              {\n                title: \"Family Advocate\",\n                commitment: \"4 hours/week\",\n                schedule: \"Flexible\",\n                description: \"Provide direct support to families through advocacy and guidance.\",\n                benefits: [\n                  \"Monthly Impact Report\",\n                  \"Training Provided\", \n                  \"Recognition Certificate\",\n                  \"Volunteer Appreciation Events\"\n                ],\n                color: \"bg-blue-50 border-blue-200\"\n              },\n              {\n                title: \"Support Specialist\",\n                commitment: \"8 hours/week\", \n                schedule: \"Regular\",\n                description: \"Lead support groups and facilitate healing workshops for families.\",\n                benefits: [\n                  \"Specialized Training\",\n                  \"Mentorship Program\",\n                  \"Volunteer Coordinator Access\",\n                  \"Leadership Opportunities\"\n                ],\n                color: \"bg-yellow-50 border-yellow-200 ring-2 ring-yellow-300\"\n              },\n              {\n                title: \"Program Leader\",\n                commitment: \"12 hours/week\",\n                schedule: \"Dedicated\", \n                description: \"Lead comprehensive family programs and mentor other volunteers.\",\n                benefits: [\n                  \"Advanced Certification\",\n                  \"Program Development Input\",\n                  \"Board Meeting Invitations\",\n                  \"Annual Leadership Retreat\"\n                ],\n                color: \"bg-green-50 border-green-200\"\n              }\n            ].map((opportunity, index) => (\n              <ScrollAnimationWrapper key={opportunity.title} delay={index * 100}>\n                <Card className={`card-hover h-full ${opportunity.color}`}>\n                  <CardHeader className=\"text-center\">\n                    <CardTitle className=\"text-2xl font-bold text-gray-800 mb-2\">\n                      {opportunity.title}\n                    </CardTitle>\n                    <div className=\"space-y-2\">\n                      <Badge variant=\"secondary\" className=\"primary-bg text-white\">\n                        <Clock className=\"w-3 h-3 mr-1\" />\n                        {opportunity.commitment}\n                      </Badge>\n                      <Badge variant=\"outline\">\n                        <Calendar className=\"w-3 h-3 mr-1\" />\n                        {opportunity.schedule} schedule\n                      </Badge>\n                    </div>\n                  </CardHeader>\n                  <CardContent className=\"text-center\">\n                    <p className=\"text-gray-600 mb-6\">{opportunity.description}</p>\n                    <div className=\"space-y-3 text-left mb-6\">\n                      {opportunity.benefits.map((benefit) => (\n                        <div key={benefit} className=\"flex items-center space-x-3\">\n                          <CheckCircle className=\"w-4 h-4 text-green-500 flex-shrink-0\" />\n                          <span className=\"text-gray-700 text-sm\">{benefit}</span>\n                        </div>\n                      ))}\n                    </div>\n                    <Button \n                      className=\"w-full primary-bg text-white hover:opacity-90\"\n                      onClick={() => setSelectedProgram(opportunity.title)}\n                    >\n                      Apply Now\n                    </Button>\n                  </CardContent>\n                </Card>\n              </ScrollAnimationWrapper>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* Current Causes */}\n      {causes && causes.length > 0 && (\n        <section  className=\"py-20 bg-gray-50\">\n          <div  className=\"container mx-auto px-6\">\n            <ScrollAnimationWrapper>\n              <div id=\"initiatives\" className=\"text-center mb-16\">\n                <h2 className=\"text-3xl md:text-4xl font-bold text-gray-800 mb-6\">\n                  Active <span className=\"primary-text\">Initiatives</span>\n                </h2>\n                <p className=\"text-xl text-gray-600 max-w-3xl mx-auto\">\n                  Join one of our current programs and make an immediate impact in the lives of families.\n                </p>\n              </div>\n            </ScrollAnimationWrapper>\n\n            <div className=\"grid md:grid-cols-2 gap-8\">\n              {causes.map((cause, index) => (\n                <ScrollAnimationWrapper key={cause.id} delay={index * 200}>\n                  <Card className=\"card-hover overflow-hidden h-full\">\n                    <img \n                      src={cause.imageUrl} \n                      alt={cause.title} \n                      className=\"w-full h-48 object-cover\"\n                    />\n                    <CardContent className=\"p-8\">\n                      <div className=\"flex justify-between items-start mb-6\">\n                        <div>\n                          <div className=\"text-2xl font-bold text-gray-800 mb-2\">\n                            ${cause.goalAmount.toLocaleString()}\n                          </div>\n                          <div className=\"text-lg text-gray-600 mb-2\">\n                            ${cause.raisedAmount.toLocaleString()} raised\n                          </div>\n                        </div>\n                        <div className=\"primary-bg text-white px-3 py-1 rounded-full text-sm font-semibold\">\n                          {Math.round((cause.raisedAmount / cause.goalAmount) * 100)}%\n                        </div>\n                      </div>\n                      <h3 className=\"text-xl font-bold text-gray-800 mb-4\">{cause.title}</h3>\n                      <p className=\"text-gray-600 mb-6\">{cause.description}</p>\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"text-sm text-gray-500 flex items-center\">\n                          <Users className=\"w-4 h-4 mr-1\" />\n                          {cause.volunteersNeeded} volunteers needed\n                        </span>\n                        <Link href={`/causes/${cause.slug}`}>\n                          <Button className=\"primary-bg text-white hover:opacity-90\">\n                            Learn More\n                          </Button>\n                        </Link>\n                      </div>\n                    </CardContent>\n                  </Card>\n                </ScrollAnimationWrapper>\n              ))}\n            </div>\n          </div>\n        </section>\n      )}\n\n      {/* Volunteer Application Form */}\n      <section className=\"py-20\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"max-w-4xl mx-auto\">\n            <ScrollAnimationWrapper>\n              <div className=\"text-center mb-12\">\n                <h2 className=\"text-3xl md:text-4xl font-bold text-gray-800 mb-6\">\n                  Volunteer <span className=\"primary-text\">Application</span>\n                </h2>\n                <p className=\"text-xl text-gray-600\">\n                  Ready to make a difference? Fill out our volunteer application to get started.\n                </p>\n              </div>\n            </ScrollAnimationWrapper>\n\n            <ScrollAnimationWrapper>\n              <Card>\n                <CardContent className=\"p-8\">\n                  <Form {...form}>\n                    <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n                      <div className=\"grid md:grid-cols-2 gap-6\">\n                        <FormField\n                          control={form.control}\n                          name=\"name\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>Full Name *</FormLabel>\n                              <FormControl>\n                                <Input placeholder=\"Your full name\" {...field} />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n\n                        <FormField\n                          control={form.control}\n                          name=\"email\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>Email Address *</FormLabel>\n                              <FormControl>\n                                <Input type=\"email\" placeholder=\"your@email.com\" {...field} />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                      </div>\n\n                      <div className=\"grid md:grid-cols-2 gap-6\">\n                        <FormField\n                          control={form.control}\n                          name=\"phone\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>Phone Number *</FormLabel>\n                              <FormControl>\n                                <Input placeholder=\"(555) 123-4567\" {...field} />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n\n                        <FormField\n                          control={form.control}\n                          name=\"program\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>Program Interest *</FormLabel>\n                              <Select \n                                onValueChange={field.onChange} \n                                value={selectedProgram || field.value}\n                              >\n                                <FormControl>\n                                  <SelectTrigger>\n                                    <SelectValue placeholder=\"Select a program\" />\n                                  </SelectTrigger>\n                                </FormControl>\n                                <SelectContent>\n                                  <SelectItem value=\"Family Advocate\">Family Advocate</SelectItem>\n                                  <SelectItem value=\"Support Specialist\">Support Specialist</SelectItem>\n                                  <SelectItem value=\"Program Leader\">Program Leader</SelectItem>\n                                  <SelectItem value=\"Event Support\">Event Support</SelectItem>\n                                  <SelectItem value=\"Administrative Support\">Administrative Support</SelectItem>\n                                </SelectContent>\n                              </Select>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                      </div>\n\n                      <FormField\n                        control={form.control}\n                        name=\"availability\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Availability *</FormLabel>\n                            <FormControl>\n                              <Textarea \n                                placeholder=\"Please describe your availability (days, times, hours per week)\"\n                                {...field} \n                              />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n\n                      <FormField\n                        control={form.control}\n                        name=\"experience\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Relevant Experience</FormLabel>\n                            <FormControl>\n                              <Textarea \n                                placeholder=\"Tell us about any relevant experience you have (volunteer work, education, professional background)\"\n                                {...field} \n                              />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n\n                      <FormField\n                        control={form.control}\n                        name=\"message\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Additional Message</FormLabel>\n                            <FormControl>\n                              <Textarea \n                                placeholder=\"Is there anything else you'd like us to know about your interest in volunteering?\"\n                                {...field} \n                              />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n\n                      <Button \n                        type=\"submit\" \n                        className=\"w-full primary-bg text-white hover:opacity-90\"\n                        disabled={false}\n                      >\n                        Submit Application\n                      </Button>\n                    </form>\n                  </Form>\n                </CardContent>\n              </Card>\n            </ScrollAnimationWrapper>\n          </div>\n        </div>\n      </section>\n\n      {/* Other Ways to Help */}\n      <section className=\"py-20 bg-gray-50\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"text-center mb-16\">\n              <h2 className=\"text-3xl md:text-4xl font-bold text-gray-800 mb-6\">\n                Other Ways to <span className=\"primary-text\">Support Us</span>\n              </h2>\n              <p className=\"text-xl text-gray-600 max-w-3xl mx-auto\">\n                Can't volunteer regularly? There are many other ways to support our mission.\n              </p>\n            </div>\n          </ScrollAnimationWrapper>\n\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-8\">\n            {[\n              {\n                icon: Heart,\n                title: \"Donate\",\n                description: \"Financial contributions help us expand our services and reach more families.\"\n              },\n              {\n                icon: Users,\n                title: \"Spread Awareness\",\n                description: \"Share our mission with friends, family, and on social media.\"\n              },\n              {\n                icon: Handshake,\n                title: \"Corporate Partnership\",\n                description: \"Partner with us through your business for community impact initiatives.\"\n              },\n              {\n                icon: GraduationCap,\n                title: \"Professional Services\",\n                description: \"Offer your professional skills on a pro-bono or reduced-rate basis.\"\n              }\n            ].map((way, index) => (\n              <ScrollAnimationWrapper key={way.title} delay={index * 100}>\n                <Card className=\"text-center h-full\">\n                  <CardContent className=\"p-6\">\n                    <div className=\"accent-bg w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4\">\n                      <way.icon className=\"w-8 h-8 text-white\" />\n                    </div>\n                    <h3 className=\"text-lg font-semibold text-gray-800 mb-3\">{way.title}</h3>\n                    <p className=\"text-gray-600 text-sm\">{way.description}</p>\n                  </CardContent>\n                </Card>\n              </ScrollAnimationWrapper>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* Contact Information */}\n      <section className=\"py-20 primary-bg\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"text-center max-w-4xl mx-auto\">\n              <h2 className=\"text-3xl md:text-4xl font-bold text-white mb-6\">\n                Have Questions?\n              </h2>\n              <p className=\"text-xl text-white/90 mb-8\">\n                We're here to help you find the perfect way to get involved. Reach out to learn more about our volunteer opportunities.\n              </p>\n              \n              <div className=\"grid md:grid-cols-3 gap-8 mb-8\">\n                <div className=\"text-center\">\n                  <Phone className=\"w-8 h-8 text-white mx-auto mb-3\" />\n                  <h3 className=\"text-lg font-semibold text-white mb-2\">Call Us</h3>\n                  <p className=\"text-white/90\">+254 733 155 199</p>\n                </div>\n                <div className=\"text-center\">\n                  <Mail className=\"w-8 h-8 text-white mx-auto mb-3\" />\n                  <h3 className=\"text-lg font-semibold text-white mb-2\">Email Us</h3>\n                  <p className=\"text-white/90\">kenya@familypeace.org</p>\n                </div>\n                <div className=\"text-center\">\n                  <MapPin className=\"w-8 h-8 text-white mx-auto mb-3\" />\n                  <h3 className=\"text-lg font-semibold text-white mb-2\">Visit Us</h3>\n                  <p className=\"text-white/90\">Wu Yi Plaza, 3rd Floor, Block E8, Galana Road, Kilimani, Nairobi</p>\n                </div>\n              </div>\n\n              <Link href=\"/contact\">\n                <Button size=\"lg\" className=\"bg-white text-gray-800 hover:bg-gray-100\">\n                  Contact Us\n                </Button>\n              </Link>\n            </div>\n          </ScrollAnimationWrapper>\n        </div>\n      </section>\n    </>\n  );\n}\n","size_bytes":23354},"client/src/pages/Home.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\n\nimport { Link } from \"wouter\";\nimport { Helmet } from \"react-helmet\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport ScrollAnimationWrapper from \"@/components/ScrollAnimationWrapper\";\nimport Counter from \"@/components/Counter\";\nimport LogoSlider from \"@/components/LogoSlider\";\n\nimport { OptimizedImage } from \"@/components/ui/optimized-image\";\nimport SEO from \"@/components/SEO\";\n\nimport { \n  Heart, \n  Users, \n  GraduationCap, \n  ArrowRight,\n  CheckCircle,\n  Star,\n  Globe,\n  Shield\n} from \"lucide-react\";\nimport type { BlogPost, Cause } from \"@shared/schema\";\nimport { getFeaturedBlogPosts, getActiveCauses } from \"@/lib/staticData\";\n\nexport default function Home() {\n\n\n  const { data: featuredPosts } = useQuery<BlogPost[]>({\n    queryKey: [\"featured-blog-posts\"],\n    queryFn: () => getFeaturedBlogPosts(),\n  });\n\n  const { data: activeCauses } = useQuery<Cause[]>({\n    queryKey: [\"active-causes\"],\n    queryFn: () => getActiveCauses(),\n  });\n\n  return (\n    <>\n      <SEO />\n      <Helmet>\n\n\n        <title>Family Peace Association - Building God-Centered Families</title>\n        <meta name=\"description\" content=\"The Family Peace Association (FPA) is an association of individuals, families and communities that strive to create a peaceful, ideal world through building God-centered families.\" />\n      </Helmet>\n\n      {/* Hero Section */}\n      <section className=\"relative bg-gradient-to-br from-yellow-50 to-orange-50 pt-24 pb-16 lg:pb-20\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"grid lg:grid-cols-2 gap-12 lg:gap-20 items-center min-h-[70vh]\">\n            {/* Left Content */}\n            <ScrollAnimationWrapper>\n              <div className=\"space-y-8\">\n                <div className=\"space-y-6\">\n                  <h1 className=\"text-4xl lg:text-6xl font-bold text-gray-900 leading-tight\">\n                    Family Peace Association Kenya (FPA)\n                  </h1>\n                  <p className=\"text-xl text-gray-600 leading-relaxed max-w-lg\">\n                    The Family Peace Association of Kenya (FPA) is an association of individuals, families and communities that strive to create a peaceful, ideal world through building God-centered families.\n                  </p>\n\n                </div>\n                \n                <div className=\"flex flex-col sm:flex-row gap-4\">\n                  <Link href=\"/blog?category=events\">\n                    <Button size=\"lg\" className=\"bg-yellow-600 hover:bg-yellow-700 text-white px-8 py-3 rounded-md font-medium\">\n                      Featured Events\n                    </Button> \n                  </Link>\n                  <a href=\"mailto:kenya@familypeaceassociation.org\">\n                    <Button variant=\"outline\" size=\"lg\" className=\"border-gray-300 text-gray-700 hover:bg-gray-50 px-8 py-3\">\n                      Contact Us\n                    </Button>\n                  </a>\n                </div>\n              </div>\n            </ScrollAnimationWrapper>\n\n            {/* Right Image */}\n            <ScrollAnimationWrapper animation=\"slide-in-right\">\n              <div className=\"relative\">\n                <OptimizedImage \n                  src=\"https://images.pexels.com/photos/4259140/pexels-photo-4259140.jpeg\" \n                  alt=\"Community volunteers working together\"\n                  className=\"w-full h-[500px] object-cover rounded-2xl shadow-2xl\"\n                />\n                <div className=\"absolute -bottom-6 -left-6 bg-white p-6 rounded-xl shadow-lg\">\n                  <div className=\"flex items-center space-x-4\">\n                    <div className=\"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center\">\n                      <Heart className=\"w-6 h-6 text-yellow-600\" />\n                    </div>\n                    <div>\n                      <p className=\"font-semibold text-gray-900\">50+ Projects</p>\n                      <p className=\"text-sm text-gray-600\">Making impact</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </ScrollAnimationWrapper>\n          </div>\n        </div>\n      </section>\n\n      {/* Embracing Innovation Section */}\n      <section className=\"py-20 bg-white\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"max-w-4xl mx-auto\">\n            <ScrollAnimationWrapper>\n              <div className=\"text-center mb-16\">\n                <h2 className=\"text-3xl lg:text-5xl font-bold text-gray-900 mb-6\">\n                 Uplifting Humanity Through Spiritual Principles\n                </h2>\n                <p className=\"text-xl text-gray-600 leading-relaxed\">\n                 We aim to elevate human consciousness by grounding it in universal values rooted in God-centered families. Strong, spiritually connected families are the foundation of a thriving society.\n                </p>\n              </div>\n            </ScrollAnimationWrapper>\n\n            <ScrollAnimationWrapper animation=\"slide-up\" delay={200}>\n              <div className=\"bg-gray-50 rounded-2xl p-8 lg:p-12\">\n                <h3 className=\"text-2xl font-bold text-gray-900 mb-6\">A New Approach to Spiritual Care for Creation </h3>\n                <div className=\"space-y-4 text-gray-600 leading-relaxed\">\n                  <p>\n                    We believe strong, God-centered families are the foundation of a loving, thriving society.\n                     By aligning with divine principles, we aim to elevate human consciousness and bring lasting peace.\n                  </p>\n                  <ul className=\"space-y-3\">\n\n\n                    <li className=\"flex items-start space-x-3\">\n                      <CheckCircle className=\"w-5 h-5 text-yellow-600 mt-0.5\" />\n                      <span><strong>Inclusive and Universal: </strong> Solutions that work for everyone, everywhere.</span>\n                    </li>\n                    <li className=\"flex items-start space-x-3\">\n                      <CheckCircle className=\"w-5 h-5 text-yellow-600 mt-0.5\" />\n                      <span><strong>Conscious Living Tools:</strong> Tools to strengthen love, understanding, and unity.</span>\n                    </li>\n                    <li className=\"flex items-start space-x-3\">\n                      <CheckCircle className=\"w-5 h-5 text-yellow-600 mt-0.5\" />\n                      <span><strong>Family-centered:</strong> Initiatives rooted in the sacredness of family, with a global reach.</span>\n                    </li>\n                  </ul>\n                </div>\n              </div>\n            </ScrollAnimationWrapper>\n          </div>\n        </div>\n      </section>\n\n      {/* Image Section */}\n      <section className=\"py-16\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n              <div className=\"relative\">\n                <OptimizedImage \n                  src=\"https://images.pexels.com/photos/9091896/pexels-photo-9091896.jpeg\" \n                  alt=\"Sustainable farming and environmental protection\"\n                  className=\"w-full h-[400px] lg:h-[500px] object-cover rounded-2xl\"\n                />\n                <div className=\"absolute inset-0 bg-black bg-opacity-20 rounded-2xl\"></div>\n              </div>\n          </ScrollAnimationWrapper>\n        </div>\n      </section>\n\n      {/* Overcoming the Challenges Section */}\n      <section className=\"py-20 bg-white\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"grid lg:grid-cols-2 gap-16 items-center\">\n            <ScrollAnimationWrapper>\n              <div>\n                <h2 className=\"text-3xl lg:text-4xl font-bold text-gray-900 mb-6\">\n                  Overcoming the Challenges\n                </h2>\n                <p className=\"text-lg text-gray-600 leading-relaxed mb-8\">\n                  Families face many obstacles, but with faith, love, and collective effort, they can thrive.\n                  We work to support families everywhere by providing guidance, education, and practical tools rooted in divine principles.\n                </p>\n                \n                <div className=\"space-y-6\">\n                  <div className=\"grid sm:grid-cols-2 gap-6\">\n                    <div className=\"space-y-2\">\n                      <h4 className=\"font-semibold text-gray-900\">Research</h4>\n                      <ul className=\"text-sm text-gray-600 space-y-1\">\n                        <li>• Family Well-being Studies</li>\n                        <li>• Faith-Based Support Strategies</li>\n                        <li>• Community Health and Happiness</li>\n                        <li>• Strengthening Bonds and Values</li>\n                      </ul>\n                    </div>\n                    <div className=\"space-y-2\">\n                      <h4 className=\"font-semibold text-gray-900\">Education</h4>\n                      <ul className=\"text-sm text-gray-600 space-y-1\">\n                        <li>• Family Values and Principles</li>\n                        <li>• Building Love and Understanding</li>\n                        <li>• Parenting and Youth Programs</li>\n                        <li>• Community Support Workshops</li>\n                      </ul>\n                    </div>\n                    <div className=\"space-y-2\">\n                      <h4 className=\"font-semibold text-gray-900\">Action</h4>\n                      <ul className=\"text-sm text-gray-600 space-y-1\">\n                        <li>• Family Healing Initiatives</li>\n                        <li>• Relationship Building Activities</li>\n                        <li>• Conflict Resolution Resources</li>\n                        <li>• Parenting Support Networks</li>\n                      </ul>\n                    </div>\n                    <div className=\"space-y-2\">\n                      <h4 className=\"font-semibold text-gray-900\">Technology & Resources</h4>\n                      <ul className=\"text-sm text-gray-600 space-y-1\">\n                        <li>• Faith-Driven Counseling Tools</li>\n                        <li>• Family Wellness Apps</li>\n                        <li>• Community Support Platforms</li>\n                        <li>• Spiritual Growth Resources</li>\n                      </ul>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </ScrollAnimationWrapper>\n\n            <ScrollAnimationWrapper animation=\"slide-in-right\">\n              <div className=\"relative\">\n                <OptimizedImage \n                  src=\"https://images.pexels.com/photos/4262424/pexels-photo-4262424.jpeg\" \n                  alt=\"Environmental scientist working in the field\"\n                  className=\"w-full h-[600px] object-cover rounded-2xl\"\n                />\n              </div>\n            </ScrollAnimationWrapper>\n          </div>\n        </div>\n      </section>\n\n      {/* Balanced Approach Section */}\n      <section className=\"py-20 bg-yellow-600 text-white\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"max-w-4xl mx-auto text-center\">\n              <h2 className=\"text-3xl lg:text-4xl font-bold mb-6\">\n                A Balanced Approach\n              </h2>\n              <p className=\"text-xl leading-relaxed mb-8 text-yellow-100\">\n             We unite the principles of understanding and compassion, blending research-driven support initiatives with community-centered programs. \n             Our balanced approach fosters a God-centered family environment and harmonious communities, ensuring that peace, well-being, and social support grow hand in hand for a brighter, faith-filled future.\n             </p>\n              <Link href=\"/about\">\n                <Button size=\"lg\" className=\"bg-white text-yellow-600 hover:bg-gray-100 px-8 py-3\">\n                  Learn About Our Approach\n                  <ArrowRight className=\"w-5 h-5 ml-2\" />\n                </Button>\n              </Link>\n            </div>\n          </ScrollAnimationWrapper>\n        </div>\n      </section>\n\n      {/* Impact Statistics */}\n      <section className=\"py-20 bg-gray-50\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"text-center mb-16\">\n              <h2 className=\"text-3xl lg:text-4xl font-bold text-gray-900 mb-4\">\n                Our Impact in Numbers\n              </h2>\n              <p className=\"text-xl text-gray-600\">\n                Making a difference through measurable results\n              </p>\n            </div>\n          </ScrollAnimationWrapper>\n\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-8\">\n            <ScrollAnimationWrapper delay={100}>\n              <Card className=\"text-center p-8 border-none shadow-lg\">\n                <CardContent className=\"space-y-4\">\n                  <div className=\"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto\">\n                    <Heart className=\"w-8 h-8 text-yellow-600\" />\n                  </div>\n                  <div>\n                    <Counter target={2500} suffix=\"+\" className=\"text-3xl font-bold text-gray-900\" />\n                    <p className=\"text-gray-600\">Families Helped</p>\n                  </div>\n                </CardContent>\n              </Card>\n            </ScrollAnimationWrapper>\n\n            <ScrollAnimationWrapper delay={200}>\n              <Card className=\"text-center p-8 border-none shadow-lg\">\n                <CardContent className=\"space-y-4\">\n                  <div className=\"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto\">\n                    <Users className=\"w-8 h-8 text-blue-600\" />\n                  </div>\n                  <div>\n                    <Counter target={150} suffix=\"+\" className=\"text-3xl font-bold text-gray-900\" />\n                    <p className=\"text-gray-600\">Active Volunteers</p>\n                  </div>\n                </CardContent>\n              </Card>\n            </ScrollAnimationWrapper>\n\n            <ScrollAnimationWrapper delay={300}>\n              <Card className=\"text-center p-8 border-none shadow-lg\">\n                <CardContent className=\"space-y-4\">\n                  <div className=\"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto\">\n                    <GraduationCap className=\"w-8 h-8 text-purple-600\" />\n                  </div>\n                  <div>\n                    <Counter target={45} suffix=\"+\" className=\"text-3xl font-bold text-gray-900\" />\n                    <p className=\"text-gray-600\">Programs</p>\n                  </div>\n                </CardContent>\n              </Card>\n            </ScrollAnimationWrapper>\n\n            <ScrollAnimationWrapper delay={400}>\n              <Card className=\"text-center p-8 border-none shadow-lg\">\n                <CardContent className=\"space-y-4\">\n                  <div className=\"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto\">\n                    <Globe className=\"w-8 h-8 text-orange-600\" />\n                  </div>\n                  <div>\n                    <Counter target={12} suffix=\"+\" className=\"text-3xl font-bold text-gray-900\" />\n                    <p className=\"text-gray-600\">Communities Served</p>\n                  </div>\n                </CardContent>\n              </Card>\n            </ScrollAnimationWrapper>\n          </div>\n        </div>\n      </section>\n\n      {/* Featured Content */}\n      {(featuredPosts && featuredPosts.length > 0) && (\n        <section className=\"py-20 bg-white\">\n          <div className=\"container mx-auto px-6\">\n            <ScrollAnimationWrapper>\n              <div className=\"text-center mb-16\">\n                <h2 className=\"text-3xl lg:text-4xl font-bold text-gray-900 mb-4\">\n                  Latest News & Insights\n                </h2>\n                <p className=\"text-xl text-gray-600\">\n                  Stay updated with our latest environmental initiatives and community stories\n                </p>\n              </div>\n            </ScrollAnimationWrapper>\n\n            <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\">\n              {featuredPosts.slice(0, 3).map((post, index) => (\n                <ScrollAnimationWrapper key={post.id} delay={index * 100}>\n                  <Link href={`/blog/${post.slug}`}>\n                    <Card className=\"overflow-hidden hover:shadow-xl transition-all duration-300 border-none cursor-pointer hover:scale-105\">\n                      <div className=\"aspect-video bg-gray-200\">\n                        <OptimizedImage \n                          src={post.imageUrl} \n                          alt={post.title}\n                          className=\"w-full h-full object-cover\"\n                        />\n                      </div>\n                      <CardContent className=\"p-6\">\n                        <div className=\"space-y-4\">\n                          <div className=\"flex items-center justify-between\">\n                            <span className=\"text-sm font-medium text-yellow-600 bg-yellow-100 px-3 py-1 rounded-full\">\n                              {post.category}\n                            </span>\n                            <span className=\"text-sm text-gray-500\">\n                              {new Date(post.publishedAt).toLocaleDateString()}\n                            </span>\n                          </div>\n                          <h3 className=\"text-xl font-bold text-gray-900 line-clamp-2 hover:text-yellow-600 transition-colors\">\n                            {post.title}\n                          </h3>\n                          <p className=\"text-gray-600 line-clamp-3\">\n                            {post.excerpt}\n                          </p>\n                          <div className=\"text-yellow-600 font-semibold flex items-center\">\n                            Read More\n                            <ArrowRight className=\"w-4 h-4 ml-2\" />\n                          </div>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  </Link>\n                </ScrollAnimationWrapper>\n              ))}\n            </div>\n\n            <ScrollAnimationWrapper delay={400}>\n              <div className=\"text-center mt-12\">\n                <Link href=\"/blog\">\n                  <Button size=\"lg\" variant=\"outline\" className=\"px-8 py-3\">\n                    View All Articles\n                    <ArrowRight className=\"w-5 h-5 ml-2\" />\n                  </Button>\n                </Link>\n              </div>\n            </ScrollAnimationWrapper>\n          </div>\n        </section>\n      )}\n\n      {/* Call to Action */}\n      <section className=\"py-20 bg-gradient-to-r from-yellow-600 to-orange-600 text-white\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"max-w-4xl mx-auto text-center\">\n              <h2 className=\"text-3xl lg:text-4xl font-bold mb-6\">\n                Ready to Make a Difference?\n              </h2>\n              <p className=\"text-xl leading-relaxed mb-8 text-yellow-100\">\n                Join our community of changemakers and start creating positive environmental impact today. \n                Every action counts towards a more sustainable future.\n              </p>\n              <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n                <Link href=\"/get-involved#initiatives\">\n                  <Button size=\"lg\" className=\"bg-white text-yellow-600 hover:bg-gray-100 px-8 py-3\">\n                    Get Involved Today\n                  </Button>\n                </Link>\n                <Link href=\"/contact\">\n                  <Button size=\"lg\" variant=\"outline\" className=\"border-white text-yellow-600 hover:bg-white/10 px-8 py-3\">\n                    Contact Us\n                  </Button>\n                </Link>\n              </div>\n            </div>\n          </ScrollAnimationWrapper>\n        </div>\n      </section>\n\n      {/* Partner Logos */}\n      <LogoSlider />\n\n      {/* Footer or next section */}\n    </>\n  );\n}\n","size_bytes":20328},"client/src/pages/Legal.tsx":{"content":"import { Helmet } from \"react-helmet\";\nimport { Link } from \"wouter\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport ScrollAnimationWrapper from \"@/components/ScrollAnimationWrapper\";\nimport { Shield, Eye, FileText, Scale, ArrowLeft, Mail, Phone } from \"lucide-react\";\nimport SEO from \"@/components/SEO\";\n\nexport default function Legal() {\n  return (\n    <>\n      <SEO />\n      <Helmet>\n        <title>Legal Information - Family Peace Association</title>\n        <meta name=\"description\" content=\"Privacy policy, terms of service, and legal information for the Family Peace Association website and services.\" />\n      </Helmet>\n\n      {/* Hero Section */}\n      <section className=\"pt-24 pb-20 bg-gradient-to-br from-primary/10 to-primary/5\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"text-center max-w-4xl mx-auto\">\n              <h1 className=\"text-4xl md:text-6xl font-bold text-gray-800 mb-6\">\n                Legal <span className=\"primary-text\">Information</span>\n              </h1>\n              <p className=\"text-xl text-gray-600 mb-8\">\n                Our commitment to transparency, privacy, and responsible service delivery for all families we serve.\n              </p>\n            </div>\n          </ScrollAnimationWrapper>\n        </div>\n      </section>\n\n      {/* Navigation */}\n      <section className=\"py-12 bg-white border-b\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"flex flex-wrap gap-4 justify-center\">\n              <a href=\"#privacy-policy\" className=\"text-primary hover:underline font-medium\">Privacy Policy</a>\n              <span className=\"text-gray-400\">•</span>\n              <a href=\"#terms-of-service\" className=\"text-primary hover:underline font-medium\">Terms of Service</a>\n              <span className=\"text-gray-400\">•</span>\n              <a href=\"#confidentiality\" className=\"text-primary hover:underline font-medium\">Confidentiality Policy</a>\n              <span className=\"text-gray-400\">•</span>\n              <a href=\"#contact\" className=\"text-primary hover:underline font-medium\">Contact Us</a>\n            </div>\n          </ScrollAnimationWrapper>\n        </div>\n      </section>\n\n      {/* Privacy Policy */}\n      <section id=\"privacy-policy\" className=\"py-20\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <Card className=\"max-w-4xl mx-auto\">\n              <CardHeader>\n                <CardTitle className=\"flex items-center space-x-3\">\n                  <Shield className=\"w-6 h-6 text-primary\" />\n                  <span>Privacy Policy</span>\n                </CardTitle>\n                <p className=\"text-gray-600\">Last updated: December 2025</p>\n              </CardHeader>\n              <CardContent className=\"space-y-6\">\n                <div>\n                  <h3 className=\"text-xl font-semibold text-gray-800 mb-3\">Information We Collect</h3>\n                  <p className=\"text-gray-600 mb-4\">\n                    The Family Peace Association is committed to protecting your privacy. We collect information that you voluntarily provide to us when you:\n                  </p>\n                  <ul className=\"list-disc list-inside space-y-2 text-gray-600 ml-4\">\n                    <li>Contact us for services or information</li>\n                    <li>Apply to volunteer with our organization</li>\n                    <li>Subscribe to our newsletter</li>\n                    <li>Participate in our programs or events</li>\n                    <li>Visit our website (through cookies and analytics)</li>\n                  </ul>\n                </div>\n\n                <div>\n                  <h3 className=\"text-xl font-semibold text-gray-800 mb-3\">How We Use Your Information</h3>\n                  <p className=\"text-gray-600 mb-4\">We use the information we collect to:</p>\n                  <ul className=\"list-disc list-inside space-y-2 text-gray-600 ml-4\">\n                    <li>Provide family support services and counseling</li>\n                    <li>Communicate with you about our programs and services</li>\n                    <li>Process volunteer applications and coordinate activities</li>\n                    <li>Send newsletters and updates (with your consent)</li>\n                    <li>Improve our website and services</li>\n                    <li>Comply with legal requirements and protect our rights</li>\n                  </ul>\n                </div>\n\n                <div>\n                  <h3 className=\"text-xl font-semibold text-gray-800 mb-3\">Information Sharing</h3>\n                  <p className=\"text-gray-600 mb-4\">\n                    We do not sell, trade, or rent your personal information to third parties. We may share your information only in the following circumstances:\n                  </p>\n                  <ul className=\"list-disc list-inside space-y-2 text-gray-600 ml-4\">\n                    <li>With your explicit consent</li>\n                    <li>With trusted service providers who assist in our operations</li>\n                    <li>When required by law or to protect safety</li>\n                    <li>With partner organizations for coordinated care (with consent)</li>\n                  </ul>\n                </div>\n\n                <div>\n                  <h3 className=\"text-xl font-semibold text-gray-800 mb-3\">Data Security</h3>\n                  <p className=\"text-gray-600\">\n                    We implement appropriate technical and organizational measures to protect your personal information against unauthorized access, alteration, disclosure, or destruction. However, no method of transmission over the internet is 100% secure.\n                  </p>\n                </div>\n\n                <div>\n                  <h3 className=\"text-xl font-semibold text-gray-800 mb-3\">Your Rights</h3>\n                  <p className=\"text-gray-600 mb-4\">You have the right to:</p>\n                  <ul className=\"list-disc list-inside space-y-2 text-gray-600 ml-4\">\n                    <li>Access, update, or delete your personal information</li>\n                    <li>Opt-out of marketing communications</li>\n                    <li>Request a copy of your data</li>\n                    <li>File a complaint about our data practices</li>\n                  </ul>\n                </div>\n              </CardContent>\n            </Card>\n          </ScrollAnimationWrapper>\n        </div>\n      </section>\n\n      {/* Terms of Service */}\n      <section id=\"terms-of-service\" className=\"py-20 bg-gray-50\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <Card className=\"max-w-4xl mx-auto\">\n              <CardHeader>\n                <CardTitle className=\"flex items-center space-x-3\">\n                  <FileText className=\"w-6 h-6 text-primary\" />\n                  <span>Terms of Service</span>\n                </CardTitle>\n                <p className=\"text-gray-600\">Last updated: December 2024</p>\n              </CardHeader>\n              <CardContent className=\"space-y-6\">\n                <div>\n                  <h3 className=\"text-xl font-semibold text-gray-800 mb-3\">Acceptance of Terms</h3>\n                  <p className=\"text-gray-600\">\n                    By accessing and using the Family Peace Association website and services, you accept and agree to be bound by the terms and provision of this agreement.\n                  </p>\n                </div>\n\n                <div>\n                  <h3 className=\"text-xl font-semibold text-gray-800 mb-3\">Use of Services</h3>\n                  <p className=\"text-gray-600 mb-4\">Our services are provided for:</p>\n                  <ul className=\"list-disc list-inside space-y-2 text-gray-600 ml-4\">\n                    <li>Families seeking support and counseling services</li>\n                    <li>Individuals interested in volunteering</li>\n                    <li>Community members seeking information about family wellness</li>\n                    <li>Organizations interested in partnerships</li>\n                  </ul>\n                </div>\n\n                <div>\n                  <h3 className=\"text-xl font-semibold text-gray-800 mb-3\">Prohibited Uses</h3>\n                  <p className=\"text-gray-600 mb-4\">You may not use our services to:</p>\n                  <ul className=\"list-disc list-inside space-y-2 text-gray-600 ml-4\">\n                    <li>Violate any laws or regulations</li>\n                    <li>Transmit harmful, threatening, or offensive content</li>\n                    <li>Interfere with the security of our systems</li>\n                    <li>Impersonate another person or entity</li>\n                    <li>Use our services for commercial purposes without permission</li>\n                  </ul>\n                </div>\n\n                <div>\n                  <h3 className=\"text-xl font-semibold text-gray-800 mb-3\">Limitation of Liability</h3>\n                  <p className=\"text-gray-600\">\n                    While we strive to provide quality services, the Family Peace Association cannot guarantee specific outcomes. Our services are not a substitute for professional medical or legal advice when such services are needed.\n                  </p>\n                </div>\n\n                <div>\n                  <h3 className=\"text-xl font-semibold text-gray-800 mb-3\">Modifications</h3>\n                  <p className=\"text-gray-600\">\n                    We reserve the right to modify these terms at any time. Changes will be posted on this page with an updated revision date. Continued use of our services constitutes acceptance of modified terms.\n                  </p>\n                </div>\n              </CardContent>\n            </Card>\n          </ScrollAnimationWrapper>\n        </div>\n      </section>\n\n      {/* Confidentiality Policy */}\n      <section id=\"confidentiality\" className=\"py-20\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <Card className=\"max-w-4xl mx-auto\">\n              <CardHeader>\n                <CardTitle className=\"flex items-center space-x-3\">\n                  <Eye className=\"w-6 h-6 text-primary\" />\n                  <span>Confidentiality Policy</span>\n                </CardTitle>\n                <p className=\"text-gray-600\">Our commitment to client confidentiality</p>\n              </CardHeader>\n              <CardContent className=\"space-y-6\">\n                <div>\n                  <h3 className=\"text-xl font-semibold text-gray-800 mb-3\">Client Confidentiality</h3>\n                  <p className=\"text-gray-600\">\n                    The Family Peace Association is committed to maintaining the highest standards of confidentiality in all client interactions. All information shared during counseling sessions, support groups, and other services is kept strictly confidential.\n                  </p>\n                </div>\n\n                <div>\n                  <h3 className=\"text-xl font-semibold text-gray-800 mb-3\">Limits to Confidentiality</h3>\n                  <p className=\"text-gray-600 mb-4\">\n                    In accordance with professional ethics and legal requirements, confidentiality may be limited in the following situations:\n                  </p>\n                  <ul className=\"list-disc list-inside space-y-2 text-gray-600 ml-4\">\n                    <li>When there is imminent danger to self or others</li>\n                    <li>When child abuse or neglect is suspected</li>\n                    <li>When elder abuse is suspected</li>\n                    <li>When required by court order or subpoena</li>\n                    <li>When client provides written consent to share information</li>\n                  </ul>\n                </div>\n\n                <div>\n                  <h3 className=\"text-xl font-semibold text-gray-800 mb-3\">Record Keeping</h3>\n                  <p className=\"text-gray-600\">\n                    We maintain secure records of all client interactions in accordance with professional standards and legal requirements. Records are stored securely and access is limited to authorized personnel only.\n                  </p>\n                </div>\n\n                <div>\n                  <h3 className=\"text-xl font-semibold text-gray-800 mb-3\">Staff Training</h3>\n                  <p className=\"text-gray-600\">\n                    All staff members and volunteers receive comprehensive training on confidentiality policies and procedures. Regular updates ensure compliance with current best practices and legal requirements.\n                  </p>\n                </div>\n              </CardContent>\n            </Card>\n          </ScrollAnimationWrapper>\n        </div>\n      </section>\n\n      {/* Contact Section */}\n      <section id=\"contact\" className=\"py-20 bg-gray-50\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"text-center mb-12\">\n              <h2 className=\"text-3xl md:text-4xl font-bold text-gray-800 mb-6\">\n                Questions About Our <span className=\"primary-text\">Policies?</span>\n              </h2>\n              <p className=\"text-xl text-gray-600 max-w-3xl mx-auto\">\n                If you have questions about our privacy policy, terms of service, or confidentiality practices, please don't hesitate to contact us.\n              </p>\n            </div>\n          </ScrollAnimationWrapper>\n\n          <div className=\"grid md:grid-cols-2 gap-8 max-w-4xl mx-auto\">\n            <ScrollAnimationWrapper>\n              <Card>\n                <CardContent className=\"p-8 text-center\">\n                  <Mail className=\"w-12 h-12 text-primary mx-auto mb-4\" />\n                  <h3 className=\"text-xl font-semibold text-gray-800 mb-3\">Email Us</h3>\n                  <p className=\"text-gray-600 mb-4\">\n                    For questions about our policies or to exercise your privacy rights\n                  </p>\n                  <a \n                    href=\"mailto:legal@familypeace.org\" \n                    className=\"text-primary hover:underline font-medium\"\n                  >\n                    kenya@familypeaceassociation.org\n                  </a>\n                </CardContent>\n              </Card>\n            </ScrollAnimationWrapper>\n\n            <ScrollAnimationWrapper>\n              <Card>\n                <CardContent className=\"p-8 text-center\">\n                  <Phone className=\"w-12 h-12 text-primary mx-auto mb-4\" />\n                  <h3 className=\"text-xl font-semibold text-gray-800 mb-3\">Call Us</h3>\n                  <p className=\"text-gray-600 mb-4\">\n                    Speak with our privacy officer during business hours\n                  </p>\n                  <a \n                    href=\"tel:+15551234567\" \n                    className=\"text-primary hover:underline font-medium\"\n                  >\n                    (020) 802-0770\n                  </a>\n                </CardContent>\n              </Card>\n            </ScrollAnimationWrapper>\n          </div>\n\n          <ScrollAnimationWrapper>\n            <div className=\"text-center mt-12\">\n              <Link href=\"/contact\">\n                <Button size=\"lg\" className=\"primary-bg text-white hover:opacity-90\">\n                  Full Contact Information\n                </Button>\n              </Link>\n            </div>\n          </ScrollAnimationWrapper>\n        </div>\n      </section>\n\n      {/* Back to Top */}\n      <section className=\"py-12 bg-white border-t\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"text-center\">\n              <Link href=\"/\">\n                <Button variant=\"outline\">\n                  <ArrowLeft className=\"w-4 h-4 mr-2\" />\n                  Back to Home\n                </Button>\n              </Link>\n            </div>\n          </ScrollAnimationWrapper>\n        </div>\n      </section>\n    </>\n  );\n}\n","size_bytes":16127},"client/src/pages/Team.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Helmet } from \"react-helmet\";\nimport { Link } from \"wouter\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { OptimizedImage } from \"@/components/ui/optimized-image\";\nimport ScrollAnimationWrapper from \"@/components/ScrollAnimationWrapper\";\nimport { Mail, Linkedin, Heart } from \"lucide-react\";\nimport type { TeamMember } from \"@shared/schema\";\nimport SEO from \"@/components/SEO\";\n\nexport default function Team() {\n  const { data: teamMembers, isLoading } = useQuery<TeamMember[]>({\n    queryKey: [\"/api/team-members\"],\n  });\n\n  return (\n    <>\n      <SEO />\n      <Helmet>\n        <title>Our Team - Family Peace Association</title>\n        <meta name=\"description\" content=\"Meet the dedicated professionals and volunteers working to strengthen families and build peaceful communities through expert guidance and compassionate care.\" />\n      </Helmet>\n\n      {/* Hero Section */}\n      <section className=\"pt-24 pb-20 bg-gradient-to-br from-primary/10 to-primary/5\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"text-center max-w-4xl mx-auto\">\n              <h1 className=\"text-4xl md:text-6xl font-bold text-gray-800 mb-6\">\n                Meet Our <span className=\"primary-text\">Team</span>\n              </h1>\n              <p className=\"text-xl text-gray-600 mb-8\">\n                Our dedicated team of professionals and volunteers work tirelessly to support families and strengthen communities through evidence-based interventions and compassionate care.\n              </p>\n            </div>\n          </ScrollAnimationWrapper>\n        </div>\n      </section>\n\n      {/* Team Members Section */}\n      <section className=\"py-20\">\n        <div className=\"container mx-auto px-6\">\n          {isLoading ? (\n            <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\">\n              {[...Array(6)].map((_, i) => (\n                <Card key={i} className=\"animate-pulse\">\n                  <CardContent className=\"p-6 text-center\">\n                    <div className=\"w-32 h-32 bg-gray-200 rounded-full mx-auto mb-4\" />\n                    <div className=\"h-6 bg-gray-200 rounded mb-2\" />\n                    <div className=\"h-4 bg-gray-200 rounded mb-4 w-3/4 mx-auto\" />\n                    <div className=\"h-4 bg-gray-200 rounded mb-2\" />\n                    <div className=\"h-4 bg-gray-200 rounded w-2/3 mx-auto\" />\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          ) : teamMembers && teamMembers.length > 0 ? (\n            <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\">\n              {teamMembers.map((member, index) => (\n                <ScrollAnimationWrapper key={member.id} delay={index * 100}>\n                  <Card className=\"card-hover h-full\">\n                    <CardContent className=\"p-6 text-center\">\n                      <OptimizedImage\n                        src={member.imageUrl}\n                        alt={member.name} \n                        className=\"w-32 h-32 rounded-full mx-auto mb-6 object-cover shadow-lg\"\n                      />\n                      <h3 className=\"text-2xl font-bold text-gray-800 mb-2\">{member.name}</h3>\n                      <p className=\"text-primary font-semibold mb-4\">{member.position}</p>\n                      <p className=\"text-gray-600 mb-6 line-clamp-3\">{member.bio}</p>\n                      \n                      {/* Specialties */}\n                      {member.specialties && member.specialties.length > 0 && (\n                        <div className=\"mb-6\">\n                          <h4 className=\"text-sm font-semibold text-gray-800 mb-2\">Specialties</h4>\n                          <div className=\"flex flex-wrap gap-2 justify-center\">\n                            {member.specialties.map((specialty) => (\n                              <span \n                                key={specialty}\n                                className=\"px-2 py-1 bg-primary/10 text-primary text-xs rounded-full\"\n                              >\n                                {specialty}\n                              </span>\n                            ))}\n                          </div>\n                        </div>\n                      )}\n\n                      {/* Contact Links */}\n                      <div className=\"flex justify-center space-x-4 mb-6\">\n                        {member.email && (\n                          <a \n                            href={`mailto:${member.email}`}\n                            className=\"text-gray-400 hover:text-primary transition-colors\"\n                            title={`Email ${member.name}`}\n                          >\n                            <Mail className=\"w-5 h-5\" />\n                          </a>\n                        )}\n                        {member.linkedin && (\n                          <a \n                            href={member.linkedin}\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                            className=\"text-gray-400 hover:text-primary transition-colors\"\n                            title={`${member.name} on LinkedIn`}\n                          >\n                            <Linkedin className=\"w-5 h-5\" />\n                          </a>\n                        )}\n                      </div>\n\n                      <Link href={`/team/${member.slug}`}>\n                        <Button variant=\"outline\" className=\"w-full\">\n                          View Full Profile\n                        </Button>\n                      </Link>\n                    </CardContent>\n                  </Card>\n                </ScrollAnimationWrapper>\n              ))}\n            </div>\n          ) : (\n            <ScrollAnimationWrapper>\n              <div className=\"text-center py-16\">\n                <div className=\"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6\">\n                  <Heart className=\"w-12 h-12 text-gray-400\" />\n                </div>\n                <h3 className=\"text-2xl font-bold text-gray-800 mb-4\">Building Our Team</h3>\n                <p className=\"text-gray-600 mb-8 max-w-2xl mx-auto\">\n                  We're actively growing our team of dedicated professionals. Check back soon to meet the amazing people working to strengthen families in our community.\n                </p>\n                <Link href=\"/get-involved\">\n                  <Button className=\"primary-bg text-white\">\n                    Join Our Team\n                  </Button>\n                </Link>\n              </div>\n            </ScrollAnimationWrapper>\n          )}\n        </div>\n      </section>\n\n      {/* Join Our Team CTA */}\n      <section className=\"py-20 primary-bg\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"text-center max-w-4xl mx-auto\">\n              <h2 className=\"text-3xl md:text-4xl font-bold text-white mb-6\">\n                Join Our Mission\n              </h2>\n              <p className=\"text-xl text-white/90 mb-8\">\n                Are you passionate about strengthening families and building peaceful communities? We're always looking for dedicated professionals and volunteers to join our team.\n              </p>\n              <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n                <Link href=\"/get-involved\">\n                  <Button size=\"lg\" className=\"bg-white text-gray-800 hover:bg-gray-100\">\n                    Volunteer With Us\n                  </Button>\n                </Link>\n                <Link href=\"/contact\">\n                  <Button size=\"lg\" variant=\"outline\" className=\"border-white text-gray-800 hover:bg-white/10\">\n                    Contact Us\n                  </Button>\n                </Link>\n              </div>\n            </div>\n          </ScrollAnimationWrapper>\n        </div>\n      </section>\n    </>\n  );\n}\n","size_bytes":8078},"client/src/pages/TeamMember.tsx":{"content":"// Add your TeamMember page code here\nimport { useQuery } from \"@tanstack/react-query\";\nimport { useParams, Link } from \"wouter\";\nimport { Helmet } from \"react-helmet\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport ScrollAnimationWrapper from \"@/components/ScrollAnimationWrapper\";\nimport { ArrowLeft, Mail, Linkedin, Heart, Award, Users } from \"lucide-react\";\nimport { OptimizedImage } from \"@/components/ui/optimized-image\";\nimport type { TeamMember } from \"@shared/schema\";\nimport SEO from \"@/components/SEO\";\n\nexport default function TeamMemberPage() {\n  const { slug } = useParams();\n  \n  const { data: member, isLoading } = useQuery<TeamMember>({\n    queryKey: [`/api/team-members/${slug}`],\n    enabled: !!slug,\n  });\n\n  const { data: allMembers } = useQuery<TeamMember[]>({\n    queryKey: [\"/api/team-members\"],\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen pt-24\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"animate-pulse\">\n            <div className=\"h-8 bg-gray-200 rounded w-1/4 mb-8\" />\n            <div className=\"grid lg:grid-cols-3 gap-12\">\n              <div className=\"text-center\">\n                <div className=\"w-64 h-64 bg-gray-200 rounded-full mx-auto mb-6\" />\n                <div className=\"h-8 bg-gray-200 rounded mb-4\" />\n                <div className=\"h-4 bg-gray-200 rounded mb-6\" />\n              </div>\n              <div className=\"lg:col-span-2 space-y-4\">\n                {[...Array(8)].map((_, i) => (\n                  <div key={i} className=\"h-4 bg-gray-200 rounded\" />\n                ))}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!member) {\n    return (\n      <div className=\"min-h-screen pt-24 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h1 className=\"text-2xl font-bold text-gray-800 mb-4\">Team Member Not Found</h1>\n          <p className=\"text-gray-600 mb-8\">The team member you're looking for doesn't exist.</p>\n          <Link href=\"/team\">\n            <Button>\n              <ArrowLeft className=\"w-4 h-4 mr-2\" />\n              Back to Team\n            </Button>\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  const otherMembers = allMembers?.filter(m => m.id !== member.id).slice(0, 3) || [];\n\n  return (\n    <>\n      <SEO />\n      <Helmet>\n        <title>{member.name} - {member.position} | Family Peace Association</title>\n        <meta name=\"description\" content={`Meet ${member.name}, ${member.position} at Family Peace Association. ${member.bio.slice(0, 150)}...`} />\n      </Helmet>\n\n      <div className=\"pt-24 pb-20\">\n        <div className=\"container mx-auto px-6\">\n          {/* Back Button */}\n          <ScrollAnimationWrapper>\n            <Link href=\"/team\">\n              <Button variant=\"outline\" className=\"mb-8\">\n                <ArrowLeft className=\"w-4 h-4 mr-2\" />\n                Back to Team\n              </Button>\n            </Link>\n          </ScrollAnimationWrapper>\n\n          {/* Member Profile */}\n          <div className=\"grid lg:grid-cols-3 gap-12 items-start\">\n            {/* Profile Image and Contact */}\n            <ScrollAnimationWrapper animation=\"slide-in-left\">\n              <Card className=\"text-center\">\n                <CardContent className=\"p-8\">\n                  <OptimizedImage \n                    src={member.imageUrl} \n                    alt={member.name} \n                    className=\"w-64 h-64 rounded-full mx-auto mb-6 object-cover shadow-lg\"\n                  />\n                  <h1 className=\"text-3xl font-bold text-gray-800 mb-2\">{member.name}</h1>\n                  <p className=\"text-xl text-primary font-semibold mb-6\">{member.position}</p>\n                  \n                  {/* Contact Information */}\n                  <div className=\"space-y-4 mb-6\">\n                    {member.email && (\n                      <a \n                        href={`mailto:${member.email}`}\n                        className=\"flex items-center justify-center space-x-2 text-gray-600 hover:text-primary transition-colors\"\n                      >\n                        <Mail className=\"w-4 h-4\" />\n                        <span>{member.email}</span>\n                      </a>\n                    )}\n                    {member.linkedin && (\n                      <a \n                        href={member.linkedin}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        className=\"flex items-center justify-center space-x-2 text-gray-600 hover:text-primary transition-colors\"\n                      >\n                        <Linkedin className=\"w-4 h-4\" />\n                        <span>LinkedIn Profile</span>\n                      </a>\n                    )}\n                  </div>\n\n                  {/* Specialties */}\n                  {member.specialties && member.specialties.length > 0 && (\n                    <div>\n                      <h3 className=\"text-lg font-semibold text-gray-800 mb-4 flex items-center justify-center\">\n                        <Award className=\"w-5 h-5 mr-2\" />\n                        Specialties\n                      </h3>\n                      <div className=\"flex flex-wrap gap-2 justify-center\">\n                        {member.specialties.map((specialty) => (\n                          <span \n                            key={specialty}\n                            className=\"px-3 py-1 primary-bg text-white text-sm rounded-full\"\n                          >\n                            {specialty}\n                          </span>\n                        ))}\n                      </div>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            </ScrollAnimationWrapper>\n\n            {/* Bio and Details */}\n            <ScrollAnimationWrapper animation=\"slide-in-right\" className=\"lg:col-span-2\">\n              <div>\n                <h2 className=\"text-2xl font-bold text-gray-800 mb-6\">About {member.name.split(' ')[0]}</h2>\n                <div className=\"prose prose-lg max-w-none\">\n                  <p className=\"text-lg leading-relaxed text-gray-700 whitespace-pre-wrap\">\n                    {member.bio}\n                  </p>\n                </div>\n\n                {/* Additional sections that could be expanded */}\n                <div className=\"mt-12 space-y-8\">\n                  <div>\n                    <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">Professional Background</h3>\n                    <p className=\"text-gray-600\">\n                      {member.name} brings extensive experience in family therapy and community support services. \n                      Their dedication to evidence-based practices and compassionate care makes them an invaluable \n                      member of our team.\n                    </p>\n                  </div>\n\n                  <div>\n                    <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">Approach to Family Wellness</h3>\n                    <p className=\"text-gray-600\">\n                      With a focus on {member.specialties?.[0]?.toLowerCase() || 'family support'}, {member.name.split(' ')[0]} \n                      works collaboratively with families to identify strengths, address challenges, and develop \n                      sustainable strategies for long-term relationship health and happiness.\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </ScrollAnimationWrapper>\n          </div>\n        </div>\n      </div>\n\n      {/* Other Team Members */}\n      {otherMembers.length > 0 && (\n        <section className=\"py-20 bg-gray-50\">\n          <div className=\"container mx-auto px-6\">\n            <ScrollAnimationWrapper>\n              <div className=\"text-center mb-16\">\n                <h2 className=\"text-3xl md:text-4xl font-bold text-gray-800 mb-6\">\n                  Meet Other <span className=\"primary-text\">Team Members</span>\n                </h2>\n                <p className=\"text-xl text-gray-600\">\n                  Discover more of our dedicated professionals working to strengthen families\n                </p>\n              </div>\n            </ScrollAnimationWrapper>\n\n            <div className=\"grid md:grid-cols-3 gap-8\">\n              {otherMembers.map((otherMember, index) => (\n                <ScrollAnimationWrapper key={otherMember.id} delay={index * 100}>\n                  <Card className=\"card-hover h-full\">\n                    <CardContent className=\"p-6 text-center\">\n                      <OptimizedImage \n                        src={otherMember.imageUrl} \n                        alt={otherMember.name} \n                        className=\"w-24 h-24 rounded-full mx-auto mb-4 object-cover\"\n                      />\n                      <h3 className=\"text-xl font-bold text-gray-800 mb-2\">{otherMember.name}</h3>\n                      <p className=\"text-primary font-medium mb-4\">{otherMember.position}</p>\n                      <p className=\"text-gray-600 text-sm mb-6 line-clamp-3\">{otherMember.bio}</p>\n                      <Link href={`/team/${otherMember.slug}`}>\n                        <Button variant=\"outline\" className=\"w-full\">\n                          View Profile\n                        </Button>\n                      </Link>\n                    </CardContent>\n                  </Card>\n                </ScrollAnimationWrapper>\n              ))}\n            </div>\n          </div>\n        </section>\n      )}\n\n      {/* Contact CTA */}\n      <section className=\"py-20 primary-bg\">\n        <div className=\"container mx-auto px-6\">\n          <ScrollAnimationWrapper>\n            <div className=\"text-center max-w-4xl mx-auto\">\n              <h2 className=\"text-3xl md:text-4xl font-bold text-white mb-6\">\n                Ready to Get Started?\n              </h2>\n              <p className=\"text-xl text-white/90 mb-8\">\n                Connect with our team to learn more about our services and how we can support your family's journey toward peace and healing.\n              </p>\n              <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n                <Link href=\"/contact\">\n                  <Button size=\"lg\" className=\"bg-white text-gray-800 hover:bg-gray-100\">\n                    Contact Us\n                  </Button>\n                </Link>\n                <Link href=\"/get-involved\">\n                  <Button size=\"lg\" variant=\"outline\" className=\"border-white text-gray-800 hover:bg-white/10\">\n                    Get Involved\n                  </Button>\n                </Link>\n              </div>\n            </div>\n          </ScrollAnimationWrapper>\n        </div>\n      </section>\n    </>\n  );\n}","size_bytes":10853},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\nimport SEO from \"@/components/SEO\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <SEO />\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":761},"client/src/types/admin.ts":{"content":"export interface BlogPost {\n  id: number;\n  title: string;\n  slug: string;\n  excerpt: string;\n  content: string;\n  category: string;\n  imageUrl: string;\n  publishedAt: string;\n  featured: boolean;\n  endDate?: string;\n}\n\nexport interface Event {\n  id: number;\n  name: string;\n  description: string;\n  date: string;\n  endDate: string;\n  location: string;\n  fee: number;\n  maxParticipants?: number;\n  registrations?: number;\n  active: boolean;\n  imageUrl: string;\n  slug: string;\n  featured: boolean;\n  category?: string;\n  tags?: string[];\n  contactEmail?: string;\n  contactPhone?: string;\n  registrationUrl?: string;\n  createdAt: string;\n}\n\nexport interface User {\n  id: number;\n  username: string;\n  email: string;\n  role: 'admin' | 'volunteer' | 'donor';\n  fullName: string;\n  createdAt: string;\n  lastLogin?: string;\n  active: boolean;\n}\n\nexport interface Volunteer {\n  id: number;\n  userId: number;\n  skills: string[];\n  availability: string[];\n  interests: string[];\n  bio: string;\n  status: 'active' | 'inactive' | 'pending';\n  joinedDate: string;\n  completedHours: number;\n}\n\nexport interface Donation {\n  id: number;\n  amount: number;\n  userId?: number;\n  causeId?: number;\n  transactionId: string;\n  status: 'completed' | 'pending' | 'failed';\n  paymentMethod: string;\n  createdAt: string;\n  anonymous: boolean;\n  message?: string;\n}\n","size_bytes":1342},"client/src/types/dashboard.ts":{"content":"export interface DashboardStats {\n  totalDonations: number;\n  donationCount: number;\n  pendingPayments: number;\n  successRate: string;\n  recentTransactions: Transaction[];\n  paymentMethods: Record<string, number>;\n  monthlyStats: {\n    totalTransactions: number;\n    completedTransactions: number;\n    failedTransactions: number;\n  };\n}\n\nexport interface Transaction {\n  id: number;\n  type: 'donation' | 'registration';\n  amount: number;\n  paymentMethod: string;\n  status: string;\n  customer: {\n    name: string;\n    email: string;\n  };\n  createdAt: string;\n}\n","size_bytes":560},"client/src/types/event.ts":{"content":"","size_bytes":0},"client/src/types/index.ts":{"content":"export interface DashboardStats {\n  stats: {\n    totalDonations: number;\n    donationCount: number;\n    totalEvents: number;\n    totalUsers: number;\n  };\n  gatewayStatus: Array<{\n    gateway: string;\n    status: 'live' | 'maintenance';\n    updatedAt: string;\n  }>;\n  recentTransactions: Transaction[];\n}\n\nexport interface Transaction {\n  id: string | number;\n  type: 'donation' | 'registration';\n  amount: number;\n  paymentMethod: string;\n  status: 'pending' | 'completed' | 'failed' | string;\n  customer: {\n    name: string;\n    email: string;\n  };\n  createdAt: string;\n  message?: string;\n  userId?: number;\n}\n\nexport interface PaymentInitiationResponse {\n  transactionId: string;\n  redirectUrl: string;\n  merchantReference: string;\n}\n\nexport interface DonationData {\n  donationType: string;\n  amount: number;\n  customerName: string;\n  customerEmail: string;\n  customerPhone?: string;\n  isAnonymous?: boolean;\n  message?: string;\n}\n\nexport interface EventRegistrationData {\n  registrationType: \"individual\" | \"organization\";\n  firstName: string;\n  lastName: string;\n  middleName?: string;\n  email: string;\n  phone: string;\n  organizationName?: string;\n}\n","size_bytes":1156},"server/services/payment-gateways/paypal.ts":{"content":"import { loadScript } from '@paypal/paypal-js';\nimport { PaymentGateway } from './types';\n\ninterface PayPalConfig {\n  clientId: string;\n  clientSecret: string;\n  apiUrl: string;\n}\n\ninterface CreateOrderParams {\n  amount: string;\n  currency?: string;\n}\n\nexport class PayPalService implements PaymentGateway {\n  private static instance: PayPalService;\n  private accessToken = '';\n  private accessTokenExpiry: Date | null = null;\n  private config: PayPalConfig;\n\n  private async ensureAccessToken() {\n    if (this.accessToken && this.accessTokenExpiry && this.accessTokenExpiry > new Date()) {\n      return;\n    }\n\n    const response = await fetch(`${this.config.apiUrl}/v1/oauth2/token`, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Accept-Language': 'en_US',\n        'Authorization': `Basic ${Buffer.from(\n          `${this.config.clientId}:${this.config.clientSecret}`\n        ).toString('base64')}`,\n      },\n      body: 'grant_type=client_credentials',\n    });\n\n    if (!response.ok) {\n      throw new Error('Failed to get PayPal access token');\n    }\n\n    const data = await response.json();\n    this.accessToken = data.access_token;\n    this.accessTokenExpiry = new Date(Date.now() + (data.expires_in * 1000));\n  }\n\n  private constructor() {\n    const requiredEnvVars = {\n      clientId: process.env.PAYPAL_CLIENT_ID,\n      clientSecret: process.env.PAYPAL_CLIENT_SECRET,\n      apiUrl: process.env.PAYPAL_API_URL,\n    };\n\n    // Log environment variables for debugging (do not log secrets in production!)\n    console.log('[PayPalService] PAYPAL_CLIENT_ID:', process.env.PAYPAL_CLIENT_ID);\n    console.log('[PayPalService] PAYPAL_CLIENT_SECRET:', process.env.PAYPAL_CLIENT_SECRET ? '***SET***' : '***MISSING***');\n    console.log('[PayPalService] PAYPAL_API_URL:', process.env.PAYPAL_API_URL);\n\n    // Validate all required environment variables\n    Object.entries(requiredEnvVars).forEach(([key, value]) => {\n      if (!value) {\n        console.error(`[PayPalService] Missing required environment variable: ${key}`);\n        throw new Error(`Missing required environment variable: ${key}`);\n      }\n    });\n\n    this.config = {\n      clientId: process.env.PAYPAL_CLIENT_ID!,\n      clientSecret: process.env.PAYPAL_CLIENT_SECRET!,\n      apiUrl: process.env.PAYPAL_API_URL!,\n    };\n  }\n\n  async createOrder({ amount, currency = 'USD' }: CreateOrderParams) {\n    try {\n      await this.ensureAccessToken();\n      const response = await fetch(`${this.config.apiUrl}/v2/checkout/orders`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${this.accessToken}`\n        },\n        body: JSON.stringify({\n          intent: 'CAPTURE',\n          purchase_units: [{\n            amount: {\n              currency_code: currency,\n              value: amount\n            }\n          }]\n        })\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        console.error('[PayPalService] PayPal create order error:', errorData);\n        throw new Error(`PayPal API error: ${JSON.stringify(errorData)}`);\n      }\n\n      return response.json();\n    } catch (err) {\n      console.error('[PayPalService] createOrder exception:', err);\n      throw err;\n    }\n  }\n\n  public static getInstance(): PayPalService {\n    if (!PayPalService.instance) {\n      PayPalService.instance = new PayPalService();\n    }\n    return PayPalService.instance;\n  }\n\n  async verifyPayment(paymentId: string): Promise<{\n    status: 'success' | 'failed';\n    transactionId: string;\n  }> {\n    await this.ensureAccessToken();\n    const token = this.accessToken;\n    const response = await fetch(\n      `${this.config.apiUrl}/v2/payments/captures/${paymentId}`,\n      {\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n        },\n      }\n    );\n\n    const data = await response.json();\n    if (!response.ok) {\n      throw new Error(`PayPal API Error: ${data.message}`);\n    }\n\n    return {\n      status: data.status === 'COMPLETED' ? 'success' : 'failed',\n      transactionId: data.id,\n    };\n  }\n\n  /**\n   * Capture a PayPal order after approval\n   * @param orderId The PayPal order ID to capture\n   */\n  public async captureOrder(orderId: string): Promise<any> {\n    await this.ensureAccessToken();\n    const token = this.accessToken;\n    const response = await fetch(\n      `${this.config.apiUrl}/v2/checkout/orders/${orderId}/capture`,\n      {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`,\n        },\n      }\n    );\n    const data = await response.json();\n    if (!response.ok) {\n      throw new Error(`PayPal API Error: ${data.message || JSON.stringify(data)}`);\n    }\n    return data;\n  }\n\n  async handleWebhook(event: any): Promise<void> {\n    // Simplified webhook handling - removed subscription events\n    console.log('PayPal webhook received:', event.event_type);\n  }\n}\n","size_bytes":5018},"server/services/payment-gateways/types.ts":{"content":"export interface PaymentGateway {\n  verifyPayment(paymentId: string): Promise<{\n    status: 'success' | 'failed';\n    transactionId: string;\n  }>;\n\n  handleWebhook(event: any): Promise<void>;\n}\n\nexport interface PaymentMethod {\n  id: string;\n  type: 'paypal' | 'card' | 'mpesa' | 'pesapal' | 'bank_transfer';\n  details: {\n    [key: string]: any;\n  };\n}\n","size_bytes":353},"client/src/components/admin/PaymentGatewayConfig.tsx":{"content":"import { useState } from 'react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { useForm } from 'react-hook-form';\nimport { z } from 'zod';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport { Input } from '@/components/ui/input';\nimport { Button } from '@/components/ui/button';\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from '@/components/ui/form';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { useToast } from '@/hooks/use-toast';\n\nconst paypalConfigSchema = z.object({\n  clientId: z.string().min(1, 'Client ID is required'),\n  clientSecret: z.string().min(1, 'Client Secret is required'),\n  mode: z.enum(['sandbox', 'live']),\n  merchantId: z.string().optional(),\n});\n\nconst mpesaConfigSchema = z.object({\n  consumerKey: z.string().min(1, 'Consumer Key is required'),\n  consumerSecret: z.string().min(1, 'Consumer Secret is required'),\n  shortCode: z.string().min(1, 'Short Code is required'),\n  passKey: z.string().min(1, 'Pass Key is required'),\n  callbackUrl: z.string().url('Must be a valid URL'),\n});\n\ninterface GatewayConfig {\n  gateway: string;\n  config: Record<string, any>;\n  updatedAt: string;\n}\n\ntype PayPalConfig = z.infer<typeof paypalConfigSchema>;\ntype MPesaConfig = z.infer<typeof mpesaConfigSchema>;\n\nexport function PaymentGatewayConfig() {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [selectedGateway, setSelectedGateway] = useState<'paypal' | 'mpesa'>('paypal');\n\n  const { data: configs, isLoading } = useQuery<GatewayConfig[]>({\n    queryKey: ['admin', 'payment-gateway-configs'],\n    queryFn: async () => {\n      const response = await fetch('/api/admin/payment-gateway-config');\n      if (!response.ok) throw new Error('Failed to fetch configs');\n      return response.json();\n    },\n  });\n\n  const updateConfig = useMutation({\n    mutationFn: async ({ gateway, config }: { gateway: string; config: PayPalConfig | MPesaConfig }) => {\n      const response = await fetch(`/api/admin/payment-gateway-config/${gateway}`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(config),\n      });\n      if (!response.ok) throw new Error('Failed to update config');\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['admin', 'payment-gateway-configs'] });\n      toast({\n        title: 'Settings Updated',\n        description: 'Payment gateway configuration has been updated successfully.',\n      });\n    },\n    onError: (error) => {\n      toast({\n        title: 'Error',\n        description: error instanceof Error ? error.message : 'Failed to update configuration',\n        variant: 'destructive',\n      });\n    },\n  });\n\n  const paypalForm = useForm<PayPalConfig>({\n    resolver: zodResolver(paypalConfigSchema),\n    defaultValues: configs?.find((c: GatewayConfig) => c.gateway === 'paypal')?.config || {},\n  });\n\n  const mpesaForm = useForm<MPesaConfig>({\n    resolver: zodResolver(mpesaConfigSchema),\n    defaultValues: configs?.find((c: GatewayConfig) => c.gateway === 'mpesa')?.config || {},\n  });\n\n  const onSubmit = async (data: PayPalConfig | MPesaConfig) => {\n    updateConfig.mutate({ gateway: selectedGateway, config: data });\n  };\n\n  if (isLoading) {\n    return <div>Loading payment gateway configurations...</div>;\n  }\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle>Payment Gateway Configuration</CardTitle>\n        <CardDescription>\n          Configure your payment gateway credentials and settings\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <div className=\"space-y-6\">\n          <Select\n            value={selectedGateway}\n            onValueChange={(value: 'paypal' | 'mpesa') => setSelectedGateway(value)}\n          >\n            <SelectTrigger>\n              <SelectValue placeholder=\"Select a payment gateway\" />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"paypal\">PayPal</SelectItem>\n              <SelectItem value=\"mpesa\">M-Pesa</SelectItem>\n            </SelectContent>\n          </Select>\n\n          {selectedGateway === 'paypal' ? (\n            <Form {...paypalForm}>\n              <form onSubmit={paypalForm.handleSubmit(onSubmit)} className=\"space-y-4\">\n                <FormField\n                  control={paypalForm.control}\n                  name=\"clientId\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Client ID</FormLabel>\n                      <FormControl>\n                        <Input {...field} placeholder=\"PayPal Client ID\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={paypalForm.control}\n                  name=\"clientSecret\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Client Secret</FormLabel>\n                      <FormControl>\n                        <Input {...field} type=\"password\" placeholder=\"PayPal Client Secret\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={paypalForm.control}\n                  name=\"mode\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Environment</FormLabel>\n                      <Select\n                        value={field.value}\n                        onValueChange={field.onChange}\n                      >\n                        <SelectTrigger>\n                          <SelectValue placeholder=\"Select environment\" />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"sandbox\">Sandbox (Testing)</SelectItem>\n                          <SelectItem value=\"live\">Live (Production)</SelectItem>\n                        </SelectContent>\n                      </Select>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={paypalForm.control}\n                  name=\"merchantId\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Merchant ID (Optional)</FormLabel>\n                      <FormControl>\n                        <Input {...field} placeholder=\"PayPal Merchant ID\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <Button type=\"submit\" disabled={updateConfig.isPending}>\n                  {updateConfig.isPending ? 'Saving...' : 'Save PayPal Configuration'}\n                </Button>\n              </form>\n            </Form>\n          ) : (\n            <Form {...mpesaForm}>\n              <form onSubmit={mpesaForm.handleSubmit(onSubmit)} className=\"space-y-4\">\n                <FormField\n                  control={mpesaForm.control}\n                  name=\"consumerKey\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Consumer Key</FormLabel>\n                      <FormControl>\n                        <Input {...field} placeholder=\"M-Pesa Consumer Key\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={mpesaForm.control}\n                  name=\"consumerSecret\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Consumer Secret</FormLabel>\n                      <FormControl>\n                        <Input {...field} type=\"password\" placeholder=\"M-Pesa Consumer Secret\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={mpesaForm.control}\n                  name=\"shortCode\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Short Code</FormLabel>\n                      <FormControl>\n                        <Input {...field} placeholder=\"M-Pesa Short Code\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={mpesaForm.control}\n                  name=\"passKey\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Pass Key</FormLabel>\n                      <FormControl>\n                        <Input {...field} type=\"password\" placeholder=\"M-Pesa Pass Key\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={mpesaForm.control}\n                  name=\"callbackUrl\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Callback URL</FormLabel>\n                      <FormControl>\n                        <Input {...field} placeholder=\"https://your-domain.com/api/mpesa/callback\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <Button type=\"submit\" disabled={updateConfig.isPending}>\n                  {updateConfig.isPending ? 'Saving...' : 'Save M-Pesa Configuration'}\n                </Button>\n              </form>\n            </Form>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":10233},"client/src/components/admin/PaymentGatewayManagement.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Switch } from '@/components/ui/switch';\nimport { toast } from '@/hooks/use-toast';\n\ninterface PaymentGatewayStatus {\n  gateway: string;\n  status: 'live' | 'maintenance';\n  updatedAt: string;\n}\n\nexport function PaymentGatewayManagement() {\n  const [gateways, setGateways] = useState<PaymentGatewayStatus[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    fetchGatewayStatuses();\n  }, []);\n\n  const fetchGatewayStatuses = async () => {\n    try {\n      const response = await fetch('/api/admin/payment-gateway-status');\n      if (!response.ok) throw new Error('Failed to fetch gateway statuses');\n      const data = await response.json();\n      setGateways(data);\n      setLoading(false);\n    } catch (error) {\n      console.error('Error fetching gateway statuses:', error);\n      toast({\n        title: 'Error',\n        description: 'Failed to fetch payment gateway statuses',\n        variant: 'destructive',\n      });\n      setLoading(false);\n    }\n  };\n\n  const updateGatewayStatus = async (gateway: string, newStatus: 'live' | 'maintenance') => {\n    try {\n      const response = await fetch('/api/admin/payment-gateway-status', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          gateway,\n          status: newStatus,\n        }),\n      });\n\n      if (!response.ok) throw new Error('Failed to update gateway status');\n      \n      const updatedGateway = await response.json();\n      setGateways(prevGateways =>\n        prevGateways.map(g =>\n          g.gateway === gateway ? { ...g, ...updatedGateway } : g\n        )\n      );\n\n      toast({\n        title: 'Success',\n        description: `${gateway} payment gateway is now ${newStatus}`,\n      });\n    } catch (error) {\n      console.error('Error updating gateway status:', error);\n      toast({\n        title: 'Error',\n        description: 'Failed to update payment gateway status',\n        variant: 'destructive',\n      });\n    }\n  };\n\n  if (loading) {\n    return <div>Loading...</div>;\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <h2 className=\"text-2xl font-bold tracking-tight\">Payment Gateway Management</h2>\n      <div className=\"grid gap-4 md:grid-cols-2\">\n        {gateways.map((gateway) => (\n          <Card key={gateway.gateway}>\n            <CardHeader>\n              <CardTitle className=\"flex items-center justify-between\">\n                <span className=\"capitalize\">{gateway.gateway}</span>\n                <Switch\n                  checked={gateway.status === 'live'}\n                  onCheckedChange={(checked) =>\n                    updateGatewayStatus(gateway.gateway, checked ? 'live' : 'maintenance')\n                  }\n                />\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-2\">\n                <div className=\"flex justify-between text-sm\">\n                  <span>Status:</span>\n                  <span className={gateway.status === 'live' ? 'text-green-600' : 'text-yellow-600'}>\n                    {gateway.status}\n                  </span>\n                </div>\n                <div className=\"flex justify-between text-sm\">\n                  <span>Last Updated:</span>\n                  <span className=\"text-muted-foreground\">\n                    {new Date(gateway.updatedAt).toLocaleString()}\n                  </span>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n    </div>\n  );\n}\n","size_bytes":3733},"client/src/components/admin/PaymentGatewayStatus.tsx":{"content":"import { useQuery } from '@tanstack/react-query';\nimport { Switch } from '@/components/ui/switch';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { useToast } from '@/hooks/use-toast';\n\ninterface PaymentGatewayStatus {\n  gateway: string;\n  status: 'live' | 'maintenance';\n  updatedAt: string;\n}\n\nexport function PaymentGatewayStatus() {\n  const { toast } = useToast();\n\n  const { data: gateways = [], isLoading: loadingGateways } = useQuery<PaymentGatewayStatus[]>({\n    queryKey: ['admin', 'payment-gateway-status'],\n    queryFn: async () => {\n      const response = await fetch('/api/admin/payment-gateway-status');\n      if (!response.ok) throw new Error('Failed to fetch gateway statuses');\n      return response.json();\n    },\n  });\n\n  const updateGatewayStatus = async (gateway: string, newStatus: 'live' | 'maintenance') => {\n    try {\n      const response = await fetch('/api/admin/payment-gateway-status', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          gateway,\n          status: newStatus,\n        }),\n      });\n\n      if (!response.ok) throw new Error('Failed to update gateway status');\n      \n      toast({\n        title: 'Success',\n        description: `${gateway} payment gateway is now ${newStatus}`,\n      });\n    } catch (error) {\n      console.error('Error updating gateway status:', error);\n      toast({\n        title: 'Error',\n        description: 'Failed to update payment gateway status',\n        variant: 'destructive',\n      });\n    }\n  };\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle>Payment Gateway Status</CardTitle>\n        <CardDescription>Manage the status of your payment gateways</CardDescription>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        {loadingGateways ? (\n          <div>Loading payment gateway settings...</div>\n        ) : gateways.map((gateway) => (\n          <div key={gateway.gateway} className=\"flex items-center justify-between p-4 border rounded-lg\">\n            <div className=\"space-y-0.5\">\n              <div className=\"font-medium capitalize\">{gateway.gateway}</div>\n              <div className=\"text-sm text-muted-foreground\">\n                {gateway.status === 'live' ? 'Live - Accepting payments' : 'Maintenance - Payments disabled'}\n              </div>\n            </div>\n            <Switch\n              checked={gateway.status === 'live'}\n              onCheckedChange={(checked) =>\n                updateGatewayStatus(gateway.gateway, checked ? 'live' : 'maintenance')\n              }\n            />\n          </div>\n        ))}\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":2729},"client/src/components/admin/ProtectedRoute.tsx":{"content":"import { useEffect } from 'react';\nimport { useLocation } from 'wouter';\nimport { useAuthenticatedUser, useIsAdmin } from '@/lib/auth';\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode;\n  requireAdmin?: boolean;\n}\n\nexport default function ProtectedRoute({ children, requireAdmin = false }: ProtectedRouteProps) {\n  const [, setLocation] = useLocation();\n  const { isAuthenticated, isLoading } = useAuthenticatedUser();\n  const isAdmin = useIsAdmin();\n\n  useEffect(() => {\n    if (isLoading) return;\n\n    if (!isAuthenticated) {\n      setLocation('/admin/login');\n      return;\n    }\n\n    if (requireAdmin && !isAdmin) {\n      setLocation('/admin/unauthorized');\n      return;\n    }\n  }, [isAuthenticated, isAdmin, requireAdmin, setLocation, isLoading]);\n\n  if (isLoading || !isAuthenticated || (requireAdmin && !isAdmin)) {\n    return null;\n  }\n\n  return <>{children}</>;\n}\n","size_bytes":886},"client/src/components/admin/Sidebar.tsx":{"content":"import { Link, useLocation } from \"wouter\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { logout } from \"@/lib/auth\";\n\ninterface NavItem {\n  href: string;\n  icon: string;\n  label: string;\n  active: boolean;\n}\n\nexport default function AdminSidebar() {\n  const [location] = useLocation();\n  const { toast } = useToast();\n\n  const logoutMutation = useMutation({\n    mutationFn: logout,\n    onSuccess: () => {\n      toast({\n        title: \"Logged Out\",\n        description: \"You have been successfully logged out\",\n      });\n      window.location.href = \"/admin/login\";\n    },\n  });\n\n  const navItems: NavItem[] = [\n    {\n      href: \"/admin/dashboard\",\n      icon: \"fas fa-tachometer-alt\",\n      label: \"Dashboard\",\n      active: location === \"/admin/dashboard\",\n    },\n    {\n      href: \"/admin/blog\",\n      icon: \"fas fa-blog\",\n      label: \"Blog Posts\",\n      active: location === \"/admin/blog\",\n    },\n    {\n      href: \"/admin/events\",\n      icon: \"fas fa-calendar\",\n      label: \"Events\",\n      active: location === \"/admin/events\",\n    },\n    {\n      href: \"/admin/donations\",\n      icon: \"fas fa-heart\",\n      label: \"Donations\",\n      active: location === \"/admin/donations\",\n    },\n    {\n      href: \"/admin/users\",\n      icon: \"fas fa-users\",\n      label: \"Users\",\n      active: location === \"/admin/users\",\n    },\n    {\n      href: \"/admin/payments\",\n      icon: \"fas fa-credit-card\",\n      label: \"Payments\",\n      active: location === \"/admin/payments\",\n    },\n    {\n      href: \"/admin/volunteers\",\n      icon: \"fas fa-hands-helping\",\n      label: \"Volunteers\",\n      active: location === \"/admin/volunteers\",\n    },\n    {\n      href: \"/admin/event-registrations\",\n      icon: \"fas fa-list-alt\",\n      label: \"Event Registrations\",\n      active: location === \"/admin/event-registrations\",\n    },\n    {\n      href: \"/admin/settings\",\n      icon: \"fas fa-cog\",\n      label: \"Settings\",\n      active: location === \"/admin/settings\",\n    },\n\n  ];\n\n  return (\n    <div className=\"w-64 bg-white shadow-lg border-r border-neutral-200 min-h-screen\">\n      <div className=\"p-6\">\n        {/* Logo */}\n        <Link href=\"/admin/dashboard\" className=\"flex items-center space-x-3 mb-8\">\n          <div className=\"w-10 h-10 bg-primary rounded-lg flex items-center justify-center\">\n            <i className=\"fas fa-hand-holding-heart text-white text-lg\"></i>\n          </div>\n          <div>\n            <h1 className=\"text-lg font-bold text-neutral-800\">Family Peace</h1>\n            <p className=\"text-sm text-neutral-500\">Admin Panel</p>\n          </div>\n        </Link>\n\n\n        {/* Navigation */}\n        <nav className=\"space-y-2\">\n          {navItems.map((item) => (\n            <Link\n              key={item.href}\n              href={item.href}\n              className={`flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${\n                item.active\n                  ? \"bg-primary text-white\"\n                  : \"text-neutral-600 hover:bg-neutral-100\"\n              }`}\n            >\n              <i className={`${item.icon} text-lg`}></i>\n              <span className=\"font-medium\">{item.label}</span>\n            </Link>\n          ))}\n        </nav>\n\n      </div>\n\n      {/* Footer */}\n      <div className=\"px-6 py-4 border-t border-neutral-200\">\n        <div className=\"flex items-center space-x-2 text-sm mb-3\">\n          <div className=\"w-2 h-2 bg-success rounded-full\"></div>\n          <span className=\"text-neutral-600\">Connected to API</span>\n        </div>\n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          className=\"w-full text-xs\"\n          onClick={() => logoutMutation.mutate()}\n          disabled={logoutMutation.isPending}\n        >\n          <i className=\"fas fa-sign-out-alt mr-2\"></i>\n          {logoutMutation.isPending ? \"Logging out...\" : \"Logout\"}\n        </Button>\n      </div>\n    </div>\n  );\n}\n","size_bytes":3986},"client/src/components/admin/StatsCards.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport type { DashboardStats } from \"@/types\";\n\ninterface StatsCardsProps {\n  stats: {\n    totalDonations: number;\n    donationCount: number;\n    totalEvents: number;\n    totalUsers: number;\n  };\n}\n\ninterface StatCard {\n  title: string;\n  value: string;\n  change: string;\n  changeType: 'positive' | 'negative' | 'neutral' | 'warning';\n  icon: string;\n  iconBg: string;\n  iconColor: string;\n}\n\nexport default function StatsCards({ stats }: StatsCardsProps) {\n  const cards: StatCard[] = [\n    {\n      title: \"Total Donations\",\n      value: stats.totalDonations.toLocaleString('en-US', {\n        style: 'currency',\n        currency: 'KES'\n      }),\n      change: `${stats.donationCount} donations received`,\n      changeType: \"positive\",\n      icon: \"fas fa-heart\",\n      iconBg: \"bg-success/10\",\n      iconColor: \"text-success\"\n    },\n    {\n      title: \"Total Users\",\n      value: stats.totalUsers.toString(),\n      change: \"Active members\",\n      changeType: \"neutral\",\n      icon: \"fas fa-users\",\n      iconBg: \"bg-primary/10\",\n      iconColor: \"text-primary\"\n    },\n    {\n      title: \"Total Events\",\n      value: stats.totalEvents.toString(),\n      change: \"Events organized\",\n      changeType: \"neutral\",\n      icon: \"fas fa-calendar\",\n      iconBg: \"bg-info/10\",\n      iconColor: \"text-info\"\n    },\n    {\n      title: \"Average Donation\",\n      value: stats.donationCount > 0 \n        ? (stats.totalDonations / stats.donationCount).toLocaleString('en-US', {\n            style: 'currency',\n            currency: 'KES'\n          })\n        : \"KES 0\",\n      change: \"Per donation\",\n      changeType: \"neutral\",\n      icon: \"fas fa-chart-bar\",\n      iconBg: \"bg-warning/10\",\n      iconColor: \"text-warning\"\n    },\n  ];\n\n  return (\n    <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4 mb-8\">\n      {cards.map((card, index) => (\n        <Card key={index}>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-neutral-600\">\n                  {card.title}\n                </p>\n                <h3 className=\"text-2xl font-bold text-neutral-800 mt-2\">\n                  {card.value}\n                </h3>\n                <p className={`text-xs flex items-center mt-2 ${\n                  card.changeType === \"positive\" ? \"text-success\" :\n                  card.changeType === \"warning\" ? \"text-warning\" :\n                  card.changeType === \"negative\" ? \"text-error\" : \"text-neutral-500\"\n                }`}>\n                  {card.changeType === \"positive\" && <i className=\"fas fa-arrow-up text-xs mr-1\"></i>}\n                  {card.changeType === \"warning\" && <i className=\"fas fa-exclamation-circle text-xs mr-1\"></i>}\n                  {card.changeType === \"negative\" && <i className=\"fas fa-arrow-down text-xs mr-1\"></i>}\n                  {card.change}\n                </p>\n              </div>\n              <div className={`w-12 h-12 ${card.iconBg} rounded-lg flex items-center justify-center`}>\n                <i className={`${card.icon} ${card.iconColor} text-xl`}></i>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      ))}\n    </div>\n  );\n}\n","size_bytes":3282},"client/src/components/admin/TransactionTable.tsx":{"content":"import { useState } from \"react\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Button } from \"@/components/ui/button\";\nimport { Transaction } from \"@/types\";\n\ninterface TransactionTableProps {\n  transactions: Transaction[];\n}\n\nexport default function TransactionTable({ transactions }: TransactionTableProps) {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [statusFilter, setStatusFilter] = useState(\"all\");\n  const [typeFilter, setTypeFilter] = useState(\"all\");\n\n  const filteredTransactions = transactions.filter((transaction) => {\n    const matchesSearch =\n      transaction.customer?.name?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      transaction.customer?.email?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      transaction.id.toString().toLowerCase().includes(searchTerm.toLowerCase());\n\n    const matchesStatus =\n      statusFilter === \"all\" || transaction.status === statusFilter;\n\n    const matchesType = typeFilter === \"all\" || transaction.type === typeFilter;\n\n    return matchesSearch && matchesStatus && matchesType;\n  });\n\n  return (\n    <div className=\"bg-white rounded-lg border\">\n      <div className=\"p-6 border-b\">\n        <h3 className=\"text-lg font-semibold text-neutral-800 mb-4\">\n          Recent Transactions\n        </h3>\n        <div className=\"flex flex-wrap gap-4\">\n          <Input\n            placeholder=\"Search transactions...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"max-w-xs\"\n          />\n          <Select value={statusFilter} onValueChange={setStatusFilter}>\n            <SelectTrigger className=\"w-[180px]\">\n              <SelectValue placeholder=\"Filter by status\" />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"all\">All Statuses</SelectItem>\n              <SelectItem value=\"completed\">Completed</SelectItem>\n              <SelectItem value=\"pending\">Pending</SelectItem>\n              <SelectItem value=\"failed\">Failed</SelectItem>\n            </SelectContent>\n          </Select>\n          <Select value={typeFilter} onValueChange={setTypeFilter}>\n            <SelectTrigger className=\"w-[180px]\">\n              <SelectValue placeholder=\"Filter by type\" />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"all\">All Types</SelectItem>\n              <SelectItem value=\"donation\">Donations</SelectItem>\n              <SelectItem value=\"registration\">Event Registrations</SelectItem>\n            </SelectContent>\n          </Select>\n        </div>\n      </div>\n\n      <div className=\"overflow-x-auto\">\n        <Table>\n          <TableHeader>\n            <TableRow>\n              <TableHead>Transaction ID</TableHead>\n              <TableHead>Type</TableHead>\n              <TableHead>Amount</TableHead>\n              <TableHead>Status</TableHead>\n              <TableHead>Customer</TableHead>\n              <TableHead>Payment Method</TableHead>\n              <TableHead>Date</TableHead>\n              <TableHead className=\"text-right\">Actions</TableHead>\n            </TableRow>\n          </TableHeader>\n          <TableBody>\n            {filteredTransactions.map((transaction) => (\n              <TableRow key={transaction.id}>\n                <TableCell className=\"font-mono\">{transaction.id}</TableCell>\n                <TableCell className=\"capitalize\">{transaction.type}</TableCell>\n                <TableCell>KES {transaction.amount.toLocaleString()}</TableCell>\n                <TableCell>\n                  <span\n                    className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium\n                      ${\n                        transaction.status === \"completed\"\n                          ? \"bg-success/10 text-success\"\n                          : transaction.status === \"pending\"\n                          ? \"bg-warning/10 text-warning\"\n                          : \"bg-error/10 text-error\"\n                      }`}\n                  >\n                    {transaction.status}\n                  </span>\n                </TableCell>\n                <TableCell>\n                  <div>\n                    <div className=\"font-medium\">\n                      {transaction.customer?.name || 'N/A'}\n                    </div>\n                    <div className=\"text-sm text-neutral-500\">\n                      {transaction.customer?.email || 'No email provided'}\n                    </div>\n                  </div>\n                </TableCell>\n                <TableCell>{transaction.paymentMethod}</TableCell>\n                <TableCell>\n                  {new Date(transaction.createdAt).toLocaleDateString()}\n                </TableCell>\n                <TableCell className=\"text-right\">\n                  <Button variant=\"ghost\" size=\"sm\">\n                    View Details\n                  </Button>\n                </TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </div>\n    </div>\n  );\n}\n","size_bytes":5267},"client/src/components/ui/CurrencyAmount.tsx":{"content":"import { useState, useEffect } from 'react';\n\ninterface CurrencyAmountProps {\n  amount: string | number;\n  sourceCurrency?: string;\n  targetCurrency?: string;\n}\n\nexport default function CurrencyAmount({ \n  amount, \n  sourceCurrency = 'USD', \n  targetCurrency = 'KES' \n}: CurrencyAmountProps) {\n  const [convertedAmount, setConvertedAmount] = useState<number | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchConvertedAmount = async () => {\n      try {\n        const response = await fetch(`/api/currency/convert`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            amount: Number(amount),\n            from: sourceCurrency,\n            to: targetCurrency,\n          }),\n        });\n\n        const data = await response.json();\n        setConvertedAmount(data.amount);\n      } catch (error) {\n        console.error('Failed to convert currency:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    fetchConvertedAmount();\n  }, [amount, sourceCurrency, targetCurrency]);\n\n  if (isLoading) {\n    return <span>Converting...</span>;\n  }\n\n  const formatAmount = (amount: number, currency: string) => {\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: currency,\n      maximumFractionDigits: currency === 'KES' ? 0 : 2,\n    }).format(amount);\n  };\n\n  return (\n    <span>\n      {formatAmount(Number(amount), sourceCurrency)}\n      {convertedAmount && (\n        <> ({formatAmount(convertedAmount, targetCurrency)})</>\n      )}\n    </span>\n  );\n}\n","size_bytes":1651},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1419},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1128},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":1901},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","size_bytes":1858},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n\nexport { ChartContainer as Chart }\n","size_bytes":10517},"client/src/components/ui/charts.tsx":{"content":"import React from 'react';\nimport {\n  LineChart as RechartsLineChart,\n  BarChart as RechartsBarChart,\n  PieChart as RechartsPieChart,\n  Line,\n  Bar,\n  Pie,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  ResponsiveContainer\n} from 'recharts';\nimport { ChartContainer } from './chart';\n\ninterface BaseChartProps {\n  data: any[];\n  title: string;\n}\n\ninterface XYChartProps extends BaseChartProps {\n  xField: string;\n  yField: string;\n}\n\ninterface PieChartProps extends BaseChartProps {\n  nameField: string;\n  valueField: string;\n}\n\nexport function LineChart({ data, xField, yField, title }: XYChartProps) {\n  return (\n    <ChartContainer config={{ [title]: { label: title } }}>\n      <RechartsLineChart data={data}>\n        <CartesianGrid strokeDasharray=\"3 3\" />\n        <XAxis dataKey={xField} />\n        <YAxis />\n        <Tooltip />\n        <Line type=\"monotone\" dataKey={yField} stroke=\"#8884d8\" />\n      </RechartsLineChart>\n    </ChartContainer>\n  );\n}\n\nexport function BarChart({ data, xField, yField, title }: XYChartProps) {\n  return (\n    <ChartContainer config={{ [title]: { label: title } }}>\n      <RechartsBarChart data={data}>\n        <CartesianGrid strokeDasharray=\"3 3\" />\n        <XAxis dataKey={xField} />\n        <YAxis />\n        <Tooltip />\n        <Bar dataKey={yField} fill=\"#8884d8\" />\n      </RechartsBarChart>\n    </ChartContainer>\n  );\n}\n\nexport function PieChart({ data, nameField, valueField, title }: PieChartProps) {\n  return (\n    <ChartContainer config={{ [title]: { label: title } }}>\n      <RechartsPieChart>\n        <Pie\n          data={data}\n          dataKey={valueField}\n          nameKey={nameField}\n          fill=\"#8884d8\"\n          label\n        />\n        <Tooltip />\n      </RechartsPieChart>\n    </ChartContainer>\n  );\n}\n","size_bytes":1767},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/components/ui/date-range-picker.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { format } from \"date-fns\"\nimport { Calendar as CalendarIcon } from \"lucide-react\"\nimport { DateRange } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Calendar } from \"@/components/ui/calendar\"\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from \"@/components/ui/popover\"\n\ninterface DateRangePickerProps extends React.HTMLAttributes<HTMLDivElement> {\n  date: DateRange | undefined\n  onDateChange: (date: DateRange | undefined) => void\n}\n\nexport function DateRangePicker({\n  className,\n  date,\n  onDateChange,\n}: DateRangePickerProps) {\n  return (\n    <div className={cn(\"grid gap-2\", className)}>\n      <Popover>\n        <PopoverTrigger asChild>\n          <Button\n            id=\"date\"\n            variant={\"outline\"}\n            className={cn(\n              \"w-[300px] justify-start text-left font-normal\",\n              !date && \"text-muted-foreground\"\n            )}\n          >\n            <CalendarIcon className=\"mr-2 h-4 w-4\" />\n            {date?.from ? (\n              date.to ? (\n                <>\n                  {format(date.from, \"LLL dd, y\")} -{\" \"}\n                  {format(date.to, \"LLL dd, y\")}\n                </>\n              ) : (\n                format(date.from, \"LLL dd, y\")\n              )\n            ) : (\n              <span>Pick a date</span>\n            )}\n          </Button>\n        </PopoverTrigger>\n        <PopoverContent className=\"w-auto p-0\" align=\"start\">\n          <Calendar\n            initialFocus\n            mode=\"range\"\n            defaultMonth={date?.from}\n            selected={date}\n            onSelect={onDateChange}\n            numberOfMonths={2}\n          />\n        </PopoverContent>\n      </Popover>\n    </div>\n  )\n}\n","size_bytes":1806},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":791},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/components/ui/loading-spinner.tsx":{"content":"export function LoadingSpinner() {\n  return (\n    <div className=\"flex items-center justify-center min-h-[50vh]\">\n      <div className=\"relative\">\n        <div className=\"h-24 w-24 rounded-full border-t-4 border-b-4 border-primary animate-spin\"></div>\n        <div className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-primary\">\n          Loading...\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":428},"client/src/components/ui/loading.tsx":{"content":"interface LoadingSpinnerProps {\n  size?: 'sm' | 'md' | 'lg';\n  className?: string;\n}\n\nexport function LoadingSpinner({ size = 'md', className = '' }: LoadingSpinnerProps) {\n  const sizeClasses = {\n    sm: 'w-4 h-4',\n    md: 'w-8 h-8',\n    lg: 'w-12 h-12'\n  };\n\n  return (\n    <div className={`flex items-center justify-center ${className}`}>\n      <div\n        className={`${sizeClasses[size]} animate-spin rounded-full border-4 border-primary border-t-transparent`}\n        role=\"status\"\n        aria-label=\"Loading\"\n      />\n    </div>\n  );\n}\n\ninterface PageLoadingProps {\n  message?: string;\n}\n\nexport function PageLoading({ message = 'Loading...' }: PageLoadingProps) {\n  return (\n    <div className=\"min-h-screen bg-neutral-50 flex flex-col items-center justify-center\">\n      <LoadingSpinner size=\"lg\" className=\"mb-4\" />\n      <p className=\"text-neutral-600 animate-pulse\">{message}</p>\n    </div>\n  );\n}\n\ninterface SectionLoadingProps {\n  message?: string;\n  className?: string;\n}\n\nexport function SectionLoading({ message, className = '' }: SectionLoadingProps) {\n  return (\n    <div className={`flex flex-col items-center justify-center p-8 ${className}`}>\n      <LoadingSpinner size=\"md\" className=\"mb-2\" />\n      {message && <p className=\"text-sm text-neutral-600 animate-pulse\">{message}</p>}\n    </div>\n  );\n}\n","size_bytes":1324},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/components/ui/optimized-image.tsx":{"content":"import { cn } from \"@/lib/utils\";\n\ninterface OptimizedImageProps extends React.ImgHTMLAttributes<HTMLImageElement> {\n  src: string;\n  alt: string;\n  className?: string;\n  loadingClassName?: string;\n}\n\nexport function OptimizedImage({ \n  src, \n  alt, \n  className, \n  loadingClassName,\n  ...props \n}: OptimizedImageProps) {\n  // Simple img component without any loading states or transitions\n  return (\n    <img\n      src={src}\n      alt={alt}\n      className={cn(className)}\n      {...props}\n    />\n  );\n}\n","size_bytes":506},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5742},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      {/*\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n      */}\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4301},"client/src/components/ui/sidebar.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { VariantProps, cva } from \"class-variance-authority\"\nimport { PanelLeft } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nconst SidebarProvider = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    defaultOpen?: boolean\n    open?: boolean\n    onOpenChange?: (open: boolean) => void\n  }\n>(\n  (\n    {\n      defaultOpen = true,\n      open: openProp,\n      onOpenChange: setOpenProp,\n      className,\n      style,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const isMobile = useIsMobile()\n    const [openMobile, setOpenMobile] = React.useState(false)\n\n    // This is the internal state of the sidebar.\n    // We use openProp and setOpenProp for control from outside the component.\n    const [_open, _setOpen] = React.useState(defaultOpen)\n    const open = openProp ?? _open\n    const setOpen = React.useCallback(\n      (value: boolean | ((value: boolean) => boolean)) => {\n        const openState = typeof value === \"function\" ? value(open) : value\n        if (setOpenProp) {\n          setOpenProp(openState)\n        } else {\n          _setOpen(openState)\n        }\n\n        // This sets the cookie to keep the sidebar state.\n        document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n      },\n      [setOpenProp, open]\n    )\n\n    // Helper to toggle the sidebar.\n    const toggleSidebar = React.useCallback(() => {\n      return isMobile\n        ? setOpenMobile((open) => !open)\n        : setOpen((open) => !open)\n    }, [isMobile, setOpen, setOpenMobile])\n\n    // Adds a keyboard shortcut to toggle the sidebar.\n    React.useEffect(() => {\n      const handleKeyDown = (event: KeyboardEvent) => {\n        if (\n          event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n          (event.metaKey || event.ctrlKey)\n        ) {\n          event.preventDefault()\n          toggleSidebar()\n        }\n      }\n\n      window.addEventListener(\"keydown\", handleKeyDown)\n      return () => window.removeEventListener(\"keydown\", handleKeyDown)\n    }, [toggleSidebar])\n\n    // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n    // This makes it easier to style the sidebar with Tailwind classes.\n    const state = open ? \"expanded\" : \"collapsed\"\n\n    const contextValue = React.useMemo<SidebarContextProps>(\n      () => ({\n        state,\n        open,\n        setOpen,\n        isMobile,\n        openMobile,\n        setOpenMobile,\n        toggleSidebar,\n      }),\n      [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n    )\n\n    return (\n      <SidebarContext.Provider value={contextValue}>\n        <TooltipProvider delayDuration={0}>\n          <div\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH,\n                \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n                ...style,\n              } as React.CSSProperties\n            }\n            className={cn(\n              \"group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar\",\n              className\n            )}\n            ref={ref}\n            {...props}\n          >\n            {children}\n          </div>\n        </TooltipProvider>\n      </SidebarContext.Provider>\n    )\n  }\n)\nSidebarProvider.displayName = \"SidebarProvider\"\n\nconst Sidebar = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    side?: \"left\" | \"right\"\n    variant?: \"sidebar\" | \"floating\" | \"inset\"\n    collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n  }\n>(\n  (\n    {\n      side = \"left\",\n      variant = \"sidebar\",\n      collapsible = \"offcanvas\",\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n    if (collapsible === \"none\") {\n      return (\n        <div\n          className={cn(\n            \"flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground\",\n            className\n          )}\n          ref={ref}\n          {...props}\n        >\n          {children}\n        </div>\n      )\n    }\n\n    if (isMobile) {\n      return (\n        <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n          <SheetContent\n            data-sidebar=\"sidebar\"\n            data-mobile=\"true\"\n            className=\"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden\"\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n              } as React.CSSProperties\n            }\n            side={side}\n          >\n            <SheetHeader className=\"sr-only\">\n              <SheetTitle>Sidebar</SheetTitle>\n              <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n            </SheetHeader>\n            <div className=\"flex h-full w-full flex-col\">{children}</div>\n          </SheetContent>\n        </Sheet>\n      )\n    }\n\n    return (\n      <div\n        ref={ref}\n        className=\"group peer hidden text-sidebar-foreground md:block\"\n        data-state={state}\n        data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n        data-variant={variant}\n        data-side={side}\n      >\n        {/* This is what handles the sidebar gap on desktop */}\n        <div\n          className={cn(\n            \"relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear\",\n            \"group-data-[collapsible=offcanvas]:w-0\",\n            \"group-data-[side=right]:rotate-180\",\n            variant === \"floating\" || variant === \"inset\"\n              ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon]\"\n          )}\n        />\n        <div\n          className={cn(\n            \"fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex\",\n            side === \"left\"\n              ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n              : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n            // Adjust the padding for floating and inset variants.\n            variant === \"floating\" || variant === \"inset\"\n              ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n            className\n          )}\n          {...props}\n        >\n          <div\n            data-sidebar=\"sidebar\"\n            className=\"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow\"\n          >\n            {children}\n          </div>\n        </div>\n      </div>\n    )\n  }\n)\nSidebar.displayName = \"Sidebar\"\n\nconst SidebarTrigger = React.forwardRef<\n  React.ElementRef<typeof Button>,\n  React.ComponentProps<typeof Button>\n>(({ className, onClick, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      ref={ref}\n      data-sidebar=\"trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeft />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n})\nSidebarTrigger.displayName = \"SidebarTrigger\"\n\nconst SidebarRail = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\">\n>(({ className, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <button\n      ref={ref}\n      data-sidebar=\"rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex\",\n        \"[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarRail.displayName = \"SidebarRail\"\n\nconst SidebarInset = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"main\">\n>(({ className, ...props }, ref) => {\n  return (\n    <main\n      ref={ref}\n      className={cn(\n        \"relative flex w-full flex-1 flex-col bg-background\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInset.displayName = \"SidebarInset\"\n\nconst SidebarInput = React.forwardRef<\n  React.ElementRef<typeof Input>,\n  React.ComponentProps<typeof Input>\n>(({ className, ...props }, ref) => {\n  return (\n    <Input\n      ref={ref}\n      data-sidebar=\"input\"\n      className={cn(\n        \"h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInput.displayName = \"SidebarInput\"\n\nconst SidebarHeader = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarHeader.displayName = \"SidebarHeader\"\n\nconst SidebarFooter = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarFooter.displayName = \"SidebarFooter\"\n\nconst SidebarSeparator = React.forwardRef<\n  React.ElementRef<typeof Separator>,\n  React.ComponentProps<typeof Separator>\n>(({ className, ...props }, ref) => {\n  return (\n    <Separator\n      ref={ref}\n      data-sidebar=\"separator\"\n      className={cn(\"mx-2 w-auto bg-sidebar-border\", className)}\n      {...props}\n    />\n  )\n})\nSidebarSeparator.displayName = \"SidebarSeparator\"\n\nconst SidebarContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarContent.displayName = \"SidebarContent\"\n\nconst SidebarGroup = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarGroup.displayName = \"SidebarGroup\"\n\nconst SidebarGroupLabel = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupLabel.displayName = \"SidebarGroupLabel\"\n\nconst SidebarGroupAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupAction.displayName = \"SidebarGroupAction\"\n\nconst SidebarGroupContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"group-content\"\n    className={cn(\"w-full text-sm\", className)}\n    {...props}\n  />\n))\nSidebarGroupContent.displayName = \"SidebarGroupContent\"\n\nconst SidebarMenu = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu\"\n    className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n    {...props}\n  />\n))\nSidebarMenu.displayName = \"SidebarMenu\"\n\nconst SidebarMenuItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    data-sidebar=\"menu-item\"\n    className={cn(\"group/menu-item relative\", className)}\n    {...props}\n  />\n))\nSidebarMenuItem.displayName = \"SidebarMenuItem\"\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:!p-0\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst SidebarMenuButton = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    isActive?: boolean\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>\n  } & VariantProps<typeof sidebarMenuButtonVariants>\n>(\n  (\n    {\n      asChild = false,\n      isActive = false,\n      variant = \"default\",\n      size = \"default\",\n      tooltip,\n      className,\n      ...props\n    },\n    ref\n  ) => {\n    const Comp = asChild ? Slot : \"button\"\n    const { isMobile, state } = useSidebar()\n\n    const button = (\n      <Comp\n        ref={ref}\n        data-sidebar=\"menu-button\"\n        data-size={size}\n        data-active={isActive}\n        className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n        {...props}\n      />\n    )\n\n    if (!tooltip) {\n      return button\n    }\n\n    if (typeof tooltip === \"string\") {\n      tooltip = {\n        children: tooltip,\n      }\n    }\n\n    return (\n      <Tooltip>\n        <TooltipTrigger asChild>{button}</TooltipTrigger>\n        <TooltipContent\n          side=\"right\"\n          align=\"center\"\n          hidden={state !== \"collapsed\" || isMobile}\n          {...tooltip}\n        />\n      </Tooltip>\n    )\n  }\n)\nSidebarMenuButton.displayName = \"SidebarMenuButton\"\n\nconst SidebarMenuAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    showOnHover?: boolean\n  }\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuAction.displayName = \"SidebarMenuAction\"\n\nconst SidebarMenuBadge = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"menu-badge\"\n    className={cn(\n      \"pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground\",\n      \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n      \"peer-data-[size=sm]/menu-button:top-1\",\n      \"peer-data-[size=default]/menu-button:top-1.5\",\n      \"peer-data-[size=lg]/menu-button:top-2.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuBadge.displayName = \"SidebarMenuBadge\"\n\nconst SidebarMenuSkeleton = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    showIcon?: boolean\n  }\n>(({ className, showIcon = false, ...props }, ref) => {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[--skeleton-width] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n})\nSidebarMenuSkeleton.displayName = \"SidebarMenuSkeleton\"\n\nconst SidebarMenuSub = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu-sub\"\n    className={cn(\n      \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuSub.displayName = \"SidebarMenuSub\"\n\nconst SidebarMenuSubItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ ...props }, ref) => <li ref={ref} {...props} />)\nSidebarMenuSubItem.displayName = \"SidebarMenuSubItem\"\n\nconst SidebarMenuSubButton = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentProps<\"a\"> & {\n    asChild?: boolean\n    size?: \"sm\" | \"md\"\n    isActive?: boolean\n  }\n>(({ asChild = false, size = \"md\", isActive, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuSubButton.displayName = \"SidebarMenuSubButton\"\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":23567},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"client/src/components/ui/use-toast.ts":{"content":"import * as React from \"react\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n  type ToastProps,\n} from \"@/components/ui/toast\"\nimport { cn } from \"@/lib/utils\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ninterface ToasterToast {\n  id: string;\n  title?: string;\n  description?: string;\n  action?: React.ReactNode;\n  open?: boolean;\n  variant?: 'default' | 'destructive';\n  onOpenChange?: (open: boolean) => void;\n}\n\ntype ToastActionType = 'ADD_TOAST' | 'UPDATE_TOAST' | 'DISMISS_TOAST' | 'REMOVE_TOAST';\n\nlet count = 0;\n\nfunction genId(): string {\n  count = (count + 1) % Number.MAX_VALUE;\n  return count.toString();\n}\n\ntype Action =\n  | {\n      type: 'ADD_TOAST';\n      toast: ToasterToast;\n    }\n  | {\n      type: 'UPDATE_TOAST';\n      toast: Partial<ToasterToast>;\n    }\n  | {\n      type: 'DISMISS_TOAST';\n      toastId?: string;\n    }\n  | {\n      type: 'REMOVE_TOAST';\n      toastId?: string;\n    };\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case 'ADD_TOAST': {\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      };\n    }\n\n    case 'UPDATE_TOAST': {\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      };\n    }\n\n    case 'DISMISS_TOAST': {\n      const { toastId } = action;\n\n      if (toastId) {\n        addToRemoveQueue(toastId);\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id);\n        });\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      };\n    }\n\n    case 'REMOVE_TOAST': {\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        };\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      };\n    }\n\n    default: {\n      return state;\n    }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport const Toaster = React.forwardRef<HTMLDivElement>(function Toaster(_, ref) {\n  const { toasts } = useToast();\n  \n  return React.createElement(ToastProvider, null,\n    toasts.map(({ id, title, description, action, ...props }) => \n      React.createElement(Toast, { key: id, ...props },\n        React.createElement(\"div\", { className: \"flex flex-col gap-1\" },\n          title && React.createElement(ToastTitle, null, title),\n          description && React.createElement(ToastDescription, null, description),\n        ),\n        action,\n        React.createElement(ToastClose, null)\n      )\n    ),\n    React.createElement(ToastViewport, null)\n  );\n});\nexport type { ToasterToast };\nexport { useToast, toast };\n","size_bytes":4535},"client/src/pages/admin/blog-posts.tsx":{"content":"import { useState } from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport { OptimizedImage } from \"@/components/ui/optimized-image\";\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport AdminSidebar from '@/components/admin/Sidebar';\nimport { SectionLoading } from '@/components/ui/loading';\nimport { adminApi } from '@/lib/api';\nimport { useToast } from '@/hooks/use-toast';\nimport { BlogPost } from '@/types/admin';\n\nexport default function AdminBlogPosts() {\n  const { toast } = useToast();\n  const [searchTerm, setSearchTerm] = useState('');\n\n  const {\n    data: blogPosts,\n    isLoading,\n    error,\n    refetch\n  } = useQuery<BlogPost[]>({\n    queryKey: ['admin', 'blog-posts'],\n    queryFn: () => adminApi.getBlogPosts(),\n  });\n\n  const filteredPosts = blogPosts?.filter(post => \n    post.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    post.excerpt.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    post.category.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen bg-neutral-50 flex items-center justify-center\">\n        <Card className=\"w-full max-w-md mx-4\">\n          <CardContent className=\"pt-6 text-center\">\n            <div className=\"w-16 h-16 bg-error/10 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <i className=\"fas fa-exclamation-triangle text-error text-2xl\"></i>\n            </div>\n            <h1 className=\"text-xl font-bold text-neutral-800 mb-2\">Error Loading Blog Posts</h1>\n            <p className=\"text-neutral-600 mb-4\">\n              {error instanceof Error ? error.message : 'Failed to load blog posts'}\n            </p>\n            <Button onClick={() => refetch()}>\n              Try Again\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-neutral-50\">\n      <div className=\"flex\">\n        <AdminSidebar />\n        \n        <div className=\"flex-1 overflow-auto\">\n          {/* Header */}\n          <header className=\"bg-white shadow-sm border-b border-neutral-200 px-6 py-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h2 className=\"text-2xl font-bold text-neutral-800\">Blog Posts</h2>\n                <p className=\"text-neutral-600\">Manage your blog content</p>\n              </div>\n              <Button>\n                <i className=\"fas fa-plus mr-2\"></i>\n                New Post\n              </Button>\n            </div>\n          </header>\n\n          {/* Content */}\n          <div className=\"p-6\">\n            <Card className=\"mb-6\">\n              <CardContent className=\"p-4\">\n                <div className=\"flex items-center space-x-4\">\n                  <Input\n                    placeholder=\"Search blog posts...\"\n                    value={searchTerm}\n                    onChange={(e) => setSearchTerm(e.target.value)}\n                    className=\"max-w-sm\"\n                  />\n                  <Button variant=\"outline\">\n                    <i className=\"fas fa-filter mr-2\"></i>\n                    Filter\n                  </Button>\n                </div>\n              </CardContent>\n            </Card>\n\n            {isLoading ? (\n              <SectionLoading message=\"Loading blog posts...\" />\n            ) : (\n              <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\n                {filteredPosts?.map((post) => (\n                  <Card key={post.id}>\n                    <CardHeader className=\"relative\">\n                      <OptimizedImage\n                        src={post.imageUrl}\n                        alt={post.title}\n                        className=\"w-full h-48 object-cover rounded-t-lg\"\n                      />\n                      <span className={`absolute top-2 right-2 px-2 py-1 rounded text-xs font-medium\n                        ${post.featured ? 'bg-primary/10 text-primary' : 'bg-neutral-100 text-neutral-600'}`}>\n                        {post.featured ? 'Featured' : 'Draft'}\n                      </span>\n                    </CardHeader>\n                    <CardContent className=\"p-4\">\n                      <h3 className=\"font-bold text-lg mb-2\">{post.title}</h3>\n                      <p className=\"text-sm text-neutral-600 mb-4\">{post.excerpt}</p>\n                      <div className=\"flex items-center justify-between\">\n                        <span className=\"text-xs text-neutral-500\">\n                          {new Date(post.publishedAt).toLocaleDateString()}\n                        </span>\n                        <div className=\"space-x-2\">\n                          <Button variant=\"ghost\" size=\"sm\">\n                            <i className=\"fas fa-edit\"></i>\n                          </Button>\n                          <Button variant=\"ghost\" size=\"sm\" className=\"text-error\">\n                            <i className=\"fas fa-trash\"></i>\n                          </Button>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":5352},"client/src/pages/admin/dashboard.tsx":{"content":"import { useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport AdminSidebar from \"@/components/admin/Sidebar\";\nimport StatsCards from \"@/components/admin/StatsCards\";\nimport TransactionTable from \"@/components/admin/TransactionTable\";\nimport { ErrorBoundary } from \"@/components/ErrorBoundary\";\nimport { useToast } from \"@/components/ui/use-toast\";\nimport { useAuth, useAuthenticatedUser } from \"@/lib/auth\";\nimport type { DashboardStats, Transaction } from \"@/types\";\nimport { useEffect, Suspense } from \"react\";\nimport { useLocation } from \"wouter\";\n\n// Loading skeleton component\nconst DashboardSkeleton = () => (\n  <div className=\"min-h-screen bg-neutral-50\">\n    <div className=\"flex\">\n      <AdminSidebar />\n      <div className=\"flex-1 p-6\">\n        <div className=\"animate-pulse space-y-6\">\n          <div className=\"h-8 bg-neutral-200 rounded w-1/3\"></div>\n          <div className=\"grid grid-cols-4 gap-6\">\n            {[...Array(4)].map((_, i) => (\n              <div key={i} className=\"h-32 bg-neutral-200 rounded\"></div>\n            ))}\n          </div>\n          <div className=\"h-96 bg-neutral-200 rounded\"></div>\n        </div>\n      </div>\n    </div>\n  </div>\n);\n\n\nconst fetchDashboardData = async (token: string): Promise<DashboardStats> => {\n  const response = await fetch('/api/admin/dashboard', {\n    headers: {\n      'Accept': 'application/json',\n      'Authorization': `Bearer ${token}`\n    }\n  });\n  \n  if (!response.ok) {\n    if (response.status === 401) {\n      throw new Error('Session expired. Please login again.');\n    }\n    const error = await response.text();\n    throw new Error(error || 'Failed to fetch dashboard data');\n  }\n  \n  return response.json();\n};\n\nconst AdminDashboard: React.FC = () => {\n  const token = useAuth((state) => state.token);\n  const { isAuthenticated, isLoading: authLoading } = useAuthenticatedUser();\n  const { toast } = useToast();\n  const [, setLocation] = useLocation();\n  const queryClient = useQueryClient();\n\n  // Check authentication\n  useEffect(() => {\n    if (!authLoading && !isAuthenticated) {\n      setLocation('/admin/login');\n    }\n  }, [isAuthenticated, authLoading, setLocation]);\n\n  const {\n    data: dashboardData,\n    isLoading,\n    error\n  } = useQuery<DashboardStats, Error>({\n    queryKey: ['admin', 'dashboard'],\n    queryFn: () => {\n      if (!token) {\n        throw new Error('Session expired. Please login again.');\n      }\n      return fetchDashboardData(token);\n    },\n    enabled: !!token,\n    staleTime: 30000, // Consider data fresh for 30 seconds\n    retry: 2,\n    refetchInterval: 60000, // Refetch every minute\n    refetchOnWindowFocus: true,\n    gcTime: 1800000 // Cache for 30 minutes\n  });\n\n  // Handle errors\n  useEffect(() => {\n    if (error) {\n      toast({\n        title: \"Error\",\n        description: error instanceof Error ? error.message : \"Failed to fetch dashboard data\",\n        variant: \"destructive\"\n      });\n      if (error instanceof Error && error.message.includes('Session expired')) {\n        setLocation('/admin/login');\n      }\n    }\n  }, [error, toast, setLocation]);\n\n  useEffect(() => {\n    if (dashboardData) {\n      queryClient.invalidateQueries({ queryKey: ['admin', 'transactions'] });\n    }\n  }, [dashboardData, queryClient]);\n\n  const { data: transactions } = useQuery<Transaction[], Error>({\n    queryKey: ['admin', 'transactions'],\n    queryFn: async () => {\n      const response = await fetch('/api/admin/transactions', {\n        headers: {\n          'Accept': 'application/json',\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      if (!response.ok) {\n        const error = await response.text();\n        throw new Error(error || 'Failed to fetch transactions');\n      }\n      return response.json();\n    },\n    enabled: !!token\n  });\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen bg-neutral-50 flex items-center justify-center\">\n        <Card className=\"w-full max-w-md mx-4\">\n          <CardContent className=\"pt-6 text-center\">\n            <div className=\"w-16 h-16 bg-error/10 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <i className=\"fas fa-exclamation-triangle text-error text-2xl\"></i>\n            </div>\n            <h1 className=\"text-xl font-bold text-neutral-800 mb-2\">Error Loading Dashboard</h1>\n            <p className=\"text-neutral-600 mb-4\">\n              {error instanceof Error ? error.message : 'An error occurred while loading the dashboard'}\n            </p>\n            <Button onClick={() => window.location.reload()}>\n              Retry\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-neutral-50\">\n        <div className=\"flex\">\n          <AdminSidebar />\n          <div className=\"flex-1 p-6\">\n            <div className=\"animate-pulse space-y-6\">\n              <div className=\"h-8 bg-neutral-200 rounded w-1/3\"></div>\n              <div className=\"grid grid-cols-4 gap-6\">\n                {[...Array(4)].map((_, i) => (\n                  <div key={i} className=\"h-32 bg-neutral-200 rounded\"></div>\n                ))}\n              </div>\n              <div className=\"h-96 bg-neutral-200 rounded\"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-neutral-50\">\n      <div className=\"flex\">\n        <AdminSidebar />\n        \n        <div className=\"flex-1 overflow-auto\">\n          {/* Header */}\n          <header className=\"bg-white shadow-sm border-b border-neutral-200 px-6 py-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h2 className=\"text-2xl font-bold text-neutral-800\">Payment Dashboard</h2>\n                <p className=\"text-neutral-600\">Manage donations and event registrations</p>\n              </div>\n              <div className=\"flex items-center space-x-4\">\n                <div className=\"flex items-center space-x-2\">\n                  <div className=\"w-3 h-3 bg-success rounded-full animate-pulse\"></div>\n                  <span className=\"text-sm text-neutral-600\">Real-time Updates</span>\n                </div>\n                <div className=\"flex items-center space-x-3\">\n                  <div className=\"w-8 h-8 bg-primary rounded-full flex items-center justify-center\">\n                    <i className=\"fas fa-user text-white text-sm\"></i>\n                  </div>\n                  <span className=\"text-sm font-medium text-neutral-800\">Admin</span>\n                </div>\n              </div>\n            </div>\n          </header>\n\n          {/* Dashboard Content */}\n          <div className=\"p-6\">\n            {dashboardData ? (\n              <>\n                <StatsCards stats={dashboardData.stats} />\n                {dashboardData.recentTransactions && dashboardData.recentTransactions.length > 0 ? (\n                  <TransactionTable transactions={dashboardData.recentTransactions} />\n                ) : (\n                  <div className=\"text-center text-neutral-500 mt-8\">No transactions found.</div>\n                )}\n              </>\n            ) : (\n              <div className=\"text-center text-neutral-500\">No dashboard data available.</div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AdminDashboard;\n","size_bytes":7498},"client/src/pages/admin/donations.tsx":{"content":"import { useState } from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table';\nimport AdminSidebar from '@/components/admin/Sidebar';\nimport { SectionLoading } from '@/components/ui/loading';\nimport { adminApi } from '@/lib/api';\nimport { Donation } from '@/types/admin';\nimport { useToast } from '@/hooks/use-toast';\n\nexport default function AdminDonations() {\n  const { toast } = useToast();\n  const [searchTerm, setSearchTerm] = useState('');\n  const [statusFilter, setStatusFilter] = useState('all');\n  const [dateFilter, setDateFilter] = useState('all');\n\n  const {\n    data: donations,\n    isLoading,\n    error,\n    refetch\n  } = useQuery<Donation[]>({\n    queryKey: ['admin', 'donations'],\n    queryFn: () => adminApi.getDonations(),\n  });\n\n    const filteredDonations = donations?.filter(donation => {\n    const matchesSearch = (donation.transactionId?.toString() || '').toLowerCase().includes(searchTerm.toLowerCase()) ||\n      (donation.message?.toString() || '').toLowerCase().includes(searchTerm.toLowerCase());\n    \n    const matchesStatus = statusFilter === 'all' || donation.status === statusFilter;\n    \n    let matchesDate = true;\n    if (dateFilter !== 'all') {\n      const donationDate = new Date(donation.createdAt);\n      const now = new Date();\n      switch (dateFilter) {\n        case 'today':\n          matchesDate = donationDate.toDateString() === now.toDateString();\n          break;\n        case 'week':\n          const weekAgo = new Date(now.setDate(now.getDate() - 7));\n          matchesDate = donationDate >= weekAgo;\n          break;\n        case 'month':\n          const monthAgo = new Date(now.setMonth(now.getMonth() - 1));\n          matchesDate = donationDate >= monthAgo;\n          break;\n      }\n    }\n    \n    return matchesSearch && matchesStatus && matchesDate;\n  });  const totalAmount = filteredDonations?.reduce((sum, donation) => sum + donation.amount, 0) || 0;\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen bg-neutral-50 flex items-center justify-center\">\n        <Card className=\"w-full max-w-md mx-4\">\n          <CardContent className=\"pt-6 text-center\">\n            <div className=\"w-16 h-16 bg-error/10 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <i className=\"fas fa-exclamation-triangle text-error text-2xl\"></i>\n            </div>\n            <h1 className=\"text-xl font-bold text-neutral-800 mb-2\">Error Loading Donations</h1>\n            <p className=\"text-neutral-600 mb-4\">\n              {error instanceof Error ? error.message : 'Failed to load donations'}\n            </p>\n            <Button onClick={() => refetch()}>\n              Try Again\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-neutral-50\">\n      <div className=\"flex\">\n        <AdminSidebar />\n        \n        <div className=\"flex-1 overflow-auto\">\n          {/* Header */}\n          <header className=\"bg-white shadow-sm border-b border-neutral-200 px-6 py-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h2 className=\"text-2xl font-bold text-neutral-800\">Donations</h2>\n                <p className=\"text-neutral-600\">Track and manage donations</p>\n              </div>\n              <Button>\n                <i className=\"fas fa-download mr-2\"></i>\n                Export CSV\n              </Button>\n            </div>\n          </header>\n\n          {/* Content */}\n          <div className=\"p-6\">\n            {/* Stats Cards */}\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6\">\n              <Card>\n                <CardContent className=\"pt-6\">\n                  <h3 className=\"text-sm font-medium text-neutral-600 mb-2\">Total Donations</h3>\n                  <p className=\"text-2xl font-bold text-primary\">\n                    KES {totalAmount.toLocaleString()}\n                  </p>\n                </CardContent>\n              </Card>\n              <Card>\n                <CardContent className=\"pt-6\">\n                  <h3 className=\"text-sm font-medium text-neutral-600 mb-2\">Successful Donations</h3>\n                  <p className=\"text-2xl font-bold text-success\">\n                    {filteredDonations?.filter(d => d.status === 'completed').length || 0}\n                  </p>\n                </CardContent>\n              </Card>\n              <Card>\n                <CardContent className=\"pt-6\">\n                  <h3 className=\"text-sm font-medium text-neutral-600 mb-2\">Pending Donations</h3>\n                  <p className=\"text-2xl font-bold text-warning\">\n                    {filteredDonations?.filter(d => d.status === 'pending').length || 0}\n                  </p>\n                </CardContent>\n              </Card>\n            </div>\n\n            {/* Filters */}\n            <Card className=\"mb-6\">\n              <CardContent className=\"p-4\">\n                <div className=\"flex items-center space-x-4\">\n                  <Input\n                    placeholder=\"Search donations...\"\n                    value={searchTerm}\n                    onChange={(e) => setSearchTerm(e.target.value)}\n                    className=\"max-w-sm\"\n                  />\n                  <select\n                    value={statusFilter}\n                    onChange={(e) => setStatusFilter(e.target.value)}\n                    className=\"px-3 py-2 rounded-md border border-input bg-background\"\n                  >\n                    <option value=\"all\">All Status</option>\n                    <option value=\"completed\">Completed</option>\n                    <option value=\"pending\">Pending</option>\n                    <option value=\"failed\">Failed</option>\n                  </select>\n                  <select\n                    value={dateFilter}\n                    onChange={(e) => setDateFilter(e.target.value)}\n                    className=\"px-3 py-2 rounded-md border border-input bg-background\"\n                  >\n                    <option value=\"all\">All Time</option>\n                    <option value=\"today\">Today</option>\n                    <option value=\"week\">This Week</option>\n                    <option value=\"month\">This Month</option>\n                  </select>\n                </div>\n              </CardContent>\n            </Card>\n\n            {isLoading ? (\n              <SectionLoading message=\"Loading donations...\" />\n            ) : (\n              <Card>\n                <CardContent className=\"p-0\">\n                  <Table>\n                    <TableHeader>\n                      <TableRow>\n                        <TableHead>Donor</TableHead>\n                        <TableHead>Amount</TableHead>\n                        <TableHead>Cause</TableHead>\n                        <TableHead>Status</TableHead>\n                        <TableHead>Date</TableHead>\n                        <TableHead className=\"text-right\">Actions</TableHead>\n                      </TableRow>\n                    </TableHeader>\n                    <TableBody>\n                      {filteredDonations?.map((donation) => (\n                        <TableRow key={donation.id}>\n                          <TableCell>\n                            <div>\n                              <div className=\"font-medium\">{donation.anonymous ? 'Anonymous Donor' : `User #${donation.userId}`}</div>\n                              <div className=\"text-sm text-neutral-600\">{donation.transactionId}</div>\n                            </div>\n                          </TableCell>\n                          <TableCell>KES {donation.amount.toLocaleString()}</TableCell>\n                          <TableCell>{donation.causeId ? `Cause #${donation.causeId}` : 'General'}</TableCell>\n                          <TableCell>\n                            <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium\n                              ${donation.status === 'completed' ? 'bg-success/10 text-success' :\n                                donation.status === 'pending' ? 'bg-warning/10 text-warning' :\n                                'bg-error/10 text-error'}`}>\n                              {donation.status}\n                            </span>\n                          </TableCell>\n                          <TableCell>{new Date(donation.createdAt).toLocaleString()}</TableCell>\n                          <TableCell className=\"text-right\">\n                            <Button variant=\"ghost\" size=\"sm\" className=\"mr-2\">\n                              <i className=\"fas fa-eye\"></i>\n                            </Button>\n                            <Button variant=\"ghost\" size=\"sm\">\n                              <i className=\"fas fa-receipt\"></i>\n                            </Button>\n                          </TableCell>\n                        </TableRow>\n                      ))}\n                    </TableBody>\n                  </Table>\n                </CardContent>\n              </Card>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":9333},"client/src/pages/admin/event-registrations.tsx":{"content":"import { useQuery } from '@tanstack/react-query';\nimport ExcelJS from 'exceljs';\nimport { saveAs } from 'file-saver';\n\nimport { adminApi } from '@/lib/api';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { SectionLoading } from '@/components/ui/loading';\nimport AdminSidebar from '@/components/admin/Sidebar';\nimport { Button } from '@/components/ui/button';\n\nexport default function AdminEventRegistrations() {\n  const { data, isLoading, error, refetch } = useQuery({\n    queryKey: ['admin', 'event-registrations'],\n    queryFn: () => adminApi.getEventRegistrations(),\n    refetchInterval: 5000, // Poll every 5 seconds for real-time updates\n  });\n\n  const handleDownload = async () => {\n\n\n    if (!data) return;\n\n    const workbook = new ExcelJS.Workbook();\n    const worksheet = workbook.addWorksheet('Event Registrations');\n\n    worksheet.columns = [\n      { header: 'ID', key: 'id', width: 10 },\n      { header: 'Event ID', key: 'eventId', width: 10 },\n      { header: 'Type', key: 'registrationType', width: 15 },\n      { header: 'Name/Organization', key: 'nameOrg', width: 30 },\n      { header: 'Email', key: 'email', width: 30 },\n      { header: 'Phone', key: 'phone', width: 20 },\n      { header: 'Payment Status', key: 'paymentStatus', width: 15 },\n      { header: 'Amount', key: 'amount', width: 15 },\n      { header: 'Registration Date', key: 'createdAt', width: 25 },\n    ];\n\n    const formattedData = data.map((reg: any) => ({\n      id: reg.id,\n      eventId: reg.eventId,\n      registrationType: reg.registrationType,\n      nameOrg:\n        reg.registrationType === 'individual'\n          ? `${reg.surname} ${reg.firstName} ${reg.middleName}`\n          : reg.organizationName,\n      email: reg.email,\n      phone: reg.phone,\n      paymentStatus: reg.paymentStatus,\n      amount: reg.amount,\n      createdAt: new Date(reg.createdAt).toLocaleString(),\n    }));\n\n    worksheet.addRows(formattedData);\n\n    worksheet.getRow(1).eachCell((cell) => {\n      cell.font = { bold: true };\n    });\n\n    const buffer = await workbook.xlsx.writeBuffer();\n    saveAs(new Blob([buffer]), 'event-registrations.xlsx');\n  };\n\n\n  if (isLoading) {\n    return (\n      <div className=\"flex min-h-screen bg-neutral-50\">\n        <AdminSidebar />\n        <div className=\"flex-1 p-6\">\n          <SectionLoading message=\"Loading registrations...\" />\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"flex min-h-screen bg-neutral-50\">\n        <AdminSidebar />\n        <div className=\"flex-1 p-6\">\n          <Card className=\"max-w-lg mx-auto mt-10\">\n            <CardContent className=\"pt-6 text-center\">\n              <div className=\"w-16 h-16 bg-error/10 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <i className=\"fas fa-exclamation-triangle text-error text-2xl\"></i>\n              </div>\n              <h1 className=\"text-xl font-bold text-neutral-800 mb-2\">Error Loading Registrations</h1>\n              <p className=\"text-neutral-600 mb-4\">\n                {error instanceof Error ? error.message : 'Failed to load registrations'}\n              </p>\n              <Button onClick={() => refetch()}>Try Again</Button>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex min-h-screen bg-neutral-50\">\n      <AdminSidebar />\n      <div className=\"flex-1 p-6\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-neutral-800\">Event Registrations</h2>\n            <p className=\"text-neutral-500\">View and manage all event registrations.</p>\n          </div>\n          <Button onClick={handleDownload} disabled={!data || data.length === 0}>\n            <i className=\"fas fa-download mr-2\"></i>\n            Download as XLSX\n          </Button>\n        </div>\n        <Card>\n          <CardContent className=\"p-0\">\n            <div className=\"overflow-x-auto\">\n              <table className=\"min-w-full bg-white\">\n                <thead className=\"bg-neutral-50\">\n                  <tr>\n                    <th className=\"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider\">ID</th>\n                    <th className=\"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider\">Event ID</th>\n                    <th className=\"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider\">Type</th>\n                    <th className=\"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider\">Name/Org</th>\n                    <th className=\"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider\">Email</th>\n                    <th className=\"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider\">Phone</th>\n                    <th className=\"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider\">Status</th>\n                    <th className=\"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider\">Amount</th>\n                    <th className=\"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider\">Created</th>\n                  </tr>\n                </thead>\n                <tbody className=\"divide-y divide-neutral-200\">\n                  {data?.length === 0 ? (\n                    <tr>\n                      <td colSpan={9} className=\"text-center py-10 text-neutral-500\">\n                        <i className=\"fas fa-list-alt text-4xl mb-2\"></i>\n                        <p>No registrations found.</p>\n                      </td>\n                    </tr>\n                  ) : (\n                    data?.map((reg: any) => (\n                      <tr key={reg.id} className=\"hover:bg-neutral-50\">\n                        <td className=\"px-4 py-3 whitespace-nowrap\">{reg.id}</td>\n                        <td className=\"px-4 py-3 whitespace-nowrap\">{reg.eventId}</td>\n                        <td className=\"px-4 py-3 whitespace-nowrap\">{reg.registrationType}</td>\n                        <td className=\"px-4 py-3 whitespace-nowrap\">\n                          {reg.registrationType === 'individual'\n                            ? `${reg.surname} ${reg.firstName} ${reg.middleName}`\n                            : reg.organizationName}\n                        </td>\n                        <td className=\"px-4 py-3 whitespace-nowrap\">{reg.email}</td>\n                        <td className=\"px-4 py-3 whitespace-nowrap\">{reg.phone}</td>\n                        <td className=\"px-4 py-3 whitespace-nowrap\">{reg.paymentStatus}</td>\n                        <td className=\"px-4 py-3 whitespace-nowrap\">KES {reg.amount}</td>\n                        <td className=\"px-4 py-3 whitespace-nowrap\">{new Date(reg.createdAt).toLocaleString()}</td>\n                      </tr>\n                    ))\n                  )}\n                </tbody>\n              </table>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n","size_bytes":7109},"client/src/pages/admin/events.tsx":{"content":"import { useState } from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { OptimizedImage } from \"@/components/ui/optimized-image\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport AdminSidebar from '@/components/admin/Sidebar';\nimport { SectionLoading } from '@/components/ui/loading';\nimport { adminApi } from '@/lib/api';\nimport { Event } from '@/types/admin';\nimport { useToast } from '@/hooks/use-toast';\n\nexport default function AdminEvents() {\n  const { toast } = useToast();\n  const [searchTerm, setSearchTerm] = useState('');\n  const [statusFilter, setStatusFilter] = useState('all');\n\n  const {\n    data: events,\n    isLoading,\n    error,\n    refetch\n  } = useQuery<Event[]>({\n    queryKey: ['admin', 'events'],\n    queryFn: () => adminApi.getEvents(),\n  });\n\n  const filteredEvents = events?.filter(event => {\n    if (!event) return false;\n    \n    const searchLower = searchTerm.toLowerCase();\n    const matchesSearch = \n      (event.name?.toLowerCase() || '').includes(searchLower) ||\n      (event.description?.toLowerCase() || '').includes(searchLower) ||\n      (event.location?.toLowerCase() || '').includes(searchLower);\n    \n    const matchesStatus = statusFilter === 'all' || (statusFilter === 'active' ? event.active : !event.active);\n    \n    return matchesSearch && matchesStatus;\n  });\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen bg-neutral-50 flex items-center justify-center\">\n        <Card className=\"w-full max-w-md mx-4\">\n          <CardContent className=\"pt-6 text-center\">\n            <div className=\"w-16 h-16 bg-error/10 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <i className=\"fas fa-exclamation-triangle text-error text-2xl\"></i>\n            </div>\n            <h1 className=\"text-xl font-bold text-neutral-800 mb-2\">Error Loading Events</h1>\n            <p className=\"text-neutral-600 mb-4\">\n              {error instanceof Error ? error.message : 'Failed to load events'}\n            </p>\n            <Button onClick={() => refetch()}>\n              Try Again\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-neutral-50\">\n      <div className=\"flex\">\n        <AdminSidebar />\n        \n        <div className=\"flex-1 overflow-auto\">\n          {/* Header */}\n          <header className=\"bg-white shadow-sm border-b border-neutral-200 px-6 py-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h2 className=\"text-2xl font-bold text-neutral-800\">Events</h2>\n                <p className=\"text-neutral-600\">Manage your events and registrations</p>\n              </div>\n              <Button>\n                <i className=\"fas fa-plus mr-2\"></i>\n                New Event\n              </Button>\n            </div>\n          </header>\n\n          {/* Content */}\n          <div className=\"p-6\">\n            <Card className=\"mb-6\">\n              <CardContent className=\"p-4\">\n                <div className=\"flex items-center space-x-4\">\n                  <Input\n                    placeholder=\"Search events...\"\n                    value={searchTerm}\n                    onChange={(e) => setSearchTerm(e.target.value)}\n                    className=\"max-w-sm\"\n                  />\n                  <Select value={statusFilter} onValueChange={setStatusFilter}>\n                    <SelectTrigger className=\"w-[180px]\">\n                      <SelectValue placeholder=\"Filter by status\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"all\">All Status</SelectItem>\n                      <SelectItem value=\"active\">Active</SelectItem>\n                      <SelectItem value=\"inactive\">Inactive</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n              </CardContent>\n            </Card>\n\n            {isLoading ? (\n              <SectionLoading message=\"Loading events...\" />\n            ) : (\n              <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\n                {filteredEvents?.map((event) => (\n                  <Card key={event.id} className=\"overflow-hidden\">\n                    <div className=\"relative h-48\">\n                          <OptimizedImage\n                            src={event.imageUrl}\n                        alt={event.name}\n                        className=\"w-full h-full object-cover\"\n                      />\n                      <div className=\"absolute top-2 right-2\">\n                        <span className={`px-2 py-1 rounded text-xs font-medium ${\n                          event.active ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-600'\n                        }`}>\n                           {event.active ? 'Active' : 'Inactive'}\n                         </span>\n                       </div>\n                     </div>\n                    \n                    <CardContent className=\"p-4\">\n                  <h3 className=\"font-bold text-lg mb-2\">{event.name}</h3>\n                      <p className=\"text-sm text-neutral-600 mb-4 line-clamp-2\">\n                        {event.description}\n                      </p>\n                      \n                      <div className=\"space-y-2 text-sm text-neutral-600 mb-4\">\n                        <div className=\"flex items-center\">\n                          <i className=\"fas fa-calendar-alt w-5\"></i>\n                          <span>{new Date(event.date).toLocaleDateString()}</span>\n                        </div>\n                        <div className=\"flex items-center\">\n                          <i className=\"fas fa-map-marker-alt w-5\"></i>\n                          <span>{event.location}</span>\n                        </div>\n                        <div className=\"flex items-center\">\n                          <i className=\"fas fa-users w-5\"></i>\n                          <span>{event.registrations || 0} / {event.maxParticipants || 'Unlimited'} registered</span>\n                        </div>\n                      </div>\n\n                      <div className=\"flex justify-end space-x-2\">\n                        <Button variant=\"ghost\" size=\"sm\">\n                          <i className=\"fas fa-edit\"></i>\n                        </Button>\n                        <Button variant=\"ghost\" size=\"sm\" className=\"text-error\">\n                          <i className=\"fas fa-trash\"></i>\n                        </Button>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":6948},"client/src/pages/admin/login.tsx":{"content":"import { useState } from 'react';\nimport { useLocation, Link } from 'wouter';\nimport { useToast } from '@/hooks/use-toast';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { ArrowLeft } from 'lucide-react';\nimport { login } from '@/lib/auth';\n\nexport default function AdminLogin() {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const [isLoading, setIsLoading] = useState(false);\n  const [formData, setFormData] = useState({\n    username: '',\n    password: '',\n  });\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n\n    try {\n      await login(formData.username, formData.password);\n      toast({\n        title: 'Login Successful',\n        description: 'Welcome to the admin dashboard',\n      });\n      setLocation('/admin/dashboard');\n    } catch (error) {\n      toast({\n        title: 'Login Failed',\n        description: 'Invalid username or password',\n        variant: 'destructive',\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-neutral-50 flex items-center justify-center\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardHeader className=\"text-center\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <Link href=\"/\">\n              <Button variant=\"ghost\" size=\"sm\">\n                <ArrowLeft className=\"w-4 h-4 mr-2\" />\n                Back to Site\n              </Button>\n            </Link>\n          </div>\n          <CardTitle className=\"text-2xl font-bold\">Admin Login</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Input\n                type=\"text\"\n                placeholder=\"Username\"\n                value={formData.username}\n                onChange={(e) =>\n                  setFormData((prev) => ({ ...prev, username: e.target.value }))\n                }\n                required\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Input\n                type=\"password\"\n                placeholder=\"Password\"\n                value={formData.password}\n                onChange={(e) =>\n                  setFormData((prev) => ({ ...prev, password: e.target.value }))\n                }\n                required\n              />\n            </div>\n            <Button\n              type=\"submit\"\n              className=\"w-full\"\n              disabled={isLoading}\n            >\n              {isLoading ? 'Logging in...' : 'Login'}\n            </Button>\n          </form>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":2839},"client/src/pages/admin/media.tsx":{"content":"import { useState } from 'react';\nimport { useQuery, useMutation } from '@tanstack/react-query';\nimport {\n  Card,\n  CardContent,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { OptimizedImage } from \"@/components/ui/optimized-image\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\nimport AdminSidebar from '@/components/admin/Sidebar';\nimport { SectionLoading } from '@/components/ui/loading';\nimport { useToast } from '@/hooks/use-toast';\nimport { adminApi } from '@/lib/api';\n\ninterface MediaItem {\n  id: number;\n  url: string;\n  filename: string;\n  type: 'image' | 'document' | 'video';\n  size: number;\n  uploadedAt: string;\n  dimensions?: {\n    width: number;\n    height: number;\n  };\n}\n\nexport default function AdminMedia() {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [fileType, setFileType] = useState<'all' | 'image' | 'document' | 'video'>('all');\n  const { toast } = useToast();\n\n  const { data: media, isLoading } = useQuery<MediaItem[]>({\n    queryKey: ['admin', 'media'],\n    queryFn: () => adminApi.getMedia(),\n  });\n\n  const uploadMutation = useMutation({\n    mutationFn: (file: File) => adminApi.uploadMedia(file),\n    onSuccess: () => {\n      toast({\n        title: 'Upload Successful',\n        description: 'Your file has been uploaded.',\n      });\n    },\n    onError: (error) => {\n      toast({\n        title: 'Upload Failed',\n        description: error instanceof Error ? error.message : 'Failed to upload file',\n        variant: 'destructive',\n      });\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: (id: number) => adminApi.deleteMedia(id),\n    onSuccess: () => {\n      toast({\n        title: 'Delete Successful',\n        description: 'The file has been deleted.',\n      });\n    },\n    onError: (error) => {\n      toast({\n        title: 'Delete Failed',\n        description: error instanceof Error ? error.message : 'Failed to delete file',\n        variant: 'destructive',\n      });\n    },\n  });\n\n  const handleFileUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      uploadMutation.mutate(file);\n    }\n  };\n\n  const handleDelete = (id: number) => {\n    if (window.confirm('Are you sure you want to delete this file?')) {\n      deleteMutation.mutate(id);\n    }\n  };\n\n  const filteredMedia = media?.filter((item) => {\n    const matchesSearch = item.filename.toLowerCase().includes(searchTerm.toLowerCase());\n    const matchesType = fileType === 'all' || item.type === fileType;\n    return matchesSearch && matchesType;\n  });\n\n  const formatFileSize = (bytes: number) => {\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    if (bytes === 0) return '0 Bytes';\n    const i = Math.floor(Math.log(bytes) / Math.log(1024));\n    return `${(bytes / Math.pow(1024, i)).toFixed(2)} ${sizes[i]}`;\n  };\n\n  return (\n    <div className=\"min-h-screen bg-neutral-50\">\n      <div className=\"flex\">\n        <AdminSidebar />\n        \n        <div className=\"flex-1 overflow-auto\">\n          <header className=\"bg-white shadow-sm border-b border-neutral-200 px-6 py-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h2 className=\"text-2xl font-bold text-neutral-800\">Media Library</h2>\n                <p className=\"text-neutral-600\">Manage your media files</p>\n              </div>\n              <div>\n                <Input\n                  type=\"file\"\n                  className=\"hidden\"\n                  id=\"file-upload\"\n                  onChange={handleFileUpload}\n                  multiple\n                />\n                <Button asChild>\n                  <label htmlFor=\"file-upload\" className=\"cursor-pointer\">\n                    <i className=\"fas fa-upload mr-2\"></i>\n                    Upload Files\n                  </label>\n                </Button>\n              </div>\n            </div>\n          </header>\n\n          <div className=\"p-6\">\n            <Card className=\"mb-6\">\n              <CardContent className=\"p-4\">\n                <div className=\"flex items-center space-x-4\">\n                  <Input\n                    placeholder=\"Search files...\"\n                    value={searchTerm}\n                    onChange={(e) => setSearchTerm(e.target.value)}\n                    className=\"max-w-sm\"\n                  />\n                  <select\n                    value={fileType}\n                    onChange={(e) => setFileType(e.target.value as any)}\n                    className=\"px-3 py-2 rounded-md border border-input bg-background\"\n                  >\n                    <option value=\"all\">All Files</option>\n                    <option value=\"image\">Images</option>\n                    <option value=\"document\">Documents</option>\n                    <option value=\"video\">Videos</option>\n                  </select>\n                </div>\n              </CardContent>\n            </Card>\n\n            {isLoading ? (\n              <SectionLoading message=\"Loading media...\" />\n            ) : (\n              <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4\">\n                {filteredMedia?.map((item) => (\n                  <Card key={item.id} className=\"overflow-hidden\">\n                    <CardContent className=\"p-0\">\n                      {item.type === 'image' ? (\n                        <div className=\"aspect-video relative group\">\n                          <OptimizedImage\n                            src={item.url}\n                            alt={item.filename}\n                            className=\"w-full h-full object-cover\"\n                            loadingClassName=\"animate-pulse bg-gray-200\"\n                          />\n                          <div className=\"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center space-x-2\">\n                            <Button\n                              size=\"sm\"\n                              variant=\"secondary\"\n                              onClick={() => window.open(item.url, '_blank')}\n                            >\n                              <i className=\"fas fa-eye\"></i>\n                            </Button>\n                            <Button\n                              size=\"sm\"\n                              variant=\"secondary\"\n                              onClick={() => navigator.clipboard.writeText(item.url)}\n                            >\n                              <i className=\"fas fa-link\"></i>\n                            </Button>\n                            <Button\n                              size=\"sm\"\n                              variant=\"destructive\"\n                              onClick={() => handleDelete(item.id)}\n                            >\n                              <i className=\"fas fa-trash\"></i>\n                            </Button>\n                          </div>\n                        </div>\n                      ) : (\n                        <div className=\"p-4\">\n                          <div className=\"flex items-center space-x-4\">\n                            <i className={`fas fa-${item.type === 'document' ? 'file' : 'video'} text-2xl`}></i>\n                            <div className=\"flex-1 min-w-0\">\n                              <p className=\"text-sm font-medium text-neutral-900 truncate\">\n                                {item.filename}\n                              </p>\n                              <p className=\"text-sm text-neutral-500\">\n                                {formatFileSize(item.size)}\n                              </p>\n                            </div>\n                            <DropdownMenu>\n                              <DropdownMenuTrigger asChild>\n                                <Button variant=\"ghost\" size=\"sm\">\n                                  <i className=\"fas fa-ellipsis-v\"></i>\n                                </Button>\n                              </DropdownMenuTrigger>\n                              <DropdownMenuContent align=\"end\">\n                                <DropdownMenuLabel>Actions</DropdownMenuLabel>\n                                <DropdownMenuItem onClick={() => window.open(item.url, '_blank')}>\n                                  <i className=\"fas fa-eye mr-2\"></i> View\n                                </DropdownMenuItem>\n                                <DropdownMenuItem onClick={() => navigator.clipboard.writeText(item.url)}>\n                                  <i className=\"fas fa-link mr-2\"></i> Copy Link\n                                </DropdownMenuItem>\n                                <DropdownMenuSeparator />\n                                <DropdownMenuItem\n                                  className=\"text-error\"\n                                  onClick={() => handleDelete(item.id)}\n                                >\n                                  <i className=\"fas fa-trash mr-2\"></i> Delete\n                                </DropdownMenuItem>\n                              </DropdownMenuContent>\n                            </DropdownMenu>\n                          </div>\n                        </div>\n                      )}\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":9570},"client/src/pages/admin/payments.tsx":{"content":"import { useQuery } from '@tanstack/react-query';\nimport AdminSidebar from '@/components/admin/Sidebar';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { useState } from 'react';\nimport { DateRange } from 'react-day-picker';\nimport { DateRangePicker } from '@/components/ui/date-range-picker';\nimport ExcelJS from 'exceljs';\nimport { saveAs } from 'file-saver';\n\n\ninterface Payment {\n  id: string;\n  orderId?: string;\n  transactionId?: string;\n  amount: number;\n  status: string;\n  createdAt: string;\n  gateway: 'paypal' | 'mpesa';\n  payer?: string;\n}\n\nexport default function AdminPayments() {\n  const [gateway, setGateway] = useState<'paypal' | 'mpesa'>('paypal');\n  const [dateRange, setDateRange] = useState<DateRange | undefined>();\n\n  // Fetch PayPal transactions\n  const { data: paypalPayments, isLoading: loadingPaypal, error: errorPaypal, refetch: refetchPaypal } = useQuery<Payment[]>({\n    queryKey: ['admin', 'payments', 'paypal', dateRange],\n    queryFn: async () => {\n      const params = new URLSearchParams();\n      if (dateRange?.from) params.append('startDate', dateRange.from.toISOString());\n      if (dateRange?.to) params.append('endDate', dateRange.to.toISOString());\n      const res = await fetch(`/api/admin/payments/paypal?${params.toString()}`);\n      if (!res.ok) throw new Error('Failed to fetch PayPal payments');\n      return res.json();\n    },\n  });\n\n  // Fetch M-Pesa transactions\n  const { data: mpesaPayments, isLoading: loadingMpesa, error: errorMpesa, refetch: refetchMpesa } = useQuery<Payment[]>({\n    queryKey: ['admin', 'payments', 'mpesa', dateRange],\n    queryFn: async () => {\n      const params = new URLSearchParams();\n      if (dateRange?.from) params.append('startDate', dateRange.from.toISOString());\n      if (dateRange?.to) params.append('endDate', dateRange.to.toISOString());\n      const res = await fetch(`/api/admin/payments/mpesa?${params.toString()}`);\n      if (!res.ok) throw new Error('Failed to fetch M-Pesa payments');\n      return res.json();\n    },\n  });\n\n  const handleDownload = async () => {\n    const payments = gateway === 'paypal' ? paypalPayments : mpesaPayments;\n    if (!payments || payments.length === 0) return;\n\n    const workbook = new ExcelJS.Workbook();\n    const worksheet = workbook.addWorksheet(`${gateway.toUpperCase()} Transactions`);\n\n    worksheet.columns = [\n      { header: 'ID', key: 'id', width: 10 },\n      { header: 'Order/Transaction ID', key: 'txId', width: 35 },\n      { header: 'Payer', key: 'payer', width: 30 },\n      { header: 'Amount (KES)', key: 'amount', width: 15 },\n      { header: 'Status', key: 'status', width: 15 },\n      { header: 'Date', key: 'createdAt', width: 25 },\n    ];\n\n    const formattedData = payments.map((tx: Payment) => ({\n      id: tx.id,\n      txId: tx.orderId || tx.transactionId || tx.id,\n      payer: tx.payer || '-',\n      amount: tx.amount,\n      status: tx.status,\n      createdAt: new Date(tx.createdAt).toLocaleString(),\n    }));\n\n    worksheet.addRows(formattedData);\n\n    worksheet.getRow(1).eachCell((cell) => {\n      cell.font = { bold: true };\n    });\n\n    const buffer = await workbook.xlsx.writeBuffer();\n    saveAs(new Blob([buffer]), `${gateway}-transactions.xlsx`);\n  };\n\n  return (\n\n    <div className=\"min-h-screen bg-neutral-50\">\n      <div className=\"flex\">\n        <AdminSidebar />\n        <div className=\"flex-1 overflow-auto\">\n          <header className=\"bg-white shadow-sm border-b border-neutral-200 px-6 py-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h2 className=\"text-2xl font-bold text-neutral-800\">Payment Gateways</h2>\n                <p className=\"text-neutral-600\">View and manage PayPal & M-Pesa transactions</p>\n              </div>\n              <div className=\"flex gap-2\">\n                <Button variant={gateway === 'paypal' ? 'default' : 'outline'} onClick={() => setGateway('paypal')}>PayPal</Button>\n                <Button variant={gateway === 'mpesa' ? 'default' : 'outline'} onClick={() => setGateway('mpesa')}>M-Pesa</Button>\n              </div>\n            </div>\n            <div className=\"flex items-center justify-between mt-4\">\n              <DateRangePicker date={dateRange} onDateChange={setDateRange} />\n              <Button onClick={handleDownload} disabled={(gateway === 'paypal' ? !paypalPayments : !mpesaPayments) || (gateway === 'paypal' ? paypalPayments?.length === 0 : mpesaPayments?.length === 0)}>\n                <i className=\"fas fa-download mr-2\"></i>\n                Download Report\n              </Button>\n            </div>\n          </header>\n\n          <div className=\"p-6 space-y-8\">\n\n            {gateway === 'paypal' ? (\n              <Card>\n                <CardContent className=\"p-4\">\n                  <h3 className=\"text-lg font-semibold mb-4\">PayPal Transactions</h3>\n                  {loadingPaypal ? (\n                    <div>Loading PayPal payments...</div>\n                  ) : errorPaypal ? (\n                    <div className=\"text-error mb-4\">{errorPaypal.message}</div>\n                  ) : (\n                    <div className=\"overflow-x-auto\">\n                      <table className=\"w-full text-sm border\">\n                        <thead>\n                          <tr>\n                            <th className=\"text-left p-2 border-b\">Order ID</th>\n                            <th className=\"text-left p-2 border-b\">Payer</th>\n                            <th className=\"text-left p-2 border-b\">Amount</th>\n                            <th className=\"text-left p-2 border-b\">Status</th>\n                            <th className=\"text-left p-2 border-b\">Date</th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          {paypalPayments?.map((tx) => (\n                            <tr key={tx.id} className=\"border-b hover:bg-neutral-100\">\n                              <td className=\"p-2\">{tx.orderId || tx.id}</td>\n                              <td className=\"p-2\">{tx.payer || '-'}</td>\n                              <td className=\"p-2\">KES {tx.amount.toLocaleString()}</td>\n                              <td className=\"p-2\">\n                                <span className={`inline-block px-2 py-1 rounded text-xs font-medium ${\n                                  tx.status === 'COMPLETED' ? 'bg-success/10 text-success' :\n                                  tx.status === 'PENDING' ? 'bg-warning/10 text-warning' :\n                                  'bg-error/10 text-error'\n                                }`}>\n                                  {tx.status}\n                                </span>\n                              </td>\n                              <td className=\"p-2\">{new Date(tx.createdAt).toLocaleString()}</td>\n                            </tr>\n                          ))}\n                        </tbody>\n                      </table>\n                    </div>\n                  )}\n                  <Button className=\"mt-4\" onClick={() => refetchPaypal()}>Refresh</Button>\n                </CardContent>\n              </Card>\n            ) : (\n              <Card>\n                <CardContent className=\"p-4\">\n                  <h3 className=\"text-lg font-semibold mb-4\">M-Pesa Transactions</h3>\n                  {loadingMpesa ? (\n                    <div>Loading M-Pesa payments...</div>\n                  ) : errorMpesa ? (\n                    <div className=\"text-error mb-4\">{errorMpesa.message}</div>\n                  ) : (\n                    <div className=\"overflow-x-auto\">\n                      <table className=\"w-full text-sm border\">\n                        <thead>\n                          <tr>\n                            <th className=\"text-left p-2 border-b\">Transaction ID</th>\n                            <th className=\"text-left p-2 border-b\">Payer</th>\n                            <th className=\"text-left p-2 border-b\">Amount</th>\n                            <th className=\"text-left p-2 border-b\">Status</th>\n                            <th className=\"text-left p-2 border-b\">Date</th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          {mpesaPayments?.map((tx) => (\n                            <tr key={tx.id} className=\"border-b hover:bg-neutral-100\">\n                              <td className=\"p-2\">{tx.transactionId || tx.id}</td>\n                              <td className=\"p-2\">{tx.payer || '-'}</td>\n                              <td className=\"p-2\">KES {tx.amount.toLocaleString()}</td>\n                              <td className=\"p-2\">\n                                <span className={`inline-block px-2 py-1 rounded text-xs font-medium ${\n                                  tx.status === 'COMPLETED' ? 'bg-success/10 text-success' :\n                                  tx.status === 'PENDING' ? 'bg-warning/10 text-warning' :\n                                  'bg-error/10 text-error'\n                                }`}>\n                                  {tx.status}\n                                </span>\n                              </td>\n                              <td className=\"p-2\">{new Date(tx.createdAt).toLocaleString()}</td>\n                            </tr>\n                          ))}\n                        </tbody>\n                      </table>\n                    </div>\n                  )}\n                  <Button className=\"mt-4\" onClick={() => refetchMpesa()}>Refresh</Button>\n                </CardContent>\n              </Card>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":9697},"client/src/pages/admin/reports.tsx":{"content":"import { useState } from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport AdminSidebar from '@/components/admin/Sidebar';\nimport { SectionLoading } from '@/components/ui/loading';\nimport { BarChart, LineChart, PieChart } from '@/components/ui/charts';\nimport { adminApi } from '@/lib/api';\n\ninterface ReportData {\n  donations: {\n    totalAmount: number;\n    byMonth: { month: string; amount: number }[];\n    byCategory: { category: string; amount: number }[];\n  };\n  events: {\n    totalAttendees: number;\n    byEvent: { event: string; attendees: number }[];\n    registrationTrend: { date: string; count: number }[];\n  };\n  volunteers: {\n    totalHours: number;\n    byActivity: { activity: string; hours: number }[];\n    activeVolunteers: number;\n  };\n}\n\nexport default function AdminReports() {\n  const [timeRange, setTimeRange] = useState('month');\n  const [reportType, setReportType] = useState('all');\n\n  const { data, isLoading, error } = useQuery<ReportData>({\n    queryKey: ['admin', 'reports', timeRange],\n    queryFn: () => adminApi.getReports(timeRange),\n  });\n\n  const handleExport = async (format: 'csv' | 'pdf') => {\n    try {\n      const response = await adminApi.exportReport(timeRange, format);\n      // Create a download link\n      const url = window.URL.createObjectURL(new Blob([response]));\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', `report-${timeRange}.${format}`);\n      document.body.appendChild(link);\n      link.click();\n      link.remove();\n    } catch (error) {\n      console.error('Export failed:', error);\n    }\n  };\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen bg-neutral-50 flex items-center justify-center\">\n        <Card className=\"w-full max-w-md mx-4\">\n          <CardContent className=\"pt-6 text-center\">\n            <div className=\"w-16 h-16 bg-error/10 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <i className=\"fas fa-exclamation-triangle text-error text-2xl\"></i>\n            </div>\n            <h1 className=\"text-xl font-bold text-neutral-800 mb-2\">Error Loading Reports</h1>\n            <p className=\"text-neutral-600 mb-4\">\n              {error instanceof Error ? error.message : 'Failed to load reports'}\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-neutral-50\">\n      <div className=\"flex\">\n        <AdminSidebar />\n        \n        <div className=\"flex-1 overflow-auto\">\n          <header className=\"bg-white shadow-sm border-b border-neutral-200 px-6 py-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h2 className=\"text-2xl font-bold text-neutral-800\">Reports & Analytics</h2>\n                <p className=\"text-neutral-600\">View and analyze organization performance</p>\n              </div>\n              <div className=\"flex items-center space-x-4\">\n                <Button variant=\"outline\" onClick={() => handleExport('csv')}>\n                  <i className=\"fas fa-file-csv mr-2\"></i>\n                  Export CSV\n                </Button>\n                <Button variant=\"outline\" onClick={() => handleExport('pdf')}>\n                  <i className=\"fas fa-file-pdf mr-2\"></i>\n                  Export PDF\n                </Button>\n              </div>\n            </div>\n          </header>\n\n          <div className=\"p-6\">\n            {/* Filters */}\n            <Card className=\"mb-6\">\n              <CardContent className=\"p-4\">\n                <div className=\"flex items-center space-x-4\">\n                  <Select value={timeRange} onValueChange={setTimeRange}>\n                    <SelectTrigger className=\"w-[180px]\">\n                      <SelectValue placeholder=\"Select time range\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"week\">Last Week</SelectItem>\n                      <SelectItem value=\"month\">Last Month</SelectItem>\n                      <SelectItem value=\"quarter\">Last Quarter</SelectItem>\n                      <SelectItem value=\"year\">Last Year</SelectItem>\n                    </SelectContent>\n                  </Select>\n                  <Select value={reportType} onValueChange={setReportType}>\n                    <SelectTrigger className=\"w-[180px]\">\n                      <SelectValue placeholder=\"Select report type\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"all\">All Reports</SelectItem>\n                      <SelectItem value=\"donations\">Donations</SelectItem>\n                      <SelectItem value=\"events\">Events</SelectItem>\n                      <SelectItem value=\"volunteers\">Volunteers</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n              </CardContent>\n            </Card>\n\n            {isLoading ? (\n              <SectionLoading message=\"Loading reports...\" />\n            ) : data ? (\n              <div className=\"grid gap-6\">\n                {/* Donations Section */}\n                {(reportType === 'all' || reportType === 'donations') && (\n                  <Card>\n                    <CardHeader>\n                      <CardTitle>Donations Overview</CardTitle>\n                      <CardDescription>Track donation trends and patterns</CardDescription>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"grid md:grid-cols-2 gap-6\">\n                        <div className=\"h-[300px]\">\n                          <LineChart\n                            data={data.donations.byMonth}\n                            xField=\"month\"\n                            yField=\"amount\"\n                            title=\"Donations by Month\"\n                          />\n                        </div>\n                        <div className=\"h-[300px]\">\n                          <PieChart\n                            data={data.donations.byCategory}\n                            nameField=\"category\"\n                            valueField=\"amount\"\n                            title=\"Donations by Category\"\n                          />\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                )}\n\n                {/* Events Section */}\n                {(reportType === 'all' || reportType === 'events') && (\n                  <Card>\n                    <CardHeader>\n                      <CardTitle>Events Performance</CardTitle>\n                      <CardDescription>Track event attendance and engagement</CardDescription>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"grid md:grid-cols-2 gap-6\">\n                        <div className=\"h-[300px]\">\n                          <BarChart\n                            data={data.events.byEvent}\n                            xField=\"event\"\n                            yField=\"attendees\"\n                            title=\"Attendance by Event\"\n                          />\n                        </div>\n                        <div className=\"h-[300px]\">\n                          <LineChart\n                            data={data.events.registrationTrend}\n                            xField=\"date\"\n                            yField=\"count\"\n                            title=\"Registration Trend\"\n                          />\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                )}\n\n                {/* Volunteers Section */}\n                {(reportType === 'all' || reportType === 'volunteers') && (\n                  <Card>\n                    <CardHeader>\n                      <CardTitle>Volunteer Engagement</CardTitle>\n                      <CardDescription>Track volunteer activities and impact</CardDescription>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"grid md:grid-cols-2 gap-6\">\n                        <div className=\"h-[300px]\">\n                          <PieChart\n                            data={data.volunteers.byActivity}\n                            nameField=\"activity\"\n                            valueField=\"hours\"\n                            title=\"Hours by Activity\"\n                          />\n                        </div>\n                        <div className=\"grid grid-cols-2 gap-4\">\n                          <Card>\n                            <CardContent className=\"pt-6\">\n                              <h3 className=\"text-sm font-medium text-neutral-600 mb-2\">\n                                Total Volunteer Hours\n                              </h3>\n                              <p className=\"text-2xl font-bold text-primary\">\n                                {data.volunteers.totalHours}\n                              </p>\n                            </CardContent>\n                          </Card>\n                          <Card>\n                            <CardContent className=\"pt-6\">\n                              <h3 className=\"text-sm font-medium text-neutral-600 mb-2\">\n                                Active Volunteers\n                              </h3>\n                              <p className=\"text-2xl font-bold text-success\">\n                                {data.volunteers.activeVolunteers}\n                              </p>\n                            </CardContent>\n                          </Card>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                )}\n              </div>\n            ) : null}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":10140},"client/src/pages/admin/settings.tsx":{"content":"import { useState } from 'react';\nimport { useQuery, useMutation } from '@tanstack/react-query';\nimport { useForm } from 'react-hook-form';\nimport { PaymentGatewayStatus } from '@/components/admin/PaymentGatewayStatus';\nimport { PaymentGatewayConfig } from '@/components/admin/PaymentGatewayConfig';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport {\n  Form,\n  FormControl,\n  FormDescription,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from '@/components/ui/form';\nimport {\n  Tabs,\n  TabsContent,\n  TabsList,\n  TabsTrigger,\n} from '@/components/ui/tabs';\nimport AdminSidebar from '@/components/admin/Sidebar';\nimport { SectionLoading } from '@/components/ui/loading';\nimport { useToast } from '@/hooks/use-toast';\nimport { adminApi } from '@/lib/api';\nimport { z } from 'zod';\n\nconst settingsSchema = z.object({\n  general: z.object({\n    siteName: z.string().min(1, 'Site name is required'),\n    siteDescription: z.string(),\n    contactEmail: z.string().email('Invalid email address'),\n    contactPhone: z.string(),\n    address: z.string(),\n  }),\n  appearance: z.object({\n    logo: z.string().url('Invalid logo URL'),\n    favicon: z.string().url('Invalid favicon URL'),\n    primaryColor: z.string(),\n    secondaryColor: z.string(),\n  }),\n  social: z.object({\n    facebook: z.string().url('Invalid Facebook URL').optional(),\n    twitter: z.string().url('Invalid Twitter URL').optional(),\n    instagram: z.string().url('Invalid Instagram URL').optional(),\n    linkedin: z.string().url('Invalid LinkedIn URL').optional(),\n  }),\n  email: z.object({\n    smtpHost: z.string(),\n    smtpPort: z.number(),\n    smtpUser: z.string(),\n    smtpPassword: z.string(),\n    senderName: z.string(),\n    senderEmail: z.string().email('Invalid sender email'),\n  }),\n  payment: z.object({\n    pesaPalKey: z.string(),\n    pesaPalSecret: z.string(),\n    currency: z.string(),\n    minimumDonation: z.number(),\n  }),\n});\n\ninterface PaymentGatewayStatus {\n  gateway: string;\n  status: 'live' | 'maintenance';\n  updatedAt: string;\n}\n\ntype SettingsData = z.infer<typeof settingsSchema>;\n\nexport default function AdminSettings() {\n  const [activeTab, setActiveTab] = useState('general');\n  const { toast } = useToast();\n\n  const { data: gateways = [], isLoading: loadingGateways } = useQuery<PaymentGatewayStatus[]>({\n    queryKey: ['admin', 'payment-gateway-status'],\n    queryFn: async () => {\n      const response = await fetch('/api/admin/payment-gateway-status');\n      if (!response.ok) throw new Error('Failed to fetch gateway statuses');\n      return response.json();\n    },\n  });\n\n  const updateGatewayStatus = async (gateway: string, newStatus: 'live' | 'maintenance') => {\n    try {\n      const response = await fetch('/api/admin/payment-gateway-status', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          gateway,\n          status: newStatus,\n        }),\n      });\n\n      if (!response.ok) throw new Error('Failed to update gateway status');\n      \n      toast({\n        title: 'Success',\n        description: `${gateway} payment gateway is now ${newStatus}`,\n      });\n    } catch (error) {\n      console.error('Error updating gateway status:', error);\n      toast({\n        title: 'Error',\n        description: 'Failed to update payment gateway status',\n        variant: 'destructive',\n      });\n    }\n  };\n\n  const { data: settings, isLoading } = useQuery<SettingsData>({\n    queryKey: ['admin', 'settings'],\n    queryFn: () => adminApi.getSettings(),\n  });\n\n  const mutation = useMutation({\n    mutationFn: (data: Partial<SettingsData>) => adminApi.updateSettings(data),\n    onSuccess: () => {\n      toast({\n        title: 'Settings Updated',\n        description: 'Your changes have been saved successfully.',\n      });\n    },\n    onError: (error) => {\n      toast({\n        title: 'Error',\n        description: error instanceof Error ? error.message : 'Failed to update settings',\n        variant: 'destructive',\n      });\n    },\n  });\n\n  const onSubmit = async (data: z.infer<typeof settingsSchema>) => {\n    try {\n      // TODO: Implement settings update logic\n      await adminApi.updateSettings(data);\n      toast({\n        title: \"Settings Updated\",\n        description: \"Your settings have been saved successfully.\"\n      });\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to update settings. Please try again.\",\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  const form = useForm<SettingsData>({\n    resolver: zodResolver(settingsSchema),\n    defaultValues: settings,\n  });\n\n  if (isLoading) {\n    return <SectionLoading message=\"Loading settings...\" />;\n  }\n\n  return (\n    <div className=\"min-h-screen bg-neutral-50\">\n      <div className=\"flex\">\n        <AdminSidebar />\n        \n        <div className=\"flex-1 overflow-auto\">\n          <header className=\"bg-white shadow-sm border-b border-neutral-200 px-6 py-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h2 className=\"text-2xl font-bold text-neutral-800\">Settings</h2>\n                <p className=\"text-neutral-600\">Configure your website settings</p>\n              </div>\n            </div>\n          </header>\n\n          <div className=\"p-6\">\n            <Card>\n              <CardContent className=\"p-6\">\n                <Tabs value={activeTab} onValueChange={setActiveTab}>\n                  <TabsList className=\"grid grid-cols-5 w-full\">\n                    <TabsTrigger value=\"general\">General</TabsTrigger>\n                    <TabsTrigger value=\"appearance\">Appearance</TabsTrigger>\n                    <TabsTrigger value=\"social\">Social Media</TabsTrigger>\n                    <TabsTrigger value=\"email\">Email</TabsTrigger>\n                    <TabsTrigger value=\"payment\">Payment</TabsTrigger>\n                  </TabsList>\n\n                  <TabsContent value=\"general\">\n                    <Card>\n                      <CardHeader>\n                        <CardTitle>General Settings</CardTitle>\n                        <CardDescription>\n                          Basic information about your website\n                        </CardDescription>\n                      </CardHeader>\n                      <CardContent>\n                        <Form {...form}>\n                          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n                            <FormField\n                              control={form.control}\n                              name=\"general.siteName\"\n                              render={({ field }) => (\n                                <FormItem>\n                                  <FormLabel>Site Name</FormLabel>\n                                  <FormControl>\n                                    <Input {...field} placeholder=\"Your website name\" />\n                                  </FormControl>\n                                  <FormMessage />\n                                </FormItem>\n                              )}\n                            />\n\n                            <FormField\n                              control={form.control}\n                              name=\"general.siteDescription\"\n                              render={({ field }) => (\n                                <FormItem>\n                                  <FormLabel>Site Description</FormLabel>\n                                  <FormControl>\n                                    <Textarea {...field} placeholder=\"Brief description of your website\" />\n                                  </FormControl>\n                                  <FormMessage />\n                                </FormItem>\n                              )}\n                            />\n\n                            <FormField\n                              control={form.control}\n                              name=\"general.contactEmail\"\n                              render={({ field }) => (\n                                <FormItem>\n                                  <FormLabel>Contact Email</FormLabel>\n                                  <FormControl>\n                                    <Input {...field} type=\"email\" placeholder=\"contact@example.com\" />\n                                  </FormControl>\n                                  <FormMessage />\n                                </FormItem>\n                              )}\n                            />\n\n                            <FormField\n                              control={form.control}\n                              name=\"general.contactPhone\"\n                              render={({ field }) => (\n                                <FormItem>\n                                  <FormLabel>Contact Phone</FormLabel>\n                                  <FormControl>\n                                    <Input {...field} placeholder=\"+254 123 456 789\" />\n                                  </FormControl>\n                                  <FormMessage />\n                                </FormItem>\n                              )}\n                            />\n\n                            <FormField\n                              control={form.control}\n                              name=\"general.address\"\n                              render={({ field }) => (\n                                <FormItem>\n                                  <FormLabel>Address</FormLabel>\n                                  <FormControl>\n                                    <Textarea {...field} placeholder=\"Your organization's address\" />\n                                  </FormControl>\n                                  <FormMessage />\n                                </FormItem>\n                              )}\n                            />\n\n                            <Button type=\"submit\">Save Changes</Button>\n                          </form>\n                        </Form>\n                      </CardContent>\n                    </Card>\n                  </TabsContent>\n\n                  {/* Similar structure for other tabs... */}\n                  <TabsContent value=\"appearance\">\n                    <Card>\n                      <CardHeader>\n                        <CardTitle>Appearance Settings</CardTitle>\n                        <CardDescription>\n                          Customize your website's look and feel\n                        </CardDescription>\n                      </CardHeader>\n                      <CardContent>\n                        {/* Logo, colors, etc. form fields */}\n                      </CardContent>\n                    </Card>\n                  </TabsContent>\n\n                  <TabsContent value=\"social\">\n                    <Card>\n                      <CardHeader>\n                        <CardTitle>Social Media Settings</CardTitle>\n                        <CardDescription>\n                          Connect your social media accounts\n                        </CardDescription>\n                      </CardHeader>\n                      <CardContent>\n                        {/* Social media links form fields */}\n                      </CardContent>\n                    </Card>\n                  </TabsContent>\n\n                  <TabsContent value=\"email\">\n                    <Card>\n                      <CardHeader>\n                        <CardTitle>Email Settings</CardTitle>\n                        <CardDescription>\n                          Configure your email server settings\n                        </CardDescription>\n                      </CardHeader>\n                      <CardContent>\n                        {/* Email configuration form fields */}\n                      </CardContent>\n                    </Card>\n                  </TabsContent>\n\n                  <TabsContent value=\"payment\">\n                    <div className=\"space-y-6\">\n                      <PaymentGatewayStatus />\n                      <PaymentGatewayConfig />\n                    </div>\n                  </TabsContent>\n                </Tabs>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":12413},"client/src/pages/admin/users.tsx":{"content":"import { useState } from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table';\nimport AdminSidebar from '@/components/admin/Sidebar';\nimport { SectionLoading } from '@/components/ui/loading';\nimport { adminApi } from '@/lib/api';\nimport { User } from '@/types/admin';\nimport { useToast } from '@/hooks/use-toast';\n\nexport default function AdminUsers() {\n  const { toast } = useToast();\n  const [searchTerm, setSearchTerm] = useState('');\n  const [roleFilter, setRoleFilter] = useState('all');\n\n  const {\n    data: users,\n    isLoading,\n    error,\n    refetch\n  } = useQuery<User[]>({\n    queryKey: ['admin', 'users'],\n    queryFn: () => adminApi.getUsers(),\n  });\n\n  const filteredUsers = users?.filter(user => {\n    const matchesSearch = \n      user.username.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      user.email.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      user.fullName.toLowerCase().includes(searchTerm.toLowerCase());\n    \n    const matchesRole = roleFilter === 'all' || user.role === roleFilter;\n    \n    return matchesSearch && matchesRole;\n  });\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen bg-neutral-50 flex items-center justify-center\">\n        <Card className=\"w-full max-w-md mx-4\">\n          <CardContent className=\"pt-6 text-center\">\n            <div className=\"w-16 h-16 bg-error/10 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <i className=\"fas fa-exclamation-triangle text-error text-2xl\"></i>\n            </div>\n            <h1 className=\"text-xl font-bold text-neutral-800 mb-2\">Error Loading Users</h1>\n            <p className=\"text-neutral-600 mb-4\">\n              {error instanceof Error ? error.message : 'Failed to load users'}\n            </p>\n            <Button onClick={() => refetch()}>\n              Try Again\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-neutral-50\">\n      <div className=\"flex\">\n        <AdminSidebar />\n        \n        <div className=\"flex-1 overflow-auto\">\n          {/* Header */}\n          <header className=\"bg-white shadow-sm border-b border-neutral-200 px-6 py-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h2 className=\"text-2xl font-bold text-neutral-800\">Users</h2>\n                <p className=\"text-neutral-600\">Manage user accounts and roles</p>\n              </div>\n              <Button>\n                <i className=\"fas fa-plus mr-2\"></i>\n                Add User\n              </Button>\n            </div>\n          </header>\n\n          {/* Content */}\n          <div className=\"p-6\">\n            <Card className=\"mb-6\">\n              <CardContent className=\"p-4\">\n                <div className=\"flex items-center space-x-4\">\n                  <Input\n                    placeholder=\"Search users...\"\n                    value={searchTerm}\n                    onChange={(e) => setSearchTerm(e.target.value)}\n                    className=\"max-w-sm\"\n                  />\n                  <select\n                    value={roleFilter}\n                    onChange={(e) => setRoleFilter(e.target.value)}\n                    className=\"px-3 py-2 rounded-md border border-input bg-background\"\n                  >\n                    <option value=\"all\">All Roles</option>\n                    <option value=\"admin\">Admin</option>\n                    <option value=\"volunteer\">Volunteer</option>\n                    <option value=\"donor\">Donor</option>\n                  </select>\n                </div>\n              </CardContent>\n            </Card>\n\n            {isLoading ? (\n              <SectionLoading message=\"Loading users...\" />\n            ) : (\n              <Card>\n                <CardContent className=\"p-0\">\n                  <Table>\n                    <TableHeader>\n                      <TableRow>\n                        <TableHead>Name</TableHead>\n                        <TableHead>Username</TableHead>\n                        <TableHead>Email</TableHead>\n                        <TableHead>Role</TableHead>\n                        <TableHead>Status</TableHead>\n                        <TableHead>Joined</TableHead>\n                        <TableHead className=\"text-right\">Actions</TableHead>\n                      </TableRow>\n                    </TableHeader>\n                    <TableBody>\n                      {filteredUsers?.map((user) => (\n                        <TableRow key={user.id}>\n                          <TableCell className=\"font-medium\">{user.fullName}</TableCell>\n                          <TableCell>{user.username}</TableCell>\n                          <TableCell>{user.email}</TableCell>\n                          <TableCell>\n                            <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium\n                              ${user.role === 'admin' ? 'bg-primary/10 text-primary' :\n                                user.role === 'volunteer' ? 'bg-success/10 text-success' :\n                                'bg-neutral-100 text-neutral-600'}`}>\n                              {user.role}\n                            </span>\n                          </TableCell>\n                          <TableCell>\n                            <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium\n                              ${user.active ? 'bg-success/10 text-success' : 'bg-error/10 text-error'}`}>\n                              {user.active ? 'Active' : 'Inactive'}\n                            </span>\n                          </TableCell>\n                          <TableCell>{new Date(user.createdAt).toLocaleDateString()}</TableCell>\n                          <TableCell className=\"text-right\">\n                            <Button variant=\"ghost\" size=\"sm\" className=\"mr-2\">\n                              <i className=\"fas fa-edit\"></i>\n                            </Button>\n                            <Button variant=\"ghost\" size=\"sm\" className=\"text-error\">\n                              <i className=\"fas fa-trash\"></i>\n                            </Button>\n                          </TableCell>\n                        </TableRow>\n                      ))}\n                    </TableBody>\n                  </Table>\n                </CardContent>\n              </Card>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":6747},"client/src/pages/admin/volunteers.tsx":{"content":"import { useState } from 'react';\nimport { useQuery, useMutation } from '@tanstack/react-query';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table';\nimport AdminSidebar from '@/components/admin/Sidebar';\nimport { SectionLoading } from '@/components/ui/loading';\nimport { adminApi } from '@/lib/api';\nimport { useToast } from '@/hooks/use-toast';\n\ninterface VolunteerApplication {\n  id: number;\n  name: string;\n  email: string;\n  phone: string;\n  program: string;\n  experience: string;\n  availability: string;\n  message: string;\n  submittedAt: string;\n  status: 'pending' | 'approved' | 'rejected';\n}\n\nexport default function AdminVolunteers() {\n  const { toast } = useToast();\n  const [searchTerm, setSearchTerm] = useState('');\n  const [statusFilter, setStatusFilter] = useState<'all' | 'pending' | 'approved' | 'rejected'>('all');\n\n  const {\n    data: applications,\n    isLoading,\n    error,\n    refetch\n  } = useQuery<VolunteerApplication[]>({\n    queryKey: ['admin', 'volunteer-applications'],\n    queryFn: () => adminApi.getVolunteerApplications(),\n  });\n\n  const updateApplicationMutation = useMutation({\n    mutationFn: (data: { id: number; status: 'approved' | 'rejected' }) =>\n      adminApi.updateVolunteerApplication(data.id, data.status),\n    onSuccess: () => {\n      toast({\n        title: 'Application Updated',\n        description: 'The volunteer application has been updated successfully.',\n      });\n      refetch();\n    },\n    onError: (error: Error) => {\n      toast({\n        title: 'Update Failed',\n        description: error instanceof Error ? error.message : 'Failed to update application',\n        variant: 'destructive',\n      });\n    },\n  });\n\n  const handleUpdateStatus = (id: number, status: 'approved' | 'rejected') => {\n    updateApplicationMutation.mutate({ id, status });\n  };\n\n  const filteredApplications = applications?.filter(app => {\n    const matchesSearch = \n      app.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      app.email.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      app.program.toLowerCase().includes(searchTerm.toLowerCase());\n    \n    const matchesStatus = statusFilter === 'all' || app.status === statusFilter;\n    \n    return matchesSearch && matchesStatus;\n  });\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen bg-neutral-50 flex items-center justify-center\">\n        <Card className=\"w-full max-w-md mx-4\">\n          <CardContent className=\"pt-6 text-center\">\n            <div className=\"w-16 h-16 bg-error/10 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <i className=\"fas fa-exclamation-triangle text-error text-2xl\"></i>\n            </div>\n            <h1 className=\"text-xl font-bold text-neutral-800 mb-2\">Error Loading Applications</h1>\n            <p className=\"text-neutral-600 mb-4\">\n              {error instanceof Error ? error.message : 'Failed to load volunteer applications'}\n            </p>\n            <Button onClick={() => refetch()}>\n              Try Again\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-neutral-50\">\n      <div className=\"flex\">\n        <AdminSidebar />\n        \n        <div className=\"flex-1 overflow-auto\">\n          <header className=\"bg-white shadow-sm border-b border-neutral-200 px-6 py-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h2 className=\"text-2xl font-bold text-neutral-800\">Volunteer Applications</h2>\n                <p className=\"text-neutral-600\">Review and manage volunteer applications</p>\n              </div>\n            </div>\n          </header>\n\n          <div className=\"p-6\">\n            <Card className=\"mb-6\">\n              <CardContent className=\"p-4\">\n                <div className=\"flex items-center space-x-4\">\n                  <Input\n                    placeholder=\"Search applications...\"\n                    value={searchTerm}\n                    onChange={(e) => setSearchTerm(e.target.value)}\n                    className=\"max-w-sm\"\n                  />\n                  <select\n                    value={statusFilter}\n                    onChange={(e) => setStatusFilter(e.target.value as any)}\n                    className=\"px-3 py-2 rounded-md border border-input bg-background\"\n                  >\n                    <option value=\"all\">All Status</option>\n                    <option value=\"pending\">Pending</option>\n                    <option value=\"approved\">Approved</option>\n                    <option value=\"rejected\">Rejected</option>\n                  </select>\n                </div>\n              </CardContent>\n            </Card>\n\n            {isLoading ? (\n              <SectionLoading message=\"Loading applications...\" />\n            ) : (\n              <Card>\n                <CardContent className=\"p-0\">\n                  <Table>\n                    <TableHeader>\n                      <TableRow>\n                        <TableHead>Name</TableHead>\n                        <TableHead>Program</TableHead>\n                        <TableHead>Email</TableHead>\n                        <TableHead>Phone</TableHead>\n                        <TableHead>Status</TableHead>\n                        <TableHead>Applied On</TableHead>\n                        <TableHead className=\"text-right\">Actions</TableHead>\n                      </TableRow>\n                    </TableHeader>\n                    <TableBody>\n                      {filteredApplications?.map((app) => (\n                        <TableRow key={app.id}>\n                          <TableCell className=\"font-medium\">{app.name}</TableCell>\n                          <TableCell>{app.program}</TableCell>\n                          <TableCell>{app.email}</TableCell>\n                          <TableCell>{app.phone}</TableCell>\n                          <TableCell>\n                            <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium\n                              ${app.status === 'approved' ? 'bg-success/10 text-success' :\n                                app.status === 'rejected' ? 'bg-error/10 text-error' :\n                                'bg-warning/10 text-warning'}`}>\n                              {app.status.charAt(0).toUpperCase() + app.status.slice(1)}\n                            </span>\n                          </TableCell>\n                          <TableCell>{new Date(app.submittedAt).toLocaleDateString()}</TableCell>\n                          <TableCell className=\"text-right\">\n                            <Button\n                              variant=\"ghost\"\n                              size=\"sm\"\n                              className=\"mr-2 text-success\"\n                              onClick={() => handleUpdateStatus(app.id, 'approved')}\n                              disabled={app.status === 'approved'}\n                            >\n                              <i className=\"fas fa-check\"></i>\n                            </Button>\n                            <Button\n                              variant=\"ghost\"\n                              size=\"sm\"\n                              className=\"text-error\"\n                              onClick={() => handleUpdateStatus(app.id, 'rejected')}\n                              disabled={app.status === 'rejected'}\n                            >\n                              <i className=\"fas fa-times\"></i>\n                            </Button>\n                          </TableCell>\n                        </TableRow>\n                      ))}\n                    </TableBody>\n                  </Table>\n                </CardContent>\n              </Card>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":8014},"client/src/pages/blog/events.tsx":{"content":"","size_bytes":0}},"version":1}